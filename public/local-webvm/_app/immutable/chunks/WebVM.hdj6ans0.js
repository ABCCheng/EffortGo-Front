const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./index.DNzGDZ03.js","./preload-helper.CmsKOCeN.js"])))=>i.map(i=>d[i]);
import{_ as ne}from"./preload-helper.CmsKOCeN.js";import{s as K,e as D,d as x,f as O,i as b,v as T,w as We,k as w,l as S,O as Z,n as j,P as me,Q as nt,c as re,b as N,R as P,j as A,S as he,u as ae,g as se,a as oe,t as ee,h as te,D as Ce,m as ve,A as lt,o as le,p as ie,T as we,U as it,V as ke,r as rt}from"./scheduler.CwEHxsS1.js";import{S as Y,i as J,t as U,a as W,b as $,d as G,m as X,e as F,g as ye,c as Ie}from"./index.U-iAEmo-.js";import{w as Q}from"./index.D7Vl5fqP.js";function Te(l){return l?.length!==void 0?l:Array.from(l)}function at(l){let e,n,t,i,r,o;return{c(){e=D("div"),n=D("i"),this.h()},l(c){e=x(c,"DIV",{class:!0,style:!0});var d=O(e);n=x(d,"I",{class:!0}),O(n).forEach(b),d.forEach(b),this.h()},h(){T(n,"class",t=l[0]+" fa-xl"),T(e,"class",i="p-3 cursor-pointer text-center hover:bg-neutral-600 "+(l[2]?"text-amber-500 animate-pulse":"hover:text-gray-100")),We(e,"animation-duration","0.5s")},m(c,d){w(c,e,d),S(e,n),r||(o=Z(e,"mouseenter",l[3]),r=!0)},p(c,[d]){d&1&&t!==(t=c[0]+" fa-xl")&&T(n,"class",t),d&4&&i!==(i="p-3 cursor-pointer text-center hover:bg-neutral-600 "+(c[2]?"text-amber-500 animate-pulse":"hover:text-gray-100"))&&T(e,"class",i)},i:j,o:j,d(c){c&&b(e),r=!1,o()}}}function st(l,e,n){let t,i=j,r=()=>(i(),i=nt(d,u=>n(2,t=u)),d);l.$$.on_destroy.push(()=>i());let{icon:o}=e,{info:c}=e,{activity:d}=e;r();const h=me();function v(){h("mouseover",c)}return l.$$set=u=>{"icon"in u&&n(0,o=u.icon),"info"in u&&n(4,c=u.info),"activity"in u&&r(n(1,d=u.activity))},[o,d,t,v,c]}class ot extends Y{constructor(e){super(),J(this,e,st,at,K,{icon:0,info:4,activity:1})}}function ct(l){let e,n="Information",t,i,r,o,c,d="WebVM is a virtual Linux environment running in the browser via WebAssembly",h,v,u="It is based on:",s,m,f='<li><a class="underline" target="_blank" href="https://cheerpx.io/">CheerpX</a>: x86 JIT in Wasm</li> <li><a class="underline" target="_blank" href="https://xtermjs.org/">Xterm.js</a>: interactive terminal</li> <li>Local/private <a class="underline" target="_blank" href="https://cheerpx.io/docs/guides/File-System-support">file storage</a></li> <li><a class="underline" target="_blank" href="https://cheerpx.io/docs/guides/Networking">Networking</a> via <a class="underline" target="_blank" href="https://tailscale.com/">Tailscale</a></li>',y,p;const k=l[1].default,C=re(k,l,l[0],null);return{c(){e=D("h1"),e.textContent=n,t=N(),i=D("img"),o=N(),c=D("p"),c.textContent=d,h=N(),v=D("p"),v.textContent=u,s=N(),m=D("ul"),m.innerHTML=f,y=N(),C&&C.c(),this.h()},l(a){e=x(a,"H1",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-wuntwr"&&(e.textContent=n),t=A(a),i=x(a,"IMG",{src:!0,alt:!0,class:!0}),o=A(a),c=x(a,"P",{"data-svelte-h":!0}),P(c)!=="svelte-jh0uxp"&&(c.textContent=d),h=A(a),v=x(a,"P",{"data-svelte-h":!0}),P(v)!=="svelte-dd7yz1"&&(v.textContent=u),s=A(a),m=x(a,"UL",{class:!0,"data-svelte-h":!0}),P(m)!=="svelte-jjoiay"&&(m.innerHTML=f),y=A(a),C&&C.l(a),this.h()},h(){T(e,"class","text-lg font-bold"),he(i.src,r="assets/webvm_hero.png")||T(i,"src",r),T(i,"alt","WebVM Logo"),T(i,"class","w-56 h-56 object-contain self-center"),T(m,"class","list-disc list-inside")},m(a,g){w(a,e,g),w(a,t,g),w(a,i,g),w(a,o,g),w(a,c,g),w(a,h,g),w(a,v,g),w(a,s,g),w(a,m,g),w(a,y,g),C&&C.m(a,g),p=!0},p(a,[g]){C&&C.p&&(!p||g&1)&&ae(C,k,a,a[0],p?oe(k,a[0],g,null):se(a[0]),null)},i(a){p||(U(C,a),p=!0)},o(a){W(C,a),p=!1},d(a){a&&(b(e),b(t),b(i),b(o),b(c),b(h),b(v),b(s),b(m),b(y)),C&&C.d(a)}}}function ut(l,e,n){let{$$slots:t={},$$scope:i}=e;return l.$$set=r=>{"$$scope"in r&&n(0,i=r.$$scope)},[i,t]}class ft extends Y{constructor(e){super(),J(this,e,ut,ct,K,{})}}let Me,pe;{let l=new URLSearchParams("?"+window.location.hash.substr(1));Me=l.get("authKey")||void 0,pe=l.get("controlUrl")||void 0}let dt=pe?null:"https://login.tailscale.com/admin/machines",Oe=null,ht=new Promise((l,e)=>{Oe=l}),ce=Q("DISCONNECTED"),Re=Q(!1);function mt(l){ce.set("LOGINREADY"),Oe(l)}function vt(l){switch(l){case 6:{ce.set("CONNECTED");break}}}function pt(l){q.currentIp=l.self.addresses[0];for(var e=!1,n=0;n<l.peers.length;n++)if(l.peers[n].exitNode){e=!0;break}e&&Re.set(!0)}async function bt(){ce.set("LOGINSTARTING");const l=await ht;return q.loginUrl=l,l}const _t={authKey:Me,controlUrl:pe,loginUrlCb:mt,stateUpdateCb:vt,netmapUpdateCb:pt},q={currentIp:null,connectionState:ce,exitNode:Re,loginUrl:null,dashboardUrl:dt};function gt(l){let e,n;return{c(){e=D("i"),this.h()},l(t){e=x(t,"I",{class:!0,style:!0}),O(e).forEach(b),this.h()},h(){T(e,"class",n="w-8 "+l[7]+" text-center"),We(e,"font-size","2em")},m(t,i){w(t,e,i)},p(t,i){i&128&&n!==(n="w-8 "+t[7]+" text-center")&&T(e,"class",n)},d(t){t&&b(e)}}}function Ct(l){let e,n;return{c(){e=D("img"),this.h()},l(t){e=x(t,"IMG",{src:!0,class:!0}),this.h()},h(){he(e.src,n=l[6])||T(e,"src",n),T(e,"class","inline w-8 h-8")},m(t,i){w(t,e,i)},p(t,i){i&64&&!he(e.src,n=t[6])&&T(e,"src",n)},d(t){t&&b(e)}}}function wt(l){let e,n,t,i,r,o,c,d,h;function v(y,p){if(y[6])return Ct;if(y[7])return gt}let u=v(l),s=u&&u(l);const m=l[10].default,f=re(m,l,l[9],null);return{c(){e=D("a"),n=D("p"),s&&s.c(),t=N(),i=D("span"),r=ee(l[8]),f&&f.c(),this.h()},l(y){e=x(y,"A",{href:!0,target:!0});var p=O(e);n=x(p,"P",{class:!0,title:!0});var k=O(n);s&&s.l(k),t=A(k),i=x(k,"SPAN",{class:!0});var C=O(i);r=te(C,l[8]),C.forEach(b),f&&f.l(k),k.forEach(b),p.forEach(b),this.h()},h(){T(i,"class","ml-1"),T(n,"class",o="flex flex-row items-center "+l[4]+" p-2 rounded-md shadow-md shadow-neutral-900 "+(l[0]!=null||l[1]!=null?`${l[5]} cursor-pointer`:"")),T(n,"title",l[3]),T(e,"href",l[0]),T(e,"target","_blank")},m(y,p){w(y,e,p),S(e,n),s&&s.m(n,null),S(n,t),S(n,i),S(i,r),f&&f.m(n,null),c=!0,d||(h=[Z(e,"click",function(){Ce(l[1])&&l[1].apply(this,arguments)}),Z(e,"contextmenu",function(){Ce(l[2])&&l[2].apply(this,arguments)})],d=!0)},p(y,[p]){l=y,u===(u=v(l))&&s?s.p(l,p):(s&&s.d(1),s=u&&u(l),s&&(s.c(),s.m(n,t))),(!c||p&256)&&ve(r,l[8]),f&&f.p&&(!c||p&512)&&ae(f,m,l,l[9],c?oe(m,l[9],p,null):se(l[9]),null),(!c||p&51&&o!==(o="flex flex-row items-center "+l[4]+" p-2 rounded-md shadow-md shadow-neutral-900 "+(l[0]!=null||l[1]!=null?`${l[5]} cursor-pointer`:"")))&&T(n,"class",o),(!c||p&8)&&T(n,"title",l[3]),(!c||p&1)&&T(e,"href",l[0])},i(y){c||(U(f,y),c=!0)},o(y){W(f,y),c=!1},d(y){y&&b(e),s&&s.d(),f&&f.d(y),d=!1,lt(h)}}}function kt(l,e,n){let{$$slots:t={},$$scope:i}=e,{clickUrl:r=null}=e,{clickHandler:o=null}=e,{rightClickHandler:c=null}=e,{buttonTooltip:d=null}=e,{bgColor:h="bg-neutral-700"}=e,{hoverColor:v="hover:bg-neutral-500"}=e,{buttonImage:u=null}=e,{buttonIcon:s=null}=e,{buttonText:m}=e;return l.$$set=f=>{"clickUrl"in f&&n(0,r=f.clickUrl),"clickHandler"in f&&n(1,o=f.clickHandler),"rightClickHandler"in f&&n(2,c=f.rightClickHandler),"buttonTooltip"in f&&n(3,d=f.buttonTooltip),"bgColor"in f&&n(4,h=f.bgColor),"hoverColor"in f&&n(5,v=f.hoverColor),"buttonImage"in f&&n(6,u=f.buttonImage),"buttonIcon"in f&&n(7,s=f.buttonIcon),"buttonText"in f&&n(8,m=f.buttonText),"$$scope"in f&&n(9,i=f.$$scope)},[r,o,c,d,h,v,u,s,m,i,t]}class be extends Y{constructor(e){super(),J(this,e,kt,wt,K,{clickUrl:0,clickHandler:1,rightClickHandler:2,buttonTooltip:3,bgColor:4,hoverColor:5,buttonImage:6,buttonIcon:7,buttonText:8})}}function Ee(l){let e,n,t;return{c(){e=D("i"),this.h()},l(i){e=x(i,"I",{class:!0,title:!0}),O(e).forEach(b),this.h()},h(){T(e,"class",n="fas fa-circle fa-xs ml-auto "+(l[1]?"text-green-500":"text-amber-500")),T(e,"title",t=l[1]?"Ready":"No exit node")},m(i,r){w(i,e,r)},p(i,r){r&2&&n!==(n="fas fa-circle fa-xs ml-auto "+(i[1]?"text-green-500":"text-amber-500"))&&T(e,"class",n),r&2&&t!==(t=i[1]?"Ready":"No exit node")&&T(e,"title",t)},d(i){i&&b(e)}}}function yt(l){let e,n=l[0]=="CONNECTED"&&Ee(l);return{c(){n&&n.c(),e=ie()},l(t){n&&n.l(t),e=ie()},m(t,i){n&&n.m(t,i),w(t,e,i)},p(t,i){t[0]=="CONNECTED"?n?n.p(t,i):(n=Ee(t),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(t){t&&b(e),n&&n.d(t)}}}function It(l){let e,n="Networking",t,i,r,o,c="WebVM can connect to the Internet via Tailscale",d,h,v="Using Tailscale is required since browser do not support TCP/UDP sockets (yet!)",u;return i=new be({props:{buttonImage:"assets/tailscale.svg",clickUrl:l[6](l[0]),clickHandler:l[5](l[0]),rightClickHandler:l[7](l[0]),buttonTooltip:De(l[0]),buttonText:l[4](l[0]),$$slots:{default:[yt]},$$scope:{ctx:l}}}),{c(){e=D("h1"),e.textContent=n,t=N(),$(i.$$.fragment),r=N(),o=D("p"),o.textContent=c,d=N(),h=D("p"),h.textContent=v,this.h()},l(s){e=x(s,"H1",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-117cre9"&&(e.textContent=n),t=A(s),G(i.$$.fragment,s),r=A(s),o=x(s,"P",{"data-svelte-h":!0}),P(o)!=="svelte-14nr0rc"&&(o.textContent=c),d=A(s),h=x(s,"P",{"data-svelte-h":!0}),P(h)!=="svelte-1wbhenl"&&(h.textContent=v),this.h()},h(){T(e,"class","text-lg font-bold")},m(s,m){w(s,e,m),w(s,t,m),X(i,s,m),w(s,r,m),w(s,o,m),w(s,d,m),w(s,h,m),u=!0},p(s,[m]){const f={};m&1&&(f.clickUrl=s[6](s[0])),m&1&&(f.clickHandler=s[5](s[0])),m&1&&(f.rightClickHandler=s[7](s[0])),m&1&&(f.buttonTooltip=De(s[0])),m&1&&(f.buttonText=s[4](s[0])),m&2051&&(f.$$scope={dirty:m,ctx:s}),i.$set(f)},i(s){u||(U(i.$$.fragment,s),u=!0)},o(s){W(i.$$.fragment,s),u=!1},d(s){s&&(b(e),b(t),b(r),b(o),b(d),b(h)),F(i,s)}}}function De(l){switch(l){case"CONNECTED":return"Right-click to copy"}return null}function Tt(l,e,n){let t,i;var r=me(),o=q.connectionState;le(l,o,f=>n(0,t=f));var c=q.exitNode;le(l,c,f=>n(1,i=f));function d(){o.set("DOWNLOADING"),r("connect")}async function h(f){f.preventDefault();try{await window.navigator.clipboard.writeText(q.currentIp),o.set("IPCOPIED"),setTimeout(()=>{o.set("CONNECTED")},2e3)}catch(y){console.log("Copy ip to clipboard: Error: "+y)}}function v(f){switch(f){case"DISCONNECTED":return"Connect to Tailscale";case"DOWNLOADING":return"Loading IP stack...";case"LOGINSTARTING":return"Starting Login...";case"LOGINREADY":return"Login to Tailscale";case"CONNECTED":return`IP: ${q.currentIp}`;case"IPCOPIED":return"Copied!"}return`Text for state: ${f}`}function u(f){switch(f){case"DISCONNECTED":return d}return null}function s(f){switch(f){case"LOGINREADY":return q.loginUrl;case"CONNECTED":return q.dashboardUrl}return null}function m(f){switch(f){case"CONNECTED":return h}return null}return[t,i,o,c,v,u,s,m]}class Et extends Y{constructor(e){super(),J(this,e,Tt,It,K,{})}}const Ve=Q(!1),ze=Q(!1),Be=Q(0),je=Q(0);function Dt(l){let e,n="Engine",t,i,r,o,c,d="Virtual CPU: ",h,v,u,s,m="CheerpX is a x86 virtualization engine in WebAssembly",f,y,p="It can securely run unmodified x86 binaries and libraries in the browser",k,C,a='Excited about our technology? <a class="underline" href="https://cheerpx.io/docs/getting-started" target="_blank">Start building</a> your projects using <a class="underline" href="https://cheerpx.io/" target="_blank">CheerpX</a> today!',g;return i=new be({props:{buttonImage:"assets/cheerpx.svg",clickUrl:"https://cheerpx.io/docs",buttonText:"Explore CheerpX"}}),{c(){e=D("h1"),e.textContent=n,t=N(),$(i.$$.fragment),r=N(),o=D("p"),c=D("span"),c.textContent=d,h=ee(l[0]),v=ee("%"),u=N(),s=D("p"),s.textContent=m,f=N(),y=D("p"),y.textContent=p,k=N(),C=D("p"),C.innerHTML=a,this.h()},l(E){e=x(E,"H1",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-1wy2hd"&&(e.textContent=n),t=A(E),G(i.$$.fragment,E),r=A(E),o=x(E,"P",{});var L=O(o);c=x(L,"SPAN",{class:!0,"data-svelte-h":!0}),P(c)!=="svelte-1k8y27n"&&(c.textContent=d),h=te(L,l[0]),v=te(L,"%"),L.forEach(b),u=A(E),s=x(E,"P",{"data-svelte-h":!0}),P(s)!=="svelte-hjbas8"&&(s.textContent=m),f=A(E),y=x(E,"P",{"data-svelte-h":!0}),P(y)!=="svelte-mm203v"&&(y.textContent=p),k=A(E),C=x(E,"P",{"data-svelte-h":!0}),P(C)!=="svelte-ibwt4"&&(C.innerHTML=a),this.h()},h(){T(e,"class","text-lg font-bold"),T(c,"class","font-bold")},m(E,L){w(E,e,L),w(E,t,L),X(i,E,L),w(E,r,L),w(E,o,L),S(o,c),S(o,h),S(o,v),w(E,u,L),w(E,s,L),w(E,f,L),w(E,y,L),w(E,k,L),w(E,C,L),g=!0},p(E,[L]){(!g||L&1)&&ve(h,E[0])},i(E){g||(U(i.$$.fragment,E),g=!0)},o(E){W(i.$$.fragment,E),g=!1},d(E){E&&(b(e),b(t),b(r),b(o),b(u),b(s),b(f),b(y),b(k),b(C)),F(i,E)}}}function xt(l,e,n){let t;return le(l,Be,i=>n(0,t=i)),[t]}class Nt extends Y{constructor(e){super(),J(this,e,xt,Dt,K,{})}}function At(l){let e,n,t="Backend latency: ",i,r;return{c(){e=D("p"),n=D("span"),n.textContent=t,i=ee(l[1]),r=ee("ms"),this.h()},l(o){e=x(o,"P",{});var c=O(e);n=x(c,"SPAN",{class:!0,"data-svelte-h":!0}),P(n)!=="svelte-1iz4ezi"&&(n.textContent=t),i=te(c,l[1]),r=te(c,"ms"),c.forEach(b),this.h()},h(){T(n,"class","font-bold")},m(o,c){w(o,e,c),S(e,n),S(e,i),S(e,r)},p(o,c){c&2&&ve(i,o[1])},d(o){o&&b(e)}}}function Lt(l){let e,n='<span class="font-bold">Warning: </span>WebVM will reload';return{c(){e=D("p"),e.innerHTML=n},l(t){e=x(t,"P",{"data-svelte-h":!0}),P(e)!=="svelte-t2wuex"&&(e.innerHTML=n)},m(t,i){w(t,e,i)},p:j,d(t){t&&b(e)}}}function Pt(l){let e,n="Disk",t,i,r,o,c,d="WebVM runs on top of a complete Linux distribution",h,v,u="Filesystems up to 2GB are supported and data is downloaded completely on-demand",s,m,f="The WebVM cloud backend uses WebSockets and a it's distributed via a global CDN to minimize download latency",y;i=new be({props:{buttonIcon:"fa-solid fa-trash-can",clickHandler:l[2],buttonText:xe(l[0]),bgColor:Ne(l[0]),hoverColor:Ae(l[0])}});function p(a,g){return a[0]=="CONFIRM"?Lt:At}let k=p(l),C=k(l);return{c(){e=D("h1"),e.textContent=n,t=N(),$(i.$$.fragment),r=N(),C.c(),o=N(),c=D("p"),c.textContent=d,h=N(),v=D("p"),v.textContent=u,s=N(),m=D("p"),m.textContent=f,this.h()},l(a){e=x(a,"H1",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-10nrcre"&&(e.textContent=n),t=A(a),G(i.$$.fragment,a),r=A(a),C.l(a),o=A(a),c=x(a,"P",{"data-svelte-h":!0}),P(c)!=="svelte-1bd1x22"&&(c.textContent=d),h=A(a),v=x(a,"P",{"data-svelte-h":!0}),P(v)!=="svelte-14wnjeg"&&(v.textContent=u),s=A(a),m=x(a,"P",{"data-svelte-h":!0}),P(m)!=="svelte-m2t3bd"&&(m.textContent=f),this.h()},h(){T(e,"class","text-lg font-bold")},m(a,g){w(a,e,g),w(a,t,g),X(i,a,g),w(a,r,g),C.m(a,g),w(a,o,g),w(a,c,g),w(a,h,g),w(a,v,g),w(a,s,g),w(a,m,g),y=!0},p(a,[g]){const E={};g&1&&(E.buttonText=xe(a[0])),g&1&&(E.bgColor=Ne(a[0])),g&1&&(E.hoverColor=Ae(a[0])),i.$set(E),k===(k=p(a))&&C?C.p(a,g):(C.d(1),C=k(a),C&&(C.c(),C.m(o.parentNode,o)))},i(a){y||(U(i.$$.fragment,a),y=!0)},o(a){W(i.$$.fragment,a),y=!1},d(a){a&&(b(e),b(t),b(r),b(o),b(c),b(h),b(v),b(s),b(m)),F(i,a),C.d(a)}}}function xe(l){return l=="START"?"Reset disk":"Reset disk. Confirm?"}function Ne(l){if(l!="START")return"bg-red-900"}function Ae(l){if(l!="START")return"hover:bg-red-700"}function Ht(l,e,n){let t;le(l,je,c=>n(1,t=c));var i=me();let r="START";function o(){r=="START"?n(0,r="CONFIRM"):i("reset")}return[r,t,o]}class Ut extends Y{constructor(e){super(),J(this,e,Ht,Pt,K,{})}}function Le(l,e,n){const t=l.slice();return t[10]=e[n],t}function St(l){let e,n,t;return{c(){e=D("div"),this.h()},l(i){e=x(i,"DIV",{class:!0}),O(e).forEach(b),this.h()},h(){T(e,"class","grow")},m(i,r){w(i,e,r),n||(t=Z(e,"mouseover",l[6]),n=!0)},p:j,i:j,o:j,d(i){i&&b(e),n=!1,t()}}}function Wt(l){let e,n;return e=new ot({props:{icon:l[10].icon,info:l[10].info,activity:l[10].activity}}),e.$on("mouseover",l[5]),{c(){$(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,i){X(e,t,i),n=!0},p:j,i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function Pe(l){let e,n,t,i;const r=[Wt,St],o=[];function c(d,h){return d[10]?0:1}return e=c(l),n=o[e]=r[e](l),{c(){n.c(),t=ie()},l(d){n.l(d),t=ie()},m(d,h){o[e].m(d,h),w(d,t,h),i=!0},p(d,h){n.p(d,h)},i(d){i||(U(n),i=!0)},o(d){W(n),i=!1},d(d){d&&b(t),o[e].d(d)}}}function Mt(l){let e,n;return e=new Ut({}),e.$on("reset",l[8]),{c(){$(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,i){X(e,t,i),n=!0},p:j,i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function Ot(l){let e,n;return e=new Nt({}),{c(){$(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,i){X(e,t,i),n=!0},p:j,i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function Rt(l){let e,n;return e=new Et({}),e.$on("connect",l[7]),{c(){$(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,i){X(e,t,i),n=!0},p:j,i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function Vt(l){let e,n;return e=new ft({props:{$$slots:{default:[zt]},$$scope:{ctx:l}}}),{c(){$(e.$$.fragment)},l(t){G(e.$$.fragment,t)},m(t,i){X(e,t,i),n=!0},p(t,i){const r={};i&512&&(r.$$scope={dirty:i,ctx:t}),e.$set(r)},i(t){n||(U(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){F(e,t)}}}function zt(l){let e;const n=l[4].default,t=re(n,l,l[9],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,r){t&&t.m(i,r),e=!0},p(i,r){t&&t.p&&(!e||r&512)&&ae(t,n,i,i[9],e?oe(n,i[9],r,null):se(i[9]),null)},i(i){e||(U(t,i),e=!0)},o(i){W(t,i),e=!1},d(i){t&&t.d(i)}}}function Bt(l){let e,n,t,i,r,o,c,d,h,v=Te(l[1]),u=[];for(let p=0;p<v.length;p+=1)u[p]=Pe(Le(l,v,p));const s=p=>W(u[p],1,1,()=>{u[p]=null}),m=[Vt,Rt,Ot,Mt],f=[];function y(p,k){return p[0]==="Information"?0:p[0]==="Networking"?1:p[0]==="CPU"?2:p[0]==="Disk"?3:-1}return~(r=y(l))&&(o=f[r]=m[r](l)),{c(){e=D("div"),n=D("div");for(let p=0;p<u.length;p+=1)u[p].c();t=N(),i=D("div"),o&&o.c(),this.h()},l(p){e=x(p,"DIV",{class:!0});var k=O(e);n=x(k,"DIV",{class:!0});var C=O(n);for(let g=0;g<u.length;g+=1)u[g].l(C);C.forEach(b),t=A(k),i=x(k,"DIV",{class:!0});var a=O(i);o&&o.l(a),a.forEach(b),k.forEach(b),this.h()},h(){T(n,"class","flex flex-col shrink-0 w-14 text-gray-300"),T(i,"class","flex flex-col gap-5 shrink-0 w-60 h-full z-10 p-2 bg-neutral-600 text-gray-100"),we(i,"hidden",!l[0]),T(e,"class","flex flex-row w-14 h-full bg-neutral-700")},m(p,k){w(p,e,k),S(e,n);for(let C=0;C<u.length;C+=1)u[C]&&u[C].m(n,null);S(e,t),S(e,i),~r&&f[r].m(i,null),c=!0,d||(h=Z(e,"mouseleave",l[3]),d=!0)},p(p,[k]){if(k&6){v=Te(p[1]);let a;for(a=0;a<v.length;a+=1){const g=Le(p,v,a);u[a]?(u[a].p(g,k),U(u[a],1)):(u[a]=Pe(g),u[a].c(),U(u[a],1),u[a].m(n,null))}for(ye(),a=v.length;a<u.length;a+=1)s(a);Ie()}let C=r;r=y(p),r===C?~r&&f[r].p(p,k):(o&&(ye(),W(f[C],1,1,()=>{f[C]=null}),Ie()),~r?(o=f[r],o?o.p(p,k):(o=f[r]=m[r](p),o.c()),U(o,1),o.m(i,null)):o=null),(!c||k&1)&&we(i,"hidden",!p[0])},i(p){if(!c){for(let k=0;k<v.length;k+=1)U(u[k]);U(o),c=!0}},o(p){u=u.filter(Boolean);for(let k=0;k<u.length;k+=1)W(u[k]);W(o),c=!1},d(p){p&&b(e),it(u,p),~r&&f[r].d(),d=!1,h()}}}function jt(l,e,n){let{$$slots:t={},$$scope:i}=e;const r=[{icon:"fas fa-info-circle",info:"Information",activity:null},{icon:"fas fa-wifi",info:"Networking",activity:null},{icon:"fas fa-microchip",info:"CPU",activity:Ve},{icon:"fas fa-compact-disc",info:"Disk",activity:ze}];let o=null;function c(m){n(0,o=m)}function d(){n(0,o=null)}const h=m=>c(m.detail),v=m=>c(null);function u(m){ke.call(this,l,m)}function s(m){ke.call(this,l,m)}return l.$$set=m=>{"$$scope"in m&&n(9,i=m.$$scope)},[o,r,c,d,t,h,v,u,s,i]}class $t extends Y{constructor(e){super(),J(this,e,jt,Bt,K,{})}}const $e="\x1B[1;35m",Ge="\x1B[0m",Gt=["+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~+","|                                                                             |","| WebVM is a virtual Linux environment running in the browser via WebAssembly |","|                                                                             |","| WebVM is powered by the CheerpX virtualization engine, which enables safe,  |","| sandboxed client-side execution of x86 binaries, fully client-side          |","|                                                                             |","| CheerpX includes an x86-to-WebAssembly JIT compiler, a virtual block-based  |","| file system, and a Linux syscall emulator                                   |","|                                                                             |","+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~+","","   Welcome to WebVM. If unsure, try these examples:","","     python3 examples/python3/fibonacci.py ","     gcc -o helloworld examples/c/helloworld.c && ./helloworld","     objdump -d ./helloworld | less -M","     vim examples/c/helloworld.c","     curl --max-time 15 parrot.live  # requires networking",""],Xt=[$e+"CheerpX could not start"+Ge,"","CheerpX is expected to work with recent desktop versions of Chrome, Edge, Firefox and Safari","","Give it a try from a desktop version / another browser!","","CheerpX internal error message is:",""],Ft=[$e+"WebVM encountered an unexpected error"+Ge,"","Check the DevTools console for further information","","Please consider reporting a bug!","","CheerpX internal error message is:",""];function qt(l){let e;const n=l[8].default,t=re(n,l,l[9],null);return{c(){t&&t.c()},l(i){t&&t.l(i)},m(i,r){t&&t.m(i,r),e=!0},p(i,r){t&&t.p&&(!e||r[0]&512)&&ae(t,n,i,i[9],e?oe(n,i[9],r,null):se(i[9]),null)},i(i){e||(U(t,i),e=!0)},o(i){W(t,i),e=!1},d(i){t&&t.d(i)}}}function He(l){let e,n='<canvas class="w-full h-full cursor-none" id="display"></canvas>';return{c(){e=D("div"),e.innerHTML=n,this.h()},l(t){e=x(t,"DIV",{class:!0,"data-svelte-h":!0}),P(e)!=="svelte-vfw3jl"&&(e.innerHTML=n),this.h()},h(){T(e,"class","absolute top-0 bottom-0 left-14 right-0")},m(t,i){w(t,e,i)},d(t){t&&b(e)}}}function Kt(l){let e,n,t,i,r,o,c="",d;t=new $t({props:{$$slots:{default:[qt]},$$scope:{ctx:l}}}),t.$on("connect",l[1]),t.$on("reset",l[2]);let h=l[0].needsDisplay&&He();return{c(){e=D("main"),n=D("div"),$(t.$$.fragment),i=N(),h&&h.c(),r=N(),o=D("div"),o.innerHTML=c,this.h()},l(v){e=x(v,"MAIN",{class:!0});var u=O(e);n=x(u,"DIV",{class:!0});var s=O(n);G(t.$$.fragment,s),i=A(s),h&&h.l(s),r=A(s),o=x(s,"DIV",{class:!0,id:!0,"data-svelte-h":!0}),P(o)!=="svelte-1qy7za7"&&(o.innerHTML=c),s.forEach(b),u.forEach(b),this.h()},h(){T(o,"class","absolute top-0 bottom-0 left-14 right-0 p-1 scrollbar"),T(o,"id","console"),T(n,"class","absolute top-0 bottom-0 left-0 right-0"),T(e,"class","relative w-full h-full")},m(v,u){w(v,e,u),S(e,n),X(t,n,null),S(n,i),h&&h.m(n,null),S(n,r),S(n,o),d=!0},p(v,u){const s={};u[0]&512&&(s.$$scope={dirty:u,ctx:v}),t.$set(s),v[0].needsDisplay?h||(h=He(),h.c(),h.m(n,r)):h&&(h.d(1),h=null)},i(v){d||(U(t.$$.fragment,v),d=!0)},o(v){W(t.$$.fragment,v),d=!1},d(v){v&&b(e),F(t),h&&h.d()}}}function Ue(l,e,n){for(;l.length>1&&l[1].t<n;)l.shift()}function Se(){return parseInt(getComputedStyle(document.body).fontSize)}function Yt(l,e,n){let{$$slots:t={},$$scope:i}=e,{configObj:r=null}=e,{processCallback:o=null}=e,{cacheId:c=null}=e,{cpuActivityEvents:d=[]}=e,{diskLatencies:h=[]}=e,{activityEventsInterval:v=0}=e;var u=null,s=null,m=null,f=null,y=null,p=0,k=0;function C(_,I){I==1&&u.write(new Uint8Array(_))}function a(_){if(f!=null)for(var I=0;I<_.length;I++)f(_.charCodeAt(I))}function g(_){for(var I=0;I<_.length;I++)u.write(_[I]+`
`)}function E(){var _=Date.now(),I=_-1e4;Ue(d,_,I),L(_,I),d.length==0&&(clearInterval(v),n(3,v=0))}function L(_,I){for(var H=0,V=I,R=!1,z=0;z<d.length;z++){var M=d[z],B=M.t;B<I&&(B=I),M.state=="ready"?(H+=B-V,R=!1):(V=B,R=!0)}R&&(H+=_-V),Be.set(Math.ceil(H/1e4*100))}function Xe(_){ze.set(_!="ready")}function Fe(_){h.push(_),h.length>30&&h.shift();for(var I=0,H=0;H<h.length;H++)I+=h[H];var V=I/h.length;je.set(Math.ceil(V))}function qe(_){Ve.set(_!="ready");var I=Date.now(),H=I-1e4;Ue(d,I,H),d.push({t:I,state:_}),L(I,H),v!=0&&clearInterval(v),n(3,v=setInterval(E,2e3))}function _e(_){var I=1,H=_.offsetWidth,V=_.offsetHeight,R=1024,z=768;H<R&&(I=R/H),V<z&&(I=Math.max(I,z/V)),s.setKmsCanvas(_,H*I,V*I)}var ue=0,fe=0;function Ke(){if(ue==window.innerWidth&&fe==window.innerHeight)return;ue=window.innerWidth,fe=window.innerHeight,u.options.fontSize=Se(),m.fit();const _=document.getElementById("display");_&&_e(_)}async function Ye(){const{Terminal:_}=await ne(async()=>{const{Terminal:M}=await import("./xterm.PglAAeey.js").then(B=>B.x);return{Terminal:M}},[],import.meta.url),{FitAddon:I}=await ne(async()=>{const{FitAddon:M}=await import("./addon-fit.CyyJcX4C.js").then(B=>B.a);return{FitAddon:M}},[],import.meta.url),{WebLinksAddon:H}=await ne(async()=>{const{WebLinksAddon:M}=await import("./addon-web-links.CqlSRlBm.js").then(B=>B.a);return{WebLinksAddon:M}},[],import.meta.url);u=new _({cursorBlink:!0,convertEol:!0,fontFamily:"monospace",fontWeight:400,fontWeightBold:700,fontSize:Se()}),m=new I,u.loadAddon(m);var V=new H;u.loadAddon(V);const R=document.getElementById("console");u.open(R),u.scrollToTop(),m.fit(),window.addEventListener("resize",Ke),u.focus(),u.onData(a);function z(M){M.preventDefault(),M.stopPropagation()}R.addEventListener("dragover",z,!1),R.addEventListener("dragenter",z,!1),R.addEventListener("dragleave",z,!1),R.addEventListener("drop",z,!1),ue=window.innerWidth,fe=window.innerHeight,r.printIntro&&g(Gt);try{await Ze()}catch(M){g(Ft),g([M.toString()]);return}}function Je(_){if(k==_||(k=_,_!=7))return;const I=document.getElementById("display");I.parentElement.style.zIndex=5}function Qe(){p++,o&&o(p)}async function Ze(){const _=await ne(()=>import("./index.DNzGDZ03.js"),__vite__mapDeps([0,1]),import.meta.url);var I=null;switch(r.diskImageType){case"cloud":try{I=await _.CloudDevice.create(r.diskImageUrl)}catch(de){var H="wss:";if(r.diskImageUrl.startsWith(H))I=await _.CloudDevice.create("https:"+r.diskImageUrl.substr(H.length));else throw de}break;case"bytes":I=await _.HttpBytesDevice.create(r.diskImageUrl);break;case"github":I=await _.GitHubDevice.create(r.diskImageUrl);break;default:throw new Error("Unrecognized device type")}y=await _.IDBDevice.create(c);var V=await _.OverlayDevice.create(I,y),R=await _.WebDevice.create(""),z=await _.WebDevice.create("documents"),M=await _.DataDevice.create(),B=[{type:"ext2",dev:V,path:"/"},{type:"dir",dev:R,path:"/web"},{type:"dir",dev:M,path:"/data"},{type:"devs",path:"/dev"},{type:"devpts",path:"/dev/pts"},{type:"proc",path:"/proc"},{type:"dir",dev:z,path:"/home/user/documents"}];try{s=await _.Linux.create({mounts:B,networkInterface:_t})}catch(de){g(Xt),g([de.toString()]);return}s.registerCallback("cpuActivity",qe),s.registerCallback("diskActivity",Xe),s.registerCallback("diskLatency",Fe),s.registerCallback("processCreated",Qe),u.scrollToBottom(),f=s.setCustomConsole(C,u.cols,u.rows);const ge=document.getElementById("display");for(ge&&(_e(ge),s.setActivateConsole(Je));;)await s.run(r.cmd,r.args,r.opts)}rt(Ye);async function et(){const _=window.open("login.html","_blank");await s.networkLogin(),_.location.href=await bt()}async function tt(){y!=null&&(await y.reset(),location.reload())}return l.$$set=_=>{"configObj"in _&&n(0,r=_.configObj),"processCallback"in _&&n(4,o=_.processCallback),"cacheId"in _&&n(5,c=_.cacheId),"cpuActivityEvents"in _&&n(6,d=_.cpuActivityEvents),"diskLatencies"in _&&n(7,h=_.diskLatencies),"activityEventsInterval"in _&&n(3,v=_.activityEventsInterval),"$$scope"in _&&n(9,i=_.$$scope)},[r,et,tt,v,o,c,d,h,t,i]}class tn extends Y{constructor(e){super(),J(this,e,Yt,Kt,K,{configObj:0,processCallback:4,cacheId:5,cpuActivityEvents:6,diskLatencies:7,activityEventsInterval:3},null,[-1,-1])}}export{tn as W};
