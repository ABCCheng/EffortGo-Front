function wA(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(e,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var kc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $s(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var TE={exports:{}},ad={},AE={exports:{}},Ge={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oc=Symbol.for("react.element"),CA=Symbol.for("react.portal"),xA=Symbol.for("react.fragment"),EA=Symbol.for("react.strict_mode"),PA=Symbol.for("react.profiler"),SA=Symbol.for("react.provider"),DA=Symbol.for("react.context"),TA=Symbol.for("react.forward_ref"),AA=Symbol.for("react.suspense"),BA=Symbol.for("react.memo"),MA=Symbol.for("react.lazy"),Fy=Symbol.iterator;function RA(e){return e===null||typeof e!="object"?null:(e=Fy&&e[Fy]||e["@@iterator"],typeof e=="function"?e:null)}var BE={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ME=Object.assign,RE={};function ul(e,t,n){this.props=e,this.context=t,this.refs=RE,this.updater=n||BE}ul.prototype.isReactComponent={};ul.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ul.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function kE(){}kE.prototype=ul.prototype;function _p(e,t,n){this.props=e,this.context=t,this.refs=RE,this.updater=n||BE}var jp=_p.prototype=new kE;jp.constructor=_p;ME(jp,ul.prototype);jp.isPureReactComponent=!0;var by=Array.isArray,OE=Object.prototype.hasOwnProperty,Wp={current:null},FE={key:!0,ref:!0,__self:!0,__source:!0};function bE(e,t,n){var r,i={},o=null,s=null;if(t!=null)for(r in t.ref!==void 0&&(s=t.ref),t.key!==void 0&&(o=""+t.key),t)OE.call(t,r)&&!FE.hasOwnProperty(r)&&(i[r]=t[r]);var u=arguments.length-2;if(u===1)i.children=n;else if(1<u){for(var l=Array(u),a=0;a<u;a++)l[a]=arguments[a+2];i.children=l}if(e&&e.defaultProps)for(r in u=e.defaultProps,u)i[r]===void 0&&(i[r]=u[r]);return{$$typeof:oc,type:e,key:o,ref:s,props:i,_owner:Wp.current}}function kA(e,t){return{$$typeof:oc,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function zp(e){return typeof e=="object"&&e!==null&&e.$$typeof===oc}function OA(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Iy=/\/+/g;function g0(e,t){return typeof e=="object"&&e!==null&&e.key!=null?OA(""+e.key):t.toString(36)}function wf(e,t,n,r,i){var o=typeof e;(o==="undefined"||o==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case oc:case CA:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+g0(s,0):r,by(i)?(n="",e!=null&&(n=e.replace(Iy,"$&/")+"/"),wf(i,t,n,"",function(a){return a})):i!=null&&(zp(i)&&(i=kA(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(Iy,"$&/")+"/")+e)),t.push(i)),1;if(s=0,r=r===""?".":r+":",by(e))for(var u=0;u<e.length;u++){o=e[u];var l=r+g0(o,u);s+=wf(o,t,n,l,i)}else if(l=RA(e),typeof l=="function")for(e=l.call(e),u=0;!(o=e.next()).done;)o=o.value,l=r+g0(o,u++),s+=wf(o,t,n,l,i);else if(o==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function Oc(e,t,n){if(e==null)return e;var r=[],i=0;return wf(e,r,"","",function(o){return t.call(n,o,i++)}),r}function FA(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var pn={current:null},Cf={transition:null},bA={ReactCurrentDispatcher:pn,ReactCurrentBatchConfig:Cf,ReactCurrentOwner:Wp};function IE(){throw Error("act(...) is not supported in production builds of React.")}Ge.Children={map:Oc,forEach:function(e,t,n){Oc(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Oc(e,function(){t++}),t},toArray:function(e){return Oc(e,function(t){return t})||[]},only:function(e){if(!zp(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ge.Component=ul;Ge.Fragment=xA;Ge.Profiler=PA;Ge.PureComponent=_p;Ge.StrictMode=EA;Ge.Suspense=AA;Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bA;Ge.act=IE;Ge.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ME({},e.props),i=e.key,o=e.ref,s=e._owner;if(t!=null){if(t.ref!==void 0&&(o=t.ref,s=Wp.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var u=e.type.defaultProps;for(l in t)OE.call(t,l)&&!FE.hasOwnProperty(l)&&(r[l]=t[l]===void 0&&u!==void 0?u[l]:t[l])}var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){u=Array(l);for(var a=0;a<l;a++)u[a]=arguments[a+2];r.children=u}return{$$typeof:oc,type:e.type,key:i,ref:o,props:r,_owner:s}};Ge.createContext=function(e){return e={$$typeof:DA,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:SA,_context:e},e.Consumer=e};Ge.createElement=bE;Ge.createFactory=function(e){var t=bE.bind(null,e);return t.type=e,t};Ge.createRef=function(){return{current:null}};Ge.forwardRef=function(e){return{$$typeof:TA,render:e}};Ge.isValidElement=zp;Ge.lazy=function(e){return{$$typeof:MA,_payload:{_status:-1,_result:e},_init:FA}};Ge.memo=function(e,t){return{$$typeof:BA,type:e,compare:t===void 0?null:t}};Ge.startTransition=function(e){var t=Cf.transition;Cf.transition={};try{e()}finally{Cf.transition=t}};Ge.unstable_act=IE;Ge.useCallback=function(e,t){return pn.current.useCallback(e,t)};Ge.useContext=function(e){return pn.current.useContext(e)};Ge.useDebugValue=function(){};Ge.useDeferredValue=function(e){return pn.current.useDeferredValue(e)};Ge.useEffect=function(e,t){return pn.current.useEffect(e,t)};Ge.useId=function(){return pn.current.useId()};Ge.useImperativeHandle=function(e,t,n){return pn.current.useImperativeHandle(e,t,n)};Ge.useInsertionEffect=function(e,t){return pn.current.useInsertionEffect(e,t)};Ge.useLayoutEffect=function(e,t){return pn.current.useLayoutEffect(e,t)};Ge.useMemo=function(e,t){return pn.current.useMemo(e,t)};Ge.useReducer=function(e,t,n){return pn.current.useReducer(e,t,n)};Ge.useRef=function(e){return pn.current.useRef(e)};Ge.useState=function(e){return pn.current.useState(e)};Ge.useSyncExternalStore=function(e,t,n){return pn.current.useSyncExternalStore(e,t,n)};Ge.useTransition=function(){return pn.current.useTransition()};Ge.version="18.3.1";AE.exports=Ge;var A=AE.exports;const ye=$s(A),IA=wA({__proto__:null,default:ye},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LA=A,GA=Symbol.for("react.element"),NA=Symbol.for("react.fragment"),HA=Object.prototype.hasOwnProperty,$A=LA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_A={key:!0,ref:!0,__self:!0,__source:!0};function LE(e,t,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(r in t)HA.call(t,r)&&!_A.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:GA,type:e,key:o,ref:s,props:i,_owner:$A.current}}ad.Fragment=NA;ad.jsx=LE;ad.jsxs=LE;TE.exports=ad;var D=TE.exports,GE={exports:{}},Jn={},NE={exports:{}},HE={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(N,F){var U=N.length;N.push(F);e:for(;0<U;){var se=U-1>>>1,fe=N[se];if(0<i(fe,F))N[se]=F,N[U]=fe,U=se;else break e}}function n(N){return N.length===0?null:N[0]}function r(N){if(N.length===0)return null;var F=N[0],U=N.pop();if(U!==F){N[0]=U;e:for(var se=0,fe=N.length,nt=fe>>>1;se<nt;){var te=2*(se+1)-1,k=N[te],H=te+1,j=N[H];if(0>i(k,U))H<fe&&0>i(j,k)?(N[se]=j,N[H]=U,se=H):(N[se]=k,N[te]=U,se=te);else if(H<fe&&0>i(j,U))N[se]=j,N[H]=U,se=H;else break e}}return F}function i(N,F){var U=N.sortIndex-F.sortIndex;return U!==0?U:N.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;e.unstable_now=function(){return o.now()}}else{var s=Date,u=s.now();e.unstable_now=function(){return s.now()-u}}var l=[],a=[],c=1,f=null,h=3,g=!1,p=!1,d=!1,y=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(N){for(var F=n(a);F!==null;){if(F.callback===null)r(a);else if(F.startTime<=N)r(a),F.sortIndex=F.expirationTime,t(l,F);else break;F=n(a)}}function E(N){if(d=!1,w(N),!p)if(n(l)!==null)p=!0,J(S);else{var F=n(a);F!==null&&Z(E,F.startTime-N)}}function S(N,F){p=!1,d&&(d=!1,m(R),R=-1),g=!0;var U=h;try{for(w(F),f=n(l);f!==null&&(!(f.expirationTime>F)||N&&!V());){var se=f.callback;if(typeof se=="function"){f.callback=null,h=f.priorityLevel;var fe=se(f.expirationTime<=F);F=e.unstable_now(),typeof fe=="function"?f.callback=fe:f===n(l)&&r(l),w(F)}else r(l);f=n(l)}if(f!==null)var nt=!0;else{var te=n(a);te!==null&&Z(E,te.startTime-F),nt=!1}return nt}finally{f=null,h=U,g=!1}}var T=!1,B=null,R=-1,b=5,O=-1;function V(){return!(e.unstable_now()-O<b)}function L(){if(B!==null){var N=e.unstable_now();O=N;var F=!0;try{F=B(!0,N)}finally{F?W():(T=!1,B=null)}}else T=!1}var W;if(typeof v=="function")W=function(){v(L)};else if(typeof MessageChannel<"u"){var z=new MessageChannel,_=z.port2;z.port1.onmessage=L,W=function(){_.postMessage(null)}}else W=function(){y(L,0)};function J(N){B=N,T||(T=!0,W())}function Z(N,F){R=y(function(){N(e.unstable_now())},F)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(N){N.callback=null},e.unstable_continueExecution=function(){p||g||(p=!0,J(S))},e.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<N?Math.floor(1e3/N):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(N){switch(h){case 1:case 2:case 3:var F=3;break;default:F=h}var U=h;h=F;try{return N()}finally{h=U}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(N,F){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var U=h;h=N;try{return F()}finally{h=U}},e.unstable_scheduleCallback=function(N,F,U){var se=e.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?se+U:se):U=se,N){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=U+fe,N={id:c++,callback:F,priorityLevel:N,startTime:U,expirationTime:fe,sortIndex:-1},U>se?(N.sortIndex=U,t(a,N),n(l)===null&&N===n(a)&&(d?(m(R),R=-1):d=!0,Z(E,U-se))):(N.sortIndex=fe,t(l,N),p||g||(p=!0,J(S))),N},e.unstable_shouldYield=V,e.unstable_wrapCallback=function(N){var F=h;return function(){var U=h;h=F;try{return N.apply(this,arguments)}finally{h=U}}}})(HE);NE.exports=HE;var jA=NE.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WA=A,Kn=jA;function Q(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var $E=new Set,ma={};function _s(e,t){Hu(e,t),Hu(e+"Capture",t)}function Hu(e,t){for(ma[e]=t,e=0;e<t.length;e++)$E.add(t[e])}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bg=Object.prototype.hasOwnProperty,zA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ly={},Gy={};function VA(e){return bg.call(Gy,e)?!0:bg.call(Ly,e)?!1:zA.test(e)?Gy[e]=!0:(Ly[e]=!0,!1)}function UA(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function XA(e,t,n,r){if(t===null||typeof t>"u"||UA(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function mn(e,t,n,r,i,o,s){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=s}var qt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){qt[e]=new mn(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];qt[t]=new mn(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){qt[e]=new mn(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){qt[e]=new mn(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){qt[e]=new mn(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){qt[e]=new mn(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){qt[e]=new mn(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){qt[e]=new mn(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){qt[e]=new mn(e,5,!1,e.toLowerCase(),null,!1,!1)});var Vp=/[\-:]([a-z])/g;function Up(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Vp,Up);qt[t]=new mn(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Vp,Up);qt[t]=new mn(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Vp,Up);qt[t]=new mn(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){qt[e]=new mn(e,1,!1,e.toLowerCase(),null,!1,!1)});qt.xlinkHref=new mn("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){qt[e]=new mn(e,1,!1,e.toLowerCase(),null,!0,!0)});function Xp(e,t,n,r){var i=qt.hasOwnProperty(t)?qt[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(XA(t,n,i,r)&&(n=null),r||i===null?VA(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Gi=WA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fc=Symbol.for("react.element"),su=Symbol.for("react.portal"),uu=Symbol.for("react.fragment"),Kp=Symbol.for("react.strict_mode"),Ig=Symbol.for("react.profiler"),_E=Symbol.for("react.provider"),jE=Symbol.for("react.context"),Yp=Symbol.for("react.forward_ref"),Lg=Symbol.for("react.suspense"),Gg=Symbol.for("react.suspense_list"),qp=Symbol.for("react.memo"),zi=Symbol.for("react.lazy"),WE=Symbol.for("react.offscreen"),Ny=Symbol.iterator;function xl(e){return e===null||typeof e!="object"?null:(e=Ny&&e[Ny]||e["@@iterator"],typeof e=="function"?e:null)}var yt=Object.assign,p0;function $l(e){if(p0===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);p0=t&&t[1]||""}return`
`+p0+e}var m0=!1;function v0(e,t){if(!e||m0)return"";m0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(a){var r=a}Reflect.construct(e,[],t)}else{try{t.call()}catch(a){r=a}e.call(t.prototype)}else{try{throw Error()}catch(a){r=a}e()}}catch(a){if(a&&r&&typeof a.stack=="string"){for(var i=a.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,u=o.length-1;1<=s&&0<=u&&i[s]!==o[u];)u--;for(;1<=s&&0<=u;s--,u--)if(i[s]!==o[u]){if(s!==1||u!==1)do if(s--,u--,0>u||i[s]!==o[u]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=u);break}}}finally{m0=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?$l(e):""}function KA(e){switch(e.tag){case 5:return $l(e.type);case 16:return $l("Lazy");case 13:return $l("Suspense");case 19:return $l("SuspenseList");case 0:case 2:case 15:return e=v0(e.type,!1),e;case 11:return e=v0(e.type.render,!1),e;case 1:return e=v0(e.type,!0),e;default:return""}}function Ng(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case uu:return"Fragment";case su:return"Portal";case Ig:return"Profiler";case Kp:return"StrictMode";case Lg:return"Suspense";case Gg:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case jE:return(e.displayName||"Context")+".Consumer";case _E:return(e._context.displayName||"Context")+".Provider";case Yp:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case qp:return t=e.displayName||null,t!==null?t:Ng(e.type)||"Memo";case zi:t=e._payload,e=e._init;try{return Ng(e(t))}catch{}}return null}function YA(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ng(t);case 8:return t===Kp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function po(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zE(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function qA(e){var t=zE(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function bc(e){e._valueTracker||(e._valueTracker=qA(e))}function VE(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=zE(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function Xf(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Hg(e,t){var n=t.checked;return yt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Hy(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=po(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function UE(e,t){t=t.checked,t!=null&&Xp(e,"checked",t,!1)}function $g(e,t){UE(e,t);var n=po(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?_g(e,t.type,n):t.hasOwnProperty("defaultValue")&&_g(e,t.type,po(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function $y(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function _g(e,t,n){(t!=="number"||Xf(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var _l=Array.isArray;function Au(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+po(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function jg(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Q(91));return yt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function _y(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Q(92));if(_l(n)){if(1<n.length)throw Error(Q(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:po(n)}}function XE(e,t){var n=po(t.value),r=po(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function jy(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function KE(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wg(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?KE(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ic,YE=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ic=Ic||document.createElement("div"),Ic.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ic.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function va(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Yl={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZA=["Webkit","ms","Moz","O"];Object.keys(Yl).forEach(function(e){ZA.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Yl[t]=Yl[e]})});function qE(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Yl.hasOwnProperty(e)&&Yl[e]?(""+t).trim():t+"px"}function ZE(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=qE(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var QA=yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function zg(e,t){if(t){if(QA[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Q(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Q(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Q(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Q(62))}}function Vg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ug=null;function Zp(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Xg=null,Bu=null,Mu=null;function Wy(e){if(e=lc(e)){if(typeof Xg!="function")throw Error(Q(280));var t=e.stateNode;t&&(t=gd(t),Xg(e.stateNode,e.type,t))}}function QE(e){Bu?Mu?Mu.push(e):Mu=[e]:Bu=e}function JE(){if(Bu){var e=Bu,t=Mu;if(Mu=Bu=null,Wy(e),t)for(e=0;e<t.length;e++)Wy(t[e])}}function e3(e,t){return e(t)}function t3(){}var y0=!1;function n3(e,t,n){if(y0)return e(t,n);y0=!0;try{return e3(e,t,n)}finally{y0=!1,(Bu!==null||Mu!==null)&&(t3(),JE())}}function ya(e,t){var n=e.stateNode;if(n===null)return null;var r=gd(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Q(231,t,typeof n));return n}var Kg=!1;if(Ti)try{var El={};Object.defineProperty(El,"passive",{get:function(){Kg=!0}}),window.addEventListener("test",El,El),window.removeEventListener("test",El,El)}catch{Kg=!1}function JA(e,t,n,r,i,o,s,u,l){var a=Array.prototype.slice.call(arguments,3);try{t.apply(n,a)}catch(c){this.onError(c)}}var ql=!1,Kf=null,Yf=!1,Yg=null,e4={onError:function(e){ql=!0,Kf=e}};function t4(e,t,n,r,i,o,s,u,l){ql=!1,Kf=null,JA.apply(e4,arguments)}function n4(e,t,n,r,i,o,s,u,l){if(t4.apply(this,arguments),ql){if(ql){var a=Kf;ql=!1,Kf=null}else throw Error(Q(198));Yf||(Yf=!0,Yg=a)}}function js(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function r3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function zy(e){if(js(e)!==e)throw Error(Q(188))}function r4(e){var t=e.alternate;if(!t){if(t=js(e),t===null)throw Error(Q(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return zy(i),e;if(o===r)return zy(i),t;o=o.sibling}throw Error(Q(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,u=i.child;u;){if(u===n){s=!0,n=i,r=o;break}if(u===r){s=!0,r=i,n=o;break}u=u.sibling}if(!s){for(u=o.child;u;){if(u===n){s=!0,n=o,r=i;break}if(u===r){s=!0,r=o,n=i;break}u=u.sibling}if(!s)throw Error(Q(189))}}if(n.alternate!==r)throw Error(Q(190))}if(n.tag!==3)throw Error(Q(188));return n.stateNode.current===n?e:t}function i3(e){return e=r4(e),e!==null?o3(e):null}function o3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=o3(e);if(t!==null)return t;e=e.sibling}return null}var s3=Kn.unstable_scheduleCallback,Vy=Kn.unstable_cancelCallback,i4=Kn.unstable_shouldYield,o4=Kn.unstable_requestPaint,Et=Kn.unstable_now,s4=Kn.unstable_getCurrentPriorityLevel,Qp=Kn.unstable_ImmediatePriority,u3=Kn.unstable_UserBlockingPriority,qf=Kn.unstable_NormalPriority,u4=Kn.unstable_LowPriority,l3=Kn.unstable_IdlePriority,cd=null,qr=null;function l4(e){if(qr&&typeof qr.onCommitFiberRoot=="function")try{qr.onCommitFiberRoot(cd,e,void 0,(e.current.flags&128)===128)}catch{}}var Fr=Math.clz32?Math.clz32:f4,a4=Math.log,c4=Math.LN2;function f4(e){return e>>>=0,e===0?32:31-(a4(e)/c4|0)|0}var Lc=64,Gc=4194304;function jl(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Zf(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,s=n&268435455;if(s!==0){var u=s&~i;u!==0?r=jl(u):(o&=s,o!==0&&(r=jl(o)))}else s=n&~i,s!==0?r=jl(s):o!==0&&(r=jl(o));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,o=t&-t,i>=o||i===16&&(o&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Fr(t),i=1<<n,r|=e[n],t&=~i;return r}function h4(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function d4(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var s=31-Fr(o),u=1<<s,l=i[s];l===-1?(!(u&n)||u&r)&&(i[s]=h4(u,t)):l<=t&&(e.expiredLanes|=u),o&=~u}}function qg(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function a3(){var e=Lc;return Lc<<=1,!(Lc&4194240)&&(Lc=64),e}function w0(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function sc(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Fr(t),e[t]=n}function g4(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Fr(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}function Jp(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Fr(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var qe=0;function c3(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var f3,em,h3,d3,g3,Zg=!1,Nc=[],io=null,oo=null,so=null,wa=new Map,Ca=new Map,Yi=[],p4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Uy(e,t){switch(e){case"focusin":case"focusout":io=null;break;case"dragenter":case"dragleave":oo=null;break;case"mouseover":case"mouseout":so=null;break;case"pointerover":case"pointerout":wa.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ca.delete(t.pointerId)}}function Pl(e,t,n,r,i,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},t!==null&&(t=lc(t),t!==null&&em(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function m4(e,t,n,r,i){switch(t){case"focusin":return io=Pl(io,e,t,n,r,i),!0;case"dragenter":return oo=Pl(oo,e,t,n,r,i),!0;case"mouseover":return so=Pl(so,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return wa.set(o,Pl(wa.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Ca.set(o,Pl(Ca.get(o)||null,e,t,n,r,i)),!0}return!1}function p3(e){var t=ns(e.target);if(t!==null){var n=js(t);if(n!==null){if(t=n.tag,t===13){if(t=r3(n),t!==null){e.blockedOn=t,g3(e.priority,function(){h3(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xf(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);Ug=r,n.target.dispatchEvent(r),Ug=null}else return t=lc(n),t!==null&&em(t),e.blockedOn=n,!1;t.shift()}return!0}function Xy(e,t,n){xf(e)&&n.delete(t)}function v4(){Zg=!1,io!==null&&xf(io)&&(io=null),oo!==null&&xf(oo)&&(oo=null),so!==null&&xf(so)&&(so=null),wa.forEach(Xy),Ca.forEach(Xy)}function Sl(e,t){e.blockedOn===t&&(e.blockedOn=null,Zg||(Zg=!0,Kn.unstable_scheduleCallback(Kn.unstable_NormalPriority,v4)))}function xa(e){function t(i){return Sl(i,e)}if(0<Nc.length){Sl(Nc[0],e);for(var n=1;n<Nc.length;n++){var r=Nc[n];r.blockedOn===e&&(r.blockedOn=null)}}for(io!==null&&Sl(io,e),oo!==null&&Sl(oo,e),so!==null&&Sl(so,e),wa.forEach(t),Ca.forEach(t),n=0;n<Yi.length;n++)r=Yi[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Yi.length&&(n=Yi[0],n.blockedOn===null);)p3(n),n.blockedOn===null&&Yi.shift()}var Ru=Gi.ReactCurrentBatchConfig,Qf=!0;function y4(e,t,n,r){var i=qe,o=Ru.transition;Ru.transition=null;try{qe=1,tm(e,t,n,r)}finally{qe=i,Ru.transition=o}}function w4(e,t,n,r){var i=qe,o=Ru.transition;Ru.transition=null;try{qe=4,tm(e,t,n,r)}finally{qe=i,Ru.transition=o}}function tm(e,t,n,r){if(Qf){var i=Qg(e,t,n,r);if(i===null)M0(e,t,r,Jf,n),Uy(e,r);else if(m4(i,e,t,n,r))r.stopPropagation();else if(Uy(e,r),t&4&&-1<p4.indexOf(e)){for(;i!==null;){var o=lc(i);if(o!==null&&f3(o),o=Qg(e,t,n,r),o===null&&M0(e,t,r,Jf,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else M0(e,t,r,null,n)}}var Jf=null;function Qg(e,t,n,r){if(Jf=null,e=Zp(r),e=ns(e),e!==null)if(t=js(e),t===null)e=null;else if(n=t.tag,n===13){if(e=r3(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Jf=e,null}function m3(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(s4()){case Qp:return 1;case u3:return 4;case qf:case u4:return 16;case l3:return 536870912;default:return 16}default:return 16}}var Ji=null,nm=null,Ef=null;function v3(){if(Ef)return Ef;var e,t=nm,n=t.length,r,i="value"in Ji?Ji.value:Ji.textContent,o=i.length;for(e=0;e<n&&t[e]===i[e];e++);var s=n-e;for(r=1;r<=s&&t[n-r]===i[o-r];r++);return Ef=i.slice(e,1<r?1-r:void 0)}function Pf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Hc(){return!0}function Ky(){return!1}function er(e){function t(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var u in e)e.hasOwnProperty(u)&&(n=e[u],this[u]=n?n(o):o[u]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Hc:Ky,this.isPropagationStopped=Ky,this}return yt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Hc)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Hc)},persist:function(){},isPersistent:Hc}),t}var ll={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rm=er(ll),uc=yt({},ll,{view:0,detail:0}),C4=er(uc),C0,x0,Dl,fd=yt({},uc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:im,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Dl&&(Dl&&e.type==="mousemove"?(C0=e.screenX-Dl.screenX,x0=e.screenY-Dl.screenY):x0=C0=0,Dl=e),C0)},movementY:function(e){return"movementY"in e?e.movementY:x0}}),Yy=er(fd),x4=yt({},fd,{dataTransfer:0}),E4=er(x4),P4=yt({},uc,{relatedTarget:0}),E0=er(P4),S4=yt({},ll,{animationName:0,elapsedTime:0,pseudoElement:0}),D4=er(S4),T4=yt({},ll,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),A4=er(T4),B4=yt({},ll,{data:0}),qy=er(B4),M4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},R4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function O4(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=k4[e])?!!t[e]:!1}function im(){return O4}var F4=yt({},uc,{key:function(e){if(e.key){var t=M4[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Pf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?R4[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:im,charCode:function(e){return e.type==="keypress"?Pf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Pf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),b4=er(F4),I4=yt({},fd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zy=er(I4),L4=yt({},uc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:im}),G4=er(L4),N4=yt({},ll,{propertyName:0,elapsedTime:0,pseudoElement:0}),H4=er(N4),$4=yt({},fd,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_4=er($4),j4=[9,13,27,32],om=Ti&&"CompositionEvent"in window,Zl=null;Ti&&"documentMode"in document&&(Zl=document.documentMode);var W4=Ti&&"TextEvent"in window&&!Zl,y3=Ti&&(!om||Zl&&8<Zl&&11>=Zl),Qy=" ",Jy=!1;function w3(e,t){switch(e){case"keyup":return j4.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function C3(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var lu=!1;function z4(e,t){switch(e){case"compositionend":return C3(t);case"keypress":return t.which!==32?null:(Jy=!0,Qy);case"textInput":return e=t.data,e===Qy&&Jy?null:e;default:return null}}function V4(e,t){if(lu)return e==="compositionend"||!om&&w3(e,t)?(e=v3(),Ef=nm=Ji=null,lu=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return y3&&t.locale!=="ko"?null:t.data;default:return null}}var U4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ew(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!U4[e.type]:t==="textarea"}function x3(e,t,n,r){QE(r),t=eh(t,"onChange"),0<t.length&&(n=new rm("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Ql=null,Ea=null;function X4(e){O3(e,0)}function hd(e){var t=fu(e);if(VE(t))return e}function K4(e,t){if(e==="change")return t}var E3=!1;if(Ti){var P0;if(Ti){var S0="oninput"in document;if(!S0){var tw=document.createElement("div");tw.setAttribute("oninput","return;"),S0=typeof tw.oninput=="function"}P0=S0}else P0=!1;E3=P0&&(!document.documentMode||9<document.documentMode)}function nw(){Ql&&(Ql.detachEvent("onpropertychange",P3),Ea=Ql=null)}function P3(e){if(e.propertyName==="value"&&hd(Ea)){var t=[];x3(t,Ea,e,Zp(e)),n3(X4,t)}}function Y4(e,t,n){e==="focusin"?(nw(),Ql=t,Ea=n,Ql.attachEvent("onpropertychange",P3)):e==="focusout"&&nw()}function q4(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return hd(Ea)}function Z4(e,t){if(e==="click")return hd(t)}function Q4(e,t){if(e==="input"||e==="change")return hd(t)}function J4(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Lr=typeof Object.is=="function"?Object.is:J4;function Pa(e,t){if(Lr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!bg.call(t,i)||!Lr(e[i],t[i]))return!1}return!0}function rw(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function iw(e,t){var n=rw(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=rw(n)}}function S3(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?S3(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function D3(){for(var e=window,t=Xf();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Xf(e.document)}return t}function sm(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function e8(e){var t=D3(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&S3(n.ownerDocument.documentElement,n)){if(r!==null&&sm(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=iw(n,o);var s=iw(n,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(s.node,s.offset)):(t.setEnd(s.node,s.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var t8=Ti&&"documentMode"in document&&11>=document.documentMode,au=null,Jg=null,Jl=null,e1=!1;function ow(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;e1||au==null||au!==Xf(r)||(r=au,"selectionStart"in r&&sm(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Jl&&Pa(Jl,r)||(Jl=r,r=eh(Jg,"onSelect"),0<r.length&&(t=new rm("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=au)))}function $c(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cu={animationend:$c("Animation","AnimationEnd"),animationiteration:$c("Animation","AnimationIteration"),animationstart:$c("Animation","AnimationStart"),transitionend:$c("Transition","TransitionEnd")},D0={},T3={};Ti&&(T3=document.createElement("div").style,"AnimationEvent"in window||(delete cu.animationend.animation,delete cu.animationiteration.animation,delete cu.animationstart.animation),"TransitionEvent"in window||delete cu.transitionend.transition);function dd(e){if(D0[e])return D0[e];if(!cu[e])return e;var t=cu[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in T3)return D0[e]=t[n];return e}var A3=dd("animationend"),B3=dd("animationiteration"),M3=dd("animationstart"),R3=dd("transitionend"),k3=new Map,sw="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Bo(e,t){k3.set(e,t),_s(t,[e])}for(var T0=0;T0<sw.length;T0++){var A0=sw[T0],n8=A0.toLowerCase(),r8=A0[0].toUpperCase()+A0.slice(1);Bo(n8,"on"+r8)}Bo(A3,"onAnimationEnd");Bo(B3,"onAnimationIteration");Bo(M3,"onAnimationStart");Bo("dblclick","onDoubleClick");Bo("focusin","onFocus");Bo("focusout","onBlur");Bo(R3,"onTransitionEnd");Hu("onMouseEnter",["mouseout","mouseover"]);Hu("onMouseLeave",["mouseout","mouseover"]);Hu("onPointerEnter",["pointerout","pointerover"]);Hu("onPointerLeave",["pointerout","pointerover"]);_s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));_s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));_s("onBeforeInput",["compositionend","keypress","textInput","paste"]);_s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));_s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));_s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),i8=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wl));function uw(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,n4(r,t,void 0,e),e.currentTarget=null}function O3(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var s=r.length-1;0<=s;s--){var u=r[s],l=u.instance,a=u.currentTarget;if(u=u.listener,l!==o&&i.isPropagationStopped())break e;uw(i,u,a),o=l}else for(s=0;s<r.length;s++){if(u=r[s],l=u.instance,a=u.currentTarget,u=u.listener,l!==o&&i.isPropagationStopped())break e;uw(i,u,a),o=l}}}if(Yf)throw e=Yg,Yf=!1,Yg=null,e}function rt(e,t){var n=t[o1];n===void 0&&(n=t[o1]=new Set);var r=e+"__bubble";n.has(r)||(F3(t,e,2,!1),n.add(r))}function B0(e,t,n){var r=0;t&&(r|=4),F3(n,e,r,t)}var _c="_reactListening"+Math.random().toString(36).slice(2);function Sa(e){if(!e[_c]){e[_c]=!0,$E.forEach(function(n){n!=="selectionchange"&&(i8.has(n)||B0(n,!1,e),B0(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[_c]||(t[_c]=!0,B0("selectionchange",!1,t))}}function F3(e,t,n,r){switch(m3(t)){case 1:var i=y4;break;case 4:i=w4;break;default:i=tm}n=i.bind(null,t,n,e),i=void 0,!Kg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function M0(e,t,n,r,i){var o=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var u=r.stateNode.containerInfo;if(u===i||u.nodeType===8&&u.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;u!==null;){if(s=ns(u),s===null)return;if(l=s.tag,l===5||l===6){r=o=s;continue e}u=u.parentNode}}r=r.return}n3(function(){var a=o,c=Zp(n),f=[];e:{var h=k3.get(e);if(h!==void 0){var g=rm,p=e;switch(e){case"keypress":if(Pf(n)===0)break e;case"keydown":case"keyup":g=b4;break;case"focusin":p="focus",g=E0;break;case"focusout":p="blur",g=E0;break;case"beforeblur":case"afterblur":g=E0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Yy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=E4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=G4;break;case A3:case B3:case M3:g=D4;break;case R3:g=H4;break;case"scroll":g=C4;break;case"wheel":g=_4;break;case"copy":case"cut":case"paste":g=A4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=Zy}var d=(t&4)!==0,y=!d&&e==="scroll",m=d?h!==null?h+"Capture":null:h;d=[];for(var v=a,w;v!==null;){w=v;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,m!==null&&(E=ya(v,m),E!=null&&d.push(Da(v,E,w)))),y)break;v=v.return}0<d.length&&(h=new g(h,p,null,n,c),f.push({event:h,listeners:d}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",g=e==="mouseout"||e==="pointerout",h&&n!==Ug&&(p=n.relatedTarget||n.fromElement)&&(ns(p)||p[Ai]))break e;if((g||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,g?(p=n.relatedTarget||n.toElement,g=a,p=p?ns(p):null,p!==null&&(y=js(p),p!==y||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=a),g!==p)){if(d=Yy,E="onMouseLeave",m="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(d=Zy,E="onPointerLeave",m="onPointerEnter",v="pointer"),y=g==null?h:fu(g),w=p==null?h:fu(p),h=new d(E,v+"leave",g,n,c),h.target=y,h.relatedTarget=w,E=null,ns(c)===a&&(d=new d(m,v+"enter",p,n,c),d.target=w,d.relatedTarget=y,E=d),y=E,g&&p)t:{for(d=g,m=p,v=0,w=d;w;w=Zs(w))v++;for(w=0,E=m;E;E=Zs(E))w++;for(;0<v-w;)d=Zs(d),v--;for(;0<w-v;)m=Zs(m),w--;for(;v--;){if(d===m||m!==null&&d===m.alternate)break t;d=Zs(d),m=Zs(m)}d=null}else d=null;g!==null&&lw(f,h,g,d,!1),p!==null&&y!==null&&lw(f,y,p,d,!0)}}e:{if(h=a?fu(a):window,g=h.nodeName&&h.nodeName.toLowerCase(),g==="select"||g==="input"&&h.type==="file")var S=K4;else if(ew(h))if(E3)S=Q4;else{S=q4;var T=Y4}else(g=h.nodeName)&&g.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(S=Z4);if(S&&(S=S(e,a))){x3(f,S,n,c);break e}T&&T(e,h,a),e==="focusout"&&(T=h._wrapperState)&&T.controlled&&h.type==="number"&&_g(h,"number",h.value)}switch(T=a?fu(a):window,e){case"focusin":(ew(T)||T.contentEditable==="true")&&(au=T,Jg=a,Jl=null);break;case"focusout":Jl=Jg=au=null;break;case"mousedown":e1=!0;break;case"contextmenu":case"mouseup":case"dragend":e1=!1,ow(f,n,c);break;case"selectionchange":if(t8)break;case"keydown":case"keyup":ow(f,n,c)}var B;if(om)e:{switch(e){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else lu?w3(e,n)&&(R="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(R="onCompositionStart");R&&(y3&&n.locale!=="ko"&&(lu||R!=="onCompositionStart"?R==="onCompositionEnd"&&lu&&(B=v3()):(Ji=c,nm="value"in Ji?Ji.value:Ji.textContent,lu=!0)),T=eh(a,R),0<T.length&&(R=new qy(R,e,null,n,c),f.push({event:R,listeners:T}),B?R.data=B:(B=C3(n),B!==null&&(R.data=B)))),(B=W4?z4(e,n):V4(e,n))&&(a=eh(a,"onBeforeInput"),0<a.length&&(c=new qy("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:a}),c.data=B))}O3(f,t)})}function Da(e,t,n){return{instance:e,listener:t,currentTarget:n}}function eh(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ya(e,n),o!=null&&r.unshift(Da(e,o,i)),o=ya(e,t),o!=null&&r.push(Da(e,o,i))),e=e.return}return r}function Zs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function lw(e,t,n,r,i){for(var o=t._reactName,s=[];n!==null&&n!==r;){var u=n,l=u.alternate,a=u.stateNode;if(l!==null&&l===r)break;u.tag===5&&a!==null&&(u=a,i?(l=ya(n,o),l!=null&&s.unshift(Da(n,l,u))):i||(l=ya(n,o),l!=null&&s.push(Da(n,l,u)))),n=n.return}s.length!==0&&e.push({event:t,listeners:s})}var o8=/\r\n?/g,s8=/\u0000|\uFFFD/g;function aw(e){return(typeof e=="string"?e:""+e).replace(o8,`
`).replace(s8,"")}function jc(e,t,n){if(t=aw(t),aw(e)!==t&&n)throw Error(Q(425))}function th(){}var t1=null,n1=null;function r1(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var i1=typeof setTimeout=="function"?setTimeout:void 0,u8=typeof clearTimeout=="function"?clearTimeout:void 0,cw=typeof Promise=="function"?Promise:void 0,l8=typeof queueMicrotask=="function"?queueMicrotask:typeof cw<"u"?function(e){return cw.resolve(null).then(e).catch(a8)}:i1;function a8(e){setTimeout(function(){throw e})}function R0(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),xa(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);xa(t)}function uo(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function fw(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var al=Math.random().toString(36).slice(2),Kr="__reactFiber$"+al,Ta="__reactProps$"+al,Ai="__reactContainer$"+al,o1="__reactEvents$"+al,c8="__reactListeners$"+al,f8="__reactHandles$"+al;function ns(e){var t=e[Kr];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Ai]||n[Kr]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=fw(e);e!==null;){if(n=e[Kr])return n;e=fw(e)}return t}e=n,n=e.parentNode}return null}function lc(e){return e=e[Kr]||e[Ai],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function fu(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Q(33))}function gd(e){return e[Ta]||null}var s1=[],hu=-1;function Mo(e){return{current:e}}function ut(e){0>hu||(e.current=s1[hu],s1[hu]=null,hu--)}function tt(e,t){hu++,s1[hu]=e.current,e.current=t}var mo={},rn=Mo(mo),An=Mo(!1),ys=mo;function $u(e,t){var n=e.type.contextTypes;if(!n)return mo;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=t[o];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Bn(e){return e=e.childContextTypes,e!=null}function nh(){ut(An),ut(rn)}function hw(e,t,n){if(rn.current!==mo)throw Error(Q(168));tt(rn,t),tt(An,n)}function b3(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(Q(108,YA(e)||"Unknown",i));return yt({},n,r)}function rh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||mo,ys=rn.current,tt(rn,e),tt(An,An.current),!0}function dw(e,t,n){var r=e.stateNode;if(!r)throw Error(Q(169));n?(e=b3(e,t,ys),r.__reactInternalMemoizedMergedChildContext=e,ut(An),ut(rn),tt(rn,e)):ut(An),tt(An,n)}var di=null,pd=!1,k0=!1;function I3(e){di===null?di=[e]:di.push(e)}function h8(e){pd=!0,I3(e)}function Ro(){if(!k0&&di!==null){k0=!0;var e=0,t=qe;try{var n=di;for(qe=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}di=null,pd=!1}catch(i){throw di!==null&&(di=di.slice(e+1)),s3(Qp,Ro),i}finally{qe=t,k0=!1}}return null}var du=[],gu=0,ih=null,oh=0,nr=[],rr=0,ws=null,pi=1,mi="";function Xo(e,t){du[gu++]=oh,du[gu++]=ih,ih=e,oh=t}function L3(e,t,n){nr[rr++]=pi,nr[rr++]=mi,nr[rr++]=ws,ws=e;var r=pi;e=mi;var i=32-Fr(r)-1;r&=~(1<<i),n+=1;var o=32-Fr(t)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,pi=1<<32-Fr(t)+i|n<<i|r,mi=o+e}else pi=1<<o|n<<i|r,mi=e}function um(e){e.return!==null&&(Xo(e,1),L3(e,1,0))}function lm(e){for(;e===ih;)ih=du[--gu],du[gu]=null,oh=du[--gu],du[gu]=null;for(;e===ws;)ws=nr[--rr],nr[rr]=null,mi=nr[--rr],nr[rr]=null,pi=nr[--rr],nr[rr]=null}var Vn=null,Wn=null,ht=!1,Br=null;function G3(e,t){var n=ur(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function gw(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Vn=e,Wn=uo(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Vn=e,Wn=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ws!==null?{id:pi,overflow:mi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=ur(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Vn=e,Wn=null,!0):!1;default:return!1}}function u1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function l1(e){if(ht){var t=Wn;if(t){var n=t;if(!gw(e,t)){if(u1(e))throw Error(Q(418));t=uo(n.nextSibling);var r=Vn;t&&gw(e,t)?G3(r,n):(e.flags=e.flags&-4097|2,ht=!1,Vn=e)}}else{if(u1(e))throw Error(Q(418));e.flags=e.flags&-4097|2,ht=!1,Vn=e}}}function pw(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Vn=e}function Wc(e){if(e!==Vn)return!1;if(!ht)return pw(e),ht=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!r1(e.type,e.memoizedProps)),t&&(t=Wn)){if(u1(e))throw N3(),Error(Q(418));for(;t;)G3(e,t),t=uo(t.nextSibling)}if(pw(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Q(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Wn=uo(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Wn=null}}else Wn=Vn?uo(e.stateNode.nextSibling):null;return!0}function N3(){for(var e=Wn;e;)e=uo(e.nextSibling)}function _u(){Wn=Vn=null,ht=!1}function am(e){Br===null?Br=[e]:Br.push(e)}var d8=Gi.ReactCurrentBatchConfig;function Tl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Q(309));var r=n.stateNode}if(!r)throw Error(Q(147,e));var i=r,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(s){var u=i.refs;s===null?delete u[o]:u[o]=s},t._stringRef=o,t)}if(typeof e!="string")throw Error(Q(284));if(!n._owner)throw Error(Q(290,e))}return e}function zc(e,t){throw e=Object.prototype.toString.call(t),Error(Q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function mw(e){var t=e._init;return t(e._payload)}function H3(e){function t(m,v){if(e){var w=m.deletions;w===null?(m.deletions=[v],m.flags|=16):w.push(v)}}function n(m,v){if(!e)return null;for(;v!==null;)t(m,v),v=v.sibling;return null}function r(m,v){for(m=new Map;v!==null;)v.key!==null?m.set(v.key,v):m.set(v.index,v),v=v.sibling;return m}function i(m,v){return m=fo(m,v),m.index=0,m.sibling=null,m}function o(m,v,w){return m.index=w,e?(w=m.alternate,w!==null?(w=w.index,w<v?(m.flags|=2,v):w):(m.flags|=2,v)):(m.flags|=1048576,v)}function s(m){return e&&m.alternate===null&&(m.flags|=2),m}function u(m,v,w,E){return v===null||v.tag!==6?(v=N0(w,m.mode,E),v.return=m,v):(v=i(v,w),v.return=m,v)}function l(m,v,w,E){var S=w.type;return S===uu?c(m,v,w.props.children,E,w.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===zi&&mw(S)===v.type)?(E=i(v,w.props),E.ref=Tl(m,v,w),E.return=m,E):(E=Rf(w.type,w.key,w.props,null,m.mode,E),E.ref=Tl(m,v,w),E.return=m,E)}function a(m,v,w,E){return v===null||v.tag!==4||v.stateNode.containerInfo!==w.containerInfo||v.stateNode.implementation!==w.implementation?(v=H0(w,m.mode,E),v.return=m,v):(v=i(v,w.children||[]),v.return=m,v)}function c(m,v,w,E,S){return v===null||v.tag!==7?(v=fs(w,m.mode,E,S),v.return=m,v):(v=i(v,w),v.return=m,v)}function f(m,v,w){if(typeof v=="string"&&v!==""||typeof v=="number")return v=N0(""+v,m.mode,w),v.return=m,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Fc:return w=Rf(v.type,v.key,v.props,null,m.mode,w),w.ref=Tl(m,null,v),w.return=m,w;case su:return v=H0(v,m.mode,w),v.return=m,v;case zi:var E=v._init;return f(m,E(v._payload),w)}if(_l(v)||xl(v))return v=fs(v,m.mode,w,null),v.return=m,v;zc(m,v)}return null}function h(m,v,w,E){var S=v!==null?v.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:u(m,v,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Fc:return w.key===S?l(m,v,w,E):null;case su:return w.key===S?a(m,v,w,E):null;case zi:return S=w._init,h(m,v,S(w._payload),E)}if(_l(w)||xl(w))return S!==null?null:c(m,v,w,E,null);zc(m,w)}return null}function g(m,v,w,E,S){if(typeof E=="string"&&E!==""||typeof E=="number")return m=m.get(w)||null,u(v,m,""+E,S);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Fc:return m=m.get(E.key===null?w:E.key)||null,l(v,m,E,S);case su:return m=m.get(E.key===null?w:E.key)||null,a(v,m,E,S);case zi:var T=E._init;return g(m,v,w,T(E._payload),S)}if(_l(E)||xl(E))return m=m.get(w)||null,c(v,m,E,S,null);zc(v,E)}return null}function p(m,v,w,E){for(var S=null,T=null,B=v,R=v=0,b=null;B!==null&&R<w.length;R++){B.index>R?(b=B,B=null):b=B.sibling;var O=h(m,B,w[R],E);if(O===null){B===null&&(B=b);break}e&&B&&O.alternate===null&&t(m,B),v=o(O,v,R),T===null?S=O:T.sibling=O,T=O,B=b}if(R===w.length)return n(m,B),ht&&Xo(m,R),S;if(B===null){for(;R<w.length;R++)B=f(m,w[R],E),B!==null&&(v=o(B,v,R),T===null?S=B:T.sibling=B,T=B);return ht&&Xo(m,R),S}for(B=r(m,B);R<w.length;R++)b=g(B,m,R,w[R],E),b!==null&&(e&&b.alternate!==null&&B.delete(b.key===null?R:b.key),v=o(b,v,R),T===null?S=b:T.sibling=b,T=b);return e&&B.forEach(function(V){return t(m,V)}),ht&&Xo(m,R),S}function d(m,v,w,E){var S=xl(w);if(typeof S!="function")throw Error(Q(150));if(w=S.call(w),w==null)throw Error(Q(151));for(var T=S=null,B=v,R=v=0,b=null,O=w.next();B!==null&&!O.done;R++,O=w.next()){B.index>R?(b=B,B=null):b=B.sibling;var V=h(m,B,O.value,E);if(V===null){B===null&&(B=b);break}e&&B&&V.alternate===null&&t(m,B),v=o(V,v,R),T===null?S=V:T.sibling=V,T=V,B=b}if(O.done)return n(m,B),ht&&Xo(m,R),S;if(B===null){for(;!O.done;R++,O=w.next())O=f(m,O.value,E),O!==null&&(v=o(O,v,R),T===null?S=O:T.sibling=O,T=O);return ht&&Xo(m,R),S}for(B=r(m,B);!O.done;R++,O=w.next())O=g(B,m,R,O.value,E),O!==null&&(e&&O.alternate!==null&&B.delete(O.key===null?R:O.key),v=o(O,v,R),T===null?S=O:T.sibling=O,T=O);return e&&B.forEach(function(L){return t(m,L)}),ht&&Xo(m,R),S}function y(m,v,w,E){if(typeof w=="object"&&w!==null&&w.type===uu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Fc:e:{for(var S=w.key,T=v;T!==null;){if(T.key===S){if(S=w.type,S===uu){if(T.tag===7){n(m,T.sibling),v=i(T,w.props.children),v.return=m,m=v;break e}}else if(T.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===zi&&mw(S)===T.type){n(m,T.sibling),v=i(T,w.props),v.ref=Tl(m,T,w),v.return=m,m=v;break e}n(m,T);break}else t(m,T);T=T.sibling}w.type===uu?(v=fs(w.props.children,m.mode,E,w.key),v.return=m,m=v):(E=Rf(w.type,w.key,w.props,null,m.mode,E),E.ref=Tl(m,v,w),E.return=m,m=E)}return s(m);case su:e:{for(T=w.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===w.containerInfo&&v.stateNode.implementation===w.implementation){n(m,v.sibling),v=i(v,w.children||[]),v.return=m,m=v;break e}else{n(m,v);break}else t(m,v);v=v.sibling}v=H0(w,m.mode,E),v.return=m,m=v}return s(m);case zi:return T=w._init,y(m,v,T(w._payload),E)}if(_l(w))return p(m,v,w,E);if(xl(w))return d(m,v,w,E);zc(m,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,v!==null&&v.tag===6?(n(m,v.sibling),v=i(v,w),v.return=m,m=v):(n(m,v),v=N0(w,m.mode,E),v.return=m,m=v),s(m)):n(m,v)}return y}var ju=H3(!0),$3=H3(!1),sh=Mo(null),uh=null,pu=null,cm=null;function fm(){cm=pu=uh=null}function hm(e){var t=sh.current;ut(sh),e._currentValue=t}function a1(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function ku(e,t){uh=e,cm=pu=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Pn=!0),e.firstContext=null)}function yr(e){var t=e._currentValue;if(cm!==e)if(e={context:e,memoizedValue:t,next:null},pu===null){if(uh===null)throw Error(Q(308));pu=e,uh.dependencies={lanes:0,firstContext:e}}else pu=pu.next=e;return t}var rs=null;function dm(e){rs===null?rs=[e]:rs.push(e)}function _3(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,dm(t)):(n.next=i.next,i.next=n),t.interleaved=n,Bi(e,r)}function Bi(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Vi=!1;function gm(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function j3(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ei(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function lo(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,We&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Bi(e,n)}return i=r.interleaved,i===null?(t.next=t,dm(r)):(t.next=i.next,i.next=t),r.interleaved=t,Bi(e,n)}function Sf(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Jp(e,n)}}function vw(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=t:o=o.next=t}else i=o=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function lh(e,t,n,r){var i=e.updateQueue;Vi=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,u=i.shared.pending;if(u!==null){i.shared.pending=null;var l=u,a=l.next;l.next=null,s===null?o=a:s.next=a,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,u=c.lastBaseUpdate,u!==s&&(u===null?c.firstBaseUpdate=a:u.next=a,c.lastBaseUpdate=l))}if(o!==null){var f=i.baseState;s=0,c=a=l=null,u=o;do{var h=u.lane,g=u.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:g,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var p=e,d=u;switch(h=t,g=n,d.tag){case 1:if(p=d.payload,typeof p=="function"){f=p.call(g,f,h);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=d.payload,h=typeof p=="function"?p.call(g,f,h):p,h==null)break e;f=yt({},f,h);break e;case 2:Vi=!0}}u.callback!==null&&u.lane!==0&&(e.flags|=64,h=i.effects,h===null?i.effects=[u]:h.push(u))}else g={eventTime:g,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},c===null?(a=c=g,l=f):c=c.next=g,s|=h;if(u=u.next,u===null){if(u=i.shared.pending,u===null)break;h=u,u=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(l=f),i.baseState=l,i.firstBaseUpdate=a,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do s|=i.lane,i=i.next;while(i!==t)}else o===null&&(i.shared.lanes=0);xs|=s,e.lanes=s,e.memoizedState=f}}function yw(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(Q(191,i));i.call(r)}}}var ac={},Zr=Mo(ac),Aa=Mo(ac),Ba=Mo(ac);function is(e){if(e===ac)throw Error(Q(174));return e}function pm(e,t){switch(tt(Ba,t),tt(Aa,e),tt(Zr,ac),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Wg(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Wg(t,e)}ut(Zr),tt(Zr,t)}function Wu(){ut(Zr),ut(Aa),ut(Ba)}function W3(e){is(Ba.current);var t=is(Zr.current),n=Wg(t,e.type);t!==n&&(tt(Aa,e),tt(Zr,n))}function mm(e){Aa.current===e&&(ut(Zr),ut(Aa))}var mt=Mo(0);function ah(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var O0=[];function vm(){for(var e=0;e<O0.length;e++)O0[e]._workInProgressVersionPrimary=null;O0.length=0}var Df=Gi.ReactCurrentDispatcher,F0=Gi.ReactCurrentBatchConfig,Cs=0,vt=null,Tt=null,Ot=null,ch=!1,ea=!1,Ma=0,g8=0;function Qt(){throw Error(Q(321))}function ym(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Lr(e[n],t[n]))return!1;return!0}function wm(e,t,n,r,i,o){if(Cs=o,vt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Df.current=e===null||e.memoizedState===null?y8:w8,e=n(r,i),ea){o=0;do{if(ea=!1,Ma=0,25<=o)throw Error(Q(301));o+=1,Ot=Tt=null,t.updateQueue=null,Df.current=C8,e=n(r,i)}while(ea)}if(Df.current=fh,t=Tt!==null&&Tt.next!==null,Cs=0,Ot=Tt=vt=null,ch=!1,t)throw Error(Q(300));return e}function Cm(){var e=Ma!==0;return Ma=0,e}function Ur(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ot===null?vt.memoizedState=Ot=e:Ot=Ot.next=e,Ot}function wr(){if(Tt===null){var e=vt.alternate;e=e!==null?e.memoizedState:null}else e=Tt.next;var t=Ot===null?vt.memoizedState:Ot.next;if(t!==null)Ot=t,Tt=e;else{if(e===null)throw Error(Q(310));Tt=e,e={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},Ot===null?vt.memoizedState=Ot=e:Ot=Ot.next=e}return Ot}function Ra(e,t){return typeof t=="function"?t(e):t}function b0(e){var t=wr(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=Tt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var u=s=null,l=null,a=o;do{var c=a.lane;if((Cs&c)===c)l!==null&&(l=l.next={lane:0,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null}),r=a.hasEagerState?a.eagerState:e(r,a.action);else{var f={lane:c,action:a.action,hasEagerState:a.hasEagerState,eagerState:a.eagerState,next:null};l===null?(u=l=f,s=r):l=l.next=f,vt.lanes|=c,xs|=c}a=a.next}while(a!==null&&a!==o);l===null?s=r:l.next=u,Lr(r,t.memoizedState)||(Pn=!0),t.memoizedState=r,t.baseState=s,t.baseQueue=l,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do o=i.lane,vt.lanes|=o,xs|=o,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function I0(e){var t=wr(),n=t.queue;if(n===null)throw Error(Q(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=e(o,s.action),s=s.next;while(s!==i);Lr(o,t.memoizedState)||(Pn=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function z3(){}function V3(e,t){var n=vt,r=wr(),i=t(),o=!Lr(r.memoizedState,i);if(o&&(r.memoizedState=i,Pn=!0),r=r.queue,xm(K3.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||Ot!==null&&Ot.memoizedState.tag&1){if(n.flags|=2048,ka(9,X3.bind(null,n,r,i,t),void 0,null),$t===null)throw Error(Q(349));Cs&30||U3(n,t,i)}return i}function U3(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=vt.updateQueue,t===null?(t={lastEffect:null,stores:null},vt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function X3(e,t,n,r){t.value=n,t.getSnapshot=r,Y3(t)&&q3(e)}function K3(e,t,n){return n(function(){Y3(t)&&q3(e)})}function Y3(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Lr(e,n)}catch{return!0}}function q3(e){var t=Bi(e,1);t!==null&&br(t,e,1,-1)}function ww(e){var t=Ur();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ra,lastRenderedState:e},t.queue=e,e=e.dispatch=v8.bind(null,vt,e),[t.memoizedState,e]}function ka(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=vt.updateQueue,t===null?(t={lastEffect:null,stores:null},vt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Z3(){return wr().memoizedState}function Tf(e,t,n,r){var i=Ur();vt.flags|=e,i.memoizedState=ka(1|t,n,void 0,r===void 0?null:r)}function md(e,t,n,r){var i=wr();r=r===void 0?null:r;var o=void 0;if(Tt!==null){var s=Tt.memoizedState;if(o=s.destroy,r!==null&&ym(r,s.deps)){i.memoizedState=ka(t,n,o,r);return}}vt.flags|=e,i.memoizedState=ka(1|t,n,o,r)}function Cw(e,t){return Tf(8390656,8,e,t)}function xm(e,t){return md(2048,8,e,t)}function Q3(e,t){return md(4,2,e,t)}function J3(e,t){return md(4,4,e,t)}function eP(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function tP(e,t,n){return n=n!=null?n.concat([e]):null,md(4,4,eP.bind(null,t,e),n)}function Em(){}function nP(e,t){var n=wr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ym(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function rP(e,t){var n=wr();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&ym(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function iP(e,t,n){return Cs&21?(Lr(n,t)||(n=a3(),vt.lanes|=n,xs|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Pn=!0),e.memoizedState=n)}function p8(e,t){var n=qe;qe=n!==0&&4>n?n:4,e(!0);var r=F0.transition;F0.transition={};try{e(!1),t()}finally{qe=n,F0.transition=r}}function oP(){return wr().memoizedState}function m8(e,t,n){var r=co(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},sP(e))uP(t,n);else if(n=_3(e,t,n,r),n!==null){var i=hn();br(n,e,r,i),lP(n,t,r)}}function v8(e,t,n){var r=co(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(sP(e))uP(t,i);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var s=t.lastRenderedState,u=o(s,n);if(i.hasEagerState=!0,i.eagerState=u,Lr(u,s)){var l=t.interleaved;l===null?(i.next=i,dm(t)):(i.next=l.next,l.next=i),t.interleaved=i;return}}catch{}finally{}n=_3(e,t,i,r),n!==null&&(i=hn(),br(n,e,r,i),lP(n,t,r))}}function sP(e){var t=e.alternate;return e===vt||t!==null&&t===vt}function uP(e,t){ea=ch=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function lP(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Jp(e,n)}}var fh={readContext:yr,useCallback:Qt,useContext:Qt,useEffect:Qt,useImperativeHandle:Qt,useInsertionEffect:Qt,useLayoutEffect:Qt,useMemo:Qt,useReducer:Qt,useRef:Qt,useState:Qt,useDebugValue:Qt,useDeferredValue:Qt,useTransition:Qt,useMutableSource:Qt,useSyncExternalStore:Qt,useId:Qt,unstable_isNewReconciler:!1},y8={readContext:yr,useCallback:function(e,t){return Ur().memoizedState=[e,t===void 0?null:t],e},useContext:yr,useEffect:Cw,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Tf(4194308,4,eP.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Tf(4194308,4,e,t)},useInsertionEffect:function(e,t){return Tf(4,2,e,t)},useMemo:function(e,t){var n=Ur();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Ur();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=m8.bind(null,vt,e),[r.memoizedState,e]},useRef:function(e){var t=Ur();return e={current:e},t.memoizedState=e},useState:ww,useDebugValue:Em,useDeferredValue:function(e){return Ur().memoizedState=e},useTransition:function(){var e=ww(!1),t=e[0];return e=p8.bind(null,e[1]),Ur().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=vt,i=Ur();if(ht){if(n===void 0)throw Error(Q(407));n=n()}else{if(n=t(),$t===null)throw Error(Q(349));Cs&30||U3(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,Cw(K3.bind(null,r,o,e),[e]),r.flags|=2048,ka(9,X3.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Ur(),t=$t.identifierPrefix;if(ht){var n=mi,r=pi;n=(r&~(1<<32-Fr(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ma++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=g8++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},w8={readContext:yr,useCallback:nP,useContext:yr,useEffect:xm,useImperativeHandle:tP,useInsertionEffect:Q3,useLayoutEffect:J3,useMemo:rP,useReducer:b0,useRef:Z3,useState:function(){return b0(Ra)},useDebugValue:Em,useDeferredValue:function(e){var t=wr();return iP(t,Tt.memoizedState,e)},useTransition:function(){var e=b0(Ra)[0],t=wr().memoizedState;return[e,t]},useMutableSource:z3,useSyncExternalStore:V3,useId:oP,unstable_isNewReconciler:!1},C8={readContext:yr,useCallback:nP,useContext:yr,useEffect:xm,useImperativeHandle:tP,useInsertionEffect:Q3,useLayoutEffect:J3,useMemo:rP,useReducer:I0,useRef:Z3,useState:function(){return I0(Ra)},useDebugValue:Em,useDeferredValue:function(e){var t=wr();return Tt===null?t.memoizedState=e:iP(t,Tt.memoizedState,e)},useTransition:function(){var e=I0(Ra)[0],t=wr().memoizedState;return[e,t]},useMutableSource:z3,useSyncExternalStore:V3,useId:oP,unstable_isNewReconciler:!1};function Sr(e,t){if(e&&e.defaultProps){t=yt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function c1(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:yt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var vd={isMounted:function(e){return(e=e._reactInternals)?js(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=hn(),i=co(e),o=Ei(r,i);o.payload=t,n!=null&&(o.callback=n),t=lo(e,o,i),t!==null&&(br(t,e,i,r),Sf(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=hn(),i=co(e),o=Ei(r,i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=lo(e,o,i),t!==null&&(br(t,e,i,r),Sf(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=hn(),r=co(e),i=Ei(n,r);i.tag=2,t!=null&&(i.callback=t),t=lo(e,i,r),t!==null&&(br(t,e,r,n),Sf(t,e,r))}};function xw(e,t,n,r,i,o,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,o,s):t.prototype&&t.prototype.isPureReactComponent?!Pa(n,r)||!Pa(i,o):!0}function aP(e,t,n){var r=!1,i=mo,o=t.contextType;return typeof o=="object"&&o!==null?o=yr(o):(i=Bn(t)?ys:rn.current,r=t.contextTypes,o=(r=r!=null)?$u(e,i):mo),t=new t(n,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=vd,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function Ew(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&vd.enqueueReplaceState(t,t.state,null)}function f1(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},gm(e);var o=t.contextType;typeof o=="object"&&o!==null?i.context=yr(o):(o=Bn(t)?ys:rn.current,i.context=$u(e,o)),i.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(c1(e,t,o,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&vd.enqueueReplaceState(i,i.state,null),lh(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function zu(e,t){try{var n="",r=t;do n+=KA(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:i,digest:null}}function L0(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function h1(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var x8=typeof WeakMap=="function"?WeakMap:Map;function cP(e,t,n){n=Ei(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){dh||(dh=!0,E1=r),h1(e,t)},n}function fP(e,t,n){n=Ei(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){h1(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){h1(e,t),typeof r!="function"&&(ao===null?ao=new Set([this]):ao.add(this));var s=t.stack;this.componentDidCatch(t.value,{componentStack:s!==null?s:""})}),n}function Pw(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new x8;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=I8.bind(null,e,t,n),t.then(e,e))}function Sw(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Dw(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Ei(-1,1),t.tag=2,lo(n,t,1))),n.lanes|=1),e)}var E8=Gi.ReactCurrentOwner,Pn=!1;function an(e,t,n,r){t.child=e===null?$3(t,null,n,r):ju(t,e.child,n,r)}function Tw(e,t,n,r,i){n=n.render;var o=t.ref;return ku(t,i),r=wm(e,t,n,r,o,i),n=Cm(),e!==null&&!Pn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Mi(e,t,i)):(ht&&n&&um(t),t.flags|=1,an(e,t,r,i),t.child)}function Aw(e,t,n,r,i){if(e===null){var o=n.type;return typeof o=="function"&&!Rm(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=o,hP(e,t,o,r,i)):(e=Rf(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,!(e.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Pa,n(s,r)&&e.ref===t.ref)return Mi(e,t,i)}return t.flags|=1,e=fo(o,r),e.ref=t.ref,e.return=t,t.child=e}function hP(e,t,n,r,i){if(e!==null){var o=e.memoizedProps;if(Pa(o,r)&&e.ref===t.ref)if(Pn=!1,t.pendingProps=r=o,(e.lanes&i)!==0)e.flags&131072&&(Pn=!0);else return t.lanes=e.lanes,Mi(e,t,i)}return d1(e,t,n,r,i)}function dP(e,t,n){var r=t.pendingProps,i=r.children,o=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},tt(vu,_n),_n|=n;else{if(!(n&1073741824))return e=o!==null?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,tt(vu,_n),_n|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,tt(vu,_n),_n|=r}else o!==null?(r=o.baseLanes|n,t.memoizedState=null):r=n,tt(vu,_n),_n|=r;return an(e,t,i,n),t.child}function gP(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function d1(e,t,n,r,i){var o=Bn(n)?ys:rn.current;return o=$u(t,o),ku(t,i),n=wm(e,t,n,r,o,i),r=Cm(),e!==null&&!Pn?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Mi(e,t,i)):(ht&&r&&um(t),t.flags|=1,an(e,t,n,i),t.child)}function Bw(e,t,n,r,i){if(Bn(n)){var o=!0;rh(t)}else o=!1;if(ku(t,i),t.stateNode===null)Af(e,t),aP(t,n,r),f1(t,n,r,i),r=!0;else if(e===null){var s=t.stateNode,u=t.memoizedProps;s.props=u;var l=s.context,a=n.contextType;typeof a=="object"&&a!==null?a=yr(a):(a=Bn(n)?ys:rn.current,a=$u(t,a));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";f||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==r||l!==a)&&Ew(t,s,r,a),Vi=!1;var h=t.memoizedState;s.state=h,lh(t,r,s,i),l=t.memoizedState,u!==r||h!==l||An.current||Vi?(typeof c=="function"&&(c1(t,n,c,r),l=t.memoizedState),(u=Vi||xw(t,n,u,r,h,l,a))?(f||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(t.flags|=4194308)):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),s.props=r,s.state=l,s.context=a,r=u):(typeof s.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{s=t.stateNode,j3(e,t),u=t.memoizedProps,a=t.type===t.elementType?u:Sr(t.type,u),s.props=a,f=t.pendingProps,h=s.context,l=n.contextType,typeof l=="object"&&l!==null?l=yr(l):(l=Bn(n)?ys:rn.current,l=$u(t,l));var g=n.getDerivedStateFromProps;(c=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==f||h!==l)&&Ew(t,s,r,l),Vi=!1,h=t.memoizedState,s.state=h,lh(t,r,s,i);var p=t.memoizedState;u!==f||h!==p||An.current||Vi?(typeof g=="function"&&(c1(t,n,g,r),p=t.memoizedState),(a=Vi||xw(t,n,a,r,h,p,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,l)),typeof s.componentDidUpdate=="function"&&(t.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),s.props=r,s.state=p,s.context=l,r=a):(typeof s.componentDidUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return g1(e,t,n,r,o,i)}function g1(e,t,n,r,i,o){gP(e,t);var s=(t.flags&128)!==0;if(!r&&!s)return i&&dw(t,n,!1),Mi(e,t,o);r=t.stateNode,E8.current=t;var u=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&s?(t.child=ju(t,e.child,null,o),t.child=ju(t,null,u,o)):an(e,t,u,o),t.memoizedState=r.state,i&&dw(t,n,!0),t.child}function pP(e){var t=e.stateNode;t.pendingContext?hw(e,t.pendingContext,t.pendingContext!==t.context):t.context&&hw(e,t.context,!1),pm(e,t.containerInfo)}function Mw(e,t,n,r,i){return _u(),am(i),t.flags|=256,an(e,t,n,r),t.child}var p1={dehydrated:null,treeContext:null,retryLane:0};function m1(e){return{baseLanes:e,cachePool:null,transitions:null}}function mP(e,t,n){var r=t.pendingProps,i=mt.current,o=!1,s=(t.flags&128)!==0,u;if((u=s)||(u=e!==null&&e.memoizedState===null?!1:(i&2)!==0),u?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),tt(mt,i&1),e===null)return l1(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=r.children,e=r.fallback,o?(r=t.mode,o=t.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Cd(s,r,0,null),e=fs(e,r,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=m1(n),t.memoizedState=p1,e):Pm(t,s));if(i=e.memoizedState,i!==null&&(u=i.dehydrated,u!==null))return P8(e,t,s,r,u,i,n);if(o){o=r.fallback,s=t.mode,i=e.child,u=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=l,t.deletions=null):(r=fo(i,l),r.subtreeFlags=i.subtreeFlags&14680064),u!==null?o=fo(u,o):(o=fs(o,s,n,null),o.flags|=2),o.return=t,r.return=t,r.sibling=o,t.child=r,r=o,o=t.child,s=e.child.memoizedState,s=s===null?m1(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=e.childLanes&~n,t.memoizedState=p1,r}return o=e.child,e=o.sibling,r=fo(o,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Pm(e,t){return t=Cd({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Vc(e,t,n,r){return r!==null&&am(r),ju(t,e.child,null,n),e=Pm(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function P8(e,t,n,r,i,o,s){if(n)return t.flags&256?(t.flags&=-257,r=L0(Error(Q(422))),Vc(e,t,s,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Cd({mode:"visible",children:r.children},i,0,null),o=fs(o,i,s,null),o.flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,t.mode&1&&ju(t,e.child,null,s),t.child.memoizedState=m1(s),t.memoizedState=p1,o);if(!(t.mode&1))return Vc(e,t,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var u=r.dgst;return r=u,o=Error(Q(419)),r=L0(o,r,void 0),Vc(e,t,s,r)}if(u=(s&e.childLanes)!==0,Pn||u){if(r=$t,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Bi(e,i),br(r,e,i,-1))}return Mm(),r=L0(Error(Q(421))),Vc(e,t,s,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=L8.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,Wn=uo(i.nextSibling),Vn=t,ht=!0,Br=null,e!==null&&(nr[rr++]=pi,nr[rr++]=mi,nr[rr++]=ws,pi=e.id,mi=e.overflow,ws=t),t=Pm(t,r.children),t.flags|=4096,t)}function Rw(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),a1(e.return,t,n)}function G0(e,t,n,r,i){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function vP(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(an(e,t,r.children,n),r=mt.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Rw(e,n,t);else if(e.tag===19)Rw(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(tt(mt,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&ah(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),G0(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&ah(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}G0(t,!0,n,null,o);break;case"together":G0(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Af(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Mi(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),xs|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Q(153));if(t.child!==null){for(e=t.child,n=fo(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fo(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function S8(e,t,n){switch(t.tag){case 3:pP(t),_u();break;case 5:W3(t);break;case 1:Bn(t.type)&&rh(t);break;case 4:pm(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;tt(sh,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(tt(mt,mt.current&1),t.flags|=128,null):n&t.child.childLanes?mP(e,t,n):(tt(mt,mt.current&1),e=Mi(e,t,n),e!==null?e.sibling:null);tt(mt,mt.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return vP(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),tt(mt,mt.current),r)break;return null;case 22:case 23:return t.lanes=0,dP(e,t,n)}return Mi(e,t,n)}var yP,v1,wP,CP;yP=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};v1=function(){};wP=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,is(Zr.current);var o=null;switch(n){case"input":i=Hg(e,i),r=Hg(e,r),o=[];break;case"select":i=yt({},i,{value:void 0}),r=yt({},r,{value:void 0}),o=[];break;case"textarea":i=jg(e,i),r=jg(e,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=th)}zg(n,r);var s;n=null;for(a in i)if(!r.hasOwnProperty(a)&&i.hasOwnProperty(a)&&i[a]!=null)if(a==="style"){var u=i[a];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else a!=="dangerouslySetInnerHTML"&&a!=="children"&&a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(ma.hasOwnProperty(a)?o||(o=[]):(o=o||[]).push(a,null));for(a in r){var l=r[a];if(u=i!=null?i[a]:void 0,r.hasOwnProperty(a)&&l!==u&&(l!=null||u!=null))if(a==="style")if(u){for(s in u)!u.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in l)l.hasOwnProperty(s)&&u[s]!==l[s]&&(n||(n={}),n[s]=l[s])}else n||(o||(o=[]),o.push(a,n)),n=l;else a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,u=u?u.__html:void 0,l!=null&&u!==l&&(o=o||[]).push(a,l)):a==="children"?typeof l!="string"&&typeof l!="number"||(o=o||[]).push(a,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&(ma.hasOwnProperty(a)?(l!=null&&a==="onScroll"&&rt("scroll",e),o||u===l||(o=[])):(o=o||[]).push(a,l))}n&&(o=o||[]).push("style",n);var a=o;(t.updateQueue=a)&&(t.flags|=4)}};CP=function(e,t,n,r){n!==r&&(t.flags|=4)};function Al(e,t){if(!ht)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Jt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function D8(e,t,n){var r=t.pendingProps;switch(lm(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jt(t),null;case 1:return Bn(t.type)&&nh(),Jt(t),null;case 3:return r=t.stateNode,Wu(),ut(An),ut(rn),vm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Wc(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Br!==null&&(D1(Br),Br=null))),v1(e,t),Jt(t),null;case 5:mm(t);var i=is(Ba.current);if(n=t.type,e!==null&&t.stateNode!=null)wP(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Q(166));return Jt(t),null}if(e=is(Zr.current),Wc(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[Kr]=t,r[Ta]=o,e=(t.mode&1)!==0,n){case"dialog":rt("cancel",r),rt("close",r);break;case"iframe":case"object":case"embed":rt("load",r);break;case"video":case"audio":for(i=0;i<Wl.length;i++)rt(Wl[i],r);break;case"source":rt("error",r);break;case"img":case"image":case"link":rt("error",r),rt("load",r);break;case"details":rt("toggle",r);break;case"input":Hy(r,o),rt("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},rt("invalid",r);break;case"textarea":_y(r,o),rt("invalid",r)}zg(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var u=o[s];s==="children"?typeof u=="string"?r.textContent!==u&&(o.suppressHydrationWarning!==!0&&jc(r.textContent,u,e),i=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(o.suppressHydrationWarning!==!0&&jc(r.textContent,u,e),i=["children",""+u]):ma.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&rt("scroll",r)}switch(n){case"input":bc(r),$y(r,o,!0);break;case"textarea":bc(r),jy(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=th)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=KE(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),n==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[Kr]=t,e[Ta]=r,yP(e,t,!1,!1),t.stateNode=e;e:{switch(s=Vg(n,r),n){case"dialog":rt("cancel",e),rt("close",e),i=r;break;case"iframe":case"object":case"embed":rt("load",e),i=r;break;case"video":case"audio":for(i=0;i<Wl.length;i++)rt(Wl[i],e);i=r;break;case"source":rt("error",e),i=r;break;case"img":case"image":case"link":rt("error",e),rt("load",e),i=r;break;case"details":rt("toggle",e),i=r;break;case"input":Hy(e,r),i=Hg(e,r),rt("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=yt({},r,{value:void 0}),rt("invalid",e);break;case"textarea":_y(e,r),i=jg(e,r),rt("invalid",e);break;default:i=r}zg(n,i),u=i;for(o in u)if(u.hasOwnProperty(o)){var l=u[o];o==="style"?ZE(e,l):o==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&YE(e,l)):o==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&va(e,l):typeof l=="number"&&va(e,""+l):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(ma.hasOwnProperty(o)?l!=null&&o==="onScroll"&&rt("scroll",e):l!=null&&Xp(e,o,l,s))}switch(n){case"input":bc(e),$y(e,r,!1);break;case"textarea":bc(e),jy(e);break;case"option":r.value!=null&&e.setAttribute("value",""+po(r.value));break;case"select":e.multiple=!!r.multiple,o=r.value,o!=null?Au(e,!!r.multiple,o,!1):r.defaultValue!=null&&Au(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=th)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jt(t),null;case 6:if(e&&t.stateNode!=null)CP(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Q(166));if(n=is(Ba.current),is(Zr.current),Wc(t)){if(r=t.stateNode,n=t.memoizedProps,r[Kr]=t,(o=r.nodeValue!==n)&&(e=Vn,e!==null))switch(e.tag){case 3:jc(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&jc(r.nodeValue,n,(e.mode&1)!==0)}o&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Kr]=t,t.stateNode=r}return Jt(t),null;case 13:if(ut(mt),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(ht&&Wn!==null&&t.mode&1&&!(t.flags&128))N3(),_u(),t.flags|=98560,o=!1;else if(o=Wc(t),r!==null&&r.dehydrated!==null){if(e===null){if(!o)throw Error(Q(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(Q(317));o[Kr]=t}else _u(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jt(t),o=!1}else Br!==null&&(D1(Br),Br=null),o=!0;if(!o)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||mt.current&1?Mt===0&&(Mt=3):Mm())),t.updateQueue!==null&&(t.flags|=4),Jt(t),null);case 4:return Wu(),v1(e,t),e===null&&Sa(t.stateNode.containerInfo),Jt(t),null;case 10:return hm(t.type._context),Jt(t),null;case 17:return Bn(t.type)&&nh(),Jt(t),null;case 19:if(ut(mt),o=t.memoizedState,o===null)return Jt(t),null;if(r=(t.flags&128)!==0,s=o.rendering,s===null)if(r)Al(o,!1);else{if(Mt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(s=ah(e),s!==null){for(t.flags|=128,Al(o,!1),r=s.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)o=n,e=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return tt(mt,mt.current&1|2),t.child}e=e.sibling}o.tail!==null&&Et()>Vu&&(t.flags|=128,r=!0,Al(o,!1),t.lanes=4194304)}else{if(!r)if(e=ah(s),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Al(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!ht)return Jt(t),null}else 2*Et()-o.renderingStartTime>Vu&&n!==1073741824&&(t.flags|=128,r=!0,Al(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(n=o.last,n!==null?n.sibling=s:t.child=s,o.last=s)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Et(),t.sibling=null,n=mt.current,tt(mt,r?n&1|2:n&1),t):(Jt(t),null);case 22:case 23:return Bm(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?_n&1073741824&&(Jt(t),t.subtreeFlags&6&&(t.flags|=8192)):Jt(t),null;case 24:return null;case 25:return null}throw Error(Q(156,t.tag))}function T8(e,t){switch(lm(t),t.tag){case 1:return Bn(t.type)&&nh(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Wu(),ut(An),ut(rn),vm(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return mm(t),null;case 13:if(ut(mt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Q(340));_u()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ut(mt),null;case 4:return Wu(),null;case 10:return hm(t.type._context),null;case 22:case 23:return Bm(),null;case 24:return null;default:return null}}var Uc=!1,tn=!1,A8=typeof WeakSet=="function"?WeakSet:Set,ue=null;function mu(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){wt(e,t,r)}else n.current=null}function y1(e,t,n){try{n()}catch(r){wt(e,t,r)}}var kw=!1;function B8(e,t){if(t1=Qf,e=D3(),sm(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,u=-1,l=-1,a=0,c=0,f=e,h=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(u=s+i),f!==o||r!==0&&f.nodeType!==3||(l=s+r),f.nodeType===3&&(s+=f.nodeValue.length),(g=f.firstChild)!==null;)h=f,f=g;for(;;){if(f===e)break t;if(h===n&&++a===i&&(u=s),h===o&&++c===r&&(l=s),(g=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=g}n=u===-1||l===-1?null:{start:u,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(n1={focusedElem:e,selectionRange:n},Qf=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var d=p.memoizedProps,y=p.memoizedState,m=t.stateNode,v=m.getSnapshotBeforeUpdate(t.elementType===t.type?d:Sr(t.type,d),y);m.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Q(163))}}catch(E){wt(t,t.return,E)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return p=kw,kw=!1,p}function ta(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,o!==void 0&&y1(t,n,o)}i=i.next}while(i!==r)}}function yd(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function w1(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function xP(e){var t=e.alternate;t!==null&&(e.alternate=null,xP(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Kr],delete t[Ta],delete t[o1],delete t[c8],delete t[f8])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function EP(e){return e.tag===5||e.tag===3||e.tag===4}function Ow(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||EP(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function C1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=th));else if(r!==4&&(e=e.child,e!==null))for(C1(e,t,n),e=e.sibling;e!==null;)C1(e,t,n),e=e.sibling}function x1(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(x1(e,t,n),e=e.sibling;e!==null;)x1(e,t,n),e=e.sibling}var Wt=null,Tr=!1;function ji(e,t,n){for(n=n.child;n!==null;)PP(e,t,n),n=n.sibling}function PP(e,t,n){if(qr&&typeof qr.onCommitFiberUnmount=="function")try{qr.onCommitFiberUnmount(cd,n)}catch{}switch(n.tag){case 5:tn||mu(n,t);case 6:var r=Wt,i=Tr;Wt=null,ji(e,t,n),Wt=r,Tr=i,Wt!==null&&(Tr?(e=Wt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Wt.removeChild(n.stateNode));break;case 18:Wt!==null&&(Tr?(e=Wt,n=n.stateNode,e.nodeType===8?R0(e.parentNode,n):e.nodeType===1&&R0(e,n),xa(e)):R0(Wt,n.stateNode));break;case 4:r=Wt,i=Tr,Wt=n.stateNode.containerInfo,Tr=!0,ji(e,t,n),Wt=r,Tr=i;break;case 0:case 11:case 14:case 15:if(!tn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&y1(n,t,s),i=i.next}while(i!==r)}ji(e,t,n);break;case 1:if(!tn&&(mu(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){wt(n,t,u)}ji(e,t,n);break;case 21:ji(e,t,n);break;case 22:n.mode&1?(tn=(r=tn)||n.memoizedState!==null,ji(e,t,n),tn=r):ji(e,t,n);break;default:ji(e,t,n)}}function Fw(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new A8),t.forEach(function(r){var i=G8.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Pr(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,s=t,u=s;e:for(;u!==null;){switch(u.tag){case 5:Wt=u.stateNode,Tr=!1;break e;case 3:Wt=u.stateNode.containerInfo,Tr=!0;break e;case 4:Wt=u.stateNode.containerInfo,Tr=!0;break e}u=u.return}if(Wt===null)throw Error(Q(160));PP(o,s,i),Wt=null,Tr=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(a){wt(i,t,a)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)SP(t,e),t=t.sibling}function SP(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Pr(t,e),_r(e),r&4){try{ta(3,e,e.return),yd(3,e)}catch(d){wt(e,e.return,d)}try{ta(5,e,e.return)}catch(d){wt(e,e.return,d)}}break;case 1:Pr(t,e),_r(e),r&512&&n!==null&&mu(n,n.return);break;case 5:if(Pr(t,e),_r(e),r&512&&n!==null&&mu(n,n.return),e.flags&32){var i=e.stateNode;try{va(i,"")}catch(d){wt(e,e.return,d)}}if(r&4&&(i=e.stateNode,i!=null)){var o=e.memoizedProps,s=n!==null?n.memoizedProps:o,u=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{u==="input"&&o.type==="radio"&&o.name!=null&&UE(i,o),Vg(u,s);var a=Vg(u,o);for(s=0;s<l.length;s+=2){var c=l[s],f=l[s+1];c==="style"?ZE(i,f):c==="dangerouslySetInnerHTML"?YE(i,f):c==="children"?va(i,f):Xp(i,c,f,a)}switch(u){case"input":$g(i,o);break;case"textarea":XE(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Au(i,!!o.multiple,g,!1):h!==!!o.multiple&&(o.defaultValue!=null?Au(i,!!o.multiple,o.defaultValue,!0):Au(i,!!o.multiple,o.multiple?[]:"",!1))}i[Ta]=o}catch(d){wt(e,e.return,d)}}break;case 6:if(Pr(t,e),_r(e),r&4){if(e.stateNode===null)throw Error(Q(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(d){wt(e,e.return,d)}}break;case 3:if(Pr(t,e),_r(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xa(t.containerInfo)}catch(d){wt(e,e.return,d)}break;case 4:Pr(t,e),_r(e);break;case 13:Pr(t,e),_r(e),i=e.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Tm=Et())),r&4&&Fw(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(tn=(a=tn)||c,Pr(t,e),tn=a):Pr(t,e),_r(e),r&8192){if(a=e.memoizedState!==null,(e.stateNode.isHidden=a)&&!c&&e.mode&1)for(ue=e,c=e.child;c!==null;){for(f=ue=c;ue!==null;){switch(h=ue,g=h.child,h.tag){case 0:case 11:case 14:case 15:ta(4,h,h.return);break;case 1:mu(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,n=h.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(d){wt(r,n,d)}}break;case 5:mu(h,h.return);break;case 22:if(h.memoizedState!==null){Iw(f);continue}}g!==null?(g.return=h,ue=g):Iw(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,a?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(u=f.stateNode,l=f.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,u.style.display=qE("display",s))}catch(d){wt(e,e.return,d)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=a?"":f.memoizedProps}catch(d){wt(e,e.return,d)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Pr(t,e),_r(e),r&4&&Fw(e);break;case 21:break;default:Pr(t,e),_r(e)}}function _r(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(EP(n)){var r=n;break e}n=n.return}throw Error(Q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(va(i,""),r.flags&=-33);var o=Ow(e);x1(e,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,u=Ow(e);C1(e,u,s);break;default:throw Error(Q(161))}}catch(l){wt(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function M8(e,t,n){ue=e,DP(e)}function DP(e,t,n){for(var r=(e.mode&1)!==0;ue!==null;){var i=ue,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Uc;if(!s){var u=i.alternate,l=u!==null&&u.memoizedState!==null||tn;u=Uc;var a=tn;if(Uc=s,(tn=l)&&!a)for(ue=i;ue!==null;)s=ue,l=s.child,s.tag===22&&s.memoizedState!==null?Lw(i):l!==null?(l.return=s,ue=l):Lw(i);for(;o!==null;)ue=o,DP(o),o=o.sibling;ue=i,Uc=u,tn=a}bw(e)}else i.subtreeFlags&8772&&o!==null?(o.return=i,ue=o):bw(e)}}function bw(e){for(;ue!==null;){var t=ue;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:tn||yd(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!tn)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Sr(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&yw(t,o,r);break;case 3:var s=t.updateQueue;if(s!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}yw(t,s,n)}break;case 5:var u=t.stateNode;if(n===null&&t.flags&4){n=u;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var a=t.alternate;if(a!==null){var c=a.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&xa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Q(163))}tn||t.flags&512&&w1(t)}catch(h){wt(t,t.return,h)}}if(t===e){ue=null;break}if(n=t.sibling,n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Iw(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ue=n;break}ue=t.return}}function Lw(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{yd(4,t)}catch(l){wt(t,n,l)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(l){wt(t,i,l)}}var o=t.return;try{w1(t)}catch(l){wt(t,o,l)}break;case 5:var s=t.return;try{w1(t)}catch(l){wt(t,s,l)}}}catch(l){wt(t,t.return,l)}if(t===e){ue=null;break}var u=t.sibling;if(u!==null){u.return=t.return,ue=u;break}ue=t.return}}var R8=Math.ceil,hh=Gi.ReactCurrentDispatcher,Sm=Gi.ReactCurrentOwner,hr=Gi.ReactCurrentBatchConfig,We=0,$t=null,Pt=null,Kt=0,_n=0,vu=Mo(0),Mt=0,Oa=null,xs=0,wd=0,Dm=0,na=null,xn=null,Tm=0,Vu=1/0,fi=null,dh=!1,E1=null,ao=null,Xc=!1,eo=null,gh=0,ra=0,P1=null,Bf=-1,Mf=0;function hn(){return We&6?Et():Bf!==-1?Bf:Bf=Et()}function co(e){return e.mode&1?We&2&&Kt!==0?Kt&-Kt:d8.transition!==null?(Mf===0&&(Mf=a3()),Mf):(e=qe,e!==0||(e=window.event,e=e===void 0?16:m3(e.type)),e):1}function br(e,t,n,r){if(50<ra)throw ra=0,P1=null,Error(Q(185));sc(e,n,r),(!(We&2)||e!==$t)&&(e===$t&&(!(We&2)&&(wd|=n),Mt===4&&qi(e,Kt)),Mn(e,r),n===1&&We===0&&!(t.mode&1)&&(Vu=Et()+500,pd&&Ro()))}function Mn(e,t){var n=e.callbackNode;d4(e,t);var r=Zf(e,e===$t?Kt:0);if(r===0)n!==null&&Vy(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Vy(n),t===1)e.tag===0?h8(Gw.bind(null,e)):I3(Gw.bind(null,e)),l8(function(){!(We&6)&&Ro()}),n=null;else{switch(c3(r)){case 1:n=Qp;break;case 4:n=u3;break;case 16:n=qf;break;case 536870912:n=l3;break;default:n=qf}n=FP(n,TP.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function TP(e,t){if(Bf=-1,Mf=0,We&6)throw Error(Q(327));var n=e.callbackNode;if(Ou()&&e.callbackNode!==n)return null;var r=Zf(e,e===$t?Kt:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=ph(e,r);else{t=r;var i=We;We|=2;var o=BP();($t!==e||Kt!==t)&&(fi=null,Vu=Et()+500,cs(e,t));do try{F8();break}catch(u){AP(e,u)}while(!0);fm(),hh.current=o,We=i,Pt!==null?t=0:($t=null,Kt=0,t=Mt)}if(t!==0){if(t===2&&(i=qg(e),i!==0&&(r=i,t=S1(e,i))),t===1)throw n=Oa,cs(e,0),qi(e,r),Mn(e,Et()),n;if(t===6)qi(e,r);else{if(i=e.current.alternate,!(r&30)&&!k8(i)&&(t=ph(e,r),t===2&&(o=qg(e),o!==0&&(r=o,t=S1(e,o))),t===1))throw n=Oa,cs(e,0),qi(e,r),Mn(e,Et()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(Q(345));case 2:Ko(e,xn,fi);break;case 3:if(qi(e,r),(r&130023424)===r&&(t=Tm+500-Et(),10<t)){if(Zf(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){hn(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=i1(Ko.bind(null,e,xn,fi),t);break}Ko(e,xn,fi);break;case 4:if(qi(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var s=31-Fr(r);o=1<<s,s=t[s],s>i&&(i=s),r&=~o}if(r=i,r=Et()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*R8(r/1960))-r,10<r){e.timeoutHandle=i1(Ko.bind(null,e,xn,fi),r);break}Ko(e,xn,fi);break;case 5:Ko(e,xn,fi);break;default:throw Error(Q(329))}}}return Mn(e,Et()),e.callbackNode===n?TP.bind(null,e):null}function S1(e,t){var n=na;return e.current.memoizedState.isDehydrated&&(cs(e,t).flags|=256),e=ph(e,t),e!==2&&(t=xn,xn=n,t!==null&&D1(t)),e}function D1(e){xn===null?xn=e:xn.push.apply(xn,e)}function k8(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Lr(o(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function qi(e,t){for(t&=~Dm,t&=~wd,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Fr(t),r=1<<n;e[n]=-1,t&=~r}}function Gw(e){if(We&6)throw Error(Q(327));Ou();var t=Zf(e,0);if(!(t&1))return Mn(e,Et()),null;var n=ph(e,t);if(e.tag!==0&&n===2){var r=qg(e);r!==0&&(t=r,n=S1(e,r))}if(n===1)throw n=Oa,cs(e,0),qi(e,t),Mn(e,Et()),n;if(n===6)throw Error(Q(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Ko(e,xn,fi),Mn(e,Et()),null}function Am(e,t){var n=We;We|=1;try{return e(t)}finally{We=n,We===0&&(Vu=Et()+500,pd&&Ro())}}function Es(e){eo!==null&&eo.tag===0&&!(We&6)&&Ou();var t=We;We|=1;var n=hr.transition,r=qe;try{if(hr.transition=null,qe=1,e)return e()}finally{qe=r,hr.transition=n,We=t,!(We&6)&&Ro()}}function Bm(){_n=vu.current,ut(vu)}function cs(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,u8(n)),Pt!==null)for(n=Pt.return;n!==null;){var r=n;switch(lm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&nh();break;case 3:Wu(),ut(An),ut(rn),vm();break;case 5:mm(r);break;case 4:Wu();break;case 13:ut(mt);break;case 19:ut(mt);break;case 10:hm(r.type._context);break;case 22:case 23:Bm()}n=n.return}if($t=e,Pt=e=fo(e.current,null),Kt=_n=t,Mt=0,Oa=null,Dm=wd=xs=0,xn=na=null,rs!==null){for(t=0;t<rs.length;t++)if(n=rs[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}rs=null}return e}function AP(e,t){do{var n=Pt;try{if(fm(),Df.current=fh,ch){for(var r=vt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ch=!1}if(Cs=0,Ot=Tt=vt=null,ea=!1,Ma=0,Sm.current=null,n===null||n.return===null){Mt=1,Oa=t,Pt=null;break}e:{var o=e,s=n.return,u=n,l=t;if(t=Kt,u.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var a=l,c=u,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var g=Sw(s);if(g!==null){g.flags&=-257,Dw(g,s,u,o,t),g.mode&1&&Pw(o,a,t),t=g,l=a;var p=t.updateQueue;if(p===null){var d=new Set;d.add(l),t.updateQueue=d}else p.add(l);break e}else{if(!(t&1)){Pw(o,a,t),Mm();break e}l=Error(Q(426))}}else if(ht&&u.mode&1){var y=Sw(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),Dw(y,s,u,o,t),am(zu(l,u));break e}}o=l=zu(l,u),Mt!==4&&(Mt=2),na===null?na=[o]:na.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var m=cP(o,l,t);vw(o,m);break e;case 1:u=l;var v=o.type,w=o.stateNode;if(!(o.flags&128)&&(typeof v.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(ao===null||!ao.has(w)))){o.flags|=65536,t&=-t,o.lanes|=t;var E=fP(o,u,t);vw(o,E);break e}}o=o.return}while(o!==null)}RP(n)}catch(S){t=S,Pt===n&&n!==null&&(Pt=n=n.return);continue}break}while(!0)}function BP(){var e=hh.current;return hh.current=fh,e===null?fh:e}function Mm(){(Mt===0||Mt===3||Mt===2)&&(Mt=4),$t===null||!(xs&268435455)&&!(wd&268435455)||qi($t,Kt)}function ph(e,t){var n=We;We|=2;var r=BP();($t!==e||Kt!==t)&&(fi=null,cs(e,t));do try{O8();break}catch(i){AP(e,i)}while(!0);if(fm(),We=n,hh.current=r,Pt!==null)throw Error(Q(261));return $t=null,Kt=0,Mt}function O8(){for(;Pt!==null;)MP(Pt)}function F8(){for(;Pt!==null&&!i4();)MP(Pt)}function MP(e){var t=OP(e.alternate,e,_n);e.memoizedProps=e.pendingProps,t===null?RP(e):Pt=t,Sm.current=null}function RP(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=T8(n,t),n!==null){n.flags&=32767,Pt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Mt=6,Pt=null;return}}else if(n=D8(n,t,_n),n!==null){Pt=n;return}if(t=t.sibling,t!==null){Pt=t;return}Pt=t=e}while(t!==null);Mt===0&&(Mt=5)}function Ko(e,t,n){var r=qe,i=hr.transition;try{hr.transition=null,qe=1,b8(e,t,n,r)}finally{hr.transition=i,qe=r}return null}function b8(e,t,n,r){do Ou();while(eo!==null);if(We&6)throw Error(Q(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Q(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(g4(e,o),e===$t&&(Pt=$t=null,Kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xc||(Xc=!0,FP(qf,function(){return Ou(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=hr.transition,hr.transition=null;var s=qe;qe=1;var u=We;We|=4,Sm.current=null,B8(e,n),SP(n,e),e8(n1),Qf=!!t1,n1=t1=null,e.current=n,M8(n),o4(),We=u,qe=s,hr.transition=o}else e.current=n;if(Xc&&(Xc=!1,eo=e,gh=i),o=e.pendingLanes,o===0&&(ao=null),l4(n.stateNode),Mn(e,Et()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(dh)throw dh=!1,e=E1,E1=null,e;return gh&1&&e.tag!==0&&Ou(),o=e.pendingLanes,o&1?e===P1?ra++:(ra=0,P1=e):ra=0,Ro(),null}function Ou(){if(eo!==null){var e=c3(gh),t=hr.transition,n=qe;try{if(hr.transition=null,qe=16>e?16:e,eo===null)var r=!1;else{if(e=eo,eo=null,gh=0,We&6)throw Error(Q(331));var i=We;for(We|=4,ue=e.current;ue!==null;){var o=ue,s=o.child;if(ue.flags&16){var u=o.deletions;if(u!==null){for(var l=0;l<u.length;l++){var a=u[l];for(ue=a;ue!==null;){var c=ue;switch(c.tag){case 0:case 11:case 15:ta(8,c,o)}var f=c.child;if(f!==null)f.return=c,ue=f;else for(;ue!==null;){c=ue;var h=c.sibling,g=c.return;if(xP(c),c===a){ue=null;break}if(h!==null){h.return=g,ue=h;break}ue=g}}}var p=o.alternate;if(p!==null){var d=p.child;if(d!==null){p.child=null;do{var y=d.sibling;d.sibling=null,d=y}while(d!==null)}}ue=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,ue=s;else e:for(;ue!==null;){if(o=ue,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ta(9,o,o.return)}var m=o.sibling;if(m!==null){m.return=o.return,ue=m;break e}ue=o.return}}var v=e.current;for(ue=v;ue!==null;){s=ue;var w=s.child;if(s.subtreeFlags&2064&&w!==null)w.return=s,ue=w;else e:for(s=v;ue!==null;){if(u=ue,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:yd(9,u)}}catch(S){wt(u,u.return,S)}if(u===s){ue=null;break e}var E=u.sibling;if(E!==null){E.return=u.return,ue=E;break e}ue=u.return}}if(We=i,Ro(),qr&&typeof qr.onPostCommitFiberRoot=="function")try{qr.onPostCommitFiberRoot(cd,e)}catch{}r=!0}return r}finally{qe=n,hr.transition=t}}return!1}function Nw(e,t,n){t=zu(n,t),t=cP(e,t,1),e=lo(e,t,1),t=hn(),e!==null&&(sc(e,1,t),Mn(e,t))}function wt(e,t,n){if(e.tag===3)Nw(e,e,n);else for(;t!==null;){if(t.tag===3){Nw(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ao===null||!ao.has(r))){e=zu(n,e),e=fP(t,e,1),t=lo(t,e,1),e=hn(),t!==null&&(sc(t,1,e),Mn(t,e));break}}t=t.return}}function I8(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=hn(),e.pingedLanes|=e.suspendedLanes&n,$t===e&&(Kt&n)===n&&(Mt===4||Mt===3&&(Kt&130023424)===Kt&&500>Et()-Tm?cs(e,0):Dm|=n),Mn(e,t)}function kP(e,t){t===0&&(e.mode&1?(t=Gc,Gc<<=1,!(Gc&130023424)&&(Gc=4194304)):t=1);var n=hn();e=Bi(e,t),e!==null&&(sc(e,t,n),Mn(e,n))}function L8(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),kP(e,n)}function G8(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Q(314))}r!==null&&r.delete(t),kP(e,n)}var OP;OP=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||An.current)Pn=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Pn=!1,S8(e,t,n);Pn=!!(e.flags&131072)}else Pn=!1,ht&&t.flags&1048576&&L3(t,oh,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Af(e,t),e=t.pendingProps;var i=$u(t,rn.current);ku(t,n),i=wm(null,t,r,e,i,n);var o=Cm();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Bn(r)?(o=!0,rh(t)):o=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gm(t),i.updater=vd,t.stateNode=i,i._reactInternals=t,f1(t,r,e,n),t=g1(null,t,r,!0,o,n)):(t.tag=0,ht&&o&&um(t),an(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Af(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=H8(r),e=Sr(r,e),i){case 0:t=d1(null,t,r,e,n);break e;case 1:t=Bw(null,t,r,e,n);break e;case 11:t=Tw(null,t,r,e,n);break e;case 14:t=Aw(null,t,r,Sr(r.type,e),n);break e}throw Error(Q(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Sr(r,i),d1(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Sr(r,i),Bw(e,t,r,i,n);case 3:e:{if(pP(t),e===null)throw Error(Q(387));r=t.pendingProps,o=t.memoizedState,i=o.element,j3(e,t),lh(t,r,null,n);var s=t.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){i=zu(Error(Q(423)),t),t=Mw(e,t,r,n,i);break e}else if(r!==i){i=zu(Error(Q(424)),t),t=Mw(e,t,r,n,i);break e}else for(Wn=uo(t.stateNode.containerInfo.firstChild),Vn=t,ht=!0,Br=null,n=$3(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_u(),r===i){t=Mi(e,t,n);break e}an(e,t,r,n)}t=t.child}return t;case 5:return W3(t),e===null&&l1(t),r=t.type,i=t.pendingProps,o=e!==null?e.memoizedProps:null,s=i.children,r1(r,i)?s=null:o!==null&&r1(r,o)&&(t.flags|=32),gP(e,t),an(e,t,s,n),t.child;case 6:return e===null&&l1(t),null;case 13:return mP(e,t,n);case 4:return pm(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ju(t,null,r,n):an(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Sr(r,i),Tw(e,t,r,i,n);case 7:return an(e,t,t.pendingProps,n),t.child;case 8:return an(e,t,t.pendingProps.children,n),t.child;case 12:return an(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,s=i.value,tt(sh,r._currentValue),r._currentValue=s,o!==null)if(Lr(o.value,s)){if(o.children===i.children&&!An.current){t=Mi(e,t,n);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var u=o.dependencies;if(u!==null){s=o.child;for(var l=u.firstContext;l!==null;){if(l.context===r){if(o.tag===1){l=Ei(-1,n&-n),l.tag=2;var a=o.updateQueue;if(a!==null){a=a.shared;var c=a.pending;c===null?l.next=l:(l.next=c.next,c.next=l),a.pending=l}}o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),a1(o.return,n,t),u.lanes|=n;break}l=l.next}}else if(o.tag===10)s=o.type===t.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(Q(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),a1(s,n,t),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===t){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}an(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,ku(t,n),i=yr(i),r=r(i),t.flags|=1,an(e,t,r,n),t.child;case 14:return r=t.type,i=Sr(r,t.pendingProps),i=Sr(r.type,i),Aw(e,t,r,i,n);case 15:return hP(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Sr(r,i),Af(e,t),t.tag=1,Bn(r)?(e=!0,rh(t)):e=!1,ku(t,n),aP(t,r,i),f1(t,r,i,n),g1(null,t,r,!0,e,n);case 19:return vP(e,t,n);case 22:return dP(e,t,n)}throw Error(Q(156,t.tag))};function FP(e,t){return s3(e,t)}function N8(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ur(e,t,n,r){return new N8(e,t,n,r)}function Rm(e){return e=e.prototype,!(!e||!e.isReactComponent)}function H8(e){if(typeof e=="function")return Rm(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Yp)return 11;if(e===qp)return 14}return 2}function fo(e,t){var n=e.alternate;return n===null?(n=ur(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rf(e,t,n,r,i,o){var s=2;if(r=e,typeof e=="function")Rm(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case uu:return fs(n.children,i,o,t);case Kp:s=8,i|=8;break;case Ig:return e=ur(12,n,t,i|2),e.elementType=Ig,e.lanes=o,e;case Lg:return e=ur(13,n,t,i),e.elementType=Lg,e.lanes=o,e;case Gg:return e=ur(19,n,t,i),e.elementType=Gg,e.lanes=o,e;case WE:return Cd(n,i,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case _E:s=10;break e;case jE:s=9;break e;case Yp:s=11;break e;case qp:s=14;break e;case zi:s=16,r=null;break e}throw Error(Q(130,e==null?e:typeof e,""))}return t=ur(s,n,t,i),t.elementType=e,t.type=r,t.lanes=o,t}function fs(e,t,n,r){return e=ur(7,e,r,t),e.lanes=n,e}function Cd(e,t,n,r){return e=ur(22,e,r,t),e.elementType=WE,e.lanes=n,e.stateNode={isHidden:!1},e}function N0(e,t,n){return e=ur(6,e,null,t),e.lanes=n,e}function H0(e,t,n){return t=ur(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $8(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=w0(0),this.expirationTimes=w0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=w0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function km(e,t,n,r,i,o,s,u,l){return e=new $8(e,t,n,u,l),t===1?(t=1,o===!0&&(t|=8)):t=0,o=ur(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gm(o),e}function _8(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:su,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function bP(e){if(!e)return mo;e=e._reactInternals;e:{if(js(e)!==e||e.tag!==1)throw Error(Q(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Bn(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Q(171))}if(e.tag===1){var n=e.type;if(Bn(n))return b3(e,n,t)}return t}function IP(e,t,n,r,i,o,s,u,l){return e=km(n,r,!0,e,i,o,s,u,l),e.context=bP(null),n=e.current,r=hn(),i=co(n),o=Ei(r,i),o.callback=t??null,lo(n,o,i),e.current.lanes=i,sc(e,i,r),Mn(e,r),e}function xd(e,t,n,r){var i=t.current,o=hn(),s=co(i);return n=bP(n),t.context===null?t.context=n:t.pendingContext=n,t=Ei(o,s),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=lo(i,t,s),e!==null&&(br(e,i,s,o),Sf(e,i,s)),s}function mh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Hw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Om(e,t){Hw(e,t),(e=e.alternate)&&Hw(e,t)}function j8(){return null}var LP=typeof reportError=="function"?reportError:function(e){console.error(e)};function Fm(e){this._internalRoot=e}Ed.prototype.render=Fm.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Q(409));xd(e,t,null,null)};Ed.prototype.unmount=Fm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Es(function(){xd(null,e,null,null)}),t[Ai]=null}};function Ed(e){this._internalRoot=e}Ed.prototype.unstable_scheduleHydration=function(e){if(e){var t=d3();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Yi.length&&t!==0&&t<Yi[n].priority;n++);Yi.splice(n,0,e),n===0&&p3(e)}};function bm(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Pd(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function $w(){}function W8(e,t,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var a=mh(s);o.call(a)}}var s=IP(t,r,e,0,null,!1,!1,"",$w);return e._reactRootContainer=s,e[Ai]=s.current,Sa(e.nodeType===8?e.parentNode:e),Es(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var u=r;r=function(){var a=mh(l);u.call(a)}}var l=km(e,0,!1,null,null,!1,!1,"",$w);return e._reactRootContainer=l,e[Ai]=l.current,Sa(e.nodeType===8?e.parentNode:e),Es(function(){xd(t,l,n,r)}),l}function Sd(e,t,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var u=i;i=function(){var l=mh(s);u.call(l)}}xd(t,s,e,i)}else s=W8(n,t,e,i,r);return mh(s)}f3=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=jl(t.pendingLanes);n!==0&&(Jp(t,n|1),Mn(t,Et()),!(We&6)&&(Vu=Et()+500,Ro()))}break;case 13:Es(function(){var r=Bi(e,1);if(r!==null){var i=hn();br(r,e,1,i)}}),Om(e,1)}};em=function(e){if(e.tag===13){var t=Bi(e,134217728);if(t!==null){var n=hn();br(t,e,134217728,n)}Om(e,134217728)}};h3=function(e){if(e.tag===13){var t=co(e),n=Bi(e,t);if(n!==null){var r=hn();br(n,e,t,r)}Om(e,t)}};d3=function(){return qe};g3=function(e,t){var n=qe;try{return qe=e,t()}finally{qe=n}};Xg=function(e,t,n){switch(t){case"input":if($g(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=gd(r);if(!i)throw Error(Q(90));VE(r),$g(r,i)}}}break;case"textarea":XE(e,n);break;case"select":t=n.value,t!=null&&Au(e,!!n.multiple,t,!1)}};e3=Am;t3=Es;var z8={usingClientEntryPoint:!1,Events:[lc,fu,gd,QE,JE,Am]},Bl={findFiberByHostInstance:ns,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V8={bundleType:Bl.bundleType,version:Bl.version,rendererPackageName:Bl.rendererPackageName,rendererConfig:Bl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Gi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=i3(e),e===null?null:e.stateNode},findFiberByHostInstance:Bl.findFiberByHostInstance||j8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Kc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Kc.isDisabled&&Kc.supportsFiber)try{cd=Kc.inject(V8),qr=Kc}catch{}}Jn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=z8;Jn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bm(t))throw Error(Q(200));return _8(e,t,null,n)};Jn.createRoot=function(e,t){if(!bm(e))throw Error(Q(299));var n=!1,r="",i=LP;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=km(e,1,!1,null,null,n,!1,r,i),e[Ai]=t.current,Sa(e.nodeType===8?e.parentNode:e),new Fm(t)};Jn.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Q(188)):(e=Object.keys(e).join(","),Error(Q(268,e)));return e=i3(t),e=e===null?null:e.stateNode,e};Jn.flushSync=function(e){return Es(e)};Jn.hydrate=function(e,t,n){if(!Pd(t))throw Error(Q(200));return Sd(null,e,t,!0,n)};Jn.hydrateRoot=function(e,t,n){if(!bm(e))throw Error(Q(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=LP;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),t=IP(t,null,e,1,n??null,i,!1,o,s),e[Ai]=t.current,Sa(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ed(t)};Jn.render=function(e,t,n){if(!Pd(t))throw Error(Q(200));return Sd(null,e,t,!1,n)};Jn.unmountComponentAtNode=function(e){if(!Pd(e))throw Error(Q(40));return e._reactRootContainer?(Es(function(){Sd(null,null,e,!1,function(){e._reactRootContainer=null,e[Ai]=null})}),!0):!1};Jn.unstable_batchedUpdates=Am;Jn.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Pd(n))throw Error(Q(200));if(e==null||e._reactInternals===void 0)throw Error(Q(38));return Sd(e,t,n,!1,r)};Jn.version="18.3.1-next-f1338f8080-20240426";function GP(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(GP)}catch(e){console.error(e)}}GP(),GE.exports=Jn;var Dd=GE.exports;const U8=$s(Dd);var cc,_w=Dd;cc=_w.createRoot,_w.hydrateRoot;const X8=[{id:"Sfftf",type:"geometry",shape:"terminal",angle:0,opacity:1,textHeight:20,text:{children:[{text:"End"}],align:"center"},points:[[-124.8046875,612.1328125],[-4.8046875,672.1328125]],strokeWidth:2,strokeColor:"#333333"},{id:"aMJWD",type:"geometry",shape:"process",angle:0,opacity:1,textHeight:20,text:{children:[{text:"Process"}],align:"center"},points:[[80.1953125,452.1328125],[200.1953125,512.1328125]],strokeWidth:2,strokeColor:"#333333"},{id:"FHSxH",type:"geometry",shape:"decision",angle:0,opacity:1,textHeight:20,text:{children:[{text:"Yes/No"}],align:"center"},points:[[-134.8046875,447.1328125],[5.1953125,517.1328125]],strokeWidth:2,strokeColor:"#333333"},{id:"xnnhM",type:"geometry",shape:"process",angle:0,opacity:1,textHeight:20,text:{children:[{text:"Process"}],align:"center"},points:[[-124.8046875,332.1328125],[-4.8046875,392.1328125]],strokeWidth:2,strokeColor:"#333333"},{id:"FAkXk",type:"geometry",shape:"terminal",angle:0,opacity:1,textHeight:20,text:{children:[{text:"Start"}],align:"center"},points:[[-124.8046875,217.1328125],[-4.8046875,277.1328125]],strokeWidth:2,strokeColor:"#333333"},{id:"mrdfi",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"aMJWD"},texts:[],target:{marker:"arrow",connection:[1,.5],boundId:"Sfftf"},opacity:1,points:[[140.1953125,512.1328125],[-4.8046875,642.1328125]],strokeWidth:2,strokeColor:"#333333"},{id:"bjjcw",type:"line",shape:"elbow",source:{marker:"none",connection:[1,.5],boundId:"FHSxH"},texts:[{text:{children:[{text:"No"}]},position:.5,width:14,height:20}],target:{marker:"arrow",connection:[0,.5],boundId:"aMJWD"},opacity:1,points:[[5.1953125,482.1328125],[80.1953125,482.1328125]],strokeWidth:2,strokeColor:"#333333"},{id:"mnzKm",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"FHSxH"},texts:[{text:{children:[{text:"Yes"}]},position:.5,width:14,height:20}],target:{marker:"arrow",connection:[.5,0],boundId:"Sfftf"},opacity:1,points:[[-64.8046875,517.1328125],[-64.8046875,612.1328125]],strokeWidth:2,strokeColor:"#333333"},{id:"bJmWK",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"xnnhM"},texts:[],target:{marker:"arrow",connection:[.5,0],boundId:"FHSxH"},opacity:1,points:[[-64.8046875,392.1328125],[-64.8046875,447.1328125]],strokeWidth:2,strokeColor:"#333333"},{id:"zZtTs",type:"line",shape:"elbow",source:{marker:"none",connection:[.5,1],boundId:"FAkXk"},texts:[],target:{marker:"arrow",connection:[.5,0],boundId:"xnnhM"},opacity:1,points:[[-64.8046875,277.1328125],[-64.8046875,332.1328125]],strokeWidth:2,strokeColor:"#333333"},{type:"mindmap",id:"rzdDJ",rightNodeCount:4,data:{topic:{children:[{text:"Mind"}]}},children:[{id:"WKQyj",data:{topic:{children:[{text:"View 1"}]}},children:[{id:"RYSRd",data:{topic:{children:[{text:""}]}},children:[{id:"nDBRj",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"PWzAD",data:{topic:{children:[{text:"View 2"}]}},children:[{id:"bTRmh",data:{topic:{children:[{text:""}]}},children:[{id:"bnZEJ",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"nJTYp",data:{topic:{children:[{text:"View 3"}]}},children:[{id:"GtyaH",data:{topic:{children:[{text:""}]}},children:[{id:"JsPEN",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20},{id:"aCpyY",data:{topic:{children:[{text:"View 4"}]}},children:[{id:"iHynm",data:{topic:{children:[{text:""}]}},children:[{id:"TiZGR",data:{topic:{children:[{text:""}]}},children:[],width:14,height:20}],width:14,height:20}],width:42,height:20}],width:72,height:25,isRoot:!0,points:[[403.06494140625,437.6953125]]}];function T1(e,t,n){if(e&&e.length){const[r,i]=t,o=Math.PI/180*n,s=Math.cos(o),u=Math.sin(o);for(const l of e){const[a,c]=l;l[0]=(a-r)*s-(c-i)*u+r,l[1]=(a-r)*u+(c-i)*s+i}}}function K8(e,t,n){const r=[];e.forEach(i=>r.push(...i)),T1(r,t,n)}function Y8(e,t){return e[0]===t[0]&&e[1]===t[1]}function q8(e,t,n,r=1){const i=n,o=Math.max(t,.1),s=e[0]&&e[0][0]&&typeof e[0][0]=="number"?[e]:e,u=[0,0];if(i)for(const a of s)T1(a,u,i);const l=Z8(s,o,r);if(i){for(const a of s)T1(a,u,-i);K8(l,u,-i)}return l}function Z8(e,t,n){const r=[];for(const a of e){const c=[...a];Y8(c[0],c[c.length-1])||c.push([c[0][0],c[0][1]]),c.length>2&&r.push(c)}const i=[];t=Math.max(t,.1);const o=[];for(const a of r)for(let c=0;c<a.length-1;c++){const f=a[c],h=a[c+1];if(f[1]!==h[1]){const g=Math.min(f[1],h[1]);o.push({ymin:g,ymax:Math.max(f[1],h[1]),x:g===f[1]?f[0]:h[0],islope:(h[0]-f[0])/(h[1]-f[1])})}}if(o.sort((a,c)=>a.ymin<c.ymin?-1:a.ymin>c.ymin?1:a.x<c.x?-1:a.x>c.x?1:a.ymax===c.ymax?0:(a.ymax-c.ymax)/Math.abs(a.ymax-c.ymax)),!o.length)return i;let s=[],u=o[0].ymin,l=0;for(;s.length||o.length;){if(o.length){let a=-1;for(let f=0;f<o.length&&!(o[f].ymin>u);f++)a=f;o.splice(0,a+1).forEach(f=>{s.push({s:u,edge:f})})}if(s=s.filter(a=>!(a.edge.ymax<=u)),s.sort((a,c)=>a.edge.x===c.edge.x?0:(a.edge.x-c.edge.x)/Math.abs(a.edge.x-c.edge.x)),(n!==1||l%t===0)&&s.length>1)for(let a=0;a<s.length;a=a+2){const c=a+1;if(c>=s.length)break;const f=s[a].edge,h=s[c].edge;i.push([[Math.round(f.x),u],[Math.round(h.x),u]])}u+=n,s.forEach(a=>{a.edge.x=a.edge.x+n*a.edge.islope}),l++}return i}function fc(e,t){var n;const r=t.hachureAngle+90;let i=t.hachureGap;i<0&&(i=t.strokeWidth*4),i=Math.round(Math.max(i,.1));let o=1;return t.roughness>=1&&(((n=t.randomizer)===null||n===void 0?void 0:n.next())||Math.random())>.7&&(o=i),q8(e,i,r,o||1)}class Im{constructor(t){this.helper=t}fillPolygons(t,n){return this._fillPolygons(t,n)}_fillPolygons(t,n){const r=fc(t,n);return{type:"fillSketch",ops:this.renderLines(r,n)}}renderLines(t,n){const r=[];for(const i of t)r.push(...this.helper.doubleLineOps(i[0][0],i[0][1],i[1][0],i[1][1],n));return r}}function Td(e){const t=e[0],n=e[1];return Math.sqrt(Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))}class Q8 extends Im{fillPolygons(t,n){let r=n.hachureGap;r<0&&(r=n.strokeWidth*4),r=Math.max(r,.1);const i=Object.assign({},n,{hachureGap:r}),o=fc(t,i),s=Math.PI/180*n.hachureAngle,u=[],l=r*.5*Math.cos(s),a=r*.5*Math.sin(s);for(const[f,h]of o)Td([f,h])&&u.push([[f[0]-l,f[1]+a],[...h]],[[f[0]+l,f[1]-a],[...h]]);return{type:"fillSketch",ops:this.renderLines(u,n)}}}class J8 extends Im{fillPolygons(t,n){const r=this._fillPolygons(t,n),i=Object.assign({},n,{hachureAngle:n.hachureAngle+90}),o=this._fillPolygons(t,i);return r.ops=r.ops.concat(o.ops),r}}class eB{constructor(t){this.helper=t}fillPolygons(t,n){n=Object.assign({},n,{hachureAngle:0});const r=fc(t,n);return this.dotsOnLines(r,n)}dotsOnLines(t,n){const r=[];let i=n.hachureGap;i<0&&(i=n.strokeWidth*4),i=Math.max(i,.1);let o=n.fillWeight;o<0&&(o=n.strokeWidth/2);const s=i/4;for(const u of t){const l=Td(u),a=l/i,c=Math.ceil(a)-1,f=l-c*i,h=(u[0][0]+u[1][0])/2-i/4,g=Math.min(u[0][1],u[1][1]);for(let p=0;p<c;p++){const d=g+f+p*i,y=h-s+Math.random()*2*s,m=d-s+Math.random()*2*s,v=this.helper.ellipse(y,m,o,o,n);r.push(...v.ops)}}return{type:"fillSketch",ops:r}}}class tB{constructor(t){this.helper=t}fillPolygons(t,n){const r=fc(t,n);return{type:"fillSketch",ops:this.dashedLine(r,n)}}dashedLine(t,n){const r=n.dashOffset<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashOffset,i=n.dashGap<0?n.hachureGap<0?n.strokeWidth*4:n.hachureGap:n.dashGap,o=[];return t.forEach(s=>{const u=Td(s),l=Math.floor(u/(r+i)),a=(u+i-l*(r+i))/2;let c=s[0],f=s[1];c[0]>f[0]&&(c=s[1],f=s[0]);const h=Math.atan((f[1]-c[1])/(f[0]-c[0]));for(let g=0;g<l;g++){const p=g*(r+i),d=p+r,y=[c[0]+p*Math.cos(h)+a*Math.cos(h),c[1]+p*Math.sin(h)+a*Math.sin(h)],m=[c[0]+d*Math.cos(h)+a*Math.cos(h),c[1]+d*Math.sin(h)+a*Math.sin(h)];o.push(...this.helper.doubleLineOps(y[0],y[1],m[0],m[1],n))}}),o}}class nB{constructor(t){this.helper=t}fillPolygons(t,n){const r=n.hachureGap<0?n.strokeWidth*4:n.hachureGap,i=n.zigzagOffset<0?r:n.zigzagOffset;n=Object.assign({},n,{hachureGap:r+i});const o=fc(t,n);return{type:"fillSketch",ops:this.zigzagLines(o,i,n)}}zigzagLines(t,n,r){const i=[];return t.forEach(o=>{const s=Td(o),u=Math.round(s/(2*n));let l=o[0],a=o[1];l[0]>a[0]&&(l=o[1],a=o[0]);const c=Math.atan((a[1]-l[1])/(a[0]-l[0]));for(let f=0;f<u;f++){const h=f*2*n,g=(f+1)*2*n,p=Math.sqrt(2*Math.pow(n,2)),d=[l[0]+h*Math.cos(c),l[1]+h*Math.sin(c)],y=[l[0]+g*Math.cos(c),l[1]+g*Math.sin(c)],m=[d[0]+p*Math.cos(c+Math.PI/4),d[1]+p*Math.sin(c+Math.PI/4)];i.push(...this.helper.doubleLineOps(d[0],d[1],m[0],m[1],r),...this.helper.doubleLineOps(m[0],m[1],y[0],y[1],r))}}),i}}const wn={};function rB(e,t){let n=e.fillStyle||"hachure";if(!wn[n])switch(n){case"zigzag":wn[n]||(wn[n]=new Q8(t));break;case"cross-hatch":wn[n]||(wn[n]=new J8(t));break;case"dots":wn[n]||(wn[n]=new eB(t));break;case"dashed":wn[n]||(wn[n]=new tB(t));break;case"zigzag-line":wn[n]||(wn[n]=new nB(t));break;case"hachure":default:n="hachure",wn[n]||(wn[n]=new Im(t));break}return wn[n]}function iB(){return Math.floor(Math.random()*2**31)}class oB{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const sB=0,A1=1,NP=2,Yc={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function uB(e){const t=new Array;for(;e!=="";)if(e.match(/^([ \t\r\n,]+)/))e=e.substr(RegExp.$1.length);else if(e.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:sB,text:RegExp.$1},e=e.substr(RegExp.$1.length);else if(e.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:A1,text:`${parseFloat(RegExp.$1)}`},e=e.substr(RegExp.$1.length);else return[];return t[t.length]={type:NP,text:""},t}function $0(e,t){return e.type===t}function Lm(e){const t=[],n=uB(e);let r="BOD",i=0,o=n[i];for(;!$0(o,NP);){let s=0;const u=[];if(r==="BOD")if(o.text==="M"||o.text==="m")i++,s=Yc[o.text],r=o.text;else return Lm("M0,0"+e);else $0(o,A1)?s=Yc[r]:(i++,s=Yc[o.text],r=o.text);if(i+s<n.length){for(let l=i;l<i+s;l++){const a=n[l];if($0(a,A1))u[u.length]=+a.text;else throw new Error("Param not a number: "+r+","+a.text)}if(typeof Yc[r]=="number"){const l={key:r,data:u};t.push(l),i+=s,o=n[i],r==="M"&&(r="L"),r==="m"&&(r="l")}else throw new Error("Bad segment: "+r)}else throw new Error("Path data ended short")}return t}function HP(e){let t=0,n=0,r=0,i=0;const o=[];for(const{key:s,data:u}of e)switch(s){case"M":o.push({key:"M",data:[...u]}),[t,n]=u,[r,i]=u;break;case"m":t+=u[0],n+=u[1],o.push({key:"M",data:[t,n]}),r=t,i=n;break;case"L":o.push({key:"L",data:[...u]}),[t,n]=u;break;case"l":t+=u[0],n+=u[1],o.push({key:"L",data:[t,n]});break;case"C":o.push({key:"C",data:[...u]}),t=u[4],n=u[5];break;case"c":{const l=u.map((a,c)=>c%2?a+n:a+t);o.push({key:"C",data:l}),t=l[4],n=l[5];break}case"Q":o.push({key:"Q",data:[...u]}),t=u[2],n=u[3];break;case"q":{const l=u.map((a,c)=>c%2?a+n:a+t);o.push({key:"Q",data:l}),t=l[2],n=l[3];break}case"A":o.push({key:"A",data:[...u]}),t=u[5],n=u[6];break;case"a":t+=u[5],n+=u[6],o.push({key:"A",data:[u[0],u[1],u[2],u[3],u[4],t,n]});break;case"H":o.push({key:"H",data:[...u]}),t=u[0];break;case"h":t+=u[0],o.push({key:"H",data:[t]});break;case"V":o.push({key:"V",data:[...u]}),n=u[0];break;case"v":n+=u[0],o.push({key:"V",data:[n]});break;case"S":o.push({key:"S",data:[...u]}),t=u[2],n=u[3];break;case"s":{const l=u.map((a,c)=>c%2?a+n:a+t);o.push({key:"S",data:l}),t=l[2],n=l[3];break}case"T":o.push({key:"T",data:[...u]}),t=u[0],n=u[1];break;case"t":t+=u[0],n+=u[1],o.push({key:"T",data:[t,n]});break;case"Z":case"z":o.push({key:"Z",data:[]}),t=r,n=i;break}return o}function $P(e){const t=[];let n="",r=0,i=0,o=0,s=0,u=0,l=0;for(const{key:a,data:c}of e){switch(a){case"M":t.push({key:"M",data:[...c]}),[r,i]=c,[o,s]=c;break;case"C":t.push({key:"C",data:[...c]}),r=c[4],i=c[5],u=c[2],l=c[3];break;case"L":t.push({key:"L",data:[...c]}),[r,i]=c;break;case"H":r=c[0],t.push({key:"L",data:[r,i]});break;case"V":i=c[0],t.push({key:"L",data:[r,i]});break;case"S":{let f=0,h=0;n==="C"||n==="S"?(f=r+(r-u),h=i+(i-l)):(f=r,h=i),t.push({key:"C",data:[f,h,...c]}),u=c[0],l=c[1],r=c[2],i=c[3];break}case"T":{const[f,h]=c;let g=0,p=0;n==="Q"||n==="T"?(g=r+(r-u),p=i+(i-l)):(g=r,p=i);const d=r+2*(g-r)/3,y=i+2*(p-i)/3,m=f+2*(g-f)/3,v=h+2*(p-h)/3;t.push({key:"C",data:[d,y,m,v,f,h]}),u=g,l=p,r=f,i=h;break}case"Q":{const[f,h,g,p]=c,d=r+2*(f-r)/3,y=i+2*(h-i)/3,m=g+2*(f-g)/3,v=p+2*(h-p)/3;t.push({key:"C",data:[d,y,m,v,g,p]}),u=f,l=h,r=g,i=p;break}case"A":{const f=Math.abs(c[0]),h=Math.abs(c[1]),g=c[2],p=c[3],d=c[4],y=c[5],m=c[6];f===0||h===0?(t.push({key:"C",data:[r,i,y,m,y,m]}),r=y,i=m):(r!==y||i!==m)&&(_P(r,i,y,m,f,h,g,p,d).forEach(function(w){t.push({key:"C",data:w})}),r=y,i=m);break}case"Z":t.push({key:"Z",data:[]}),r=o,i=s;break}n=a}return t}function lB(e){return Math.PI*e/180}function Ml(e,t,n){const r=e*Math.cos(n)-t*Math.sin(n),i=e*Math.sin(n)+t*Math.cos(n);return[r,i]}function _P(e,t,n,r,i,o,s,u,l,a){const c=lB(s);let f=[],h=0,g=0,p=0,d=0;if(a)[h,g,p,d]=a;else{[e,t]=Ml(e,t,-c),[n,r]=Ml(n,r,-c);const L=(e-n)/2,W=(t-r)/2;let z=L*L/(i*i)+W*W/(o*o);z>1&&(z=Math.sqrt(z),i=z*i,o=z*o);const _=u===l?-1:1,J=i*i,Z=o*o,N=J*Z-J*W*W-Z*L*L,F=J*W*W+Z*L*L,U=_*Math.sqrt(Math.abs(N/F));p=U*i*W/o+(e+n)/2,d=U*-o*L/i+(t+r)/2,h=Math.asin(parseFloat(((t-d)/o).toFixed(9))),g=Math.asin(parseFloat(((r-d)/o).toFixed(9))),e<p&&(h=Math.PI-h),n<p&&(g=Math.PI-g),h<0&&(h=Math.PI*2+h),g<0&&(g=Math.PI*2+g),l&&h>g&&(h=h-Math.PI*2),!l&&g>h&&(g=g-Math.PI*2)}let y=g-h;if(Math.abs(y)>Math.PI*120/180){const L=g,W=n,z=r;l&&g>h?g=h+Math.PI*120/180*1:g=h+Math.PI*120/180*-1,n=p+i*Math.cos(g),r=d+o*Math.sin(g),f=_P(n,r,W,z,i,o,s,0,l,[g,L,p,d])}y=g-h;const m=Math.cos(h),v=Math.sin(h),w=Math.cos(g),E=Math.sin(g),S=Math.tan(y/4),T=4/3*i*S,B=4/3*o*S,R=[e,t],b=[e+T*v,t-B*m],O=[n+T*E,r-B*w],V=[n,r];if(b[0]=2*R[0]-b[0],b[1]=2*R[1]-b[1],a)return[b,O,V].concat(f);{f=[b,O,V].concat(f);const L=[];for(let W=0;W<f.length;W+=3){const z=Ml(f[W][0],f[W][1],c),_=Ml(f[W+1][0],f[W+1][1],c),J=Ml(f[W+2][0],f[W+2][1],c);L.push([z[0],z[1],_[0],_[1],J[0],J[1]])}return L}}const aB={randOffset:gB,randOffsetWithRange:pB,ellipse:hB,doubleLineOps:mB};function jP(e,t,n,r,i){return{type:"path",ops:vo(e,t,n,r,i)}}function kf(e,t,n){const r=(e||[]).length;if(r>2){const i=[];for(let o=0;o<r-1;o++)i.push(...vo(e[o][0],e[o][1],e[o+1][0],e[o+1][1],n));return t&&i.push(...vo(e[r-1][0],e[r-1][1],e[0][0],e[0][1],n)),{type:"path",ops:i}}else if(r===2)return jP(e[0][0],e[0][1],e[1][0],e[1][1],n);return{type:"path",ops:[]}}function cB(e,t){return kf(e,!0,t)}function fB(e,t,n,r,i){const o=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];return cB(o,i)}function jw(e,t){if(e.length){const r=typeof e[0][0]=="number"?[e]:e,i=qc(r[0],1*(1+t.roughness*.2),t),o=t.disableMultiStroke?[]:qc(r[0],1.5*(1+t.roughness*.22),Vw(t));for(let s=1;s<r.length;s++){const u=r[s];if(u.length){const l=qc(u,1*(1+t.roughness*.2),t),a=t.disableMultiStroke?[]:qc(u,1.5*(1+t.roughness*.22),Vw(t));for(const c of l)c.op!=="move"&&i.push(c);for(const c of a)c.op!=="move"&&o.push(c)}}return{type:"path",ops:i.concat(o)}}return{type:"path",ops:[]}}function hB(e,t,n,r,i){const o=WP(n,r,i);return B1(e,t,i,o).opset}function WP(e,t,n){const r=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(e/2,2)+Math.pow(t/2,2))/2)),i=Math.ceil(Math.max(n.curveStepCount,n.curveStepCount/Math.sqrt(200)*r)),o=Math.PI*2/i;let s=Math.abs(e/2),u=Math.abs(t/2);const l=1-n.curveFitting;return s+=we(s*l,n),u+=we(u*l,n),{increment:o,rx:s,ry:u}}function B1(e,t,n,r){const[i,o]=Uw(r.increment,e,t,r.rx,r.ry,1,r.increment*vh(.1,vh(.4,1,n),n),n);let s=yh(i,null,n);if(!n.disableMultiStroke&&n.roughness!==0){const[u]=Uw(r.increment,e,t,r.rx,r.ry,1.5,0,n),l=yh(u,null,n);s=s.concat(l)}return{estimatedPoints:o,opset:{type:"path",ops:s}}}function Ww(e,t,n,r,i,o,s,u,l){const a=e,c=t;let f=Math.abs(n/2),h=Math.abs(r/2);f+=we(f*.01,l),h+=we(h*.01,l);let g=i,p=o;for(;g<0;)g+=Math.PI*2,p+=Math.PI*2;p-g>Math.PI*2&&(g=0,p=Math.PI*2);const d=Math.PI*2/l.curveStepCount,y=Math.min(d/2,(p-g)/2),m=Xw(y,a,c,f,h,g,p,1,l);if(!l.disableMultiStroke){const v=Xw(y,a,c,f,h,g,p,1.5,l);m.push(...v)}return s&&(u?m.push(...vo(a,c,a+f*Math.cos(g),c+h*Math.sin(g),l),...vo(a,c,a+f*Math.cos(p),c+h*Math.sin(p),l)):m.push({op:"lineTo",data:[a,c]},{op:"lineTo",data:[a+f*Math.cos(g),c+h*Math.sin(g)]})),{type:"path",ops:m}}function zw(e,t){const n=$P(HP(Lm(e))),r=[];let i=[0,0],o=[0,0];for(const{key:s,data:u}of n)switch(s){case"M":{o=[u[0],u[1]],i=[u[0],u[1]];break}case"L":r.push(...vo(o[0],o[1],u[0],u[1],t)),o=[u[0],u[1]];break;case"C":{const[l,a,c,f,h,g]=u;r.push(...vB(l,a,c,f,h,g,o,t)),o=[h,g];break}case"Z":r.push(...vo(o[0],o[1],i[0],i[1],t)),o=[i[0],i[1]];break}return{type:"path",ops:r}}function _0(e,t){const n=[];for(const r of e)if(r.length){const i=t.maxRandomnessOffset||0,o=r.length;if(o>2){n.push({op:"move",data:[r[0][0]+we(i,t),r[0][1]+we(i,t)]});for(let s=1;s<o;s++)n.push({op:"lineTo",data:[r[s][0]+we(i,t),r[s][1]+we(i,t)]})}}return{type:"fillPath",ops:n}}function iu(e,t){return rB(t,aB).fillPolygons(e,t)}function dB(e,t,n,r,i,o,s){const u=e,l=t;let a=Math.abs(n/2),c=Math.abs(r/2);a+=we(a*.01,s),c+=we(c*.01,s);let f=i,h=o;for(;f<0;)f+=Math.PI*2,h+=Math.PI*2;h-f>Math.PI*2&&(f=0,h=Math.PI*2);const g=(h-f)/s.curveStepCount,p=[];for(let d=f;d<=h;d=d+g)p.push([u+a*Math.cos(d),l+c*Math.sin(d)]);return p.push([u+a*Math.cos(h),l+c*Math.sin(h)]),p.push([u,l]),iu([p],s)}function gB(e,t){return we(e,t)}function pB(e,t,n){return vh(e,t,n)}function mB(e,t,n,r,i){return vo(e,t,n,r,i,!0)}function Vw(e){const t=Object.assign({},e);return t.randomizer=void 0,e.seed&&(t.seed=e.seed+1),t}function zP(e){return e.randomizer||(e.randomizer=new oB(e.seed||0)),e.randomizer.next()}function vh(e,t,n,r=1){return n.roughness*r*(zP(n)*(t-e)+e)}function we(e,t,n=1){return vh(-e,e,t,n)}function vo(e,t,n,r,i,o=!1){const s=o?i.disableMultiStrokeFill:i.disableMultiStroke,u=M1(e,t,n,r,i,!0,!1);if(s)return u;const l=M1(e,t,n,r,i,!0,!0);return u.concat(l)}function M1(e,t,n,r,i,o,s){const u=Math.pow(e-n,2)+Math.pow(t-r,2),l=Math.sqrt(u);let a=1;l<200?a=1:l>500?a=.4:a=-.0016668*l+1.233334;let c=i.maxRandomnessOffset||0;c*c*100>u&&(c=l/10);const f=c/2,h=.2+zP(i)*.2;let g=i.bowing*i.maxRandomnessOffset*(r-t)/200,p=i.bowing*i.maxRandomnessOffset*(e-n)/200;g=we(g,i,a),p=we(p,i,a);const d=[],y=()=>we(f,i,a),m=()=>we(c,i,a),v=i.preserveVertices;return s?d.push({op:"move",data:[e+(v?0:y()),t+(v?0:y())]}):d.push({op:"move",data:[e+(v?0:we(c,i,a)),t+(v?0:we(c,i,a))]}),s?d.push({op:"bcurveTo",data:[g+e+(n-e)*h+y(),p+t+(r-t)*h+y(),g+e+2*(n-e)*h+y(),p+t+2*(r-t)*h+y(),n+(v?0:y()),r+(v?0:y())]}):d.push({op:"bcurveTo",data:[g+e+(n-e)*h+m(),p+t+(r-t)*h+m(),g+e+2*(n-e)*h+m(),p+t+2*(r-t)*h+m(),n+(v?0:m()),r+(v?0:m())]}),d}function qc(e,t,n){if(!e.length)return[];const r=[];r.push([e[0][0]+we(t,n),e[0][1]+we(t,n)]),r.push([e[0][0]+we(t,n),e[0][1]+we(t,n)]);for(let i=1;i<e.length;i++)r.push([e[i][0]+we(t,n),e[i][1]+we(t,n)]),i===e.length-1&&r.push([e[i][0]+we(t,n),e[i][1]+we(t,n)]);return yh(r,null,n)}function yh(e,t,n){const r=e.length,i=[];if(r>3){const o=[],s=1-n.curveTightness;i.push({op:"move",data:[e[1][0],e[1][1]]});for(let u=1;u+2<r;u++){const l=e[u];o[0]=[l[0],l[1]],o[1]=[l[0]+(s*e[u+1][0]-s*e[u-1][0])/6,l[1]+(s*e[u+1][1]-s*e[u-1][1])/6],o[2]=[e[u+1][0]+(s*e[u][0]-s*e[u+2][0])/6,e[u+1][1]+(s*e[u][1]-s*e[u+2][1])/6],o[3]=[e[u+1][0],e[u+1][1]],i.push({op:"bcurveTo",data:[o[1][0],o[1][1],o[2][0],o[2][1],o[3][0],o[3][1]]})}}else r===3?(i.push({op:"move",data:[e[1][0],e[1][1]]}),i.push({op:"bcurveTo",data:[e[1][0],e[1][1],e[2][0],e[2][1],e[2][0],e[2][1]]})):r===2&&i.push(...M1(e[0][0],e[0][1],e[1][0],e[1][1],n,!0,!0));return i}function Uw(e,t,n,r,i,o,s,u){const l=u.roughness===0,a=[],c=[];if(l){e=e/4,c.push([t+r*Math.cos(-e),n+i*Math.sin(-e)]);for(let f=0;f<=Math.PI*2;f=f+e){const h=[t+r*Math.cos(f),n+i*Math.sin(f)];a.push(h),c.push(h)}c.push([t+r*Math.cos(0),n+i*Math.sin(0)]),c.push([t+r*Math.cos(e),n+i*Math.sin(e)])}else{const f=we(.5,u)-Math.PI/2;c.push([we(o,u)+t+.9*r*Math.cos(f-e),we(o,u)+n+.9*i*Math.sin(f-e)]);const h=Math.PI*2+f-.01;for(let g=f;g<h;g=g+e){const p=[we(o,u)+t+r*Math.cos(g),we(o,u)+n+i*Math.sin(g)];a.push(p),c.push(p)}c.push([we(o,u)+t+r*Math.cos(f+Math.PI*2+s*.5),we(o,u)+n+i*Math.sin(f+Math.PI*2+s*.5)]),c.push([we(o,u)+t+.98*r*Math.cos(f+s),we(o,u)+n+.98*i*Math.sin(f+s)]),c.push([we(o,u)+t+.9*r*Math.cos(f+s*.5),we(o,u)+n+.9*i*Math.sin(f+s*.5)])}return[c,a]}function Xw(e,t,n,r,i,o,s,u,l){const a=o+we(.1,l),c=[];c.push([we(u,l)+t+.9*r*Math.cos(a-e),we(u,l)+n+.9*i*Math.sin(a-e)]);for(let f=a;f<=s;f=f+e)c.push([we(u,l)+t+r*Math.cos(f),we(u,l)+n+i*Math.sin(f)]);return c.push([t+r*Math.cos(s),n+i*Math.sin(s)]),c.push([t+r*Math.cos(s),n+i*Math.sin(s)]),yh(c,null,l)}function vB(e,t,n,r,i,o,s,u){const l=[],a=[u.maxRandomnessOffset||1,(u.maxRandomnessOffset||1)+.3];let c=[0,0];const f=u.disableMultiStroke?1:2,h=u.preserveVertices;for(let g=0;g<f;g++)g===0?l.push({op:"move",data:[s[0],s[1]]}):l.push({op:"move",data:[s[0]+(h?0:we(a[0],u)),s[1]+(h?0:we(a[0],u))]}),c=h?[i,o]:[i+we(a[g],u),o+we(a[g],u)],l.push({op:"bcurveTo",data:[e+we(a[g],u),t+we(a[g],u),n+we(a[g],u),r+we(a[g],u),c[0],c[1]]});return l}function Rl(e){return[...e]}function Kw(e,t=0){const n=e.length;if(n<3)throw new Error("A curve must have at least three points.");const r=[];if(n===3)r.push(Rl(e[0]),Rl(e[1]),Rl(e[2]),Rl(e[2]));else{const i=[];i.push(e[0],e[0]);for(let u=1;u<e.length;u++)i.push(e[u]),u===e.length-1&&i.push(e[u]);const o=[],s=1-t;r.push(Rl(i[0]));for(let u=1;u+2<i.length;u++){const l=i[u];o[0]=[l[0],l[1]],o[1]=[l[0]+(s*i[u+1][0]-s*i[u-1][0])/6,l[1]+(s*i[u+1][1]-s*i[u-1][1])/6],o[2]=[i[u+1][0]+(s*i[u][0]-s*i[u+2][0])/6,i[u+1][1]+(s*i[u][1]-s*i[u+2][1])/6],o[3]=[i[u+1][0],i[u+1][1]],r.push(o[1],o[2],o[3])}}return r}function yB(e,t){return Math.sqrt(Of(e,t))}function Of(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function wB(e,t,n){const r=Of(t,n);if(r===0)return Of(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),Of(e,Yo(t,n,i))}function Yo(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function CB(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let u=3*r[1]-2*n[1]-o[1];u*=u;let l=3*i[0]-2*o[0]-n[0];l*=l;let a=3*i[1]-2*o[1]-n[1];return a*=a,s<l&&(s=l),u<a&&(u=a),s+u}function R1(e,t,n,r){const i=r||[];if(CB(e,t)<n){const o=e[t+0];i.length?yB(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],u=e[t+1],l=e[t+2],a=e[t+3],c=Yo(s,u,.5),f=Yo(u,l,.5),h=Yo(l,a,.5),g=Yo(c,f,.5),p=Yo(f,h,.5),d=Yo(g,p,.5);R1([s,c,g,d],0,n,i),R1([d,p,h,a],0,n,i)}return i}function k1(e,t,n,r,i){const o=i||[],s=e[t],u=e[n-1];let l=0,a=1;for(let c=t+1;c<n-1;++c){const f=wB(e[c],s,u);f>l&&(l=f,a=c)}return Math.sqrt(l)>r?(k1(e,t,a+1,r,o),k1(e,a,n,r,o)):(o.length||o.push(s),o.push(u)),o}function Yw(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;R1(e,s,t,r)}return n&&n>0?k1(r,0,r.length,n):r}function xB(e,t){return Math.sqrt(Ff(e,t))}function Ff(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function EB(e,t,n){const r=Ff(t,n);if(r===0)return Ff(e,t);let i=((e[0]-t[0])*(n[0]-t[0])+(e[1]-t[1])*(n[1]-t[1]))/r;return i=Math.max(0,Math.min(1,i)),Ff(e,qo(t,n,i))}function qo(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function PB(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let u=3*r[1]-2*n[1]-o[1];u*=u;let l=3*i[0]-2*o[0]-n[0];l*=l;let a=3*i[1]-2*o[1]-n[1];return a*=a,s<l&&(s=l),u<a&&(u=a),s+u}function O1(e,t,n,r){const i=r||[];if(PB(e,t)<n){const o=e[t+0];i.length?xB(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],u=e[t+1],l=e[t+2],a=e[t+3],c=qo(s,u,.5),f=qo(u,l,.5),h=qo(l,a,.5),g=qo(c,f,.5),p=qo(f,h,.5),d=qo(g,p,.5);O1([s,c,g,d],0,n,i),O1([d,p,h,a],0,n,i)}return i}function SB(e,t){return F1(e,0,e.length,t)}function F1(e,t,n,r,i){const o=i||[],s=e[t],u=e[n-1];let l=0,a=1;for(let c=t+1;c<n-1;++c){const f=EB(e[c],s,u);f>l&&(l=f,a=c)}return Math.sqrt(l)>r?(F1(e,t,a+1,r,o),F1(e,a,n,r,o)):(o.length||o.push(s),o.push(u)),o}function DB(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;O1(e,s,t,r)}return r}function TB(e,t,n){const r=Lm(e),i=$P(HP(r)),o=[];let s=[],u=[0,0],l=[];const a=()=>{l.length>=4&&s.push(...DB(l,t)),l=[]},c=()=>{a(),s.length&&(o.push(s),s=[])};for(const{key:h,data:g}of i)switch(h){case"M":c(),u=[g[0],g[1]],s.push(u);break;case"L":a(),s.push([g[0],g[1]]);break;case"C":if(!l.length){const p=s.length?s[s.length-1]:u;l.push([p[0],p[1]])}l.push([g[0],g[1]]),l.push([g[2],g[3]]),l.push([g[4],g[5]]);break;case"Z":a(),s.push([u[0],u[1]]);break}if(c(),!n)return o;const f=[];for(const h of o){const g=SB(h,n);g.length&&f.push(g)}return f}const Hn="none";class wh{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return iB()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,n,r){return{shape:t,sets:n||[],options:r||this.defaultOptions}}line(t,n,r,i,o){const s=this._o(o);return this._d("line",[jP(t,n,r,i,s)],s)}rectangle(t,n,r,i,o){const s=this._o(o),u=[],l=fB(t,n,r,i,s);if(s.fill){const a=[[t,n],[t+r,n],[t+r,n+i],[t,n+i]];s.fillStyle==="solid"?u.push(_0([a],s)):u.push(iu([a],s))}return s.stroke!==Hn&&u.push(l),this._d("rectangle",u,s)}ellipse(t,n,r,i,o){const s=this._o(o),u=[],l=WP(r,i,s),a=B1(t,n,s,l);if(s.fill)if(s.fillStyle==="solid"){const c=B1(t,n,s,l).opset;c.type="fillPath",u.push(c)}else u.push(iu([a.estimatedPoints],s));return s.stroke!==Hn&&u.push(a.opset),this._d("ellipse",u,s)}circle(t,n,r,i){const o=this.ellipse(t,n,r,r,i);return o.shape="circle",o}linearPath(t,n){const r=this._o(n);return this._d("linearPath",[kf(t,!1,r)],r)}arc(t,n,r,i,o,s,u=!1,l){const a=this._o(l),c=[],f=Ww(t,n,r,i,o,s,u,!0,a);if(u&&a.fill)if(a.fillStyle==="solid"){const h=Object.assign({},a);h.disableMultiStroke=!0;const g=Ww(t,n,r,i,o,s,!0,!1,h);g.type="fillPath",c.push(g)}else c.push(dB(t,n,r,i,o,s,a));return a.stroke!==Hn&&c.push(f),this._d("arc",c,a)}curve(t,n){const r=this._o(n),i=[],o=jw(t,r);if(r.fill&&r.fill!==Hn)if(r.fillStyle==="solid"){const s=jw(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(s.ops)})}else{const s=[],u=t;if(u.length){const a=typeof u[0][0]=="number"?[u]:u;for(const c of a)c.length<3?s.push(...c):c.length===3?s.push(...Yw(Kw([c[0],c[0],c[1],c[2]]),10,(1+r.roughness)/2)):s.push(...Yw(Kw(c),10,(1+r.roughness)/2))}s.length&&i.push(iu([s],r))}return r.stroke!==Hn&&i.push(o),this._d("curve",i,r)}polygon(t,n){const r=this._o(n),i=[],o=kf(t,!0,r);return r.fill&&(r.fillStyle==="solid"?i.push(_0([t],r)):i.push(iu([t],r))),r.stroke!==Hn&&i.push(o),this._d("polygon",i,r)}path(t,n){const r=this._o(n),i=[];if(!t)return this._d("path",i,r);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const o=r.fill&&r.fill!=="transparent"&&r.fill!==Hn,s=r.stroke!==Hn,u=!!(r.simplification&&r.simplification<1),l=u?4-4*(r.simplification||1):(1+r.roughness)/2,a=TB(t,1,l),c=zw(t,r);if(o)if(r.fillStyle==="solid")if(a.length===1){const f=zw(t,Object.assign(Object.assign({},r),{disableMultiStroke:!0,roughness:r.roughness?r.roughness+r.fillShapeRoughnessGain:0}));i.push({type:"fillPath",ops:this._mergedShape(f.ops)})}else i.push(_0(a,r));else i.push(iu(a,r));return s&&(u?a.forEach(f=>{i.push(kf(f,!1,r))}):i.push(c)),this._d("path",i,r)}opsToPath(t,n){let r="";for(const i of t.ops){const o=typeof n=="number"&&n>=0?i.data.map(s=>+s.toFixed(n)):i.data;switch(i.op){case"move":r+=`M${o[0]} ${o[1]} `;break;case"bcurveTo":r+=`C${o[0]} ${o[1]}, ${o[2]} ${o[3]}, ${o[4]} ${o[5]} `;break;case"lineTo":r+=`L${o[0]} ${o[1]} `;break}}return r.trim()}toPaths(t){const n=t.sets||[],r=t.options||this.defaultOptions,i=[];for(const o of n){let s=null;switch(o.type){case"path":s={d:this.opsToPath(o),stroke:r.stroke,strokeWidth:r.strokeWidth,fill:Hn};break;case"fillPath":s={d:this.opsToPath(o),stroke:Hn,strokeWidth:0,fill:r.fill||Hn};break;case"fillSketch":s=this.fillSketch(o,r);break}s&&i.push(s)}return i}fillSketch(t,n){let r=n.fillWeight;return r<0&&(r=n.strokeWidth/2),{d:this.opsToPath(t),stroke:n.fill||Hn,strokeWidth:r,fill:Hn}}_mergedShape(t){return t.filter((n,r)=>r===0?!0:n.op!=="move")}}class AB{constructor(t,n){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new wh(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.ctx,o=t.options.fixedDecimalPlaceDigits;for(const s of n)switch(s.type){case"path":i.save(),i.strokeStyle=r.stroke==="none"?"transparent":r.stroke,i.lineWidth=r.strokeWidth,r.strokeLineDash&&i.setLineDash(r.strokeLineDash),r.strokeLineDashOffset&&(i.lineDashOffset=r.strokeLineDashOffset),this._drawToContext(i,s,o),i.restore();break;case"fillPath":{i.save(),i.fillStyle=r.fill||"";const u=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(i,s,o,u),i.restore();break}case"fillSketch":this.fillSketch(i,s,r);break}}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2),t.save(),r.fillLineDash&&t.setLineDash(r.fillLineDash),r.fillLineDashOffset&&(t.lineDashOffset=r.fillLineDashOffset),t.strokeStyle=r.fill||"",t.lineWidth=i,this._drawToContext(t,n,r.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,n,r,i="nonzero"){t.beginPath();for(const o of n.ops){const s=typeof r=="number"&&r>=0?o.data.map(u=>+u.toFixed(r)):o.data;switch(o.op){case"move":t.moveTo(s[0],s[1]);break;case"bcurveTo":t.bezierCurveTo(s[0],s[1],s[2],s[3],s[4],s[5]);break;case"lineTo":t.lineTo(s[0],s[1]);break}}n.type==="fillPath"?t.fill(i):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,n,r,i,o){const s=this.gen.line(t,n,r,i,o);return this.draw(s),s}rectangle(t,n,r,i,o){const s=this.gen.rectangle(t,n,r,i,o);return this.draw(s),s}ellipse(t,n,r,i,o){const s=this.gen.ellipse(t,n,r,i,o);return this.draw(s),s}circle(t,n,r,i){const o=this.gen.circle(t,n,r,i);return this.draw(o),o}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r),r}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r),r}arc(t,n,r,i,o,s,u=!1,l){const a=this.gen.arc(t,n,r,i,o,s,u,l);return this.draw(a),a}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r),r}path(t,n){const r=this.gen.path(t,n);return this.draw(r),r}}const Zc="http://www.w3.org/2000/svg";class BB{constructor(t,n){this.svg=t,this.gen=new wh(n)}draw(t){const n=t.sets||[],r=t.options||this.getDefaultOptions(),i=this.svg.ownerDocument||window.document,o=i.createElementNS(Zc,"g"),s=t.options.fixedDecimalPlaceDigits;for(const u of n){let l=null;switch(u.type){case"path":{l=i.createElementNS(Zc,"path"),l.setAttribute("d",this.opsToPath(u,s)),l.setAttribute("stroke",r.stroke),l.setAttribute("stroke-width",r.strokeWidth+""),l.setAttribute("fill","none"),r.strokeLineDash&&l.setAttribute("stroke-dasharray",r.strokeLineDash.join(" ").trim()),r.strokeLineDashOffset&&l.setAttribute("stroke-dashoffset",`${r.strokeLineDashOffset}`);break}case"fillPath":{l=i.createElementNS(Zc,"path"),l.setAttribute("d",this.opsToPath(u,s)),l.setAttribute("stroke","none"),l.setAttribute("stroke-width","0"),l.setAttribute("fill",r.fill||""),(t.shape==="curve"||t.shape==="polygon")&&l.setAttribute("fill-rule","evenodd");break}case"fillSketch":{l=this.fillSketch(i,u,r);break}}l&&o.appendChild(l)}return o}fillSketch(t,n,r){let i=r.fillWeight;i<0&&(i=r.strokeWidth/2);const o=t.createElementNS(Zc,"path");return o.setAttribute("d",this.opsToPath(n,r.fixedDecimalPlaceDigits)),o.setAttribute("stroke",r.fill||""),o.setAttribute("stroke-width",i+""),o.setAttribute("fill","none"),r.fillLineDash&&o.setAttribute("stroke-dasharray",r.fillLineDash.join(" ").trim()),r.fillLineDashOffset&&o.setAttribute("stroke-dashoffset",`${r.fillLineDashOffset}`),o}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,n){return this.gen.opsToPath(t,n)}line(t,n,r,i,o){const s=this.gen.line(t,n,r,i,o);return this.draw(s)}rectangle(t,n,r,i,o){const s=this.gen.rectangle(t,n,r,i,o);return this.draw(s)}ellipse(t,n,r,i,o){const s=this.gen.ellipse(t,n,r,i,o);return this.draw(s)}circle(t,n,r,i){const o=this.gen.circle(t,n,r,i);return this.draw(o)}linearPath(t,n){const r=this.gen.linearPath(t,n);return this.draw(r)}polygon(t,n){const r=this.gen.polygon(t,n);return this.draw(r)}arc(t,n,r,i,o,s,u=!1,l){const a=this.gen.arc(t,n,r,i,o,s,u,l);return this.draw(a)}curve(t,n){const r=this.gen.curve(t,n);return this.draw(r)}path(t,n){const r=this.gen.path(t,n);return this.draw(r)}}const MB={canvas(e,t){return new AB(e,t)},svg(e,t){return new BB(e,t)},generator(e){return new wh(e)},newSeed(){return wh.newSeed()}};var VP=Symbol.for("immer-nothing"),qw=Symbol.for("immer-draftable"),Yn=Symbol.for("immer-state");function Mr(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Uu=Object.getPrototypeOf;function Qr(e){return!!e&&!!e[Yn]}function Ps(e){var t;return e?UP(e)||Array.isArray(e)||!!e[qw]||!!((t=e.constructor)!=null&&t[qw])||Bd(e)||Md(e):!1}var RB=Object.prototype.constructor.toString();function UP(e){if(!e||typeof e!="object")return!1;const t=Uu(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===RB}function Ch(e,t){Ad(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Ad(e){const t=e[Yn];return t?t.type_:Array.isArray(e)?1:Bd(e)?2:Md(e)?3:0}function b1(e,t){return Ad(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function XP(e,t,n){const r=Ad(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function kB(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Bd(e){return e instanceof Map}function Md(e){return e instanceof Set}function Zo(e){return e.copy_||e.base_}function I1(e,t){if(Bd(e))return new Map(e);if(Md(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=UP(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Yn];let i=Reflect.ownKeys(r);for(let o=0;o<i.length;o++){const s=i[o],u=r[s];u.writable===!1&&(u.writable=!0,u.configurable=!0),(u.get||u.set)&&(r[s]={configurable:!0,writable:!0,enumerable:u.enumerable,value:e[s]})}return Object.create(Uu(e),r)}else{const r=Uu(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function Gm(e,t=!1){return Rd(e)||Qr(e)||!Ps(e)||(Ad(e)>1&&(e.set=e.add=e.clear=e.delete=OB),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>Gm(r,!0))),e}function OB(){Mr(2)}function Rd(e){return Object.isFrozen(e)}var FB={};function Ss(e){const t=FB[e];return t||Mr(0,e),t}var Fa;function KP(){return Fa}function bB(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Zw(e,t){t&&(Ss("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function L1(e){G1(e),e.drafts_.forEach(IB),e.drafts_=null}function G1(e){e===Fa&&(Fa=e.parent_)}function Qw(e){return Fa=bB(Fa,e)}function IB(e){const t=e[Yn];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Jw(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Yn].modified_&&(L1(t),Mr(4)),Ps(e)&&(e=xh(t,e),t.parent_||Eh(t,e)),t.patches_&&Ss("Patches").generateReplacementPatches_(n[Yn].base_,e,t.patches_,t.inversePatches_)):e=xh(t,n,[]),L1(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==VP?e:void 0}function xh(e,t,n){if(Rd(t))return t;const r=t[Yn];if(!r)return Ch(t,(i,o)=>e2(e,r,t,i,o,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Eh(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let o=i,s=!1;r.type_===3&&(o=new Set(i),i.clear(),s=!0),Ch(o,(u,l)=>e2(e,r,i,u,l,n,s)),Eh(e,i,!1),n&&e.patches_&&Ss("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function e2(e,t,n,r,i,o,s){if(Qr(i)){const u=o&&t&&t.type_!==3&&!b1(t.assigned_,r)?o.concat(r):void 0,l=xh(e,i,u);if(XP(n,r,l),Qr(l))e.canAutoFreeze_=!1;else return}else s&&n.add(i);if(Ps(i)&&!Rd(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;xh(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&Eh(e,i)}}function Eh(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Gm(t,n)}function LB(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:KP(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,o=Nm;n&&(i=[r],o=ba);const{revoke:s,proxy:u}=Proxy.revocable(i,o);return r.draft_=u,r.revoke_=s,u}var Nm={get(e,t){if(t===Yn)return e;const n=Zo(e);if(!b1(n,t))return GB(e,n,t);const r=n[t];return e.finalized_||!Ps(r)?r:r===j0(e.base_,t)?(W0(e),e.copy_[t]=H1(r,e)):r},has(e,t){return t in Zo(e)},ownKeys(e){return Reflect.ownKeys(Zo(e))},set(e,t,n){const r=YP(Zo(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=j0(Zo(e),t),o=i==null?void 0:i[Yn];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(kB(n,i)&&(n!==void 0||b1(e.base_,t)))return!0;W0(e),N1(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return j0(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,W0(e),N1(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Zo(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){Mr(11)},getPrototypeOf(e){return Uu(e.base_)},setPrototypeOf(){Mr(12)}},ba={};Ch(Nm,(e,t)=>{ba[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});ba.deleteProperty=function(e,t){return ba.set.call(this,e,t,void 0)};ba.set=function(e,t,n){return Nm.set.call(this,e[0],t,n,e[0])};function j0(e,t){const n=e[Yn];return(n?Zo(n):e)[t]}function GB(e,t,n){var i;const r=YP(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function YP(e,t){if(!(t in e))return;let n=Uu(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Uu(n)}}function N1(e){e.modified_||(e.modified_=!0,e.parent_&&N1(e.parent_))}function W0(e){e.copy_||(e.copy_=I1(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var NB=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(l=o,...a){return s.produce(l,c=>n.call(this,c,...a))}}typeof n!="function"&&Mr(6),r!==void 0&&typeof r!="function"&&Mr(7);let i;if(Ps(t)){const o=Qw(this),s=H1(t,void 0);let u=!0;try{i=n(s),u=!1}finally{u?L1(o):G1(o)}return Zw(o,r),Jw(i,o)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===VP&&(i=void 0),this.autoFreeze_&&Gm(i,!0),r){const o=[],s=[];Ss("Patches").generateReplacementPatches_(t,i,o,s),r(o,s)}return i}else Mr(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...u)=>this.produceWithPatches(s,l=>t(l,...u));let r,i;return[this.produce(t,n,(s,u)=>{r=s,i=u}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Ps(e)||Mr(8),Qr(e)&&(e=HB(e));const t=Qw(this),n=H1(e,void 0);return n[Yn].isManual_=!0,G1(t),n}finishDraft(e,t){const n=e&&e[Yn];(!n||!n.isManual_)&&Mr(9);const{scope_:r}=n;return Zw(r,t),Jw(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=Ss("Patches").applyPatches_;return Qr(e)?r(e,t):this.produce(e,i=>r(i,t))}};function H1(e,t){const n=Bd(e)?Ss("MapSet").proxyMap_(e,t):Md(e)?Ss("MapSet").proxySet_(e,t):LB(e,t);return(t?t.scope_:KP()).drafts_.push(n),n}function HB(e){return Qr(e)||Mr(10,e),qP(e)}function qP(e){if(!Ps(e)||Rd(e))return e;const t=e[Yn];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=I1(e,t.scope_.immer_.useStrictShallowCopy_)}else n=I1(e,!0);return Ch(n,(r,i)=>{XP(n,r,qP(i))}),t&&(t.finalized_=!1),n}var qn=new NB,Hm=qn.produce;qn.produceWithPatches.bind(qn);qn.setAutoFreeze.bind(qn);qn.setUseStrictShallowCopy.bind(qn);qn.applyPatches.bind(qn);var yu=qn.createDraft.bind(qn),wu=qn.finishDraft.bind(qn),Ni={};Object.defineProperty(Ni,"__esModule",{value:!0});var $B=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),z0={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},ZP={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:$B?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},$m={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(var Qc=1;Qc<20;Qc++)$m["f"+Qc]=111+Qc;function kd(e,t,n){t&&!("byKey"in t)&&(n=t,t=null),Array.isArray(e)||(e=[e]);var r=e.map(function(s){return QP(s,t)}),i=function(u){return r.some(function(l){return JP(l,u)})},o=n==null?i:i(n);return o}function _B(e,t){return kd(e,t)}function jB(e,t){return kd(e,{byKey:!0},t)}function QP(e,t){var n=t&&t.byKey,r={};e=e.replace("++","+add");var i=e.split("+"),o=i.length;for(var s in z0)r[z0[s]]=!1;var u=!0,l=!1,a=void 0;try{for(var c=i[Symbol.iterator](),f;!(u=(f=c.next()).done);u=!0){var h=f.value,g=h.endsWith("?")&&h.length>1;g&&(h=h.slice(0,-1));var p=_m(h),d=z0[p];if(h.length>1&&!d&&!ZP[h]&&!$m[p])throw new TypeError('Unknown modifier: "'+h+'"');(o===1||!d)&&(n?r.key=p:r.which=e5(h)),d&&(r[d]=g?null:!0)}}catch(y){l=!0,a=y}finally{try{!u&&c.return&&c.return()}finally{if(l)throw a}}return r}function JP(e,t){for(var n in e){var r=e[n],i=void 0;if(r!=null&&(n==="key"&&t.key!=null?i=t.key.toLowerCase():n==="which"?i=r===91&&t.which===93?91:t.which:i=t[n],!(i==null&&r===!1)&&i!==r))return!1}return!0}function e5(e){e=_m(e);var t=$m[e]||e.toUpperCase().charCodeAt(0);return t}function _m(e){return e=e.toLowerCase(),e=ZP[e]||e,e}Ni.default=kd;var or=Ni.isHotkey=kd;Ni.isCodeHotkey=_B;var Lt=Ni.isKeyHotkey=jB;Ni.parseHotkey=QP;Ni.compareHotkey=JP;Ni.toKeyCode=e5;Ni.toKeyName=_m;var $1=function(e,t){return $1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n[i]=r[i])},$1(e,t)};function ko(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");$1(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}function WB(e,t,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function u(c){try{a(r.next(c))}catch(f){s(f)}}function l(c){try{a(r.throw(c))}catch(f){s(f)}}function a(c){c.done?o(c.value):i(c.value).then(u,l)}a((r=r.apply(e,t||[])).next())})}function t5(e,t){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=u(0),s.throw=u(1),s.return=u(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function u(a){return function(c){return l([a,c])}}function l(a){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(n=0)),n;)try{if(r=1,i&&(o=a[0]&2?i.return:a[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;switch(i=0,o&&(a=[a[0]&2,o.value]),a[0]){case 0:case 1:o=a;break;case 4:return n.label++,{value:a[1],done:!1};case 5:n.label++,i=a[1],a=[0];continue;case 7:a=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){n=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){n.label=a[1];break}if(a[0]===6&&n.label<o[1]){n.label=o[1],o=a;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(a);break}o[2]&&n.ops.pop(),n.trys.pop();continue}a=t.call(e,n)}catch(c){a=[6,c],i=0}finally{r=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}}function Xu(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ku(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(u){s={error:u}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o}function Ia(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,o;r<i;r++)(o||!(r in t))&&(o||(o=Array.prototype.slice.call(t,0,r)),o[r]=t[r]);return e.concat(o||Array.prototype.slice.call(t))}function Fu(e){return this instanceof Fu?(this.v=e,this):new Fu(e)}function zB(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(g){return function(p){return Promise.resolve(p).then(g,f)}}function u(g,p){r[g]&&(i[g]=function(d){return new Promise(function(y,m){o.push([g,d,y,m])>1||l(g,d)})},p&&(i[g]=p(i[g])))}function l(g,p){try{a(r[g](p))}catch(d){h(o[0][3],d)}}function a(g){g.value instanceof Fu?Promise.resolve(g.value.v).then(c,f):h(o[0][2],g)}function c(g){l("next",g)}function f(g){l("throw",g)}function h(g,p){g(p),o.shift(),o.length&&l(o[0][0],o[0][1])}}function VB(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Xu=="function"?Xu(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=e[o]&&function(s){return new Promise(function(u,l){s=e[o](s),i(u,l,s.done,s.value)})}}function i(o,s,u,l){Promise.resolve(l).then(function(a){o({value:a,done:u})},s)}}function dt(e){return typeof e=="function"}function n5(e){var t=function(r){Error.call(r),r.stack=new Error().stack},n=e(t);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var V0=n5(function(e){return function(n){e(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(r,i){return i+1+") "+r.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Ph(e,t){if(e){var n=e.indexOf(t);0<=n&&e.splice(n,1)}}var hc=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,n,r,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var u=Xu(s),l=u.next();!l.done;l=u.next()){var a=l.value;a.remove(this)}}catch(d){t={error:d}}finally{try{l&&!l.done&&(n=u.return)&&n.call(u)}finally{if(t)throw t.error}}else s.remove(this);var c=this.initialTeardown;if(dt(c))try{c()}catch(d){o=d instanceof V0?d.errors:[d]}var f=this._finalizers;if(f){this._finalizers=null;try{for(var h=Xu(f),g=h.next();!g.done;g=h.next()){var p=g.value;try{t2(p)}catch(d){o=o??[],d instanceof V0?o=Ia(Ia([],Ku(o)),Ku(d.errors)):o.push(d)}}}catch(d){r={error:d}}finally{try{g&&!g.done&&(i=h.return)&&i.call(h)}finally{if(r)throw r.error}}}if(o)throw new V0(o)}},e.prototype.add=function(t){var n;if(t&&t!==this)if(this.closed)t2(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(t)}},e.prototype._hasParent=function(t){var n=this._parentage;return n===t||Array.isArray(n)&&n.includes(t)},e.prototype._addParent=function(t){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(t),n):n?[n,t]:t},e.prototype._removeParent=function(t){var n=this._parentage;n===t?this._parentage=null:Array.isArray(n)&&Ph(n,t)},e.prototype.remove=function(t){var n=this._finalizers;n&&Ph(n,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),r5=hc.EMPTY;function i5(e){return e instanceof hc||e&&"closed"in e&&dt(e.remove)&&dt(e.add)&&dt(e.unsubscribe)}function t2(e){dt(e)?e():e.unsubscribe()}var o5={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},UB={setTimeout:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setTimeout.apply(void 0,Ia([e,t],Ku(n)))},clearTimeout:function(e){return clearTimeout(e)},delegate:void 0};function s5(e){UB.setTimeout(function(){throw e})}function n2(){}function bf(e){e()}var jm=function(e){ko(t,e);function t(n){var r=e.call(this)||this;return r.isStopped=!1,n?(r.destination=n,i5(n)&&n.add(r)):r.destination=qB,r}return t.create=function(n,r,i){return new _1(n,r,i)},t.prototype.next=function(n){this.isStopped||this._next(n)},t.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(n){this.destination.next(n)},t.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(hc),XB=Function.prototype.bind;function U0(e,t){return XB.call(e,t)}var KB=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var n=this.partialObserver;if(n.next)try{n.next(t)}catch(r){Jc(r)}},e.prototype.error=function(t){var n=this.partialObserver;if(n.error)try{n.error(t)}catch(r){Jc(r)}else Jc(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(n){Jc(n)}},e}(),_1=function(e){ko(t,e);function t(n,r,i){var o=e.call(this)||this,s;if(dt(n)||!n)s={next:n??void 0,error:r??void 0,complete:i??void 0};else{var u;o&&o5.useDeprecatedNextContext?(u=Object.create(n),u.unsubscribe=function(){return o.unsubscribe()},s={next:n.next&&U0(n.next,u),error:n.error&&U0(n.error,u),complete:n.complete&&U0(n.complete,u)}):s=n}return o.destination=new KB(s),o}return t}(jm);function Jc(e){s5(e)}function YB(e){throw e}var qB={closed:!0,next:n2,error:YB,complete:n2},Wm=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function ZB(e){return e}function QB(e){return e.length===0?ZB:e.length===1?e[0]:function(n){return e.reduce(function(r,i){return i(r)},n)}}var Gr=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(t,n,r){var i=this,o=e6(t)?t:new _1(t,n,r);return bf(function(){var s=i,u=s.operator,l=s.source;o.add(u?u.call(o,l):l?i._subscribe(o):i._trySubscribe(o))}),o},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(n){t.error(n)}},e.prototype.forEach=function(t,n){var r=this;return n=r2(n),new n(function(i,o){var s=new _1({next:function(u){try{t(u)}catch(l){o(l),s.unsubscribe()}},error:o,complete:i});r.subscribe(s)})},e.prototype._subscribe=function(t){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(t)},e.prototype[Wm]=function(){return this},e.prototype.pipe=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return QB(t)(this)},e.prototype.toPromise=function(t){var n=this;return t=r2(t),new t(function(r,i){var o;n.subscribe(function(s){return o=s},function(s){return i(s)},function(){return r(o)})})},e.create=function(t){return new e(t)},e}();function r2(e){var t;return(t=e??o5.Promise)!==null&&t!==void 0?t:Promise}function JB(e){return e&&dt(e.next)&&dt(e.error)&&dt(e.complete)}function e6(e){return e&&e instanceof jm||JB(e)&&i5(e)}function t6(e){return dt(e==null?void 0:e.lift)}function Od(e){return function(t){if(t6(t))return t.lift(function(n){try{return e(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function La(e,t,n,r,i){return new n6(e,t,n,r,i)}var n6=function(e){ko(t,e);function t(n,r,i,o,s,u){var l=e.call(this,n)||this;return l.onFinalize=s,l.shouldUnsubscribe=u,l._next=r?function(a){try{r(a)}catch(c){n.error(c)}}:e.prototype._next,l._error=o?function(a){try{o(a)}catch(c){n.error(c)}finally{this.unsubscribe()}}:e.prototype._error,l._complete=i?function(){try{i()}catch(a){n.error(a)}finally{this.unsubscribe()}}:e.prototype._complete,l}return t.prototype.unsubscribe=function(){var n;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var r=this.closed;e.prototype.unsubscribe.call(this),!r&&((n=this.onFinalize)===null||n===void 0||n.call(this))}},t}(jm),r6=n5(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),u5=function(e){ko(t,e);function t(){var n=e.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return t.prototype.lift=function(n){var r=new i2(this,this);return r.operator=n,r},t.prototype._throwIfClosed=function(){if(this.closed)throw new r6},t.prototype.next=function(n){var r=this;bf(function(){var i,o;if(r._throwIfClosed(),!r.isStopped){r.currentObservers||(r.currentObservers=Array.from(r.observers));try{for(var s=Xu(r.currentObservers),u=s.next();!u.done;u=s.next()){var l=u.value;l.next(n)}}catch(a){i={error:a}}finally{try{u&&!u.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(n){var r=this;bf(function(){if(r._throwIfClosed(),!r.isStopped){r.hasError=r.isStopped=!0,r.thrownError=n;for(var i=r.observers;i.length;)i.shift().error(n)}})},t.prototype.complete=function(){var n=this;bf(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var r=n.observers;r.length;)r.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(n){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,n)},t.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},t.prototype._innerSubscribe=function(n){var r=this,i=this,o=i.hasError,s=i.isStopped,u=i.observers;return o||s?r5:(this.currentObservers=null,u.push(n),new hc(function(){r.currentObservers=null,Ph(u,n)}))},t.prototype._checkFinalizedStatuses=function(n){var r=this,i=r.hasError,o=r.thrownError,s=r.isStopped;i?n.error(o):s&&n.complete()},t.prototype.asObservable=function(){var n=new Gr;return n.source=this,n},t.create=function(n,r){return new i2(n,r)},t}(Gr),i2=function(e){ko(t,e);function t(n,r){var i=e.call(this)||this;return i.destination=n,i.source=r,i}return t.prototype.next=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.next)===null||i===void 0||i.call(r,n)},t.prototype.error=function(n){var r,i;(i=(r=this.destination)===null||r===void 0?void 0:r.error)===null||i===void 0||i.call(r,n)},t.prototype.complete=function(){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||r===void 0||r.call(n)},t.prototype._subscribe=function(n){var r,i;return(i=(r=this.source)===null||r===void 0?void 0:r.subscribe(n))!==null&&i!==void 0?i:r5},t}(u5),i6={now:function(){return Date.now()},delegate:void 0},o6=function(e){ko(t,e);function t(n,r){return e.call(this)||this}return t.prototype.schedule=function(n,r){return this},t}(hc),o2={setInterval:function(e,t){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return setInterval.apply(void 0,Ia([e,t],Ku(n)))},clearInterval:function(e){return clearInterval(e)},delegate:void 0},s6=function(e){ko(t,e);function t(n,r){var i=e.call(this,n,r)||this;return i.scheduler=n,i.work=r,i.pending=!1,i}return t.prototype.schedule=function(n,r){var i;if(r===void 0&&(r=0),this.closed)return this;this.state=n;var o=this.id,s=this.scheduler;return o!=null&&(this.id=this.recycleAsyncId(s,o,r)),this.pending=!0,this.delay=r,this.id=(i=this.id)!==null&&i!==void 0?i:this.requestAsyncId(s,this.id,r),this},t.prototype.requestAsyncId=function(n,r,i){return i===void 0&&(i=0),o2.setInterval(n.flush.bind(n,this),i)},t.prototype.recycleAsyncId=function(n,r,i){if(i===void 0&&(i=0),i!=null&&this.delay===i&&this.pending===!1)return r;r!=null&&o2.clearInterval(r)},t.prototype.execute=function(n,r){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var i=this._execute(n,r);if(i)return i;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(n,r){var i=!1,o;try{this.work(n)}catch(s){i=!0,o=s||new Error("Scheduled action threw falsy error")}if(i)return this.unsubscribe(),o},t.prototype.unsubscribe=function(){if(!this.closed){var n=this,r=n.id,i=n.scheduler,o=i.actions;this.work=this.state=this.scheduler=null,this.pending=!1,Ph(o,this),r!=null&&(this.id=this.recycleAsyncId(i,r,null)),this.delay=null,e.prototype.unsubscribe.call(this)}},t}(o6),s2=function(){function e(t,n){n===void 0&&(n=e.now),this.schedulerActionCtor=t,this.now=n}return e.prototype.schedule=function(t,n,r){return n===void 0&&(n=0),new this.schedulerActionCtor(this,t).schedule(r,n)},e.now=i6.now,e}(),u6=function(e){ko(t,e);function t(n,r){r===void 0&&(r=s2.now);var i=e.call(this,n,r)||this;return i.actions=[],i._active=!1,i}return t.prototype.flush=function(n){var r=this.actions;if(this._active){r.push(n);return}var i;this._active=!0;do if(i=n.execute(n.state,n.delay))break;while(n=r.shift());if(this._active=!1,i){for(;n=r.shift();)n.unsubscribe();throw i}},t}(s2),l6=new u6(s6),a6=l6,c6=new Gr(function(e){return e.complete()}),l5=function(e){return e&&typeof e.length=="number"&&typeof e!="function"};function f6(e){return dt(e==null?void 0:e.then)}function h6(e){return dt(e[Wm])}function d6(e){return Symbol.asyncIterator&&dt(e==null?void 0:e[Symbol.asyncIterator])}function g6(e){return new TypeError("You provided "+(e!==null&&typeof e=="object"?"an invalid object":"'"+e+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function p6(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var m6=p6();function v6(e){return dt(e==null?void 0:e[m6])}function y6(e){return zB(this,arguments,function(){var n,r,i,o;return t5(this,function(s){switch(s.label){case 0:n=e.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,Fu(n.read())];case 3:return r=s.sent(),i=r.value,o=r.done,o?[4,Fu(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,Fu(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return n.releaseLock(),[7];case 10:return[2]}})})}function w6(e){return dt(e==null?void 0:e.getReader)}function zm(e){if(e instanceof Gr)return e;if(e!=null){if(h6(e))return C6(e);if(l5(e))return x6(e);if(f6(e))return E6(e);if(d6(e))return a5(e);if(v6(e))return P6(e);if(w6(e))return S6(e)}throw g6(e)}function C6(e){return new Gr(function(t){var n=e[Wm]();if(dt(n.subscribe))return n.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function x6(e){return new Gr(function(t){for(var n=0;n<e.length&&!t.closed;n++)t.next(e[n]);t.complete()})}function E6(e){return new Gr(function(t){e.then(function(n){t.closed||(t.next(n),t.complete())},function(n){return t.error(n)}).then(null,s5)})}function P6(e){return new Gr(function(t){var n,r;try{for(var i=Xu(e),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}t.complete()})}function a5(e){return new Gr(function(t){D6(e,t).catch(function(n){return t.error(n)})})}function S6(e){return a5(y6(e))}function D6(e,t){var n,r,i,o;return WB(this,void 0,void 0,function(){var s,u;return t5(this,function(l){switch(l.label){case 0:l.trys.push([0,5,6,11]),n=VB(e),l.label=1;case 1:return[4,n.next()];case 2:if(r=l.sent(),!!r.done)return[3,4];if(s=r.value,t.next(s),t.closed)return[2];l.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return u=l.sent(),i={error:u},[3,11];case 6:return l.trys.push([6,,9,10]),r&&!r.done&&(o=n.return)?[4,o.call(n)]:[3,8];case 7:l.sent(),l.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}function T6(e){return e instanceof Date&&!isNaN(e)}function c5(e,t){return Od(function(n,r){var i=0;n.subscribe(La(r,function(o){r.next(e.call(t,o,i++))}))})}var A6=Array.isArray;function B6(e,t){return A6(t)?e.apply(void 0,Ia([],Ku(t))):e(t)}function M6(e){return c5(function(t){return B6(e,t)})}function R6(e,t,n,r,i,o,s,u){var l=[],a=0,c=0,f=!1,h=function(){f&&!l.length&&!a&&t.complete()},g=function(d){return a<r?p(d):l.push(d)},p=function(d){a++;var y=!1;zm(n(d,c++)).subscribe(La(t,function(m){t.next(m)},function(){y=!0},void 0,function(){if(y)try{a--;for(var m=function(){var v=l.shift();s||p(v)};l.length&&a<r;)m();h()}catch(v){t.error(v)}}))};return e.subscribe(La(t,g,function(){f=!0,h()})),function(){}}function f5(e,t,n){return n===void 0&&(n=1/0),dt(t)?f5(function(r,i){return c5(function(o,s){return t(r,o,i,s)})(zm(e(r,i)))},n):(typeof t=="number"&&(n=t),Od(function(r,i){return R6(r,i,e,n)}))}var k6=["addListener","removeListener"],O6=["addEventListener","removeEventListener"],F6=["on","off"];function Ds(e,t,n,r){if(dt(n)&&(r=n,n=void 0),r)return Ds(e,t,n).pipe(M6(r));var i=Ku(L6(e)?O6.map(function(u){return function(l){return e[u](t,l,n)}}):b6(e)?k6.map(u2(e,t)):I6(e)?F6.map(u2(e,t)):[],2),o=i[0],s=i[1];if(!o&&l5(e))return f5(function(u){return Ds(u,t,n)})(zm(e));if(!o)throw new TypeError("Invalid event target");return new Gr(function(u){var l=function(){for(var a=[],c=0;c<arguments.length;c++)a[c]=arguments[c];return u.next(1<a.length?a:a[0])};return o(l),function(){return s(l)}})}function u2(e,t){return function(n){return function(r){return e[n](t,r)}}}function b6(e){return dt(e.addListener)&&dt(e.removeListener)}function I6(e){return dt(e.on)&&dt(e.off)}function L6(e){return dt(e.addEventListener)&&dt(e.removeEventListener)}function G6(e,t,n){return n===void 0&&(n=a6),new Gr(function(r){var i=T6(e)?+e-n.now():e;i<0&&(i=0);var o=0;return n.schedule(function(){r.closed||(r.next(o++),r.complete())},i)})}function N6(e,t){return Od(function(n,r){var i=0;n.subscribe(La(r,function(o){return e.call(t,o,i++)&&r.next(o)}))})}function j1(e){return e<=0?function(){return c6}:Od(function(t,n){var r=0;t.subscribe(La(n,function(i){++r<=e&&(n.next(i),e<=r&&n.complete())}))})}var Rr;(function(e){e.ew="ew-resize",e.ns="ns-resize",e.nesw="nesw-resize",e.nwse="nwse-resize"})(Rr||(Rr={}));var Sh;(function(e){e.crosshair="crosshair"})(Sh||(Sh={}));const X0=[Rr.ns,Rr.nesw,Rr.ew,Rr.nwse],Oo="plait-board-attached",xt=1,W1=2,cl="selection-rectangle",h5="selection-rectangle-bounding",H6=.1,$6=.1,_6=4,j6="plait-board-container",d5="active-with-moving",l2="rotate-handle",W6="resize-handle",z6=20,V6={MAIN:0,WHEEL:1,SECONDARY:2,TOUCH:-1},Fd=3,g5=5;function U6(e){return!!e.beforeContextChange}function X6(e){return!!e.onContextChanged}const a2=new WeakMap,K0=new WeakMap,bu=new WeakMap,hs=new WeakMap,z1=new WeakMap,zl=new WeakMap,Vl=new WeakMap,V1=new WeakMap,Dh=new WeakMap,Th=new WeakMap,U1=new WeakMap,Ah=new WeakMap,X1=new WeakMap,K1=new WeakMap,Ui=new WeakMap,p5=new WeakMap,Y1=new WeakMap,m5=new WeakMap,Vm=new WeakMap,Um=new WeakMap,bd=new WeakMap,Id=new WeakMap,c2=new WeakMap,Ul=new WeakMap;function Yu(e){return e==null}const v5=(e,t)=>e+Math.floor(t*255).toString(16);function K6(e){return e.button===2}function Xm(e){const t=new Map;return e.forEach(n=>{t.has(n.id)||t.set(n.id,n)}),Array.from(t.values())}const Y6=(e,t,n=e.length-1)=>{n<0&&(n=e.length+n),n=Math.min(e.length-1,Math.max(n,0));let r=n+1;for(;--r>-1;)if(t(e[r],r,e))return r;return-1},q6=(e,t,n=0)=>{n<0&&(n=e.length+n),n=Math.min(e.length,Math.max(n,0));let r=n-1;for(;++r<e.length;)if(t(e[r],r,e))return r;return-1},Z6=e=>{e.sort((t,n)=>t-n);for(let t=1;t<e.length;t++)if(e[t]!==e[t-1]+1)return!1;return!0},Q6={isViewport:e=>!Yu(e.zoom)&&!Yu(e.viewBackgroundColor)},ge={ancestors(e,t={}){const{reverse:n=!1}=t;let r=ge.levels(e,t);return n?r=r.slice(1):r=r.slice(0,-1),r},levels(e,t={}){const{reverse:n=!1}=t,r=[];for(let i=0;i<=e.length;i++)r.push(e.slice(0,i));return n&&r.reverse(),r},parent(e){if(e.length===0)throw new Error(`Cannot get the parent path of the root path [${e}].`);return e.slice(0,-1)},next(e){if(e.length===0)throw new Error(`Cannot get the next path of a root path [${e}], because it has no next index.`);const t=e[e.length-1];return e.slice(0,-1).concat(t+1)},hasPrevious(e){return e[e.length-1]>0},previous(e){if(e.length===0)throw new Error(`Cannot get the previous path of a root path [${e}], because it has no previous index.`);const t=e[e.length-1];if(t<=0)throw new Error(`Cannot get the previous path of a first child path [${e}] because it would result in a negative index.`);return e.slice(0,-1).concat(t-1)},isAncestor(e,t){return e.length<t.length&&ge.compare(e,t)===0},compare(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},equals(e,t){return e.length===t.length&&e.every((n,r)=>n===t[r])},endsBefore(e,t){const n=e.length-1,r=e.slice(0,n),i=t.slice(0,n),o=e[n],s=t[n];return ge.equals(r,i)&&o<s},isSibling(e,t){if(e.length!==t.length)return!1;const n=e.slice(0,-1),r=t.slice(0,-1),i=e[e.length-1],o=t[t.length-1];return i!==o&&ge.equals(n,r)},transform(e,t){if(!e)return null;const n=[...e];if(e.length===0)return n;switch(t.type){case"insert_node":{const{path:r}=t;(ge.equals(r,n)||ge.endsBefore(r,n)||ge.isAncestor(r,n))&&(n[r.length-1]+=1);break}case"remove_node":{const{path:r}=t;if(ge.equals(r,n)||ge.isAncestor(r,n))return null;ge.endsBefore(r,n)&&(n[r.length-1]-=1);break}case"move_node":{const{path:r,newPath:i}=t;if(ge.equals(r,i))return n;if(ge.isAncestor(r,n)||ge.equals(r,n)){const o=i.slice();return ge.endsBefore(r,i)&&r.length<i.length&&(o[r.length-1]-=1),o.concat(n.slice(r.length))}else ge.isSibling(r,i)&&(ge.isAncestor(i,n)||ge.equals(i,n))?ge.endsBefore(r,n)?n[r.length-1]-=1:n[r.length-1]+=1:ge.endsBefore(i,n)||ge.equals(i,n)||ge.isAncestor(i,n)?(ge.endsBefore(r,n)&&(n[r.length-1]-=1),n[i.length-1]+=1):ge.endsBefore(r,n)&&(ge.equals(i,n)&&(n[i.length-1]+=1),n[r.length-1]-=1);break}}return n}},Ae={parent:(e,t)=>{const n=ge.parent(t);return Ae.get(e,n)},*parents(e,t,n={}){for(const r of ge.ancestors(t,n))yield Ae.get(e,r)},get(e,t){let n=e;for(let r=0;r<t.length;r++){const i=t[r];if(!n||!n.children||!n.children[i])throw new Error(`Cannot find a descendant at path [${t}]`);n=n.children[i]}return n},last(e,t){let n=Ae.get(e,t);for(;n&&n.children&&n.children.length>0;){const r=n.children.length-1;n=n.children[r]}return n},first(e,t){const n=t.slice();let r=Ae.get(e,n);if(!r.children)return r;for(;r&&r.children.length!==0;)r=r.children[0],n.push(0);return r}},J6=(e,t,n,r,i)=>{var o,s;switch(i.type){case"insert_node":{const{path:u,node:l}=i,a=Ae.parent(e,u),c=u[u.length-1];if(!a.children||c>a.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${u}] because the destination is past the end of the node.`);a.children.splice(c,0,l);break}case"remove_node":{const{path:u}=i,l=Ae.parent(e,u),a=u[u.length-1];if(!l.children||a>l.children.length)throw new Error(`Cannot apply an "insert_node" operation at path [${u}] because the destination is past the end of the node.`);l.children.splice(a,1);break}case"move_node":{const{path:u,newPath:l}=i;if(ge.isAncestor(u,l))throw new Error(`Cannot move a path [${u}] to new path [${l}] because the destination is inside itself.`);const a=Ae.get(e,u),c=Ae.parent(e,u),f=u[u.length-1];(o=c.children)==null||o.splice(f,1);const h=ge.transform(u,i),g=Ae.get(e,ge.parent(h)),p=h[h.length-1];(s=g.children)==null||s.splice(p,0,a);break}case"set_node":{const{path:u,properties:l,newProperties:a}=i;if(u.length===0)throw new Error("Cannot set properties on the root node!");const c=Ae.get(e,u);for(const f in a){const h=a[f];h==null?delete c[f]:c[f]=h}for(const f in l)a.hasOwnProperty(f)||delete c[f];break}case"set_viewport":{const{newProperties:u}=i;if(u==null)n=u;else{if(n==null){if(!Q6.isViewport(u))throw new Error(`Cannot apply an incomplete "set_viewport" operation properties ${JSON.stringify(u)} when there is no current viewport.`);n={...u}}for(const l in u){const a=u[l];a==null?delete n[l]:n[l]=a}}break}case"set_selection":{const{newProperties:u}=i;u==null?t=u:t===null?t=i.newProperties:t=u;break}case"set_theme":{const{newProperties:u}=i;r=u;break}}return{selection:t,viewport:n,theme:r}},e9={transform(e,t){e.children=yu(e.children);let n=e.viewport&&yu(e.viewport),r=e.selection&&yu(e.selection),i=e.theme&&yu(e.theme);try{const o=J6(e,r,n,i,t);n=o.viewport,r=o.selection,i=o.theme}finally{e.children=wu(e.children),r?e.selection=Qr(r)?wu(r):r:e.selection=null,e.viewport=Qr(n)?wu(n):n,e.theme=Qr(i)?wu(i):i}}},C={isHit:(e,t)=>C.isHitX(e,t)&&C.isHitY(e,t),isHitX:(e,t)=>{const n=e.x<t.x?e.x:t.x,r=e.x+e.width>t.x+t.width?e.x+e.width:t.x+t.width;return Math.floor(r-n-e.width-t.width)<=0},isHitY:(e,t)=>{const n=e.y<t.y?e.y:t.y,r=e.y+e.height>t.y+t.height?e.y+e.height:t.y+t.height;return Math.floor(r-n-e.height-t.height)<=0},getPoints(e){return[[e.x,e.y],[e.x+e.width,e.y+e.height]]},getRectangleByCenterPoint(e,t,n){return C.getRectangleByPoint([e[0]-t/2,e[1]-n/2],t,n)},getRectangleByPoint(e,t,n){return{x:e[0],y:e[1],width:t,height:n}},getRectangleByPoints(e){t9(e)&&(e=[e]);let t=1/0,n=1/0,r=-1/0,i=-1/0;for(const s of e){const u=s.map(a=>a[0]),l=s.map(a=>a[1]);t=Math.min(t,...u),n=Math.min(n,...l),r=Math.max(r,...u),n=Math.min(n,...l),i=Math.max(i,...l)}return{x:t,y:n,width:r-t,height:i-n}},getCornerPointsByPoints(e){const t=e.map(u=>u[0]),n=e.map(u=>u[1]),r=Math.min(...t),i=Math.max(...t),o=Math.min(...n),s=Math.max(...n);return[[r,o],[i,o],[i,s],[r,s]]},getOutlineRectangle:(e,t)=>({x:e.x+t,y:e.y+t,width:e.width-t*2,height:e.height-t*2}),inflate:(e,t)=>{const n=t/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}},isEqual:(e,t)=>e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height,getCornerPoints:e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],getCenterPoint:e=>[e.x+e.width/2,e.y+e.height/2],getCenterPointByPoints:e=>C.getCenterPoint(C.getRectangleByPoints(e)),getEdgeCenterPoints:e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],getConnectionPoint:(e,t)=>[e.x+e.width*t[0],e.y+e.height*t[1]],expand(e,t,n=t,r=t,i=n){return{x:e.x-t,y:e.y-n,width:e.width+t+r,height:e.height+n+i}},getGapCenter(e,t,n){const r=n?"x":"y",i=n?"width":"height",s=[e[r],e[r]+e[i],t[r],t[r]+t[i]].sort((u,l)=>u-l);return(s[1]+s[2])/2},isPointInRectangle(e,t){const n=t[0],r=t[1];return n>e.x&&n<e.x+e.width&&r>e.y&&r<e.y+e.height},getBoundingRectangle(e){if(e.length===0)throw new Error("rectangles can not be empty array");let t=Number.MAX_VALUE,n=Number.MAX_VALUE,r=Number.NEGATIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return e.forEach(o=>{t=Math.min(t,o.x),n=Math.min(n,o.y),r=Math.max(r,o.x+o.width),i=Math.max(i,o.y+o.height)}),{x:t,y:n,width:r-t,height:i-n}}};function t9(e){return Array.isArray(e)&&e.every(t=>Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")}function y5(e,t,n,r,i,o){const s=e-n,u=t-r,l=i-n,a=o-r,c=s*l+u*a,f=l*l+a*a;let h=-1;f!==0&&(h=c/f);let g,p;h<0?(g=n,p=r):h>1?(g=i,p=o):(g=n+h*l,p=r+h*a);const d=e-g,y=t-p;return Math.hypot(d,y)}function n9(e,t){const n=e[0],r=e[1],i=t[0][0],o=t[0][1],s=t[1][0],u=t[1][1],l=n-i,a=r-o,c=s-i,f=u-o,h=l*c+a*f,g=c*c+f*f;let p=-1;g!==0&&(p=h/g);let d,y;return p<0?(d=i,y=o):p>1?(d=s,y=u):(d=i+p*c,y=o+p*f),[d,y]}function w5(e,t){const n=e.length;let r=1/0;for(let i=0;i<n-1;i++){const o=e[i],s=e[i+1],u=y5(t[0],t[1],o[0],o[1],s[0],s[1]);u<r&&(r=u)}return r}function Be(e,t,n=!0){const r=t.length;let i=1/0,o=e;for(let s=0;s<r;s++){const u=t[s];if(s===r-1&&!n)continue;const l=s===r-1?t[0]:t[s+1],a=y5(e[0],e[1],u[0],u[1],l[0],l[1]);a<i&&(i=a,o=n9(e,[u,l]))}return o}function kn(e,t,n,r,i=0){const o={x:t[0]-n,y:t[1]-r,height:r*2,width:n*2},s=Math.abs(e[0]-o.x-o.width/2),u=Math.abs(e[1]-o.y-o.height/2);let l=.707,a=.707;const c=Math.abs(o.width)/2,f=Math.abs(o.height)/2;[0,1,2,3].forEach(p=>{const d=c*l,y=f*a,m=(c*c-f*f)*l**3/c,v=(f*f-c*c)*a**3/f,w=d-m,E=y-v,S=s-m,T=u-v,B=Math.hypot(E,w),R=Math.hypot(T,S);l=Math.min(1,Math.max(0,(S*B/R+m)/c)),a=Math.min(1,Math.max(0,(T*B/R+v)/f));const b=Math.hypot(a,l);l/=b,a/=b});const h=e[0]>t[0]?1:-1,g=e[1]>t[1]?1:-1;return[t[0]+c*l*h,t[1]+f*a*g]}function qu(e,t,n,r,i){return[(e-n)*Math.cos(i)-(t-r)*Math.sin(i)+n,(e-n)*Math.sin(i)+(t-r)*Math.cos(i)+r]}function Ze(e,t,n,r){const i=e-n,o=t-r;return Math.hypot(i,o)}function dc(e,t,n){var r=Math.max(n.x-e,0,e-(n.x+n.width)),i=Math.max(n.y-t,0,t-(n.y+n.height));return Math.sqrt(r*r+i*i)}const ef=(e,t,n,r)=>{const i=(f,h)=>f[0]*h[1]-f[1]*h[0],o=[t[0]-e[0],t[1]-e[1]],s=[n[0]-e[0],n[1]-e[1]],u=[r[0]-e[0],r[1]-e[1]],l=[e[0]-n[0],e[1]-n[1]],a=[t[0]-n[0],t[1]-n[1]],c=[r[0]-n[0],r[1]-n[1]];return i(o,s)*i(o,u)<=0&&i(c,l)*i(c,a)<=0},Bh=(e,t,n=!0)=>{const r=C.getCornerPoints(t),i=e.length;for(let o=0;o<i;o++){if(o===i-1&&!n)continue;const s=e[o],u=e[(o+1)%i];if(ef(s,u,r[0],r[1])||ef(s,u,r[1],r[2])||ef(s,u,r[2],r[3])||ef(s,u,r[3],r[0])||yo(s,r)||yo(u,r))return!0}return!1},yo=(e,t)=>{const n=e[0],r=e[1];let i=!1;for(var o=0,s=t.length-1;o<t.length;s=o++){let u=t[o][0],l=t[o][1],a=t[s][0],c=t[s][1];l>r!=c>r&&n<(a-u)*(r-l)/(c-l)+u&&(i=!i)}return i},Ri=(e,t,n,r,i=0)=>{const o=Math.cos(i),s=Math.sin(i),u=(e[0]-t[0])*o+(e[1]-t[1])*s,l=(e[1]-t[1])*o-(e[0]-t[0])*s;return u*u/(n*n)+l*l/(r*r)<=1},Km=(e,t,n,r=0)=>{const{x:i,y:o,width:s,height:u}=t,l=e[0]>=i&&e[0]<=i+s&&e[1]>=o&&e[1]<=o+u,a=e[0]>=i&&e[0]<=i+n&&e[1]>=o&&e[1]<=o+n&&Math.hypot(e[0]-(i+n),e[1]-(o+n))>n,c=e[0]>=i&&e[0]<=i+n&&e[1]>=o+u&&e[1]<=o+u-n&&Math.hypot(e[0]-(i+n),e[1]-(o+u-n))>n,f=e[0]>=i+s-n&&e[0]<=i+s&&e[1]>=o&&e[1]<=o+n&&Math.hypot(e[0]-(i+s-n),e[1]-(o+n))>n,h=e[0]>=i+s-n&&e[0]<=i+s&&e[1]>=o+u-n&&e[1]<=o+u&&Math.hypot(e[0]-(i+s-n),e[1]-(o+u-n))>n;return l&&!(a||c||f||h)},gc=function(e){let n,r,i,o,s,u,l,a,c,f,h,g,p;var d,y,m,v,w,E;const S=[];S.push([Math.round(e[0][0]),Math.round(e[0][1])]);for(var T=e.length,B=0;B<T-1;B++)n=B==0?e[0]:e[B-1],r=e[B],i=e[B+1],o=B+2<T?e[B+2]:i,l=Math.sqrt(Math.pow(n[0]-r[0],2)+Math.pow(n[1]-r[1],2)),a=Math.sqrt(Math.pow(r[0]-i[0],2)+Math.pow(r[1]-i[1],2)),c=Math.sqrt(Math.pow(i[0]-o[0],2)+Math.pow(i[1]-o[1],2)),d=Math.pow(c,.5),m=Math.pow(c,2*.5),y=Math.pow(a,.5),v=Math.pow(a,2*.5),E=Math.pow(l,.5),w=Math.pow(l,2*.5),f=2*w+3*E*y+v,h=2*m+3*d*y+v,g=3*E*(E+y),g>0&&(g=1/g),p=3*d*(d+y),p>0&&(p=1/p),s=[(-v*n[0]+f*r[0]+w*i[0])*g,(-v*n[1]+f*r[1]+w*i[1])*g],u=[(m*r[0]+h*i[0]-v*o[0])*p,(m*r[1]+h*i[1]-v*o[1])*p],s[0]==0&&s[1]==0&&(s=r),u[0]==0&&u[1]==0&&(u=i),S.push(s,u,i);return S};function ii(e,t,n,r){return Math.abs(t)===0?e>0?-1/0:1/0:-r*r*e/(n*n*t)}function oi(e,t,n){if(n===1/0)return[0,-1];if(n===-1/0)return[0,1];let r=[1,-n];return t<0&&(r=[-r[0],-r[1]]),r}function r9(e){return+e.toFixed(2)}function Ym(e,t){const n=Math.pow(10,t);return Math.ceil(e*n)/n}function q1(e,t,n=1e-6){return Math.abs(e-t)<=n}function f2(e,t,n,r,i,o,s=!0){if(i===0||o===0||e[0]===t[0]&&e[1]===t[1])return[];i=i<0?i:-i,o=o<0?o:-o,e[0]-=n,e[1]-=r,t[0]-=n,t[1]-=r;var u=(t[0]-e[0])*(t[0]-e[0])/i/i+(t[1]-e[1])*(t[1]-e[1])/o/o,l=2*e[0]*(t[0]-e[0])/i/i+2*e[1]*(t[1]-e[1])/o/o,a=e[0]*e[0]/i/i+e[1]*e[1]/o/o-1,c=[],f=l*l-4*u*a;return f===0?c.push(-l/2/u):f>0&&(c.push((-l+Math.sqrt(f))/2/u),c.push((-l-Math.sqrt(f))/2/u)),c.filter(h=>!s||h>=0&&h<=1).map(h=>[e[0]+(t[0]-e[0])*h+n,e[1]+(t[1]-e[1])*h+r])}function i9(e,t,n){const i=P.getBoardContainer(e).getBoundingClientRect();return dc(t,n,i)===0}function qm(e){const{hideScrollbar:t}=e.options;let n=0;if(!t){const r=P.getViewportContainer(e);n=r.offsetWidth-r.clientWidth}return n}const fl="http://www.w3.org/2000/svg";function Te(){return document.createElementNS(fl,"g")}function Zm(){return document.createElementNS(fl,"path")}function Y0(e,t){const n=document.createElementNS(fl,"rect");n.setAttribute("x",`${e.x}`),n.setAttribute("y",`${e.y}`),n.setAttribute("width",`${e.width}`),n.setAttribute("height",`${e.height}`);for(let r in t){const i=r;n.setAttribute(r,`${t[i]}`)}return n}const ke=(e,t)=>{e.setAttribute("stroke-linecap",t)},o9=(e,t)=>{e.querySelectorAll("path").forEach(n=>{n.setAttribute("stroke-linecap",t)})};function s9(){return document.createElementNS(fl,"mask")}function u9(e,t,n,r){var i=document.createElementNS(fl,"text");return i.setAttribute("x",`${e}`),i.setAttribute("y",`${t}`),i.setAttribute("fill",n),i.textContent=r,i}const l9=e=>a9(e)&&e.nodeType===1,a9=e=>e instanceof window.Node,c9=e=>!!(l9(e)&&(e.tagName==="INPUT"||e.tagName==="TEXTAREA")),Hi=e=>e.button===V6.MAIN;function Qm(e,t,n,r){var i=document.createElementNS(fl,"foreignObject");return i.setAttribute("x",`${e}`),i.setAttribute("y",`${t}`),i.setAttribute("width",`${Ym(n,0)}`),i.setAttribute("height",`${r}`),i}function ia(e,t,n,r,i){const o=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");o&&(o.setAttribute("width",`${Ym(t,0)}`),o.setAttribute("height",`${n}`),o.setAttribute("x",`${r}`),o.setAttribute("y",`${i}`))}function f9(e,t){const n=e instanceof SVGForeignObjectElement?e:e.querySelector("foreignObject");n&&n.setAttribute("width",`${Ym(t,0)}`)}const h2=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),h9=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),d9=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),g9=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),p9=(e,t)=>e.type==="set_viewport"&&e.type===(t==null?void 0:t.type),m9=(e,t)=>!(e.type==="set_selection"||e.type==="set_viewport"),v9=e=>e.type!=="set_selection",os={isSaving(e){return q0.get(e)},isMerging(e){return gr.get(e)},withoutMerging(e,t){const n=os.isMerging(e);gr.set(e,!1),t(),gr.set(e,n)},withoutSaving(e,t){const n=os.isSaving(e);q0.set(e,!1),t(),q0.set(e,n)}},y9={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],arrow:["down","left","right","up"],extendArrow:["shift+down","shift+left","shift+right","shift+up"],moveBackward:"left",moveForward:"right",moveUp:"up",moveDown:"down",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",extendUp:"shift+up",extendDown:"shift+down",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z",shift:"shift"},w9={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},C9={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Ke=e=>{const t=y9[e],n=w9[e],r=C9[e],i=t&&Lt(t),o=n&&Lt(n),s=r&&Lt(r);return u=>!!(i&&i(u)||h2&&o&&o(u)||!h2&&s&&s(u))},en={isBold:Ke("bold"),isCompose:Ke("compose"),isArrow:Ke("arrow"),isMoveBackward:Ke("moveBackward"),isMoveForward:Ke("moveForward"),isMoveUp:Ke("moveUp"),isMoveDown:Ke("moveDown"),isDeleteBackward:Ke("deleteBackward"),isDeleteForward:Ke("deleteForward"),isDeleteLineBackward:Ke("deleteLineBackward"),isDeleteLineForward:Ke("deleteLineForward"),isDeleteWordBackward:Ke("deleteWordBackward"),isDeleteWordForward:Ke("deleteWordForward"),isExtendBackward:Ke("extendBackward"),isExtendForward:Ke("extendForward"),isExtendUp:Ke("extendUp"),isExtendDown:Ke("extendDown"),isExtendArrow:Ke("extendArrow"),isExtendLineBackward:Ke("extendLineBackward"),isExtendLineForward:Ke("extendLineForward"),isItalic:Ke("italic"),isMoveLineBackward:Ke("moveLineBackward"),isMoveLineForward:Ke("moveLineForward"),isMoveWordBackward:Ke("moveWordBackward"),isMoveWordForward:Ke("moveWordForward"),isRedo:Ke("redo"),isSplitBlock:Ke("splitBlock"),isTransposeCharacter:Ke("transposeCharacter"),isUndo:Ke("undo"),isShift:Ke("shift")};function Ve(e=5){const t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz",n=t.length;let r="";for(let i=0;i<e;i++)r+=t.charAt(Math.floor(Math.random()*n));return r}function on(e,t,n,r){if(e.children&&(!n||n(e))){let i=[...e.children];i=r?i.reverse():i,i.forEach(o=>{on(o,t,n)})}t(e)}const Ws=e=>t=>!!(P.isBoard(t)||e.isRecursion(t)),Rn="#6698FF",Jm="#6698FF25",Zu={isCollapsed(e){return e.anchor[0]==e.focus[0]&&e.anchor[1]===e.focus[1]}},Ue={isRootElement(e){const t=hs.get(e);return!!(t&&P.isBoard(t))},getElementRef(e){return Ul.get(e)},getElementG(e){const t=zl.get(e);if(!t)throw new Error(`can not resolve element g: ${JSON.stringify(e)}`);return t},hasMounted(e){return!!Ue.getContainerG(e,{suppressThrow:!0})},getContainerG(e,t){const n=Vl.get(e)||null;if(!n){if(t.suppressThrow)return null;throw new Error("can not resolve container g")}return n}},Ld=(e,t,n=!0)=>[...t].sort((r,i)=>{const o=P.findPath(e,r),s=P.findPath(e,i);return n?o[0]-s[0]:s[0]-o[0]}),C5=new Map,kl=e=>C5.get(e)||[],Ol=(e,t)=>{C5.set(e,t)};class x9{constructor(t){this.debugKey=t}isDebug(){return Zi(this.debugKey)}clear(){if(!this.isDebug())return;const t=kl(this.debugKey);Ol(this.debugKey,[]),t.forEach(n=>n.remove())}drawPolygon(t,n,r){if(!Zi(this.debugKey))return;const i=P.getRoughSVG(t).polygon(n,r||{stroke:"red"});i.classList.add(this.debugKey),P.getElementActiveHost(t).append(i);const o=kl(this.debugKey);return o.push(i),Ol(this.debugKey,o),i}drawLine(t,n,r){if(!Zi(this.debugKey))return;const i=P.getRoughSVG(t).linearPath(n,r||{stroke:"red"});i.classList.add(this.debugKey),P.getElementActiveHost(t).append(i);const o=kl(this.debugKey);return o.push(i),Ol(this.debugKey,o),i}drawRectangle(t,n,r){if(!Zi(this.debugKey))return;let i;n instanceof Array?i=C.getRectangleByPoints(n):i=n;const o=P.getRoughSVG(t).rectangle(i.x,i.y,i.width,i.height,r||{stroke:"red"});o.classList.add(this.debugKey),P.getElementActiveHost(t).append(o);const s=kl(this.debugKey);return s.push(o),Ol(this.debugKey,s),o}drawCircles(t,n,r=0,i=!1,o){if(!Zi(this.debugKey))return;const s=[];return n.forEach((u,l)=>{const a=P.getRoughSVG(t).circle(u[0],u[1],i?r*(l+1):r,Object.assign({},{stroke:"red",fill:"red",fillStyle:"solid"},o||{}));a.classList.add(this.debugKey),P.getElementActiveHost(t).append(a);const c=kl(this.debugKey);c.push(a),s.push(a),Ol(this.debugKey,c)}),s}}const pc=e=>new x9(e),Zi=e=>localStorage.getItem(e||"debug:plait")==="true";var Jr;(function(e){e.withSelection="withSelection",e.withHand="withHand"})(Jr||(Jr={}));const x5=(e,t,n=()=>!0)=>{const r=t||e.selection,i=[];if(!r)return[];if(Zu.isCollapsed(r)){const s=E5(e,r.anchor,n);return s!=null&&s.length?s:[]}return on(e,s=>{if(!P.isBoard(s)&&n(s)){let u=!1;try{u=e.isRectangleHit(s,r)}catch(l){Zi()&&console.error("isRectangleHit",l,"node",s)}u&&i.push(s)}},Ws(e),!0),i},E5=(e,t,n=()=>!0)=>{let r=[];return on(e,i=>{if(P.isBoard(i)||!n(i)||!Ue.hasMounted(i))return;let o=!1;try{o=e.isHit(i,t)}catch(s){Zi()&&console.error("isHit",s,"node",i)}if(o){r.push(i);return}},Ws(e),!0),r},$i=(e,t,n=()=>!0)=>{const r=E5(e,t,n);return e.getOneHitElement(r)},E9=(e,t)=>{const n=re(e),r=n.length>0&&He(e,n,!1);return r&&C.isPointInRectangle(r,t)?n:[]},Yr=(e,t)=>{const n=Ld(e,t);p5.set(e,n)},re=e=>p5.get(e)||[],Fo=(e,t)=>{let n=[];Array.isArray(t)?n.push(...t):n.push(t);const r=re(e);Yr(e,[...r,...n])},Gd=(e,t,n=!1)=>{const r=re(e);if(r.includes(t)){const i=[];e.isRecursion(t)&&n?on(t,s=>{i.push(s)},s=>e.isRecursion(s)):i.push(t);const o=r.filter(s=>!i.includes(s));Yr(e,o)}},P9=(e,t,n)=>{const r=re(e);r.splice(r.indexOf(t),1,n)},zs=e=>{Yr(e,[])},Z1=(e,t)=>!!re(e).find(r=>r===t),Q1=e=>{const t=e.getPluginOptions(Jr.withSelection);e.setPluginOptions(Jr.withSelection,{isDisabledSelection:!0}),setTimeout(()=>{e.setPluginOptions(Jr.withSelection,{...t})},0)},S9=(e,t)=>E9(e,t).length>0,D9=(e,t)=>!!$i(e,t)||S9(e,t);function hl(e,t,n,r,i,o,s=!1,u){let l=u||0;const a=[t+l,n],c=[r-l,n],f=[r,n+l],h=[r,i-l],g=[r-l,i],p=[t+l,i],d=[t,i-l],y=[t,n+l],m=e.path(`M${c[0]} ${c[1]} A ${l} ${l}, 0, 0, 1, ${f[0]} ${f[1]} L ${h[0]} ${h[1]} A ${l} ${l}, 0, 0, 1, ${g[0]} ${g[1]} L ${p[0]} ${p[1]} A ${l} ${l}, 0, 0, 1, ${d[0]} ${d[1]} L ${y[0]} ${y[1]} A ${l} ${l}, 0, 0, 1, ${a[0]} ${a[1]} Z`,o);return ke(m,"round"),m}const Hr=(e,t,n)=>{const i=P.getRoughSVG(e).rectangle(t.x,t.y,t.width,t.height,n);return ke(i,"round"),i};function dl(e,t,n=40){const r=Math.abs(e[0]-t[0]),i=Math.abs(e[1]-t[1]);let o=Math.hypot(r,i);const s=o/2,u=s/o*r,l=s/o*i,a=[t[0]>e[0]?t[0]-u:t[0]+u,t[1]>e[1]?t[1]-l:t[1]+l],c=qu(a[0],a[1],t[0],t[1],n*Math.PI/180);return{pointLeft:qu(a[0],a[1],t[0],t[1],-n*Math.PI/180),pointRight:c}}function Vs(e,t,n,r){return e.circle(t[0],t[1],n,r)}function tf(e,t,n,r){return e.linearPath([t,n],r)}function Zn(e,t,n){const r=Te(),i=Zm();let o="";return e.forEach((s,u)=>{u===0?o+=`M ${s[0]} ${s[1]} `:o+=`L ${s[0]} ${s[1]} `}),n&&(o+="Z"),i.setAttribute("d",o),i.setAttribute("stroke",`${t==null?void 0:t.stroke}`),i.setAttribute("stroke-width",`${t==null?void 0:t.strokeWidth}`),i.setAttribute("fill",`${(t==null?void 0:t.fill)||"none"}`),t!=null&&t.strokeLineDash&&i.setAttribute("stroke-dasharray",`${t.strokeLineDash}`),r.appendChild(i),r}function T9(e,t){const n=Te(),r=Zm();let i="";for(let o=0;o<e.length-3;o+=3)o===0?i+=`M ${e[0][0]} ${e[0][1]} `:i+=`C ${e[o+1][0]} ${e[o+1][1]}, ${e[o+2][0]} ${e[o+2][1]}, ${e[o+3][0]} ${e[o+3][1]}`;return r.setAttribute("d",i),r.setAttribute("stroke",`${t==null?void 0:t.stroke}`),r.setAttribute("stroke-width",`${t==null?void 0:t.strokeWidth}`),r.setAttribute("fill","none"),n.appendChild(r),n}function ev(e,t){const n={type:"set_viewport",properties:e.viewport,newProperties:t};e.apply(n)}const A9={setViewport:ev};function B9(e,t){const n={type:"set_theme",properties:e.theme,newProperties:t};e.apply(n)}function Nd(e,t,n){n=n??e.viewport.zoom,ev(e,{...e.viewport,zoom:n,origination:t}),R5(e)}function M9(e,t,n=!0){t=N9(t);const r=P.getMovingPointInBoard(e),o=P.getBoardContainer(e).getBoundingClientRect(),s=P.getBoardContainer(e).getBoundingClientRect();let u=[s.width/2,s.height/2];!n&&r&&dc(r[0],r[1],o)===0&&(u=[r[0]-o.x,r[1]-o.y]);const l=e.viewport.zoom,a=nv(e),c=a[0]+u[0]/l,f=a[1]+u[1]/l,h=[c-u[0]/t,f-u[1]/t];Nd(e,h,t)}function R9(e){let t=qm(e);const n=P.getBoardContainer(e).getBoundingClientRect(),r=He(e,e.children,!0),i=e.viewport.zoom,o=16,s=n.width-2*o,u=n.height-2*o;let l=i;s<r.width||u<r.height?l=Math.min(s/r.width,u/r.height):l=1;const a=A5(e),c=[a[0]-n.width/2/l+t/2/i,a[1]-n.height/2/l+t/2/i];Nd(e,c,l)}function k9(e,t){let n=qm(e);const r=P.getBoardContainer(e),i=r.getBoundingClientRect();let o=0;t.maxWidth?o=t.maxWidth:o=i.width;const s=He(e,e.children,!0),u=o-2*t.autoFitPadding;let l=0;u<s.width?l=Math.min(u/s.width):l=1;let a=s.height*l+2*t.autoFitPadding;if(a>t.limitHeight){const g=r.closest(`.${t.containerClass}`);g.style.height=`${a}px`,tv(e)}else a=t.limitHeight;const c=s.x+s.width/2,f=s.y+s.height/2,h=[c-o/2/l+n/2/l,f-a/2/l+n/2/l];Nd(e,h,l)}function O9(e,t){t=t??e.theme.themeColorMode,B9(e,{themeColorMode:t}),on(e,n=>{e.applyTheme(n)})}const F9=(e,t)=>{e.pointer!==t&&(e.pointer=t)};function b9(e,t){var r;if((r=re(e))==null?void 0:r[0]){const i=P.getBoardContainer(e).getBoundingClientRect(),o=qm(e),s=A5(e),u=t[0]-s[0],l=t[1]-s[1],a=e.viewport.zoom,c=[u-i.width/2/a+o/2/a,l-i.height/2/a+o/2/a];ev(e,{...e.viewport,origination:c}),R5(e)}}const Je={updatePointerType:F9,updateViewport:Nd,fitViewport:R9,updateZoom:M9,updateThemeColor:O9,fitViewportWidth:k9,moveToCenter:b9},P5=e=>P.getHost(e).viewBox.baseVal;function xe(e,t,n){const i=P.getHost(e).getBoundingClientRect();return[t-i.x,n-i.y]}function Ce(e,t){const n=P5(e),{zoom:r}=e.viewport,i=t[0]/r+n.x,o=t[1]/r+n.y;return[i,o]}function I9(e,t){const{zoom:n}=e.viewport,r=P5(e),i=(t[0]-r.x)*n,o=(t[1]-r.y)*n;return[i,o]}const S5=new WeakMap,D5=new WeakMap;function L9(e){const{hideScrollbar:t}=e.options,n=t?z6:0,r=P.getBoardContainer(e).getBoundingClientRect();return{width:r.width+n,height:r.height+n}}function G9(e,t){const n=He(e,e.children,!0),r=P.getBoardContainer(e).getBoundingClientRect(),i=r.width/t,o=r.height/t;let s,u,l,a;if(n.width<i){const c=n.x+n.width/2,f=i/2;s=c-f,u=c+f}else s=n.x,u=n.x+n.width;if(n.height<o){const c=n.y+n.height/2,f=o/2;l=c-f,a=c+f}else l=n.y,a=n.y+n.height;return{left:s,right:u,top:l,bottom:a}}function N9(e,t=$6,n=_6){return e<t?t:e>n?n:e}function T5(e,t){const n=P.getBoardContainer(e).getBoundingClientRect(),r=G9(e,t),i=n.width/2,o=n.height/2;return[r.left-i/t,r.top-o/t,r.right-r.left+i*2/t,r.bottom-r.top+o*2/t]}function A5(e){const t=He(e,e.children,!0);return[t.x+t.width/2,t.y+t.height/2]}function H9(e,t){const n=e.viewport.zoom,r=P.getHost(e);r.style.display="block",r.style.width=`${t[2]*n}px`,r.style.height=`${t[3]*n}px`,t&&t[2]>0&&t[3]>0&&r.setAttribute("viewBox",t.join(" "))}function Ga(e){const t=nv(e);if(!t)return;const[n,r]=I9(e,t);B5(e,n,r)}function B5(e,t,n,r=!0){const i=P.getViewportContainer(e),o=i.scrollLeft,s=i.scrollTop;if(!q1(i.scrollLeft,t,1)||!q1(i.scrollTop,n,1)){i.scrollLeft=t,i.scrollTop=n;const u=i.offsetWidth,l=i.offsetHeight;if(o===i.scrollLeft&&s===i.scrollTop)M5(e,o,s);else{const a=t>0&&n>0&&t<i.scrollWidth-u&&n<i.scrollHeight-l;r&&a&&O5(e,!0)}}}function M5(e,t,n){const r=Ce(e,[t,n]);me.isEquals(r,nv(e))||(Je.updateViewport(e,r),k5(e,!0))}function tv(e){const{width:t,height:n}=L9(e),r=P.getViewportContainer(e);r.style.width=`${t}px`,r.style.height=`${n}px`}function Mh(e){const t=e.viewport.zoom,n=T5(e,t);H9(e,n)}function $9(e){var t;if(!((t=e.viewport)!=null&&t.origination)){const n=e.viewport.zoom,r=P.getBoardContainer(e).getBoundingClientRect(),i=T5(e,n),o=i[0]+i[2]/2,s=i[1]+i[3]/2,u=[o-r.width/2/n,s-r.height/2/n];_9(e,u),Ga(e);return}Ga(e)}const _9=(e,t)=>{Vm.set(e,t)},R5=e=>{Vm.delete(e)},nv=e=>{const t=Vm.get(e);return t||e.viewport.origination},j9=e=>!!S5.get(e),k5=(e,t)=>{S5.set(e,t)},W9=e=>!!D5.get(e),O5=(e,t)=>{D5.set(e,t)};function z9(e,t,n){const r={type:"insert_node",node:t,path:n};e.apply(r)}function V9(e,t,n){const r={},i={},o=Ae.get(e,n);for(const u in t)o[u]!==t[u]&&(o.hasOwnProperty(u)&&(r[u]=o[u]),t[u]!=null&&(i[u]=t[u]));const s={type:"set_node",properties:r,newProperties:i,path:n};e.apply(s)}function F5(e,t){const n=Ae.get(e,t),r={type:"remove_node",path:t,node:n};e.apply(r)}function U9(e,t,n){const r={type:"move_node",path:t,newPath:n};e.apply(r)}const ds={insertNode:z9,setNode:V9,removeNode:F5,moveNode:U9},If=new WeakMap,X9=(e,t)=>b5(e)[t]||null,b5=e=>If.get(e)||{},ni=(e,t,n)=>{const r=()=>{let o=requestAnimationFrame(()=>{const u=If.get(e)||{};u[t]=null,If.set(e,u),P.isAlive(e)&&n()});const s=b5(e);s[t]=o,If.set(e,s)};let i=X9(e,t);i!==null&&cancelAnimationFrame(i),r()},K9=(e,t,n)=>{let r=null;return i=>{r!==null?(clearTimeout(r),r=setTimeout(()=>{e(i),r=null},t)):(e(i),r=setTimeout(()=>{r=null},t))}},Hd=(e,t)=>(Ld(e,t),t.map(n=>e.children.map(r=>r.id).indexOf(n.id)).filter(n=>n>=0)),Y9=(e,t)=>{const n=Hd(e,t);return n[n.length-1]},mc=(e,t)=>{t.map(n=>{const r=P.findPath(e,n.element),i=e.pathRef(r);return()=>{i.current&&ds.moveNode(e,i.current,n.newPath),i.unref()}}).forEach(n=>{n()})},I5=new WeakMap,Ts=e=>!!I5.get(e),_i=(e,t)=>{I5.set(e,t)},q9=e=>Id.get(e)||[],Rh=e=>(Id.get(e)||[]).length>0,Z9=e=>{Id.delete(e),_i(e,!1)},d2=(e,t)=>{Id.set(e,t),_i(e,!0)},J1="foreignObject[class^='foreign-object']";function g2(e){return e.nodeType===Node.ELEMENT_NODE}function Q9(e){return new Promise((t,n)=>{const r=new Image;r.crossOrigin="Anonymous",r.onload=()=>t(r),r.onerror=()=>n(new Error("Failed to load image")),r.src=e})}function J9(e,t,n="transparent"){const r=document.createElement("canvas"),i=r.getContext("2d");return r.width=e,r.height=t,r.style.width=`${e}px`,r.style.height=`${t}px`,i.strokeStyle="#ffffff",i.fillStyle=n,i.fillRect(0,0,e,t),{canvas:r,ctx:i}}async function eM(e){const n=await(await fetch(e)).blob();return new Promise((r,i)=>{const o=new FileReader;o.onloadend=()=>r(o.result),o.onerror=i,o.readAsDataURL(n)})}function tM(e,t){const n=t==null?void 0:t.style;if(!n)return;const r=window.getComputedStyle(e);r.cssText?(n.cssText=r.cssText,n.transformOrigin=r.transformOrigin):Array.from(r).forEach(i=>{let o=r.getPropertyValue(i);n.setProperty(i,o,r.getPropertyPriority(i))})}function nM(e,t,n){if(n){const r=n+`, ${J1}`,i=Array.from(e.querySelectorAll(r)),o=Array.from(t.querySelectorAll(r));i.forEach((s,u)=>{const l=Array.from(s.querySelectorAll("*")).filter(g2),a=Array.from(o[u].querySelectorAll("*")).filter(g2);i.push(...l),o.push(...a)}),i.map((s,u)=>{tM(s,o[u])})}}async function rM(e,t){const n=Array.from(e.querySelectorAll(`${J1}`)),r=Array.from(t.querySelectorAll(`${J1}`));await Promise.all(n.map((i,o)=>new Promise(s=>{const l=r[o].querySelector("img"),a=l==null?void 0:l.getAttribute("src");if(!a)return s(!0);eM(a).then(c=>{l==null||l.setAttribute("src",c),s(!0)})})))}async function iM(e,t,n,r){const{width:i,height:o,x:s,y:u}=n,{padding:l=4,inlineStyleClassNames:a}=r,c=P.getHost(e),f=t.map(p=>Ue.getElementG(p)),h=c.cloneNode(),g=P.getElementHost(e).cloneNode();return h.style.width=`${i}px`,h.style.height=`${o}px`,h.style.backgroundColor="",h.setAttribute("width",`${i}`),h.setAttribute("height",`${o}`),h.setAttribute("viewBox",[s-l,u-l,i+2*l,o+2*l].join(",")),await Promise.all(f.map(async(p,d)=>{const y=p.cloneNode(!0);nM(p,y,a),await rM(p,y),g.appendChild(y)})),h.appendChild(g),h}async function oM(e,t){if(!e)return;const n=t.elements||gl(e,{match:()=>!0,recursion:()=>!0,isReverse:!1}),r=He(e,n,!1),{ratio:i=2,fillStyle:o="transparent"}=t,{width:s,height:u}=r,l=s*i,a=u*i,c=await iM(e,n,r,t),{canvas:f,ctx:h}=J9(l,a,o),g=new XMLSerializer().serializeToString(c),p=`data:image/svg+xml;charset=utf-8,${encodeURIComponent(g)}`;try{const d=await Q9(p);return h.drawImage(d,0,0,l,a),f.toDataURL("image/png")}catch(d){console.error("Error converting SVG to image:",d);return}}var ki;(function(e){e.medias="medias",e.elements="elements"})(ki||(ki={}));var Pi;(function(e){e.copy="copy",e.cut="cut",e.duplicate="duplicate",e.paste="paste"})(Pi||(Pi={}));const rv=(e,t)=>`<plait>${aM(JSON.stringify({type:e,data:t}))}</plait>`,iv=e=>{var n;let t=(n=e==null?void 0:e.match(/<plait[^>]*>(.*)<\/plait>/))==null?void 0:n[1];if(t){t=cM(t);try{const r=JSON.parse(t);if(r){if(r.type===ki.elements)return{elements:r.data};if(r.type===ki.medias)return{medias:r.data}}}catch(r){return console.error(r),null}}return null},p2=e=>{const t=document.implementation.createHTMLDocument("");return t.documentElement.innerHTML=e.trim(),t.body.textContent||t.body.innerText||""},L5=()=>"clipboard"in navigator&&"write"in navigator.clipboard,sM=()=>"clipboard"in navigator&&"writeText"in navigator.clipboard,G5=()=>"clipboard"in navigator&&"read"in navigator.clipboard,uM=(e,t,n)=>({type:e,elements:t,text:n}),lM=(e,t)=>{const{type:n,elements:r,text:i}=e;return n===t.type?{type:n,elements:r.concat(t.elements),text:i+" "+t.text}:e},$d=(e,t)=>e?lM(e,t):t,aM=e=>e.replace(/</g,"&lt;").replace(/>/g,"&gt;"),cM=e=>e.replace(/&lt;/g,"<").replace(/&gt;/g,">"),fM=(e,t,n)=>{e==null||e.setData("text/html",rv(t,n))},hM=(e,t)=>{e==null||e.setData("text/plain",t)},dM=e=>{const t=e==null?void 0:e.getData("text/html");if(t){const n=iv(t);if(n)return n}return{}},gM=e=>{if(!e)return{};const t=e==null?void 0:e.getData("text/plain");if(t){const n=iv(t);if(n)return n}return{text:t}},pM=async(e,t,n="")=>{let r=n;L5()&&await navigator.clipboard.write([new ClipboardItem({"text/html":new Blob([rv(e,t)],{type:"text/html"}),"text/plain":new Blob([JSON.stringify(r??t)],{type:"text/plain"})})])},mM=async()=>{if(!G5())return{};const e=await navigator.clipboard.read();let t={};if(Array.isArray(e)&&e[0]instanceof ClipboardItem)for(const n of e){if(vM(n)){const r=n.types.filter(u=>u.match(/^image\//)),o=(await Promise.all(r.map(u=>n.getType(u)))).filter(Boolean).map(u=>URL.createObjectURL(u));return{files:await Promise.all(o.map(async u=>{const l=await(await fetch(u)).blob();return new File([l],"plait-file",{type:l.type})}))}}if(n.types.includes("text/html")){const r=await m2(await n.getType("text/html")),i=iv(r);if(i)return i;r&&r.trim()&&(t={text:p2(r)})}if(n.types.includes("text/plain")){const r=await m2(await n.getType("text/plain"));t={text:p2(r)}}}return t},vM=e=>e.types.find(t=>t.match(/^image\//)),m2=e=>new Promise((t,n)=>{const r=new FileReader;r.addEventListener("loadend",()=>{const i=r.result;t(i)}),r.addEventListener("error",()=>{n(r.error)}),r.readAsText(e)}),yM=async e=>{let t={};return e?e.files.length?{files:Array.from(e.files)}:(t=dM(e),Object.keys(t).length===0&&(t=gM(e)),t):G5()?await mM():t},wM=async(e,t)=>{if(!t)return;const{type:n,elements:r,text:i}=t;if(L5())return await pM(n,r,i);if(e){fM(e,n,r),hM(e,i);return}if(sM())return await navigator.clipboard.writeText(rv(n,r))};function gn(e){return!!Um.get(e)}function CM(e){P.getBoardContainer(e).classList.add("selection-moving"),Um.set(e,!0),_i(e,!0)}function xM(e){P.getBoardContainer(e).classList.remove("selection-moving"),Um.delete(e),_i(e,!1)}function v2(e){const t=Lf(e);return e.pointer!==$e.hand&&!t.isDisabledSelection&&!P.isReadonly(e)}function y2(e){return!!e.operations.find(t=>fv.isSetSelectionOperation(t))}function EM(e){const t=bd.get(e);if(t)return t.elements}function PM(e){return bd.get(e)}function SM(e){bd.delete(e)}function DM(e){const t=re(e),n=He(e,t,!1);if(n.width>0&&n.height>0&&t.length>1){const r=Hr(e,C.inflate(n,xt),{stroke:Rn,strokeWidth:xt,fillStyle:"solid"});r.classList.add(cl,h5);const i=Sn(t);return i&&dr(r,C.getCenterPoint(n),i),r}return null}function TM(e,t,n){if(!e.selection)return;const r=re(e);if(!Zu.isCollapsed(e.selection)){let i=[...r];t.forEach(o=>{o.groupId?i.push(...sv(e,o)):i.push(o)}),Yr(e,Xm(i));return}if(Zu.isCollapsed(e.selection)){const i=t[0],o=bo(e,i,!0);if(o.length){const s=xr(e,o[o.length-1],!0)||[],u=r.some(l=>s.map(a=>a.id).includes(l.id));n?AM(e,t,u,s):BM(e,t,u,o)}}}function AM(e,t,n,r){const i=re(e);let o=[...i];const s=t[0];let u=[];if(!n)u=r;else{const l=i.some(c=>c.id===s.id),a=r.filter(c=>i.includes(c));l?u=a.filter(c=>c.id!==s.id):u.push(...a,...t)}r.forEach(l=>{o.includes(l)&&o.splice(o.indexOf(l),1)}),u.length&&o.push(...u),Yr(e,Xm(o))}function BM(e,t,n,r){let i=[...t];const o=N5(e,r);if(o.length>0)o.length>1&&(i=kh(e,o[o.length-2],!0));else{const s=kh(e,r[r.length-1],!0);n||(i=s)}Yr(e,Xm(i))}const Lf=e=>e.getPluginOptions(Jr.withSelection),MM=(e,t)=>{e.setPluginOptions(Jr.withSelection,t)},xr=(e,t,n,r)=>{let i=[];const o=e.children.filter(s=>s.groupId===t.id);return n?o.forEach(s=>{Un.isGroup(s)?(r&&i.push(s),i.push(...xr(e,s,n,r))):i.push(s)}):i=r?o:o.filter(s=>!Un.isGroup(s)),i},kh=(e,t,n,r)=>{const i=xr(e,t,n,r),o=[];return i.forEach(s=>{on(s,u=>{o.push(u)},()=>!0)}),o},ov=(e,t,n)=>{const r=kh(e,t,n);return He(e,r,!1)},bo=(e,t,n,r)=>{const i=(r||e.children).find(o=>o.id===(t==null?void 0:t.groupId));if(!i)return[];{const o=[i],s=bo(e,i,n,r);return s.length&&o.push(...s),o}},ep=(e,t)=>{const n=bo(e,t,!0);return n.length?n[n.length-1]:null},sv=(e,t)=>{const n=ep(e,t);return n?kh(e,n,!0):[t]},tp=(e,t,n)=>{const r=n!=null&&n.length?n:re(e);return Un.isGroup(t)?Oh(e,t,n):r.map(i=>i.id).includes(t.id)},Oh=(e,t,n)=>{const r=n!=null&&n.length?n:re(e);return xr(e,t,!0).every(o=>r.map(s=>s.id).includes(o.id))},N5=(e,t,n)=>{const r=[];return t.forEach(i=>{tp(e,i,n)&&r.push(i)}),r},RM=(e,t,n)=>{const r=Io(e,t,n),i=[];return r.forEach(o=>{i.push(o);const s=xr(e,o,!0,!0);i.push(...s.filter(u=>Un.isGroup(u)))}),i},H5=(e,t,n,r)=>{const i=bo(e,t,!0,r),o=N5(e,i,n);return o.length?o[o.length-1]:null},Io=(e,t,n)=>{let r=[];return(t!=null&&t.length?t:re(e)).forEach(o=>{if(o.groupId){const s=H5(e,o,t,n);s&&!r.includes(s)&&r.push(s)}}),r},uv=(e,t)=>{let n=[];return(t!=null&&t.length?t:re(e)).filter(i=>!Un.isGroup(i)).forEach(i=>{i.groupId&&H5(e,i,t)||n.push(i)}),n},lv=(e,t)=>uv(e,t).filter(r=>e.canAddToGroup(r)),kM=(e,t)=>[...Io(e,t),...uv(e,t)],OM=(e,t)=>{const n=re(e).map(o=>o.id);let r=null;const i=gn(e);return t.forEach(o=>{const s=!n.includes(o.id)&&!i||i;if(o.groupId&&s){r||(r=Te());const u=sv(e,o),l=He(e,u,!1),a=Hr(e,l,{stroke:Rn,strokeWidth:xt,strokeLineDash:[5]}),c=Sn(u);c&&dr(a,C.getCenterPoint(l),c),r.append(a)}}),r},FM=e=>({id:Ve(),type:"group"}),bM=e=>e.every(t=>!t.groupId),$5=e=>e.every(t=>t.groupId&&t.groupId===e[0].groupId),IM=(e,t)=>{const r=kM(e,t).filter(i=>e.canAddToGroup(i));return r.length>1?bM(r)||$5(r):!1},LM=(e,t,n)=>{const r=Io(e,t,n);return re(e).length>0&&r.length>0},_5=(e,t)=>{const n=bo(e,t,!0);let r=null;if(n!=null&&n.length){for(let i=0;i<(n==null?void 0:n.length);i++)if(!Oh(e,n[i])){r=n[i];break}}return r},GM=(e,t,n)=>{const r=[...t];Ld(e,r),r.pop(),mc(e,r.map(i=>({element:i,newPath:n})))},av=e=>{const t=e.getDeletedFragment([]);e.deleteFragment(t)},w2=(e,t,n)=>{const r=re(e),i=He(e,r,!1),o=e.buildFragment(null,i,t);o&&wM(n,o)},cv=(e,t,n)=>{const r=t!=null&&t.length?t:re(e),i=He(e,r,!1),o=e.buildFragment(null,i,Pi.duplicate,r),s=o&&JSON.stringify(o),u=s&&JSON.parse(s);u&&e.insertFragment({...u,text:void 0},n||[i.x+i.width/2,i.y+i.height/2],Pi.duplicate)},Si=2,NM=24;function j5(e,t){return gl(e,{match:r=>e.isAlign(r)&&!t.some(i=>i.id===r.id),recursion:()=>!0,isReverse:!1}).map(r=>{const i=e.getRectangle(r);return vc(i,r.angle||0)})}function HM(e,t){return t?[[e[0],e[1]-4],[e[0],e[1]+4]]:[[e[0]-4,e[1]],[e[0]+4,e[1]]]}function oa(e,t,n){let r=Si;return e.forEach(i=>{const o=$M(t,i,n);Math.abs(o)<Math.abs(r)&&(r=o)}),r}const $M=(e,t,n)=>{const i=As(t,n).map(u=>u-e),o=i.map(u=>Math.abs(u)),s=o.indexOf(Math.min(...o));return i[s]},As=(e,t)=>{const n=t?"x":"y",r=t?"width":"height";return[e[n],e[n]+e[r]/2,e[n]+e[r]]};function Qs(e,t){let n=1/0,r=e[0];return e.forEach(i=>{const o=Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2));o<n&&(n=o,r=i)}),r}const Js=(e,t,n)=>As(t,n).includes(e);function W5(e,t,n,r=!0,i=!0,o=!1){let s=[];const u=As(t,!0),l=As(t,!1),a=[{axis:u[0],isHorizontal:!0,pointRectangles:[]},{axis:u[1],isHorizontal:!0,pointRectangles:[]},{axis:u[2],isHorizontal:!0,pointRectangles:[]},{axis:l[0],isHorizontal:!1,pointRectangles:[]},{axis:l[1],isHorizontal:!1,pointRectangles:[]},{axis:l[2],isHorizontal:!1,pointRectangles:[]}];for(let f=0;f<n.length;f++){const h=n[f];Js(a[0].axis,h,a[0].isHorizontal)&&a[0].pointRectangles.push(h),Js(a[1].axis,h,a[1].isHorizontal)&&a[1].pointRectangles.push(h),Js(a[2].axis,h,a[2].isHorizontal)&&a[2].pointRectangles.push(h),Js(a[3].axis,h,a[3].isHorizontal)&&a[3].pointRectangles.push(h),Js(a[4].axis,h,a[4].isHorizontal)&&a[4].pointRectangles.push(h),Js(a[5].axis,h,a[5].isHorizontal)&&a[5].pointRectangles.push(h)}const c=(f,h,g)=>{const p=C.inflate(C.getBoundingRectangle([t,h]),NM);if(g){const d=[f,p.y],y=[f,p.y+p.height];s.push([d,y])}else{const d=[p.x,f],y=[p.x+p.width,f];s.push([d,y])}};if(r&&a[0].pointRectangles.length){const f=a[0].pointRectangles.length===1?a[0].pointRectangles[0]:Qs(a[0].pointRectangles,t);c(a[0].axis,f,a[0].isHorizontal)}if(r&&o&&a[1].pointRectangles.length){const f=a[1].pointRectangles.length===1?a[1].pointRectangles[0]:Qs(a[1].pointRectangles,t);c(a[1].axis,f,a[1].isHorizontal)}if(r&&a[2].pointRectangles.length){const f=a[2].pointRectangles.length===1?a[2].pointRectangles[0]:Qs(a[2].pointRectangles,t);c(a[2].axis,f,a[2].isHorizontal)}if(i&&a[3].pointRectangles.length){const f=a[3].pointRectangles.length===1?a[3].pointRectangles[0]:Qs(a[3].pointRectangles,t);c(a[3].axis,f,a[3].isHorizontal)}if(i&&o&&a[4].pointRectangles.length){const f=a[4].pointRectangles.length===1?a[4].pointRectangles[0]:Qs(a[4].pointRectangles,t);c(a[4].axis,f,a[4].isHorizontal)}if(i&&a[5].pointRectangles.length){const f=a[5].pointRectangles.length===1?a[5].pointRectangles[0]:Qs(a[5].pointRectangles,t);c(a[5].axis,f,a[5].isHorizontal)}return _M(e,s)}function _M(e,t){const n=Te();return t.forEach(r=>{if(!r.length)return;const i=P.getRoughSVG(e).line(r[0][0],r[0][1],r[1][0],r[1][1],{stroke:Rn,strokeWidth:1,strokeLineDash:[4,4]});n.appendChild(i)}),n}function z5(e,t){const n=Te();return t.forEach(r=>{if(!r.length)return;let i=r[0][1]===r[1][1];const o=P.getRoughSVG(e).line(r[0][0],r[0][1],r[1][0],r[1][1],{stroke:Rn,strokeWidth:1});n.appendChild(o),r.forEach(s=>{const u=HM(s,i),l=P.getRoughSVG(e).line(u[0][0],u[0][1],u[1][0],u[1][1],{stroke:Rn,strokeWidth:1});n.appendChild(l)})}),n}const V5=(e,t)=>{const n=Hd(e,re(e));let r=X5(e,n);t==="up"&&(r=r.reverse());let i=[];return r.forEach((o,s)=>{const u=o[0],l=o[o.length-1],a=t==="down"?u:l,c=jM(e,a,t);c===-1||a===c||(t==="down"&&(o=o.reverse()),i.push(...o.map(f=>({element:e.children[f],newPath:[c]}))))}),i},U5=(e,t)=>{const n=Hd(e,re(e));let r=X5(e,n),i=[];return t==="down"&&(r=r.reverse()),r.forEach(o=>{const s=o[0],u=o[o.length-1],l=t==="down"?s:u,a=e.children[l],c=_5(e,a);let f=t==="down"?0:e.children.length-1;if(c){const h=Ld(e,xr(e,c,!0,!0));f=t==="down"?e.children.indexOf(h[0]):e.children.indexOf(h[h.length-1])}t==="down"&&(o=o.reverse()),i.push(...o.map(h=>({element:e.children[h],newPath:[f]})))}),i},X5=(e,t)=>{let n=0;return t.reduce((r,i,o)=>{if(o>0){const s=e.children[i],u=e.children[t[o-1]],l=i-1===t[o-1]?!0:e.children.every((c,f)=>f>t[o-1]&&f<=i-1?Un.isGroup(c):!0);let a=!1;if(u!=null&&u.groupId||s!=null&&s.groupId&&(u==null?void 0:u.groupId)!==(s==null?void 0:s.groupId)){let c=!1,f=!1;if(u.groupId){const h=ep(e,u);c=!Oh(e,h)}if(s.groupId){const h=ep(e,s);f=!Oh(e,h)}a=c||f}(!l||a)&&(n=++n)}return(r[n]||(r[n]=[])).push(i),r},[])},jM=(e,t,n)=>{if(t===0&&n==="down"||t===e.children.length-1&&n==="up")return-1;const r=f=>!(f.isDeleted||Un.isGroup(f)),i=n==="down"?Y6(e.children,f=>r(f),Math.max(0,t-1)):q6(e.children,f=>r(f),t+1),o=e.children[i];if(!o)return-1;const s=[...e.children],u=s[t],l=_5(e,u),a=bo(e,o,!0)||[];if(l&&(u==null?void 0:u.groupId)!==(o==null?void 0:o.groupId)&&!a.find(f=>f.id===l.id))return-1;if(!o.groupId)return i;let c;if(l?c=a[a.indexOf(l)-1]:c=a[a.length-1],c){let f=xr(e,c,!0,!1);if(f.length)return f.sort((h,g)=>{const p=e.children.findIndex(y=>y.id===h.id),d=e.children.findIndex(y=>y.id===g.id);return p-d}),n==="down"?s.indexOf(f[0]):s.indexOf(f[f.length-1])}return i},WM=(e,t)=>{const n=Io(e,t),r=lv(e),i=[...n,...r],o=FM();if(IM(e)){i.forEach(c=>{const f=P.findPath(e,c);ds.setNode(e,{groupId:o.id},f)});const s=re(e),u=Y9(e,s),l=Hd(e,i);if(Z6(l)||GM(e,s,[u-1]),$5(i)){const c=r[0].groupId;ds.insertNode(e,{...o,groupId:c},[e.children.length])}else ds.insertNode(e,o,[e.children.length])}},zM=(e,t)=>{const n=Io(e,t);LM(e)&&(n.forEach(r=>{gl(e,{match:o=>o.groupId===r.id,recursion:()=>!1}).forEach(o=>{const s=P.findPath(e,o);ds.setNode(e,{groupId:r.groupId||void 0},s)})}),n.map(r=>{const i=P.findPath(e,r),o=e.pathRef(i);return()=>{o.current&&ds.removeNode(e,o.current),o.unref()}}).forEach(r=>{r()}))},VM={addGroup:WM,removeGroup:zM};function K5(e,t){const n={type:"set_selection",properties:e.selection,newProperties:t};e.apply(n)}const UM={setSelection:K5,addSelectionWithTemporaryElements:Y5};function Y5(e,t){const n=setTimeout(()=>{K5(e,{anchor:[0,0],focus:[0,0]})},0);let r=PM(e);if(r){clearTimeout(r.timeoutId);const i=r.elements;r.elements.push(...t.filter(o=>!i.includes(o))),r.timeoutId=n}else bd.set(e,{timeoutId:n,elements:t})}const XM=e=>{const t=U5(e,"up");mc(e,t)},KM=e=>{const t=U5(e,"down");mc(e,t)},YM=e=>{const t=V5(e,"up");mc(e,t)},qM=e=>{const t=V5(e,"down");mc(e,t)},ZM={moveUp:YM,moveDown:qM,moveToTop:XM,moveToBottom:KM},QM=(e,t)=>{t.map(n=>{const r=P.findPath(e,n),i=e.pathRef(r);return()=>{i.current&&F5(e,i.current),i.unref(),Gd(e,n,!0)}}).forEach(n=>{n()})},q5={removeElements:QM},ee={...e9,...A9,...UM,...ds,...VM,...ZM},At=(e,t,n)=>(n||(n=0),Array.isArray(e)&&typeof e[0]=="number"?qu(e[0],e[1],t[0],t[1],n):e.map(r=>qu(r[0],r[1],t[0],t[1],n||0))),Sn=e=>{var n;let t=((n=e[0])==null?void 0:n.angle)||0;return e.forEach(r=>{r.angle!==t&&!q1((r.angle||0)%(Math.PI/2)-t%(Math.PI/2),0)&&(t=0)}),t},JM=e=>{if(!e.length)return!1;const t=e[0].angle;return t===void 0?!1:!e.some(n=>n.angle!==t)},eR=(e,t)=>{let n=[];for(let u=0;u<e.length;u++){const l=e[u],a=At(l,[0,0],-t);n.push(C.getRectangleByPoints(a))}const r=C.getBoundingRectangle(n),i=C.getCornerPoints(r),o=At(i,[0,0],t),s=C.getCenterPoint(C.getRectangleByPoints(o));return C.getRectangleByPoints(At(o,s,-t))},tR=(e,t,n)=>{const r=C.getCenterPoint(e),[i]=At([r],t,n),o=i[0]-r[0],s=i[1]-r[1];return{offsetX:o,offsetY:s}},np=(e,t,n)=>{const{offsetX:r,offsetY:i}=tR(C.getRectangleByPoints(e),t,n);return e.map(o=>[o[0]+r,o[1]+i])},Oi=e=>Z5(e.angle),Z5=e=>e&&e!==0,wo=(e,t)=>{if(Oi(t)){let n=C.getRectangleByPoints(t.points);const r=C.getCenterPoint(n);return At(e,r,t.angle)}else return null},nR=(e,t)=>{if(Z5(t)){let n=C.getRectangleByPoints(e);const r=C.getCenterPoint(n);return At(e,r,t)}else return null},Co=(e,t)=>{if(Oi(t)){let n=C.getRectangleByPoints(t.points);const r=C.getCenterPoint(n);return At(e,r,t.angle?-t.angle:0)}else return null},vc=(e,t)=>{if(t){const n=C.getCornerPoints(e),r=C.getCenterPoint(e);return C.getRectangleByPoints(At(n,r,t))}return e},rR=e=>{const t=Math.abs(e)%Math.PI;return t>=1/4*Math.PI&&t<=3/4*Math.PI};function rp(e){return e/180*Math.PI}function iR(e,t,n){const r=He(e,t,!1),i=C.getCenterPoint(r);t.forEach(o=>{const s=o.angle,u=np(o.points,i,Na(n)),l=P.findPath(e,o);ee.setNode(e,{points:u,angle:Na((s||0)+n)},l)})}const Na=e=>e<0?e+2*Math.PI:e>=2*Math.PI?e-2*Math.PI:e,oR=(e,t,n)=>{const r=5*Math.PI/2+Math.atan2(e[1]-n[1],e[0]-n[0]),i=5*Math.PI/2+Math.atan2(t[1]-n[1],t[0]-n[0]);return Na(i-r)},sR=e=>e==null?void 0:e.angle,dr=(e,t,n)=>{if(n===0){e.removeAttribute("transform");return}var r=t[0],i=t[1];let o=Math.cos(n),s=Math.sin(n),l="matrix("+[o,s,-s,o,r*(1-o)+i*s,i*(1-o)-r*s].join(",")+")";e.setAttribute("transform",`${l}`)};function He(e,t,n){const r=[],i=o=>{const s=e.getRectangle(o);if(s){const u=C.getCornerPoints(s),l=wo(u,o)||u;r.push(l)}else console.error("can not get rectangle of element:",o)};if(t.forEach(o=>{n?on(o,s=>i(s),s=>e.isRecursion(s)):i(o)}),r.length>0)if(JM(t)){const o=Sn(t);return eR(r,o)}else{const o=r.reduce((s,u)=>s.concat(u),[]);return C.getRectangleByPoints(o)}else return{x:0,y:0,width:0,height:0}}function zn(e,t,n){const r=!n&&Gf(e).get(t);return r||(n||(n=gl(e,{match:o=>!0,recursion:o=>!0})),n.find(o=>o.id===t))}function Gf(e){const t=z1.get(e);if(!t)throw new Error("can not resolve element map");return t}function gl(e,t){let n=[];const r=t.isReverse??!0;return on(e,i=>{!P.isBoard(i)&&t.match(i)&&n.push(i)},i=>P.isBoard(i)?!0:Ws(e)(i)&&t.recursion(i),r),n}var nn;(function(e){e.default="default",e.colorful="colorful",e.soft="soft",e.retro="retro",e.dark="dark",e.starry="starry"})(nn||(nn={}));const _t="#333333",Q5={mode:nn.default,boardBackground:"#ffffff",textColor:_t},J5={mode:nn.colorful,boardBackground:"#ffffff",textColor:_t},eS={mode:nn.soft,boardBackground:"#f5f5f5",textColor:_t},tS={mode:nn.retro,boardBackground:"#f9f8ed",textColor:_t},nS={mode:nn.dark,boardBackground:"#141414",textColor:"#FFFFFF"},rS={mode:nn.starry,boardBackground:"#0d2537",textColor:"#FFFFFF"},uR=[Q5,J5,eS,tS,nS,rS],P={isBoard(e){const t=a2.get(e);if(t!==void 0)return t;const n=typeof e.onChange=="function"&&typeof e.apply=="function";return a2.set(e,n),n},isAlive(e){return!!K1.get(e)},findPath(e,t){const n=[];let r=t;for(;;){const i=hs.get(r);if(i==null){if(P.isBoard(r))return n;break}const o=bu.get(r);if(o==null)break;n.unshift(o),r=i}throw new Error(`Unable to find the path for Plait node: ${JSON.stringify(t)}`)},getHost(e){return Ah.get(e)},getElementLowerHost(e){var t;return(t=Ui.get(e))==null?void 0:t.lowerHost},getElementHost(e){var t;return(t=Ui.get(e))==null?void 0:t.host},getElementUpperHost(e){var t;return(t=Ui.get(e))==null?void 0:t.upperHost},getElementActiveHost(e){var t;return(t=Ui.get(e))==null?void 0:t.activeHost},getRoughSVG(e){return U1.get(e)},getBoardContainer(e){var t;return(t=Ui.get(e))==null?void 0:t.container},getBoardContext(e){return X1.get(e)},getRectangle(e){return He(e,e.children,!0)},getViewportContainer(e){var t;return(t=Ui.get(e))==null?void 0:t.viewportContainer},isFocus(e){return!!e.selection},isReadonly(e){return e.options.readonly},hasBeenTextEditing(e){return!!V1.get(e)},getPointer(e){return e.pointer},isPointer(e,t){return e.pointer===t},isInPointer(e,t){const n=e.pointer;return t.includes(n)},getMovingPointInBoard(e){return Y1.get(e)},isMovingPointInBoard(e){const t=m5.get(e),n=P.getBoardContainer(e).getBoundingClientRect();return!!(t&&dc(t[0],t[1],n)===0)},getThemeColors(e){return e.options.themeColors||uR}};var $e;(function(e){e.hand="hand",e.selection="selection"})($e||($e={}));const lR=e=>e.type==="set_viewport",aR=e=>e.type==="set_selection",cR=e=>e.type==="set_theme",fR=e=>{switch(e.type){case"insert_node":return{...e,type:"remove_node"};case"remove_node":return{...e,type:"insert_node"};case"move_node":{const{newPath:t,path:n}=e;if(ge.equals(t,n))return e;const r=ge.transform(n,e),i=ge.transform(ge.next(n),e);return{...e,path:r,newPath:i}}case"set_node":{const{properties:t,newProperties:n}=e;return{...e,properties:n,newProperties:t}}case"set_selection":{const{properties:t,newProperties:n}=e;return t==null?{...e,properties:n,newProperties:null}:n==null?{...e,properties:null,newProperties:t}:{...e,properties:n,newProperties:t}}case"set_viewport":{const{properties:t,newProperties:n}=e;return t==null?{...e,properties:n,newProperties:n}:n==null?{...e,properties:t,newProperties:t}:{...e,properties:n,newProperties:t}}case"set_theme":{const{properties:t,newProperties:n}=e;return{...e,properties:n,newProperties:t}}}},fv={isSetViewportOperation:lR,isSetSelectionOperation:aR,isSetThemeOperation:cR,inverse:fR},me={isEquals(e,t){return e&&t&&e[0]===t[0]&&e[1]===t[1]},isHorizontal(e,t,n=0){return e&&t&&me.isOverHorizontal([e,t],n)},isOverHorizontal(e,t=0){return e.every(n=>Math.abs(n[1]-e[0][1])<=t)},isVertical(e,t,n=0){return e&&t&&me.isOverVertical([e,t],n)},isOverVertical(e,t=0){return e.every(n=>Math.abs(n[0]-e[0][0])<=t)},isAlign(e,t=0){return me.isOverHorizontal(e,t)||me.isOverVertical(e,t)},getOffsetX(e,t){return t[0]-e[0]},getOffsetY(e,t){return t[1]-e[1]}},q0=new WeakMap,gr=new WeakMap;var Ne;(function(e){e.left="left",e.top="top",e.right="right",e.bottom="bottom"})(Ne||(Ne={}));const Un={isGroup:e=>e.type==="group"};/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function hR(e){return dR(e)?Array.isArray(e)||!(e instanceof Map)&&Symbol.iterator in e:!1}function dR(e){return e!==null&&(typeof e=="function"||typeof e=="object")}function gR(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Symbol.iterator]();let r;for(;!(r=n.next()).done;)t(r.value)}}/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */const pR=(e,t)=>t;class mR{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||pR}forEachItem(t){let n;for(n=this._itHead;n!==null;n=n._next)t(n)}forEachOperation(t){let n=this._itHead,r=this._removalsHead,i=0,o=null;for(;n||r;){const s=!r||n&&n.currentIndex<x2(r,i,o)?n:r,u=x2(s,i,o),l=s.currentIndex;if(s===r)i--,r=r._nextRemoved;else if(n=n._next,s.previousIndex==null)i++;else{o||(o=[]);const a=u-i,c=l-i;if(a!=c){for(let h=0;h<a;h++){const g=h<o.length?o[h]:o[h]=0,p=g+h;c<=p&&p<a&&(o[h]=g+1)}const f=s.previousIndex;o[f]=c-a}}u!==l&&t(s,u,l)}}forEachPreviousItem(t){let n;for(n=this._previousItHead;n!==null;n=n._nextPrevious)t(n)}forEachAddedItem(t){let n;for(n=this._additionsHead;n!==null;n=n._nextAdded)t(n)}forEachMovedItem(t){let n;for(n=this._movesHead;n!==null;n=n._nextMoved)t(n)}forEachRemovedItem(t){let n;for(n=this._removalsHead;n!==null;n=n._nextRemoved)t(n)}forEachIdentityChange(t){let n;for(n=this._identityChangesHead;n!==null;n=n._nextIdentityChange)t(n)}diff(t){if(t==null&&(t=[]),!hR(t))throw new Error("Exception: Error trying to diff. Only arrays and iterables are allowed");return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let n=this._itHead,r=!1,i,o,s;if(Array.isArray(t)){this.length=t.length;for(let u=0;u<this.length;u++)o=t[u],s=this._trackByFn(u,o),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,o,s,u),r=!0):(r&&(n=this._verifyReinsertion(n,o,s,u)),Object.is(n.item,o)||this._addIdentityChange(n,o)),n=n._next}else i=0,gR(t,u=>{s=this._trackByFn(i,u),n===null||!Object.is(n.trackById,s)?(n=this._mismatch(n,u,s,i),r=!0):(r&&(n=this._verifyReinsertion(n,u,s,i)),Object.is(n.item,u)||this._addIdentityChange(n,u)),n=n._next,i++}),this.length=i;return this._truncate(n),this.collection=t,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;t!==null;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;t!==null;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;t!==null;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,n,r,i){let o;return t===null?o=this._itTail:(o=t._prev,this._remove(t)),t=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._reinsertAfter(t,o,i)):(t=this._linkedRecords===null?null:this._linkedRecords.get(r,i),t!==null?(Object.is(t.item,n)||this._addIdentityChange(t,n),this._moveAfter(t,o,i)):t=this._addAfter(new vR(n,r),o,i)),t}_verifyReinsertion(t,n,r,i){let o=this._unlinkedRecords===null?null:this._unlinkedRecords.get(r,null);return o!==null?t=this._reinsertAfter(o,t._prev,i):t.currentIndex!=i&&(t.currentIndex=i,this._addToMoves(t,i)),t}_truncate(t){for(;t!==null;){const n=t._next;this._addToRemovals(this._unlink(t)),t=n}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,n,r){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(t);const i=t._prevRemoved,o=t._nextRemoved;return i===null?this._removalsHead=o:i._nextRemoved=o,o===null?this._removalsTail=i:o._prevRemoved=i,this._insertAfter(t,n,r),this._addToMoves(t,r),t}_moveAfter(t,n,r){return this._unlink(t),this._insertAfter(t,n,r),this._addToMoves(t,r),t}_addAfter(t,n,r){return this._insertAfter(t,n,r),this._additionsTail===null?this._additionsTail=this._additionsHead=t:this._additionsTail=this._additionsTail._nextAdded=t,t}_insertAfter(t,n,r){const i=n===null?this._itHead:n._next;return t._next=i,t._prev=n,i===null?this._itTail=t:i._prev=t,n===null?this._itHead=t:n._next=t,this._linkedRecords===null&&(this._linkedRecords=new C2),this._linkedRecords.put(t),t.currentIndex=r,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){this._linkedRecords!==null&&this._linkedRecords.remove(t);const n=t._prev,r=t._next;return n===null?this._itHead=r:n._next=r,r===null?this._itTail=n:r._prev=n,t}_addToMoves(t,n){return t.previousIndex===n||(this._movesTail===null?this._movesTail=this._movesHead=t:this._movesTail=this._movesTail._nextMoved=t),t}_addToRemovals(t){return this._unlinkedRecords===null&&(this._unlinkedRecords=new C2),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,n){return t.item=n,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=t:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=t,t}}class vR{constructor(t,n){this.item=t,this.trackById=n,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class yR{constructor(){this._head=null,this._tail=null}add(t){this._head===null?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,n){let r;for(r=this._head;r!==null;r=r._nextDup)if((n===null||n<=r.currentIndex)&&Object.is(r.trackById,t))return r;return null}remove(t){const n=t._prevDup,r=t._nextDup;return n===null?this._head=r:n._nextDup=r,r===null?this._tail=n:r._prevDup=n,this._head===null}}class C2{constructor(){this.map=new Map}put(t){const n=t.trackById;let r=this.map.get(n);r||(r=new yR,this.map.set(n,r)),r.add(t)}get(t,n){const r=t,i=this.map.get(r);return i?i.get(t,n):null}remove(t){const n=t.trackById;return this.map.get(n).remove(t)&&this.map.delete(n),t}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}}function x2(e,t,n){const r=e.previousIndex;if(r===null)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class iS{constructor(t){this.board=t,this.children=[],this.instances=[],this.contexts=[],this.differ=null,this.initialized=!1}initialize(t,n){this.initialized=!0,this.children=t,t.forEach((r,i)=>{bu.set(r,i),hs.set(r,n.parent);const o=Z0(this.board,r,i,n.parent),s=P2(this.board,o),u=E2(this.board,s,o,n);this.instances.push(u),this.contexts.push(o)}),this.differ=new mR(wR),this.differ.diff(t)}update(t,n){if(!this.initialized){this.initialize(t,n);return}if(!this.differ)throw new Error("Exception: Can not find differ ");const{board:r,parent:i}=n,o=this.differ.diff(t);if(o){const s=[],u=[];let l=null;o.forEachItem(a=>{var h;bu.set(a.item,a.currentIndex),hs.set(a.item,n.parent);const c=a.previousIndex===null?void 0:this.contexts[a.previousIndex],f=Z0(r,a.item,a.currentIndex,i,c);if(a.previousIndex===null){const g=P2(r,f),p=E2(r,g,f,n);s.push(f),u.push(p)}else{const g=this.instances[a.previousIndex];g.context=f,u.push(g),s.push(f)}(a.item===this.children[0]||a.item.id===((h=this.children[0])==null?void 0:h.id))&&(l=a.currentIndex)}),o.forEachOperation(a=>{if(a.currentIndex===null){const c=this.instances[a.previousIndex];c==null||c.destroy()}a.previousIndex!==null&&a.currentIndex!==null&&sS(a.item,a.currentIndex,n,l)}),this.instances=u,this.contexts=s,this.children=t}else{const s=[];this.children.forEach((u,l)=>{bu.set(u,l),hs.set(u,n.parent);const a=this.contexts[l],c=this.instances[l],f=Z0(r,u,l,i,a);c.context=f,s.push(f)}),this.contexts=s}}destroy(){this.children.forEach((t,n)=>{this.instances[n]&&this.instances[n].destroy()}),this.instances=[],this.children=[],this.contexts=[],this.initialized=!1,this.differ=null}}const wR=(e,t)=>t.id,E2=(e,t,n,r)=>{const i=new t;i.context=n;try{i.initialize()}catch(s){Zi()&&console.error("list-render-initialize",s,"context",n)}const o=i.getContainerG();return oS(n.index,o,r),i.initializeListRender(),i},P2=(e,t)=>e.drawElement(t),Z0=(e,t,n,r,i)=>{var l;let o=Z1(e,t);const s=i&&i.element;return s&&s!==t&&Z1(e,s)&&(o=!0,P9(e,s,t)),{element:t,parent:r,board:e,selected:o,index:n,hasThemeChanged:!!((l=e.operations)!=null&&l.find(a=>a.type==="set_theme"))}},oS=(e,t,n,r=null)=>{const{parent:i,parentG:o}=n;if(P.isBoard(i))if(e>0){const s=i.children[e-1];Ue.getContainerG(s,{suppressThrow:!1}).insertAdjacentElement("afterend",t)}else if(r!==null){const s=i.children[r],u=s&&Ue.getContainerG(s,{suppressThrow:!0});if(s&&u)o.insertBefore(t,u);else throw new Error("fail to mount container on moving")}else o.append(t);else if(e>0){const s=i.children[e-1];Ue.getElementG(s).insertAdjacentElement("afterend",t)}else if(r){const s=i.children[r],u=s&&P.findPath(n.board,s),l=u&&Ae.first(n.board,u),a=l&&Ue.getContainerG(l,{suppressThrow:!1});if(a)o.insertBefore(t,a);else throw new Error("fail to mount container on moving")}else{let s=Ue.getElementG(i);o.insertBefore(t,s)}},sS=(e,t,n,r)=>{const i=Ue.getContainerG(e,{suppressThrow:!1});oS(t,i,n,r),e.children&&!Ue.isRootElement(e)&&e.children.forEach((o,s)=>{sS(o,s,{...n,parent:e},null)})};class CR{get hasChildren(){return!!this.element.children}set context(t){U6(this)&&this.beforeContextChange(t);const n=this._context;if(this._context=t,this.initialized){const r=this.getElementG(),i=this.getContainerG();zl.set(this.element,r),Vl.set(this.element,i),Gf(this.board).set(this.element.id,this.element),Ul.set(this.element,this.ref),this.updateListRender(),X6(this)&&this.onContextChanged(t,n)}else Ue.isRootElement(this.element)&&this.hasChildren?(this._g=Te(),this._containerG=Te(),this._containerG.append(this._g)):(this._g=Te(),this._containerG=this._g),zl.set(this.element,this._g),Vl.set(this.element,this._containerG),Ul.set(this.element,this.ref),Gf(this.board).set(this.element.id,this.element)}get context(){return this._context}get element(){return this.context&&this.context.element}get board(){return this.context&&this.context.board}get selected(){return this.context&&this.context.selected}getContainerG(){return this._containerG}getElementG(){return this._g}constructor(t){this.ref=t,this.initialized=!1}initialize(){if(this.element.type&&this.getContainerG().setAttribute(`plait-${this.element.type}`,"true"),this.hasChildren)if(Ue.isRootElement(this.element))this._rootContainerG=this._containerG;else{const t=P.findPath(this.board,this.element),n=Ae.get(this.board,t.slice(0,1));this._rootContainerG=Ue.getContainerG(n,{suppressThrow:!1})}this.getContainerG().setAttribute("plait-data-id",this.element.id),this.initialized=!0}initializeListRender(){this.hasChildren&&(this.listRender=new iS(this.board),this.board.isExpanded(this.element)&&this.listRender.initialize(this.element.children,this.initializeChildrenContext()))}getRef(){return this.ref}updateListRender(){if(this.hasChildren){if(!this.listRender)throw new Error("incorrectly initialize list render");this.board.isExpanded(this.element)?this.listRender.update(this.element.children,this.initializeChildrenContext()):this.listRender.initialized&&this.listRender.destroy()}}initializeChildrenContext(){if(!this._rootContainerG)throw new Error("can not resolve root container g");return{board:this.board,parent:this.element,parentG:this._rootContainerG}}destroy(){var t;zl.get(this.element)===this._g&&zl.delete(this.element),Gf(this.board).delete(this.element.id),Vl.get(this.element)===this._containerG&&Vl.delete(this.element),Ul.get(this.element)===this.ref&&Ul.set(this.element,this.ref),Gd(this.board,this.element),this.getContainerG().remove(),(t=this.listRender)==null||t.destroy()}}class xR{constructor(){this._stable=new u5,this.uploadingFiles=[]}getUploadingFile(t){return this.uploadingFiles.find(n=>n.url===t)}setUploadingFile(t){return this.uploadingFiles.push(t)}removeUploadingFile(t){this.uploadingFiles=this.uploadingFiles.filter(n=>n.url!==t.url)}onStable(){return this._stable.asObservable()}nextStable(){this._stable.next("")}}const ER={transform(e,t){const{current:n}=e;if(n==null)return;const r=ge.transform(n,t);e.current=r,r==null&&e.unref()}};function PR(e,t){const n={viewport:{zoom:1},children:e,theme:{themeColorMode:nn.default},operations:[],history:{redos:[],undos:[]},selection:null,options:t||{readonly:!1,hideScrollbar:!1,disabledScrollOnNonFocus:!1},pointer:t!=null&&t.readonly?$e.hand:$e.selection,undo:()=>{},redo:()=>{},apply:r=>{for(const i of n.pathRefs())ER.transform(i,r);n.operations.push(r),ee.transform(n,r),K0.get(n)||(K0.set(n,!0),Promise.resolve().then(()=>{K0.set(n,!1),n.onChange(),n.afterChange(),n.operations=[]}))},pathRef:(r,i)=>{const o=(i==null?void 0:i.affinity)||"forward",s={current:r,affinity:o,unref(){const{current:l}=s;return n.pathRefs().delete(s),s.current=null,l}};return n.pathRefs().add(s),s},pathRefs:()=>{let r=c2.get(n);return r||(r=new Set,c2.set(n,r)),r},onChange:()=>{},afterChange:()=>{},drawSelectionRectangle:()=>DM(n),mousedown:r=>{},mousemove:r=>{},mouseleave:r=>{},globalMousemove:r=>{},mouseup:r=>{},globalMouseup:r=>{},keyDown:r=>{},globalKeyDown:r=>{},keyUp:r=>{},dblClick:r=>{},buildFragment:(r,i,o,s)=>r,insertFragment:(r,i,o)=>{},deleteFragment:r=>{q5.removeElements(n,r)},getDeletedFragment:r=>r,getRelatedFragment:(r,i)=>r,drawElement:r=>{throw new Error(`can not resolve plugin element component type: ${r.element.type}`)},isWithinSelection:r=>!1,isRectangleHit:r=>!1,isHit:r=>!1,isInsidePoint:r=>!1,getOneHitElement:r=>r[0],isRecursion:r=>!0,isMovable:r=>!1,getRectangle:r=>null,applyTheme:r=>{},isAlign:r=>!1,pointerDown:r=>{},pointerMove:r=>{},pointerUp:r=>{},pointerCancel:r=>{},pointerOut:r=>{},pointerLeave:r=>{},globalPointerMove:r=>{},globalPointerUp:r=>{},isImageBindingAllowed:r=>!1,canAddToGroup:r=>!0,canSetZIndex:r=>!0,isExpanded:r=>!0};return n}function SR(e){const{onChange:t,afterChange:n}=e;return e.onChange=()=>{const r=Dh.get(e);r&&r(),t()},e.afterChange=()=>{const r=Th.get(e);r&&r(),n()},e}function DR(e){const{pointerDown:t,pointerMove:n,globalPointerUp:r,keyDown:i,keyUp:o,pointerUp:s}=e;let u=!1,l=null;return e.pointerDown=a=>{const c=e.getPluginOptions(Jr.withHand);(c!=null&&c.isHandMode(e,a)||P.isPointer(e,$e.hand))&&Hi(a)&&(l={x:a.x,y:a.y}),t(a)},e.pointerMove=a=>{const c=e.getPluginOptions(Jr.withHand);if(l&&!u&&(u=!0,P.getBoardContainer(e).classList.add("viewport-moving")),(c!=null&&c.isHandMode(e,a)||P.isPointer(e,$e.hand))&&u&&l){const f=P.getViewportContainer(e),h=f.scrollLeft-(a.x-l.x),g=f.scrollTop-(a.y-l.y);B5(e,h,g,!1),l.x=a.x,l.y=a.y}n(a)},e.pointerUp=a=>{u||s(a)},e.globalPointerUp=a=>{l&&(l=null),u&&(u=!1,P.getBoardContainer(e).classList.remove("viewport-moving")),r(a)},e.keyDown=a=>{a.code==="Space"&&(P.isPointer(e,$e.hand)||Je.updatePointerType(e,$e.hand),a.preventDefault()),i(a)},e.keyUp=a=>{!e.options.readonly&&a.code==="Space"&&Je.updatePointerType(e,$e.selection),o(a)},e}function TR(e){const{apply:t,keyDown:n}=e;return e.history={undos:[],redos:[]},e.redo=()=>{const{history:r}=e,{redos:i}=r;if(i.length>0){const o=i[i.length-1];os.withoutSaving(e,()=>{for(const s of o)e.apply(s)}),r.redos.pop(),r.undos.push(o)}},e.undo=()=>{const{history:r}=e,{undos:i}=r;if(i.length>0){const o=i[i.length-1];os.withoutSaving(e,()=>{const s=o.map(fv.inverse).reverse();for(const u of s)e.apply(u)}),r.redos.push(o),r.undos.pop()}},e.apply=r=>{const{operations:i,history:o}=e,{undos:s}=o,u=s[s.length-1],l=u&&u[u.length-1];let a=os.isSaving(e),c=os.isMerging(e);if(a==null&&(a=m9(r)),a){if(c||(u==null?c=!1:i.length!==0?c=!0:c=p9(r,l)),u&&c)u.push(r);else{const f=[r];s.push(f)}for(;s.length>100;)s.shift();v9(r)&&(o.redos=[])}t(r)},e.keyDown=r=>{if(or("mod+z",r)){e.undo();return}if(or("mod+shift+z",r)){e.redo();return}n(r)},e}const AR=e=>{const{keyDown:t,keyUp:n,globalKeyDown:r}=e;return e.keyDown=i=>{const o=e.getPluginOptions(Jr.withSelection);if(!P.isReadonly(e)&&o.isMultipleSelection&&or("mod+a",i)){i.preventDefault();let u=[];on(e,l=>{P.isBoard(l)||u.push(l)},l=>!!(P.isBoard(l)||e.isRecursion(l)),!0),ee.addSelectionWithTemporaryElements(e,u);return}if(!P.isReadonly(e)){if(Lt("mod+]",i)){i.preventDefault(),ee.moveUp(e);return}if(Lt("mod+[",i)){i.preventDefault(),ee.moveDown(e);return}if(Lt("mod+option+",i)){i.preventDefault(),ee.moveToTop(e);return}if(Lt("mod+option+",i)){i.preventDefault(),ee.moveToBottom(e);return}}const s=re(e);if(!P.isReadonly(e)&&s.length>0&&Lt("mod+d",i)){i.preventDefault(),cv(e);return}!P.isReadonly(e)&&s.length>0&&(en.isDeleteBackward(i)||en.isDeleteForward(i))&&(i.preventDefault(),av(e)),t(i)},e.keyUp=i=>{n(i)},e.globalKeyDown=i=>{if(P.getMovingPointInBoard(e)||P.isMovingPointInBoard(e)){if(or(["mod+=","mod++"],{byKey:!0})(i)){i.preventDefault(),Je.updateZoom(e,e.viewport.zoom+.1,!1);return}if(or(["mod+shift+=","mod+shift++"],{byKey:!0})(i)){i.preventDefault(),Je.fitViewport(e);return}if(or(["mod+-","mod+shift+-"])(i)){i.preventDefault(),Je.updateZoom(e,e.viewport.zoom-.1);return}if(or(["mod+0","mod+shift+0"],{byKey:!0})(i)){i.preventDefault(),Je.updateZoom(e,1);return}}r(i)},e};function BR(e,t,n){const r=j5(e,n),i=Te();let o=RR(t,r);const s=OR(e,o,t,r);i.append(s);const u=FR(e,o,t,r);return o=u.snapDelta,i.append(u.snapG),{...o,snapG:i}}function MR(e,t,n){const r=As(e,n),i=oa(t,r[0],n),o=oa(t,r[1],n),s=oa(t,r[2],n);return[i,o,s]}function RR(e,t){let n={deltaX:0,deltaY:0};function r(i){let o=0;const s=MR(e,t,i);for(let u=0;u<s.length;u++)if(Math.abs(s[u])<Si){o=s[u];break}return o}return n.deltaX=r(!0),n.deltaY=r(!1),n}function kR(e,t){const{deltaX:n,deltaY:r}=e,{x:i,y:o,width:s,height:u}=t;return{x:i+n,y:o+r,width:s,height:u}}function OR(e,t,n,r){const i=kR(t,n);return W5(e,i,r,!0,!0,!0)}function FR(e,t,n,r){let i=t.deltaX,o=t.deltaY;const s=S2(n,r,!0),u=S2(n,r,!1),l=[...s.lines,...u.lines];return s.delta&&(i=s.delta),u.delta&&(o=u.delta),{snapDelta:{deltaX:i,deltaY:o},snapG:z5(e,l)}}function S2(e,t,n){var v,w;let r=[],i=0,o=[];const s=n?"x":"y",u=n?"width":"height",l=e[s]+e[u]/2;t.forEach(E=>{(n?bR(E,e):IR(E,e))&&!C.isHit(E,e)&&o.push(E)}),o=[...o,e].sort((E,S)=>E[s]-S[s]);const a=[];let c=0,f,h;for(let E=0;E<o.length;E++)for(let S=E+1;S<o.length;S++){const T=o[E],B=o[S],R=B[s]-(T[s]+T[u]);let b=1/0;(v=a[E])!=null&&v.after?a[E].after.push({distance:R,index:S}):a[E]={...a[E],after:[{distance:R,index:S}]},(w=a[S])!=null&&w.before?a[S].before.push({distance:R,index:E}):a[S]={...a[S],before:[{distance:R,index:E}]};let O=(T[s]+T[u]+B[s])/2;b=Math.abs(O-l),b<Si&&(c=(B[s]-(T[s]+T[u])-e[u])/2,i=O-l,f=E,h=S);const V=B[s]-(T[s]+T[u]);O=B[s]+B[u]+V+e[u]/2,b=Math.abs(O-l),(!c||c!==V)&&b<Si&&(c=V,f=S,i=O-l);const L=B[s]-(T[s]+T[u]);O=T[s]-L-e[u]/2,b=Math.abs(O-l),!c&&b<Si&&(c=L,h=E,i=O-l)}const g=o.indexOf(e);let p=[],d=[];if(f!==void 0&&(p.push(f),y(c,a[f],"before",p)),h!==void 0&&(d.push(h),y(c,a[h],"after",d)),p.length||d.length){const E=[...p.reverse(),g,...d];e[s]+=i;for(let S=1;S<E.length;S++)r.push(m(o[E[S-1]],o[E[S]]))}function y(E,S,T,B){const R=S[T],b=a.indexOf(S);if(!(b===0&&T==="before"||b===a.length-1&&T==="after")){for(let O=0;O<R.length;O++)if(Math.abs(R[O].distance-E)<.1){B.push(R[O].index),y(E,a[R[O].index],T,B);return}}}function m(E,S){const T=s==="x"?"y":"x",B=u==="width"?"height":"width",b=[E[T],E[T]+E[B],S[T],S[T]+S[B]].sort((L,W)=>L-W),O=(b[1]+b[2])/2,V=3;return n?[[E.x+E.width+V,O],[S.x-V,O]]:[[O,E.y+E.height+V],[O,S.y-V]]}return{delta:i,lines:r}}function bR(e,t){return!(e.y+e.height<t.y||e.y>t.y+t.height)}function IR(e,t){return!(e.x+e.width<t.x||e.x>t.x+t.width)}function LR(e){const{pointerDown:t,pointerMove:n,globalPointerUp:r,globalPointerMove:i,globalKeyDown:o,keyUp:s}=e;let u=0,l=0,a=!1,c,f=[],h=null,g=null,p=null,d,y,m=null;e.globalKeyDown=w=>{P.isReadonly(e)||Lt("option",w)&&(w.preventDefault(),c&&f.length&&!P.hasBeenTextEditing(e)&&(m=D2(e,f,u,l),m&&P.getElementActiveHost(e).append(m))),o(w)},e.keyUp=w=>{if(!P.isReadonly(e)&&m&&c&&f.length&&!P.hasBeenTextEditing(e)){w.preventDefault();const E=ip(e,f,u,l);P.getBoardContainer(e).classList.add("element-moving"),d2(e,E)}m==null||m.remove(),s(w)},e.pointerDown=w=>{if(P.isReadonly(e)||!P.isPointer(e,$e.selection)||!Hi(w)){t(w);return}const E=Ce(e,xe(e,w.x,w.y));if(d=$i(e,E,S=>e.isMovable(S)),p=uS(e),y=d&&p.includes(d),d&&y)c=E,f=p,g=He(e,f,!0);else if(d){c=E;const S=e.getRelatedFragment([],[d]);f=[...sv(e,d),...S],g=He(e,f,!0)}else{const S=p.length>0&&He(e,p,!1);S&&C.isPointInRectangle(S,E)&&(c=E,f=p,g=S)}t(w)},e.pointerMove=w=>{if(c&&f.length&&!P.hasBeenTextEditing(e)){a||(a=!0),h==null||h.remove(),m==null||m.remove();const E=Ce(e,xe(e,w.x,w.y));u=E[0]-c[0],l=E[1]-c[1],(Ze(...E,...c)>Fd||q9(e).length>0)&&(d&&!y&&p&&p.length>0&&(Y5(e,[]),d=void 0,p=null,y=void 0),ni(e,"with-moving",()=>{if(!g)return;const T={...g,x:g.x+u,y:g.y+l},B=vc(T,Sn(f)),R=BR(e,B,f);if(u+=R.deltaX,l+=R.deltaY,h=R.snapG,h.classList.add(d5),P.getElementActiveHost(e).append(h),w.altKey)m=D2(e,f,u,l),m&&P.getElementActiveHost(e).append(m);else{const b=ip(e,f,u,l);P.getBoardContainer(e).classList.add("element-moving"),d2(e,b)}}))}a&&w.preventDefault(),n(w)},e.globalPointerMove=w=>{c&&(i9(e,w.x,w.y)||v(e)),i(w)},e.globalPointerUp=w=>{if(w.altKey&&f.length){const E=hv(e,f),S=He(e,E,!1);cv(e,E,[S.x+u,S.y+l])}a=!1,d=void 0,p=null,y=void 0,c&&v(e),r(w)};function v(w){h==null||h.remove(),m==null||m.remove(),c=null,g=null,u=0,l=0,f=[],Rh(w)&&Z9(w),gr.set(w,!1),P.getBoardContainer(w).classList.remove("element-moving")}return GR(e)}function GR(e){const{keyDown:t,keyUp:n}=e;return e.keyDown=r=>{const i=re(e);if(!P.isReadonly(e)&&i.length>0&&(en.isArrow(r)||en.isExtendArrow(r))){r.preventDefault();const o=!!r.shiftKey,s=[0,0],u=o?10:1;switch(!0){case(en.isMoveUp(r)||en.isExtendUp(r)):{s[1]=-u;break}case(en.isMoveDown(r)||en.isExtendDown(r)):{s[1]=u;break}case(en.isMoveBackward(r)||en.isExtendBackward(r)):{s[0]=-u;break}case(en.isMoveForward(r)||en.isExtendForward(r)):{s[0]=u;break}}const l=uS(e);ni(e,"with-arrow-moving",()=>{ip(e,l,s[0],s[1])})}t(r)},e.keyUp=r=>{gr.set(e,!1),n(r)},e}function uS(e){const t=re(e),n=e.children.filter(o=>e.isMovable(o)),r=t.filter(o=>n.includes(o)),i=e.getRelatedFragment([]);return r.push(...i),r}function hv(e,t){return[...t].filter(r=>!Un.isGroup(r)&&Ue.isRootElement(r))}function ip(e,t,n,r){return hv(e,t).map(s=>{const l=(s.points||[]).map(c=>[c[0]+n,c[1]+r]),a=bu.get(s);return ee.setNode(e,{points:l},[a]),gr.set(e,!0),Ae.get(e,[a])})}function D2(e,t,n,r){let i=null;const o=[];return hv(e,t).forEach(u=>{on(u,l=>{o.push(l)},()=>!0)}),o.forEach(u=>{let l=e.getRectangle(u);if(l){l={x:l.x+n,y:l.y+r,width:l.width,height:l.height};const a=Hr(e,l,{stroke:Rn,strokeWidth:1,fill:Jm,fillStyle:"solid"});i||(i=Te(),i.classList.add(d5));const c=sR(u);c&&dr(a,C.getCenterPoint(l),c),i.append(a)}}),i}const NR=e=>{const t=new Map,n=e;return n.getPluginOptions=r=>t.get(r),n.setPluginOptions=(r,i)=>{const o=n.getPluginOptions(r)||{};t.set(r,{...o,...i})},n};function HR(e){const{buildFragment:t}=e;return e.buildFragment=(n,r,i,o)=>{let s=e.getRelatedFragment(o||[]);if(s&&(o!=null&&o.length&&(s=s.filter(u=>!o.map(l=>l.id).includes(u.id))),s.length)){const u={text:"",type:ki.elements,elements:s};n=$d(n,u)}return t(n,r,i,o)},e}function $R(e){const{pointerDown:t,pointerUp:n,pointerMove:r,globalPointerUp:i,onChange:o,afterChange:s,drawSelectionRectangle:u}=e;let l=null,a=null,c,f,h,g=!1;return e.pointerDown=p=>{!g&&p.shiftKey&&(g=!0),g&&!p.shiftKey&&(g=!1);const d=Ce(e,xe(e,p.x,p.y)),y=D9(e,d),m=Lf(e);P.isPointer(e,$e.selection)&&!y&&m.isMultipleSelection&&!m.isDisabledSelection&&(l=Ce(e,xe(e,p.x,p.y))),t(p)},e.pointerMove=p=>{if(P.isPointer(e,$e.selection)&&l){const d=Ce(e,xe(e,p.x,p.y)),y=C.getRectangleByPoints([l,d]);c==null||c.remove(),(Math.hypot(y.width,y.height)>Fd||gn(e))&&(a=d,ni(e,"with-selection",()=>{l&&a&&ee.setSelection(e,{anchor:l,focus:a})}),CM(e),c=Hr(e,y,{stroke:Rn,strokeWidth:1,fill:Jm,fillStyle:"solid"}),P.getElementActiveHost(e).append(c))}r(p)},e.pointerUp=p=>{const d=P.isPointer(e,$e.selection)||P.isPointer(e,$e.hand);if(!Hi(p)||Ts(e)||!d){n(p);return}const m=Ce(e,xe(e,p.x,p.y)),v={anchor:m,focus:m};ee.setSelection(e,v),n(p)},e.globalPointerUp=p=>{l&&a&&(c==null||c.remove(),xM(e),ee.setSelection(e,{anchor:l,focus:a}));const d=Lf(e);if(P.isFocus(e)&&!d.isPreventClearSelection){const y=p.target instanceof Node&&P.getBoardContainer(e).contains(p.target),m=p.target instanceof Node&&document.contains(p.target),v=p.target instanceof Element&&p.target.closest(`.${Oo}`);!y&&!l&&!v&&m&&ee.setSelection(e,null)}l=null,a=null,i(p)},e.onChange=()=>{const p=Lf(e);if(p.isDisabledSelection&&zs(e),e.operations.forEach(d=>{d.type==="remove_node"&&Gd(e,d.node,!0)}),v2(e)&&y2(e))try{g||f==null||f.remove();const d=EM(e);if(d)Yr(e,[...d]);else{let m=x5(e);!p.isMultipleSelection&&m.length>1&&(m=[m[0]]);const v=m.some(E=>E.groupId),w=re(e);if(v)TM(e,m,g);else{if(e.selection&&Zu.isCollapsed(e.selection)){const E=e.getOneHitElement(m);E&&(m=[E])}if(g){const E=[...w];e.selection&&Zu.isCollapsed(e.selection)?(m.forEach(S=>{E.includes(S)?E.splice(E.indexOf(S),1):E.push(S)}),Yr(e,E)):(m.forEach(S=>{E.includes(S)||E.push(S)}),Yr(e,[...E]))}else Yr(e,[...m])}}const y=re(e);h=[...y],SM(e),gn(e)||(f==null||f.remove(),y.length>1&&(f=e.drawSelectionRectangle(),P.getElementActiveHost(e).append(f)))}catch(d){console.error(d)}o()},e.afterChange=()=>{if(v2(e)&&!y2(e))try{const p=re(e);p.length&&p.length>1?h&&(p.length!==h.length||p.some((d,y)=>d!==h[y]))&&(f==null||f.remove(),f=e.drawSelectionRectangle(),P.getElementActiveHost(e).append(f),h=[...p]):f==null||f.remove()}catch(p){console.error(p)}s()},MM(e,{isMultipleSelection:!0,isDisabledSelection:!1,isPreventClearSelection:!1}),e}function _R(e){const{onChange:t}=e,n=K9(()=>{Mh(e),Ga(e)},500);return e.onChange=()=>{const r=e.operations.length&&e.operations.some(o=>o.type==="set_viewport");if(e.operations.length&&e.operations.every(o=>o.type==="set_selection"))return t();if(r&&j9(e))return k5(e,!1),t();r?(Mh(e),Ga(e)):n(),t()},e}var lS={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",s=0;s<arguments.length;s++){var u=arguments[s];u&&(o=i(o,r(u)))}return o}function r(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var s="";for(var u in o)t.call(o,u)&&o[u]&&(s=i(s,u));return s}function i(o,s){return s?o?o+" "+s:o+s:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(lS);var jR=lS.exports;const lt=$s(jR);var WR=function(e){return typeof e=="function"};function T2(e,t){if(e===t)return!0;for(var n=0;n<e.length;n++)if(!Object.is(e[n],t[n]))return!1;return!0}function aS(e){var t=A.useRef(e);return t.current=e,t}var zR=function(e){var t=aS(e);A.useEffect(function(){return function(){t.current()}},[])};function VR(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var dv=VR,UR=typeof kc=="object"&&kc&&kc.Object===Object&&kc,XR=UR,KR=XR,YR=typeof self=="object"&&self&&self.Object===Object&&self,qR=KR||YR||Function("return this")(),cS=qR,ZR=cS,QR=function(){return ZR.Date.now()},JR=QR,ek=/\s/;function tk(e){for(var t=e.length;t--&&ek.test(e.charAt(t)););return t}var nk=tk,rk=nk,ik=/^\s+/;function ok(e){return e&&e.slice(0,rk(e)+1).replace(ik,"")}var sk=ok,uk=cS,lk=uk.Symbol,fS=lk,A2=fS,hS=Object.prototype,ak=hS.hasOwnProperty,ck=hS.toString,Fl=A2?A2.toStringTag:void 0;function fk(e){var t=ak.call(e,Fl),n=e[Fl];try{e[Fl]=void 0;var r=!0}catch{}var i=ck.call(e);return r&&(t?e[Fl]=n:delete e[Fl]),i}var hk=fk,dk=Object.prototype,gk=dk.toString;function pk(e){return gk.call(e)}var mk=pk,B2=fS,vk=hk,yk=mk,wk="[object Null]",Ck="[object Undefined]",M2=B2?B2.toStringTag:void 0;function xk(e){return e==null?e===void 0?Ck:wk:M2&&M2 in Object(e)?vk(e):yk(e)}var Ek=xk;function Pk(e){return e!=null&&typeof e=="object"}var Sk=Pk,Dk=Ek,Tk=Sk,Ak="[object Symbol]";function Bk(e){return typeof e=="symbol"||Tk(e)&&Dk(e)==Ak}var Mk=Bk,Rk=sk,R2=dv,kk=Mk,k2=NaN,Ok=/^[-+]0x[0-9a-f]+$/i,Fk=/^0b[01]+$/i,bk=/^0o[0-7]+$/i,Ik=parseInt;function Lk(e){if(typeof e=="number")return e;if(kk(e))return k2;if(R2(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=R2(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Rk(e);var n=Fk.test(e);return n||bk.test(e)?Ik(e.slice(2),n?2:8):Ok.test(e)?k2:+e}var Gk=Lk,Nk=dv,Q0=JR,O2=Gk,Hk="Expected a function",$k=Math.max,_k=Math.min;function jk(e,t,n){var r,i,o,s,u,l,a=0,c=!1,f=!1,h=!0;if(typeof e!="function")throw new TypeError(Hk);t=O2(t)||0,Nk(n)&&(c=!!n.leading,f="maxWait"in n,o=f?$k(O2(n.maxWait)||0,t):o,h="trailing"in n?!!n.trailing:h);function g(T){var B=r,R=i;return r=i=void 0,a=T,s=e.apply(R,B),s}function p(T){return a=T,u=setTimeout(m,t),c?g(T):s}function d(T){var B=T-l,R=T-a,b=t-B;return f?_k(b,o-R):b}function y(T){var B=T-l,R=T-a;return l===void 0||B>=t||B<0||f&&R>=o}function m(){var T=Q0();if(y(T))return v(T);u=setTimeout(m,d(T))}function v(T){return u=void 0,h&&r?g(T):(r=i=void 0,s)}function w(){u!==void 0&&clearTimeout(u),a=0,r=l=i=u=void 0}function E(){return u===void 0?s:v(Q0())}function S(){var T=Q0(),B=y(T);if(r=arguments,i=this,l=T,B){if(u===void 0)return p(l);if(f)return clearTimeout(u),u=setTimeout(m,t),g(l)}return u===void 0&&(u=setTimeout(m,t)),s}return S.cancel=w,S.flush=E,S}var dS=jk;const Wk=$s(dS);var zk=!!(typeof window<"u"&&window.document&&window.document.createElement),Vk=dS,Uk=dv,Xk="Expected a function";function Kk(e,t,n){var r=!0,i=!0;if(typeof e!="function")throw new TypeError(Xk);return Uk(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Vk(e,t,{leading:r,maxWait:t,trailing:i})}var Yk=Kk;const qk=$s(Yk);function gS(e,t){if(zk){if(!e)return t;var n;return WR(e)?n=e():"current"in e?n=e.current:n=e,n}}var Zk=function(e){var t=function(n,r,i){var o=A.useRef(!1),s=A.useRef([]),u=A.useRef([]),l=A.useRef();e(function(){var a,c=Array.isArray(i)?i:[i],f=c.map(function(h){return gS(h)});if(!o.current){o.current=!0,s.current=f,u.current=r,l.current=n();return}(f.length!==s.current.length||!T2(s.current,f)||!T2(u.current,r))&&((a=l.current)===null||a===void 0||a.call(l),s.current=f,u.current=r,l.current=n())}),zR(function(){var a;(a=l.current)===null||a===void 0||a.call(l),o.current=!1})};return t},Qk=Zk(A.useEffect);function ln(e,t,n){n===void 0&&(n={});var r=n.enable,i=r===void 0?!0:r,o=aS(t);Qk(function(){if(i){var s=gS(n.target,window);if(s!=null&&s.addEventListener){var u=function(l){return o.current(l)};return s.addEventListener(e,u,{capture:n.capture,once:n.once,passive:n.passive}),function(){s.removeEventListener(e,u,{capture:n.capture})}}}},[e,n.capture,n.once,n.passive,i],n.target)}const Jk=(e,t,n)=>{ln("pointerdown",r=>{e.pointerDown(r)},{target:n}),ln("pointermove",r=>{Y1.set(e,[r.x,r.y]),e.pointerMove(r)},{target:t}),ln("pointerleave",r=>{Y1.delete(e),e.pointerLeave(r)},{target:t}),ln("pointerup",r=>{e.pointerUp(r)},{target:t}),ln("dblclick",r=>{P.isFocus(e)&&!P.hasBeenTextEditing(e)&&e.dblClick(r)},{target:n}),ln("pointermove",r=>{m5.set(e,[r.x,r.y]),e.globalPointerMove(r)}),ln("pointerup",r=>{e.globalPointerUp(r)}),ln("keydown",r=>{e.globalKeyDown(r),P.isFocus(e)&&!P.hasBeenTextEditing(e)&&!c9(r.target)&&e.keyDown(r)}),ln("keyup",r=>{P.isFocus(e)&&!P.hasBeenTextEditing(e)&&(e==null||e.keyUp(r))}),ln("copy",r=>{P.isFocus(e)&&!P.hasBeenTextEditing(e)&&(r.preventDefault(),w2(e,Pi.copy,r.clipboardData))}),ln("paste",async r=>{if(P.isFocus(e)&&!P.isReadonly(e)&&!P.hasBeenTextEditing(e)){const i=P.getMovingPointInBoard(e);if(i){const o=Ce(e,xe(e,i[0],i[1])),s=await yM(r.clipboardData);e.insertFragment(s,o,Pi.paste)}}}),ln("cut",r=>{P.isFocus(e)&&!P.isReadonly(e)&&!P.hasBeenTextEditing(e)&&(r.preventDefault(),w2(e,Pi.cut,r.clipboardData),av(e))})},eO=(e,t)=>{ln("scroll",n=>{if(W9(e))O5(e,!1);else{const{scrollLeft:r,scrollTop:i}=n.target;M5(e,r,i)}},{target:t}),ln("touchstart",n=>{n.preventDefault()},{target:t,passive:!1}),ln("wheel",n=>{if(n.metaKey||n.ctrlKey){n.preventDefault();const{deltaX:r,deltaY:i}=n,o=e.viewport.zoom,s=Math.sign(i),u=H6*100,l=Math.abs(i);let a=i;l>u&&(a=u*s);let c=o-a/100;c+=Math.log10(Math.max(1,o))*-s*Math.min(1,l/20),Je.updateZoom(e,c,!1)}},{target:t,passive:!1}),A.useEffect(()=>{const n=new ResizeObserver(()=>{tv(e),Mh(e),Ga(e)});return n.observe(P.getBoardContainer(e)),()=>{n&&n.disconnect()}},[])},gv=A.createContext(null),si=()=>{const e=A.useContext(gv);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{board:t}=e;return t},pS=()=>{const e=A.useContext(gv);if(!e)throw new Error("The `useBoard` hook must be used inside the <Plait> component's context.");const{listRender:t}=e;return t},tO=({style:e,className:t,children:n})=>{var h,g;const r=A.useRef(null),i=A.useRef(null),o=A.useRef(null),s=A.useRef(null),u=A.useRef(null),l=A.useRef(null),a=A.useRef(null),c=si(),f=pS();return A.useEffect(()=>{const p=MB.svg(r.current,{options:{roughness:0,strokeWidth:1}});U1.set(c,p),Ah.set(c,r.current),K1.set(c,!0),Ui.set(c,{lowerHost:i.current,host:o.current,upperHost:s.current,activeHost:u.current,container:a.current,viewportContainer:l.current});const d=new xR;return X1.set(c,d),z1.set(c,new Map),f.initialized||f.initialize(c.children,{board:c,parent:c,parentG:P.getElementHost(c)}),tv(c),Mh(c),$9(c),()=>{X1.delete(c),Th.delete(c),Dh.delete(c),Ui.delete(c),K1.delete(c),Ah.delete(c),U1.delete(c),z1.delete(c)}},[]),Jk(c,l,r),eO(c,l),D.jsx("div",{className:lt(t,j6,`${nO()}`,`theme-${(h=c.theme)==null?void 0:h.themeColorMode}`,`pointer-${c.pointer}`,{focused:P.isFocus(c),readonly:P.isReadonly(c),"disabled-scroll":((g=c.options)==null?void 0:g.disabledScrollOnNonFocus)&&!P.isFocus(c)}),ref:a,style:e,children:D.jsxs("div",{className:"viewport-container",ref:l,style:{width:"100%",height:"100%",overflow:"auto"},children:[D.jsxs("svg",{ref:r,width:"100%",height:"100%",style:{position:"relative"},className:"board-host-svg",children:[D.jsx("g",{className:"element-lower-host",ref:i}),D.jsx("g",{className:"element-host",ref:o}),D.jsx("g",{className:"element-upper-host",ref:s}),D.jsx("g",{className:"element-active-host",ref:u})]}),n]})})},nO=()=>d9?"safari":g9?"chrome":h9?"firefox":"";/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */function F2(e){return Object.prototype.toString.call(e)==="[object Object]"}function zt(e){var t,n;return F2(e)===!1?!1:(t=e.constructor,t===void 0?!0:(n=t.prototype,!(F2(n)===!1||n.hasOwnProperty("isPrototypeOf")===!1)))}var rO={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var i=M.transform(n,t,{affinity:r});e.current=i,i==null&&e.unref()}}},iO={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var i=Oe.transform(n,t,{affinity:r});e.current=i,i==null&&e.unref()}}},oO={transform(e,t){var{current:n,affinity:r}=e;if(n!=null){var i=G.transform(n,t,{affinity:r});e.current=i,i==null&&e.unref()}}},Fh=new WeakMap,bh=new WeakMap,sa=new WeakMap,mS=new WeakMap,b2=new WeakMap,I2=new WeakMap,L2=new WeakMap,M={ancestors(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,r=M.levels(e,t);return n?r=r.slice(1):r=r.slice(0,-1),r},common(e,t){for(var n=[],r=0;r<e.length&&r<t.length;r++){var i=e[r],o=t[r];if(i!==o)break;n.push(i)}return n},compare(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){if(e[r]<t[r])return-1;if(e[r]>t[r])return 1}return 0},endsAfter(e,t){var n=e.length-1,r=e.slice(0,n),i=t.slice(0,n),o=e[n],s=t[n];return M.equals(r,i)&&o>s},endsAt(e,t){var n=e.length,r=e.slice(0,n),i=t.slice(0,n);return M.equals(r,i)},endsBefore(e,t){var n=e.length-1,r=e.slice(0,n),i=t.slice(0,n),o=e[n],s=t[n];return M.equals(r,i)&&o<s},equals(e,t){return e.length===t.length&&e.every((n,r)=>n===t[r])},hasPrevious(e){return e[e.length-1]>0},isAfter(e,t){return M.compare(e,t)===1},isAncestor(e,t){return e.length<t.length&&M.compare(e,t)===0},isBefore(e,t){return M.compare(e,t)===-1},isChild(e,t){return e.length===t.length+1&&M.compare(e,t)===0},isCommon(e,t){return e.length<=t.length&&M.compare(e,t)===0},isDescendant(e,t){return e.length>t.length&&M.compare(e,t)===0},isParent(e,t){return e.length+1===t.length&&M.compare(e,t)===0},isPath(e){return Array.isArray(e)&&(e.length===0||typeof e[0]=="number")},isSibling(e,t){if(e.length!==t.length)return!1;var n=e.slice(0,-1),r=t.slice(0,-1),i=e[e.length-1],o=t[t.length-1];return i!==o&&M.equals(n,r)},levels(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,r=[],i=0;i<=e.length;i++)r.push(e.slice(0,i));return n&&r.reverse(),r},next(e){if(e.length===0)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(e.length===0)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(e.length===0)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!M.isAncestor(t,e)&&!M.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e)return null;var r=[...e],{affinity:i="forward"}=n;if(e.length===0)return r;switch(t.type){case"insert_node":{var{path:o}=t;(M.equals(o,r)||M.endsBefore(o,r)||M.isAncestor(o,r))&&(r[o.length-1]+=1);break}case"remove_node":{var{path:s}=t;if(M.equals(s,r)||M.isAncestor(s,r))return null;M.endsBefore(s,r)&&(r[s.length-1]-=1);break}case"merge_node":{var{path:u,position:l}=t;M.equals(u,r)||M.endsBefore(u,r)?r[u.length-1]-=1:M.isAncestor(u,r)&&(r[u.length-1]-=1,r[u.length]+=l);break}case"split_node":{var{path:a,position:c}=t;if(M.equals(a,r)){if(i==="forward")r[r.length-1]+=1;else if(i!=="backward")return null}else M.endsBefore(a,r)?r[a.length-1]+=1:M.isAncestor(a,r)&&e[a.length]>=c&&(r[a.length-1]+=1,r[a.length]-=c);break}case"move_node":{var{path:f,newPath:h}=t;if(M.equals(f,h))return r;if(M.isAncestor(f,r)||M.equals(f,r)){var g=h.slice();return M.endsBefore(f,h)&&f.length<h.length&&(g[f.length-1]-=1),g.concat(r.slice(f.length))}else M.isSibling(f,h)&&(M.isAncestor(h,r)||M.equals(h,r))?M.endsBefore(f,r)?r[f.length-1]-=1:r[f.length-1]+=1:M.endsBefore(h,r)||M.equals(h,r)||M.isAncestor(h,r)?(M.endsBefore(f,r)&&(r[f.length-1]-=1),r[h.length-1]+=1):M.endsBefore(f,r)&&(M.equals(h,r)&&(r[h.length-1]+=1),r[f.length-1]-=1);break}}return r}};function Ha(e){"@babel/helpers - typeof";return Ha=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ha(e)}function sO(e,t){if(Ha(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(Ha(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uO(e){var t=sO(e,"string");return Ha(t)==="symbol"?t:String(t)}function vn(e,t,n){return t=uO(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bl(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G2(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var lO=(e,t,n)=>{switch(n.type){case"insert_node":{var{path:r,node:i}=n,o=q.parent(e,r),s=r[r.length-1];if(s>o.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(r,"] because the destination is past the end of the node."));if(o.children.splice(s,0,i),t)for(var[u,l]of G.points(t))t[l]=Oe.transform(u,n);break}case"insert_text":{var{path:a,offset:c,text:f}=n;if(f.length===0)break;var h=q.leaf(e,a),g=h.text.slice(0,c),p=h.text.slice(c);if(h.text=g+f+p,t)for(var[d,y]of G.points(t))t[y]=Oe.transform(d,n);break}case"merge_node":{var{path:m}=n,v=q.get(e,m),w=M.previous(m),E=q.get(e,w),S=q.parent(e,m),T=m[m.length-1];if(le.isText(v)&&le.isText(E))E.text+=v.text;else if(!le.isText(v)&&!le.isText(E))E.children.push(...v.children);else throw new Error('Cannot apply a "merge_node" operation at path ['.concat(m,"] to nodes of different interfaces: ").concat(bt.stringify(v)," ").concat(bt.stringify(E)));if(S.children.splice(T,1),t)for(var[B,R]of G.points(t))t[R]=Oe.transform(B,n);break}case"move_node":{var{path:b,newPath:O}=n;if(M.isAncestor(b,O))throw new Error("Cannot move a path [".concat(b,"] to new path [").concat(O,"] because the destination is inside itself."));var V=q.get(e,b),L=q.parent(e,b),W=b[b.length-1];L.children.splice(W,1);var z=M.transform(b,n),_=q.get(e,M.parent(z)),J=z[z.length-1];if(_.children.splice(J,0,V),t)for(var[Z,N]of G.points(t))t[N]=Oe.transform(Z,n);break}case"remove_node":{var{path:F}=n,U=F[F.length-1],se=q.parent(e,F);if(se.children.splice(U,1),t)for(var[fe,nt]of G.points(t)){var te=Oe.transform(fe,n);if(t!=null&&te!=null)t[nt]=te;else{var k=void 0,H=void 0;for(var[j,Y]of q.texts(e))if(M.compare(Y,F)===-1)k=[j,Y];else{H=[j,Y];break}var ve=!1;k&&H&&(M.equals(H[1],F)?ve=!M.hasPrevious(H[1]):ve=M.common(k[1],F).length<M.common(H[1],F).length),k&&!ve?(fe.path=k[1],fe.offset=k[0].text.length):H?(fe.path=H[1],fe.offset=0):t=null}}break}case"remove_text":{var{path:ie,offset:be,text:Ie}=n;if(Ie.length===0)break;var Re=q.leaf(e,ie),De=Re.text.slice(0,be),Le=Re.text.slice(be+Ie.length);if(Re.text=De+Le,t)for(var[at,ze]of G.points(t))t[ze]=Oe.transform(at,n);break}case"set_node":{var{path:sn,properties:tr,newProperties:Ln}=n;if(sn.length===0)throw new Error("Cannot set properties on the root node!");var Gn=q.get(e,sn);for(var gt in Ln){if(gt==="children"||gt==="text")throw new Error('Cannot set the "'.concat(gt,'" property of nodes!'));var Nn=Ln[gt];Nn==null?delete Gn[gt]:Gn[gt]=Nn}for(var kt in tr)Ln.hasOwnProperty(kt)||delete Gn[kt];break}case"set_selection":{var{newProperties:Xe}=n;if(Xe==null)t=Xe;else{if(t==null){if(!G.isRange(Xe))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(bt.stringify(Xe)," when there is no current selection."));t=bl({},Xe)}for(var Er in Xe){var zo=Xe[Er];if(zo==null){if(Er==="anchor"||Er==="focus")throw new Error('Cannot remove the "'.concat(Er,'" selection property'));delete t[Er]}else t[Er]=zo}}break}case"split_node":{var{path:yn,position:$r,properties:Vo}=n;if(yn.length===0)throw new Error('Cannot apply a "split_node" operation at path ['.concat(yn,"] because the root node cannot be split."));var ai=q.get(e,yn),Cl=q.parent(e,yn),Rc=yn[yn.length-1],d0;if(le.isText(ai)){var dA=ai.text.slice(0,$r),gA=ai.text.slice($r);ai.text=dA,d0=bl(bl({},Vo),{},{text:gA})}else{var pA=ai.children.slice(0,$r),mA=ai.children.slice($r);ai.children=pA,d0=bl(bl({},Vo),{},{children:mA})}if(Cl.children.splice(Rc+1,0,d0),t)for(var[vA,yA]of G.points(t))t[yA]=Oe.transform(vA,n);break}}return t},aO={transform(e,t){e.children=yu(e.children);var n=e.selection&&yu(e.selection);try{n=lO(e,n,t)}finally{e.children=wu(e.children),n?e.selection=Qr(n)?wu(n):n:e.selection=null}}},cO={insertNodes(e,t,n){e.insertNodes(t,n)},liftNodes(e,t){e.liftNodes(t)},mergeNodes(e,t){e.mergeNodes(t)},moveNodes(e,t){e.moveNodes(t)},removeNodes(e,t){e.removeNodes(t)},setNodes(e,t,n){e.setNodes(t,n)},splitNodes(e,t){e.splitNodes(t)},unsetNodes(e,t,n){e.unsetNodes(t,n)},unwrapNodes(e,t){e.unwrapNodes(t)},wrapNodes(e,t,n){e.wrapNodes(t,n)}},fO={collapse(e,t){e.collapse(t)},deselect(e){e.deselect()},move(e,t){e.move(t)},select(e,t){e.select(t)},setPoint(e,t,n){e.setPoint(t,n)},setSelection(e,t){e.setSelection(t)}},vS=(e,t)=>{for(var n in e){var r=e[n],i=t[n];if(zt(r)&&zt(i)){if(!vS(r,i))return!1}else if(Array.isArray(r)&&Array.isArray(i)){if(r.length!==i.length)return!1;for(var o=0;o<r.length;o++)if(r[o]!==i[o])return!1}else if(r!==i)return!1}for(var s in t)if(e[s]===void 0&&t[s]!==void 0)return!1;return!0};function hO(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Fi(e,t){if(e==null)return{};var n=hO(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var dO=["anchor","focus"];function N2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function gO(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?N2(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):N2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var G={edges(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{reverse:n=!1}=t,{anchor:r,focus:i}=e;return G.isBackward(e)===n?[r,i]:[i,r]},end(e){var[,t]=G.edges(e);return t},equals(e,t){return Oe.equals(e.anchor,t.anchor)&&Oe.equals(e.focus,t.focus)},includes(e,t){if(G.isRange(t)){if(G.includes(e,t.anchor)||G.includes(e,t.focus))return!0;var[n,r]=G.edges(e),[i,o]=G.edges(t);return Oe.isBefore(n,i)&&Oe.isAfter(r,o)}var[s,u]=G.edges(e),l=!1,a=!1;return Oe.isPoint(t)?(l=Oe.compare(t,s)>=0,a=Oe.compare(t,u)<=0):(l=M.compare(t,s.path)>=0,a=M.compare(t,u.path)<=0),l&&a},intersection(e,t){var n=Fi(e,dO),[r,i]=G.edges(e),[o,s]=G.edges(t),u=Oe.isBefore(r,o)?o:r,l=Oe.isBefore(i,s)?i:s;return Oe.isBefore(l,u)?null:gO({anchor:u,focus:l},n)},isBackward(e){var{anchor:t,focus:n}=e;return Oe.isAfter(t,n)},isCollapsed(e){var{anchor:t,focus:n}=e;return Oe.equals(t,n)},isExpanded(e){return!G.isCollapsed(e)},isForward(e){return!G.isBackward(e)},isRange(e){return zt(e)&&Oe.isPoint(e.anchor)&&Oe.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[t]=G.edges(e);return t},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Hm(e,r=>{if(r===null)return null;var{affinity:i="inward"}=n,o,s;if(i==="inward"){var u=G.isCollapsed(r);G.isForward(r)?(o="forward",s=u?o:"backward"):(o="backward",s=u?o:"forward")}else i==="outward"?G.isForward(r)?(o="backward",s="forward"):(o="forward",s="backward"):(o=i,s=i);var l=Oe.transform(r.anchor,t,{affinity:o}),a=Oe.transform(r.focus,t,{affinity:s});if(!l||!a)return null;r.anchor=l,r.focus=a})}},H2=e=>zt(e)&&q.isNodeList(e.children)&&!x.isEditor(e),ce={isAncestor(e){return zt(e)&&q.isNodeList(e.children)},isElement:H2,isElementList(e){return Array.isArray(e)&&e.every(t=>ce.isElement(t))},isElementProps(e){return e.children!==void 0},isElementType:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"type";return H2(t)&&t[r]===n},matches(e,t){for(var n in t)if(n!=="children"&&e[n]!==t[n])return!1;return!0}},pO=["children"],mO=["text"],$2=new WeakMap,q={ancestor(e,t){var n=q.get(e,t);if(le.isText(n))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(bt.stringify(n)));return n},ancestors(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of M.ancestors(t,n)){var i=q.ancestor(e,r),o=[i,r];yield o}}()},child(e,t){if(le.isText(e))throw new Error("Cannot get the child of a text node: ".concat(bt.stringify(e)));var n=e.children[t];if(n==null)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(bt.stringify(e)));return n},children(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var{reverse:r=!1}=n,i=q.ancestor(e,t),{children:o}=i,s=r?o.length-1:0;r?s>=0:s<o.length;){var u=q.child(i,s),l=t.concat(s);yield[u,l],s=r?s-1:s+1}}()},common(e,t,n){var r=M.common(t,n),i=q.get(e,r);return[i,r]},descendant(e,t){var n=q.get(e,t);if(x.isEditor(n))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(bt.stringify(n)));return n},descendants(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of q.nodes(e,t))r.length!==0&&(yield[n,r])}()},elements(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of q.nodes(e,t))ce.isElement(n)&&(yield[n,r])}()},extractProps(e){if(ce.isAncestor(e)){var t=Fi(e,pO);return t}else{var t=Fi(e,mO);return t}},first(e,t){for(var n=t.slice(),r=q.get(e,n);r&&!(le.isText(r)||r.children.length===0);)r=r.children[0],n.push(0);return[r,n]},fragment(e,t){if(le.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(bt.stringify(e)));var n=Hm({children:e.children},r=>{var[i,o]=G.edges(t),s=q.nodes(r,{reverse:!0,pass:h=>{var[,g]=h;return!G.includes(t,g)}});for(var[,u]of s){if(!G.includes(t,u)){var l=q.parent(r,u),a=u[u.length-1];l.children.splice(a,1)}if(M.equals(u,o.path)){var c=q.leaf(r,u);c.text=c.text.slice(0,o.offset)}if(M.equals(u,i.path)){var f=q.leaf(r,u);f.text=f.text.slice(i.offset)}}x.isEditor(r)&&(r.selection=null)});return n.children},get(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(le.isText(n)||!n.children[i])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(bt.stringify(e)));n=n.children[i]}return n},has(e,t){for(var n=e,r=0;r<t.length;r++){var i=t[r];if(le.isText(n)||!n.children[i])return!1;n=n.children[i]}return!0},isNode(e){return le.isText(e)||ce.isElement(e)||x.isEditor(e)},isNodeList(e){if(!Array.isArray(e))return!1;var t=$2.get(e);if(t!==void 0)return t;var n=e.every(r=>q.isNode(r));return $2.set(e,n),n},last(e,t){for(var n=t.slice(),r=q.get(e,n);r&&!(le.isText(r)||r.children.length===0);){var i=r.children.length-1;r=r.children[i],n.push(i)}return[r,n]},leaf(e,t){var n=q.get(e,t);if(!le.isText(n))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(bt.stringify(n)));return n},levels(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return function*(){for(var r of M.levels(t,n)){var i=q.get(e,r);yield[i,r]}}()},matches(e,t){return ce.isElement(e)&&ce.isElementProps(t)&&ce.matches(e,t)||le.isText(e)&&le.isTextProps(t)&&le.matches(e,t)},nodes(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var{pass:n,reverse:r=!1}=t,{from:i=[],to:o}=t,s=new Set,u=[],l=e;!(o&&(r?M.isBefore(u,o):M.isAfter(u,o)));){if(s.has(l)||(yield[l,u]),!s.has(l)&&!le.isText(l)&&l.children.length!==0&&(n==null||n([l,u])===!1)){s.add(l);var a=r?l.children.length-1:0;M.isAncestor(u,i)&&(a=i[u.length]),u=u.concat(a),l=q.get(e,u);continue}if(u.length===0)break;if(!r){var c=M.next(u);if(q.has(e,c)){u=c,l=q.get(e,u);continue}}if(r&&u[u.length-1]!==0){var f=M.previous(u);u=f,l=q.get(e,u);continue}u=M.parent(u),l=q.get(e,u),s.add(l)}}()},parent(e,t){var n=M.parent(t),r=q.get(e,n);if(le.isText(r))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return r},string(e){return le.isText(e)?e.text:e.children.map(q.string).join("")},texts(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){for(var[n,r]of q.nodes(e,t))le.isText(n)&&(yield[n,r])}()}};function _2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_2(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var vi={isNodeOperation(e){return vi.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!zt(e))return!1;switch(e.type){case"insert_node":return M.isPath(e.path)&&q.isNode(e.node);case"insert_text":return typeof e.offset=="number"&&typeof e.text=="string"&&M.isPath(e.path);case"merge_node":return typeof e.position=="number"&&M.isPath(e.path)&&zt(e.properties);case"move_node":return M.isPath(e.path)&&M.isPath(e.newPath);case"remove_node":return M.isPath(e.path)&&q.isNode(e.node);case"remove_text":return typeof e.offset=="number"&&typeof e.text=="string"&&M.isPath(e.path);case"set_node":return M.isPath(e.path)&&zt(e.properties)&&zt(e.newProperties);case"set_selection":return e.properties===null&&G.isRange(e.newProperties)||e.newProperties===null&&G.isRange(e.properties)||zt(e.properties)&&zt(e.newProperties);case"split_node":return M.isPath(e.path)&&typeof e.position=="number"&&zt(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(t=>vi.isOperation(t))},isSelectionOperation(e){return vi.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return vi.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return ct(ct({},e),{},{type:"remove_node"});case"insert_text":return ct(ct({},e),{},{type:"remove_text"});case"merge_node":return ct(ct({},e),{},{type:"split_node",path:M.previous(e.path)});case"move_node":{var{newPath:t,path:n}=e;if(M.equals(t,n))return e;if(M.isSibling(n,t))return ct(ct({},e),{},{path:t,newPath:n});var r=M.transform(n,e),i=M.transform(M.next(n),e);return ct(ct({},e),{},{path:r,newPath:i})}case"remove_node":return ct(ct({},e),{},{type:"insert_node"});case"remove_text":return ct(ct({},e),{},{type:"insert_text"});case"set_node":{var{properties:o,newProperties:s}=e;return ct(ct({},e),{},{properties:s,newProperties:o})}case"set_selection":{var{properties:u,newProperties:l}=e;return u==null?ct(ct({},e),{},{properties:l,newProperties:null}):l==null?ct(ct({},e),{},{properties:null,newProperties:u}):ct(ct({},e),{},{properties:l,newProperties:u})}case"split_node":return ct(ct({},e),{},{type:"merge_node",path:M.next(e.path)})}}},j2=new WeakMap,vO=e=>{var t=j2.get(e);if(t!==void 0)return t;if(!zt(e))return!1;var n=typeof e.addMark=="function"&&typeof e.apply=="function"&&typeof e.deleteFragment=="function"&&typeof e.insertBreak=="function"&&typeof e.insertSoftBreak=="function"&&typeof e.insertFragment=="function"&&typeof e.insertNode=="function"&&typeof e.insertText=="function"&&typeof e.isElementReadOnly=="function"&&typeof e.isInline=="function"&&typeof e.isSelectable=="function"&&typeof e.isVoid=="function"&&typeof e.normalizeNode=="function"&&typeof e.onChange=="function"&&typeof e.removeMark=="function"&&typeof e.getDirtyPaths=="function"&&(e.marks===null||zt(e.marks))&&(e.selection===null||G.isRange(e.selection))&&q.isNodeList(e.children)&&vi.isOperationList(e.operations);return j2.set(e,n),n},x={above(e,t){return e.above(t)},addMark(e,t,n){e.addMark(t,n)},after(e,t,n){return e.after(t,n)},before(e,t,n){return e.before(t,n)},deleteBackward(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=t;e.deleteBackward(n)},deleteForward(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{unit:n="character"}=t;e.deleteForward(n)},deleteFragment(e,t){e.deleteFragment(t)},edges(e,t){return e.edges(t)},elementReadOnly(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.elementReadOnly(t)},end(e,t){return e.end(t)},first(e,t){return e.first(t)},fragment(e,t){return e.fragment(t)},hasBlocks(e,t){return e.hasBlocks(t)},hasInlines(e,t){return e.hasInlines(t)},hasPath(e,t){return e.hasPath(t)},hasTexts(e,t){return e.hasTexts(t)},insertBreak(e){e.insertBreak()},insertFragment(e,t,n){e.insertFragment(t,n)},insertNode(e,t){e.insertNode(t)},insertSoftBreak(e){e.insertSoftBreak()},insertText(e,t){e.insertText(t)},isBlock(e,t){return e.isBlock(t)},isEdge(e,t,n){return e.isEdge(t,n)},isEditor(e){return vO(e)},isElementReadOnly(e,t){return e.isElementReadOnly(t)},isEmpty(e,t){return e.isEmpty(t)},isEnd(e,t,n){return e.isEnd(t,n)},isInline(e,t){return e.isInline(t)},isNormalizing(e){return e.isNormalizing()},isSelectable(e,t){return e.isSelectable(t)},isStart(e,t,n){return e.isStart(t,n)},isVoid(e,t){return e.isVoid(t)},last(e,t){return e.last(t)},leaf(e,t,n){return e.leaf(t,n)},levels(e,t){return e.levels(t)},marks(e){return e.getMarks()},next(e,t){return e.next(t)},node(e,t,n){return e.node(t,n)},nodes(e,t){return e.nodes(t)},normalize(e,t){e.normalize(t)},parent(e,t,n){return e.parent(t,n)},path(e,t,n){return e.path(t,n)},pathRef(e,t,n){return e.pathRef(t,n)},pathRefs(e){return e.pathRefs()},point(e,t,n){return e.point(t,n)},pointRef(e,t,n){return e.pointRef(t,n)},pointRefs(e){return e.pointRefs()},positions(e,t){return e.positions(t)},previous(e,t){return e.previous(t)},range(e,t,n){return e.range(t,n)},rangeRef(e,t,n){return e.rangeRef(t,n)},rangeRefs(e){return e.rangeRefs()},removeMark(e,t){e.removeMark(t)},setNormalizing(e,t){e.setNormalizing(t)},start(e,t){return e.start(t)},string(e,t,n){return e.string(t,n)},unhangRange(e,t,n){return e.unhangRange(t,n)},void(e,t){return e.void(t)},withoutNormalizing(e,t){e.withoutNormalizing(t)}},yO={isSpan(e){return Array.isArray(e)&&e.length===2&&e.every(M.isPath)}};function W2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function z2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W2(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var Oe={compare(e,t){var n=M.compare(e.path,t.path);return n===0?e.offset<t.offset?-1:e.offset>t.offset?1:0:n},isAfter(e,t){return Oe.compare(e,t)===1},isBefore(e,t){return Oe.compare(e,t)===-1},equals(e,t){return e.offset===t.offset&&M.equals(e.path,t.path)},isPoint(e){return zt(e)&&typeof e.offset=="number"&&M.isPath(e.path)},transform(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Hm(e,r=>{if(r===null)return null;var{affinity:i="forward"}=n,{path:o,offset:s}=r;switch(t.type){case"insert_node":case"move_node":{r.path=M.transform(o,t,n);break}case"insert_text":{M.equals(t.path,o)&&(t.offset<s||t.offset===s&&i==="forward")&&(r.offset+=t.text.length);break}case"merge_node":{M.equals(t.path,o)&&(r.offset+=t.position),r.path=M.transform(o,t,n);break}case"remove_text":{M.equals(t.path,o)&&t.offset<=s&&(r.offset-=Math.min(s-t.offset,t.text.length));break}case"remove_node":{if(M.equals(t.path,o)||M.isAncestor(t.path,o))return null;r.path=M.transform(o,t,n);break}case"split_node":{if(M.equals(t.path,o)){if(t.position===s&&i==null)return null;(t.position<s||t.position===s&&i==="forward")&&(r.offset-=t.position,r.path=M.transform(o,t,z2(z2({},n),{},{affinity:"forward"})))}else r.path=M.transform(o,t,n);break}}})}},V2=void 0,bt={setScrubber(e){V2=e},stringify(e){return JSON.stringify(e,V2)}},wO=["text"],CO=["anchor","focus"];function U2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function ci(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U2(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var le={equals(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{loose:r=!1}=n;function i(o){var s=Fi(o,wO);return s}return vS(r?i(e):e,r?i(t):t)},isText(e){return zt(e)&&typeof e.text=="string"},isTextList(e){return Array.isArray(e)&&e.every(t=>le.isText(t))},isTextProps(e){return e.text!==void 0},matches(e,t){for(var n in t)if(n!=="text"&&(!e.hasOwnProperty(n)||e[n]!==t[n]))return!1;return!0},decorations(e,t){var n=[ci({},e)];for(var r of t){var i=Fi(r,CO),[o,s]=G.edges(r),u=[],l=0,a=o.offset,c=s.offset;for(var f of n){var{length:h}=f.text,g=l;if(l+=h,a<=g&&l<=c){Object.assign(f,i),u.push(f);continue}if(a!==c&&(a===l||c===g)||a>l||c<g||c===g&&g!==0){u.push(f);continue}var p=f,d=void 0,y=void 0;if(c<l){var m=c-g;y=ci(ci({},p),{},{text:p.text.slice(m)}),p=ci(ci({},p),{},{text:p.text.slice(0,m)})}if(a>g){var v=a-g;d=ci(ci({},p),{},{text:p.text.slice(0,v)}),p=ci(ci({},p),{},{text:p.text.slice(v)})}Object.assign(p,i),d&&u.push(d),u.push(p),y&&u.push(y)}n=u}return n}},pv=e=>e.selection?e.selection:e.children.length>0?x.end(e,[]):[0],pl=(e,t)=>{var[n]=x.node(e,t);return r=>r===n},mv=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=!n,i=n?TO(t):t,o=Pe.None,s=Pe.None,u=0,l=null,a=null;for(var c of i){var f=c.codePointAt(0);if(!f)break;var h=NO(c,f);if([o,s]=r?[s,h]:[h,o],Cu(o,Pe.ZWJ)&&Cu(s,Pe.ExtPict)&&(r?l=X2(t.substring(0,u)):l=X2(t.substring(0,t.length-u)),!l)||Cu(o,Pe.RI)&&Cu(s,Pe.RI)&&(a!==null?a=!a:r?a=!0:a=WO(t.substring(0,t.length-u)),!a)||o!==Pe.None&&s!==Pe.None&&$O(o,s))break;u+=c.length}return u||1},xO=/\s/,EO=/[\u002B\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,PO=/['\u2018\u2019]/,SO=function(t){for(var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=0,i=!1;t.length>0;){var o=mv(t,n),[s,u]=vv(t,o,n);if(DO(s,u,n))i=!0,r+=o;else if(!i)r+=o;else break;t=u}return r},vv=(e,t,n)=>{if(n){var r=e.length-t;return[e.slice(r,e.length),e.slice(0,r)]}return[e.slice(0,t),e.slice(t)]},DO=function e(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(xO.test(t))return!1;if(PO.test(t)){var i=mv(n,r),[o,s]=vv(n,i,r);if(e(o,s,r))return!0}return!EO.test(t)},TO=function*(t){for(var n=t.length-1,r=0;r<t.length;r++){var i=t.charAt(n-r);if(BO(i.charCodeAt(0))){var o=t.charAt(n-r-1);if(AO(o.charCodeAt(0))){yield o+i,r++;continue}}yield i}},AO=e=>e>=55296&&e<=56319,BO=e=>e>=56320&&e<=57343,Pe;(function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"})(Pe||(Pe={}));var MO=/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/,RO=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,kO=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,OO=/^[\u1100-\u115F\uA960-\uA97C]$/,FO=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,bO=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,IO=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,LO=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,GO=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,NO=(e,t)=>{var n=Pe.Any;return e.search(MO)!==-1&&(n|=Pe.Extend),t===8205&&(n|=Pe.ZWJ),t>=127462&&t<=127487&&(n|=Pe.RI),e.search(RO)!==-1&&(n|=Pe.Prepend),e.search(kO)!==-1&&(n|=Pe.SpacingMark),e.search(OO)!==-1&&(n|=Pe.L),e.search(FO)!==-1&&(n|=Pe.V),e.search(bO)!==-1&&(n|=Pe.T),e.search(IO)!==-1&&(n|=Pe.LV),e.search(LO)!==-1&&(n|=Pe.LVT),e.search(GO)!==-1&&(n|=Pe.ExtPict),n};function Cu(e,t){return(e&t)!==0}var HO=[[Pe.L,Pe.L|Pe.V|Pe.LV|Pe.LVT],[Pe.LV|Pe.V,Pe.V|Pe.T],[Pe.LVT|Pe.T,Pe.T],[Pe.Any,Pe.Extend|Pe.ZWJ],[Pe.Any,Pe.SpacingMark],[Pe.Prepend,Pe.Any],[Pe.ZWJ,Pe.ExtPict],[Pe.RI,Pe.RI]];function $O(e,t){return HO.findIndex(n=>Cu(e,n[0])&&Cu(t,n[1]))===-1}var _O=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u0898-\u089F\u08CA-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3C\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECE\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732\u1733\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u180F\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1ACE\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDEFD-\uDEFF\uDF46-\uDF50\uDF82-\uDF85]|\uD804[\uDC01\uDC38-\uDC46\uDC70\uDC73\uDC74\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDCC2\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDE41\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4\uDF00\uDF01\uDF36-\uDF3A\uDF40\uDF42]|\uD80D[\uDC40\uDC47-\uDC55]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD833[\uDF00-\uDF2D\uDF30-\uDF46]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDC8F\uDD30-\uDD36\uDEAE\uDEEC-\uDEEF]|\uD839[\uDCEC-\uDCEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,X2=e=>e.search(_O)!==-1,jO=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,WO=e=>{var t=e.match(jO);if(t===null)return!1;var n=t[0].length/2;return n%2===1},zO={delete(e,t){e.delete(t)},insertFragment(e,t,n){e.insertFragment(t,n)},insertText(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};x.withoutNormalizing(e,()=>{var{voids:r=!1}=n,{at:i=pv(e)}=n;if(M.isPath(i)&&(i=x.range(e,i)),G.isRange(i))if(G.isCollapsed(i))i=i.anchor;else{var o=G.end(i);if(!r&&x.void(e,{at:o}))return;var s=G.start(i),u=x.pointRef(e,s),l=x.pointRef(e,o);K.delete(e,{at:i,voids:r});var a=u.unref(),c=l.unref();i=a||c,K.setSelection(e,{anchor:i,focus:i})}if(!(!r&&x.void(e,{at:i})||x.elementReadOnly(e,{at:i}))){var{path:f,offset:h}=i;t.length>0&&e.apply({type:"insert_text",path:f,offset:h,text:t})}})}};function K2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K2(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var K=nf(nf(nf(nf({},aO),cO),fO),zO),VO=(e,t)=>{for(var n of x.pathRefs(e))rO.transform(n,t);for(var r of x.pointRefs(e))iO.transform(r,t);for(var i of x.rangeRefs(e))oO.transform(i,t);var o=Fh.get(e)||[],s=bh.get(e)||new Set,u,l,a=p=>{if(p){var d=p.join(",");l.has(d)||(l.add(d),u.push(p))}};if(M.operationCanTransformPath(t)){u=[],l=new Set;for(var c of o){var f=M.transform(c,t);a(f)}}else u=o,l=s;var h=e.getDirtyPaths(t);for(var g of h)a(g);Fh.set(e,u),bh.set(e,l),K.transform(e,t),e.operations.push(t),x.normalize(e,{operation:t}),t.type==="set_selection"&&(e.marks=null),sa.get(e)||(sa.set(e,!0),Promise.resolve().then(()=>{sa.set(e,!1),e.onChange({operation:t}),e.operations=[]}))},UO=(e,t)=>{switch(t.type){case"insert_text":case"remove_text":case"set_node":{var{path:n}=t;return M.levels(n)}case"insert_node":{var{node:r,path:i}=t,o=M.levels(i),s=le.isText(r)?[]:Array.from(q.nodes(r),O=>{var[,V]=O;return i.concat(V)});return[...o,...s]}case"merge_node":{var{path:u}=t,l=M.ancestors(u),a=M.previous(u);return[...l,a]}case"move_node":{var{path:c,newPath:f}=t;if(M.equals(c,f))return[];var h=[],g=[];for(var p of M.ancestors(c)){var d=M.transform(p,t);h.push(d)}for(var y of M.ancestors(f)){var m=M.transform(y,t);g.push(m)}var v=g[g.length-1],w=f[f.length-1],E=v.concat(w);return[...h,...g,E]}case"remove_node":{var{path:S}=t,T=M.ancestors(S);return[...T]}case"split_node":{var{path:B}=t,R=M.levels(B),b=M.next(B);return[...R,b]}default:return[]}},XO=e=>{var{selection:t}=e;return t?q.fragment(e,t):[]},KO=(e,t)=>{var[n,r]=t;if(!le.isText(n)){if(ce.isElement(n)&&n.children.length===0){var i={text:""};K.insertNodes(e,i,{at:r.concat(0),voids:!0});return}for(var o=x.isEditor(n)?!1:ce.isElement(n)&&(e.isInline(n)||n.children.length===0||le.isText(n.children[0])||e.isInline(n.children[0])),s=0,u=0;u<n.children.length;u++,s++){var l=q.get(e,r);if(!le.isText(l)){var a=l.children[s],c=l.children[s-1],f=u===n.children.length-1,h=le.isText(a)||ce.isElement(a)&&e.isInline(a);if(h!==o)K.removeNodes(e,{at:r.concat(s),voids:!0}),s--;else if(ce.isElement(a)){if(e.isInline(a)){if(c==null||!le.isText(c)){var g={text:""};K.insertNodes(e,g,{at:r.concat(s),voids:!0}),s++}else if(f){var p={text:""};K.insertNodes(e,p,{at:r.concat(s+1),voids:!0}),s++}}}else c!=null&&le.isText(c)&&(le.equals(a,c,{loose:!0})?(K.mergeNodes(e,{at:r.concat(s),voids:!0}),s--):c.text===""?(K.removeNodes(e,{at:r.concat(s-1),voids:!0}),s--):a.text===""&&(K.removeNodes(e,{at:r.concat(s),voids:!0}),s--))}}}},YO=(e,t)=>{var{iteration:n,initialDirtyPathsLength:r}=t,i=r*42;if(n>i)throw new Error("Could not completely normalize the editor after ".concat(i," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state."));return!0},qO=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{voids:r=!1,mode:i="lowest",at:o=t.selection,match:s}=n;if(o){var u=x.path(t,o),l=i==="lowest";for(var[a,c]of x.levels(t,{at:u,voids:r,match:s,reverse:l}))if(!le.isText(a)){if(G.isRange(o)){if(M.isAncestor(c,o.anchor.path)&&M.isAncestor(c,o.focus.path))return[a,c]}else if(!M.equals(u,c))return[a,c]}}};function Y2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function q2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y2(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ZO=(e,t,n)=>{var{selection:r}=e;if(r){var i=(f,h)=>{if(!le.isText(f))return!1;var[g,p]=x.parent(e,h);return!e.isVoid(g)||e.markableVoid(g)},o=G.isExpanded(r),s=!1;if(!o){var[u,l]=x.node(e,r);if(u&&i(u,l)){var[a]=x.parent(e,l);s=a&&e.markableVoid(a)}}if(o||s)K.setNodes(e,{[t]:n},{match:i,split:!0,voids:!0});else{var c=q2(q2({},x.marks(e)||{}),{},{[t]:n});e.marks=c,sa.get(e)||e.onChange()}}};function Z2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Q2(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z2(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var QO=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=x.point(t,n,{edge:"end"}),o=x.end(t,[]),s={anchor:i,focus:o},{distance:u=1}=r,l=0,a;for(var c of x.positions(t,Q2(Q2({},r),{},{at:s}))){if(l>u)break;l!==0&&(a=c),l++}return a};function J2(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function eC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J2(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J2(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var JO=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=x.start(t,[]),o=x.point(t,n,{edge:"start"}),s={anchor:i,focus:o},{distance:u=1}=r,l=0,a;for(var c of x.positions(t,eC(eC({},r),{},{at:s,reverse:!0}))){if(l>u)break;l!==0&&(a=c),l++}return a},eF=(e,t)=>{var{selection:n}=e;n&&G.isCollapsed(n)&&K.delete(e,{unit:t,reverse:!0})},tF=(e,t)=>{var{selection:n}=e;n&&G.isCollapsed(n)&&K.delete(e,{unit:t})},nF=function(t){var{direction:n="forward"}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=t;r&&G.isExpanded(r)&&K.delete(t,{reverse:n==="backward"})},rF=(e,t)=>[x.start(e,t),x.end(e,t)];function tC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function nC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?tC(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var iF=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return x.above(t,nC(nC({},n),{},{match:r=>ce.isElement(r)&&x.isElementReadOnly(t,r)}))},oF=(e,t)=>x.point(e,t,{edge:"end"}),sF=(e,t)=>{var n=x.path(e,t,{edge:"start"});return x.node(e,n)},uF=(e,t)=>{var n=x.range(e,t);return q.fragment(e,n)};function rC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function iC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rC(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var lF=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return x.above(t,iC(iC({},n),{},{match:r=>ce.isElement(r)&&x.isVoid(t,r)}))},aF=(e,t)=>t.children.some(n=>ce.isElement(n)&&x.isBlock(e,n)),cF=(e,t)=>t.children.some(n=>le.isText(n)||x.isInline(e,n)),fF=(e,t)=>q.has(e,t),hF=(e,t)=>t.children.every(n=>le.isText(n)),dF=e=>{K.splitNodes(e,{always:!0})},gF=(e,t,n)=>{K.insertNodes(e,t,n)},pF=e=>{K.splitNodes(e,{always:!0})};function oC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function mF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oC(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var vF=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i,marks:o}=t;if(i){if(o){var s=mF({text:n},o);K.insertNodes(t,s,{at:r.at,voids:r.voids})}else K.insertText(t,n,r);t.marks=null}},yF=(e,t)=>!e.isInline(t),wF=(e,t,n)=>x.isStart(e,t,n)||x.isEnd(e,t,n),CF=(e,t)=>{var{children:n}=t,[r]=n;return n.length===0||n.length===1&&le.isText(r)&&r.text===""&&!e.isVoid(t)},xF=(e,t,n)=>{var r=x.end(e,n);return Oe.equals(t,r)},EF=e=>{var t=mS.get(e);return t===void 0?!0:t},PF=(e,t,n)=>{if(t.offset!==0)return!1;var r=x.start(e,n);return Oe.equals(t,r)},SF=(e,t)=>{var n=x.path(e,t,{edge:"end"});return x.node(e,n)},DF=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=x.path(t,n,r),o=q.leaf(t,i);return[o,i]};function TF(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=e.selection,reverse:r=!1,voids:i=!1}=t,{match:o}=t;if(o==null&&(o=()=>!0),!!n){var s=[],u=x.path(e,n);for(var[l,a]of q.levels(e,u))if(o(l,a)&&(s.push([l,a]),!i&&ce.isElement(l)&&x.isVoid(e,l)))break;r&&s.reverse(),yield*s}}()}var AF=["text"],BF=["text"],MF=function(t){var{marks:n,selection:r}=t;if(!r)return null;var{anchor:i,focus:o}=r;if(n)return n;if(G.isExpanded(r)){var s=x.isEnd(t,i,i.path);if(s){var u=x.after(t,i);u&&(i=u)}var[l]=x.nodes(t,{match:le.isText,at:{anchor:i,focus:o}});if(l){var[a]=l,c=Fi(a,AF);return c}else return{}}var{path:f}=i,[h]=x.leaf(t,f);if(i.offset===0){var g=x.previous(t,{at:f,match:le.isText}),p=x.above(t,{match:E=>ce.isElement(E)&&x.isVoid(t,E)&&t.markableVoid(E)});if(!p){var d=x.above(t,{match:E=>ce.isElement(E)&&x.isBlock(t,E)});if(g&&d){var[y,m]=g,[,v]=d;M.isAncestor(v,m)&&(h=y)}}}var w=Fi(h,BF);return w},RF=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=t.selection}=n;if(s){var u=x.after(t,s,{voids:i});if(u){var[,l]=x.last(t,[]),a=[u.path,l];if(M.isPath(s)&&s.length===0)throw new Error("Cannot get the next node from the root node!");if(o==null)if(M.isPath(s)){var[c]=x.parent(t,s);o=h=>c.children.includes(h)}else o=()=>!0;var[f]=x.nodes(t,{at:a,match:o,mode:r,voids:i});return f}}},kF=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=x.path(t,n,r),o=q.get(t,i);return[o,i]};function OF(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=e.selection,mode:r="all",universal:i=!1,reverse:o=!1,voids:s=!1,ignoreNonSelectable:u=!1}=t,{match:l}=t;if(l||(l=()=>!0),!!n){var a,c;if(yO.isSpan(n))a=n[0],c=n[1];else{var f=x.path(e,n,{edge:"start"}),h=x.path(e,n,{edge:"end"});a=o?h:f,c=o?f:h}var g=q.nodes(e,{reverse:o,from:a,to:c,pass:E=>{var[S]=E;return ce.isElement(S)?!!(!s&&(x.isVoid(e,S)||x.isElementReadOnly(e,S))||u&&!x.isSelectable(e,S)):!1}}),p=[],d;for(var[y,m]of g)if(!(u&&ce.isElement(y)&&!x.isSelectable(e,y))){var v=d&&M.compare(m,d[1])===0;if(!(r==="highest"&&v)){if(!l(y,m)){if(i&&!v&&le.isText(y))return;continue}if(r==="lowest"&&v){d=[y,m];continue}var w=r==="lowest"?d:[y,m];w&&(i?p.push(w):yield w),d=[y,m]}}r==="lowest"&&d&&(i?p.push(d):yield d),i&&(yield*p)}}()}var FF=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{force:r=!1,operation:i}=n,o=c=>Fh.get(c)||[],s=c=>bh.get(c)||new Set,u=c=>{var f=o(c).pop(),h=f.join(",");return s(c).delete(h),f};if(x.isNormalizing(t)){if(r){var l=Array.from(q.nodes(t),c=>{var[,f]=c;return f}),a=new Set(l.map(c=>c.join(",")));Fh.set(t,l),bh.set(t,a)}o(t).length!==0&&x.withoutNormalizing(t,()=>{for(var c of o(t))if(q.has(t,c)){var f=x.node(t,c),[h,g]=f;ce.isElement(h)&&h.children.length===0&&t.normalizeNode(f,{operation:i})}for(var p=o(t),d=p.length,y=0;p.length!==0;){if(!t.shouldNormalize({dirtyPaths:p,iteration:y,initialDirtyPathsLength:d,operation:i}))return;var m=u(t);if(q.has(t,m)){var v=x.node(t,m);t.normalizeNode(v,{operation:i})}y++,p=o(t)}})}},bF=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},i=x.path(t,n,r),o=M.parent(i),s=x.node(t,o);return s},IF=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:u}=o,l=x.pathRefs(t);return l.delete(o),o.current=null,u}},s=x.pathRefs(t);return s.add(o),o},LF=e=>{var t=b2.get(e);return t||(t=new Set,b2.set(e,t)),t},GF=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{depth:i,edge:o}=r;if(M.isPath(n)){if(o==="start"){var[,s]=q.first(t,n);n=s}else if(o==="end"){var[,u]=q.last(t,n);n=u}}return G.isRange(n)&&(o==="start"?n=G.start(n):o==="end"?n=G.end(n):n=M.common(n.anchor.path,n.focus.path)),Oe.isPoint(n)&&(n=n.path),i!=null&&(n=n.slice(0,i)),n},NF=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:u}=o,l=x.pointRefs(t);return l.delete(o),o.current=null,u}},s=x.pointRefs(t);return s.add(o),o},HF=e=>{var t=I2.get(e);return t||(t=new Set,I2.set(e,t)),t},$F=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{edge:i="start"}=r;if(M.isPath(n)){var o;if(i==="end"){var[,s]=q.last(t,n);o=s}else{var[,u]=q.first(t,n);o=u}var l=q.get(t,o);if(!le.isText(l))throw new Error("Cannot get the ".concat(i," point in the node at path [").concat(n,"] because it has no ").concat(i," text node."));return{path:o,offset:i==="end"?l.text.length:0}}if(G.isRange(n)){var[a,c]=G.edges(n);return i==="start"?a:c}return n};function _F(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return function*(){var{at:n=e.selection,unit:r="offset",reverse:i=!1,voids:o=!1,ignoreNonSelectable:s=!1}=t;if(!n)return;var u=x.range(e,n),[l,a]=G.edges(u),c=i?a:l,f=!1,h="",g=0,p=0,d=0;for(var[y,m]of x.nodes(e,{at:n,reverse:i,voids:o,ignoreNonSelectable:s})){if(ce.isElement(y)){if(!o&&(e.isVoid(y)||e.isElementReadOnly(y))){yield x.start(e,m);continue}if(e.isInline(y))continue;if(x.hasInlines(e,y)){var v=M.isAncestor(m,a.path)?a:x.end(e,m),w=M.isAncestor(m,l.path)?l:x.start(e,m);h=x.string(e,{anchor:w,focus:v},{voids:o}),f=!0}}if(le.isText(y)){var E=M.equals(m,c.path);for(E?(p=i?c.offset:y.text.length-c.offset,d=c.offset):(p=y.text.length,d=i?p:0),(E||f||r==="offset")&&(yield{path:m,offset:d},f=!1);;){if(g===0){if(h==="")break;g=S(h,r,i),h=vv(h,g,i)[1]}if(d=i?d-g:d+g,p=p-g,p<0){g=-p;break}g=0,yield{path:m,offset:d}}}}function S(T,B,R){return B==="character"?mv(T,R):B==="word"?SO(T,R):B==="line"||B==="block"?T.length:1}}()}var jF=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=t.selection}=n;if(s){var u=x.before(t,s,{voids:i});if(u){var[,l]=x.first(t,[]),a=[u.path,l];if(M.isPath(s)&&s.length===0)throw new Error("Cannot get the previous node from the root node!");if(o==null)if(M.isPath(s)){var[c]=x.parent(t,s);o=h=>c.children.includes(h)}else o=()=>!0;var[f]=x.nodes(t,{reverse:!0,at:a,match:o,mode:r,voids:i});return f}}},WF=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{affinity:i="forward"}=r,o={current:n,affinity:i,unref(){var{current:u}=o,l=x.rangeRefs(t);return l.delete(o),o.current=null,u}},s=x.rangeRefs(t);return s.add(o),o},zF=e=>{var t=L2.get(e);return t||(t=new Set,L2.set(e,t)),t},VF=(e,t,n)=>{if(G.isRange(t)&&!n)return t;var r=x.start(e,t),i=x.end(e,n||t);return{anchor:r,focus:i}};function sC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function UF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?sC(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var XF=(e,t)=>{var{selection:n}=e;if(n){var r=(c,f)=>{if(!le.isText(c))return!1;var[h,g]=x.parent(e,f);return!e.isVoid(h)||e.markableVoid(h)},i=G.isExpanded(n),o=!1;if(!i){var[s,u]=x.node(e,n);if(s&&r(s,u)){var[l]=x.parent(e,u);o=l&&e.markableVoid(l)}}if(i||o)K.unsetNodes(e,t,{match:r,split:!0,voids:!0});else{var a=UF({},x.marks(e)||{});delete a[t],e.marks=a,sa.get(e)||e.onChange()}}},KF=(e,t)=>{mS.set(e,t)},YF=(e,t)=>x.point(e,t,{edge:"start"}),qF=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,o=x.range(t,n),[s,u]=G.edges(o),l="";for(var[a,c]of x.nodes(t,{at:o,match:le.isText,voids:i})){var f=a.text;M.equals(c,u.path)&&(f=f.slice(0,u.offset)),M.equals(c,s.path)&&(f=f.slice(s.offset)),l+=f}return l},ZF=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{voids:i=!1}=r,[o,s]=G.edges(n);if(o.offset!==0||s.offset!==0||G.isCollapsed(n)||M.hasPrevious(s.path))return n;var u=x.above(t,{at:s,match:p=>ce.isElement(p)&&x.isBlock(t,p),voids:i}),l=u?u[1]:[],a=x.start(t,o),c={anchor:a,focus:s},f=!0;for(var[h,g]of x.nodes(t,{at:c,match:le.isText,reverse:!0,voids:i})){if(f){f=!1;continue}if(h.text!==""||M.isBefore(g,l)){s={path:g,offset:h.text.length};break}}return{anchor:o,focus:s}},QF=(e,t)=>{var n=x.isNormalizing(e);x.setNormalizing(e,!1);try{t()}finally{x.setNormalizing(e,n)}x.normalize(e)},JF=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x.withoutNormalizing(t,()=>{var r,i,{reverse:o=!1,unit:s="character",distance:u=1,voids:l=!1}=n,{at:a=t.selection,hanging:c=!1}=n;if(a){var f=!1;if(G.isRange(a)&&G.isCollapsed(a)&&(f=!0,a=a.anchor),Oe.isPoint(a)){var h=x.void(t,{at:a,mode:"highest"});if(!l&&h){var[,g]=h;a=g}else{var p={unit:s,distance:u},d=o?x.before(t,a,p)||x.start(t,[]):x.after(t,a,p)||x.end(t,[]);a={anchor:a,focus:d},c=!0}}if(M.isPath(a)){K.removeNodes(t,{at:a,voids:l});return}if(!G.isCollapsed(a)){if(!c){var[,y]=G.edges(a),m=x.end(t,[]);Oe.equals(y,m)||(a=x.unhangRange(t,a,{voids:l}))}var[v,w]=G.edges(a),E=x.above(t,{match:De=>ce.isElement(De)&&x.isBlock(t,De),at:v,voids:l}),S=x.above(t,{match:De=>ce.isElement(De)&&x.isBlock(t,De),at:w,voids:l}),T=E&&S&&!M.equals(E[1],S[1]),B=M.equals(v.path,w.path),R=l?null:(r=x.void(t,{at:v,mode:"highest"}))!==null&&r!==void 0?r:x.elementReadOnly(t,{at:v,mode:"highest"}),b=l?null:(i=x.void(t,{at:w,mode:"highest"}))!==null&&i!==void 0?i:x.elementReadOnly(t,{at:w,mode:"highest"});if(R){var O=x.before(t,v);O&&E&&M.isAncestor(E[1],O.path)&&(v=O)}if(b){var V=x.after(t,w);V&&S&&M.isAncestor(S[1],V.path)&&(w=V)}var L=[],W;for(var z of x.nodes(t,{at:a,voids:l})){var[_,J]=z;W&&M.compare(J,W)===0||(!l&&ce.isElement(_)&&(x.isVoid(t,_)||x.isElementReadOnly(t,_))||!M.isCommon(J,v.path)&&!M.isCommon(J,w.path))&&(L.push(z),W=J)}var Z=Array.from(L,De=>{var[,Le]=De;return x.pathRef(t,Le)}),N=x.pointRef(t,v),F=x.pointRef(t,w),U="";if(!B&&!R){var se=N.current,[fe]=x.leaf(t,se),{path:nt}=se,{offset:te}=v,k=fe.text.slice(te);k.length>0&&(t.apply({type:"remove_text",path:nt,offset:te,text:k}),U=k)}if(Z.reverse().map(De=>De.unref()).filter(De=>De!==null).forEach(De=>K.removeNodes(t,{at:De,voids:l})),!b){var H=F.current,[j]=x.leaf(t,H),{path:Y}=H,ve=B?v.offset:0,ie=j.text.slice(ve,w.offset);ie.length>0&&(t.apply({type:"remove_text",path:Y,offset:ve,text:ie}),U=ie)}!B&&T&&F.current&&N.current&&K.mergeNodes(t,{at:F.current,hanging:!0,voids:l}),f&&o&&s==="character"&&U.length>1&&U.match(/[\u0E00-\u0E7F]+/)&&K.insertText(t,U.slice(0,U.length-u));var be=N.unref(),Ie=F.unref(),Re=o?be||Ie:Ie||be;n.at==null&&Re&&K.select(t,Re)}}})},eb=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};x.withoutNormalizing(t,()=>{var{hanging:i=!1,voids:o=!1}=r,{at:s=pv(t)}=r;if(n.length){if(G.isRange(s))if(i||(s=x.unhangRange(t,s,{voids:o})),G.isCollapsed(s))s=s.anchor;else{var[,u]=G.edges(s);if(!o&&x.void(t,{at:u}))return;var l=x.pointRef(t,u);K.delete(t,{at:s}),s=l.unref()}else M.isPath(s)&&(s=x.start(t,s));if(!(!o&&x.void(t,{at:s}))){var a=x.above(t,{at:s,match:te=>ce.isElement(te)&&x.isInline(t,te),mode:"highest",voids:o});if(a){var[,c]=a;if(x.isEnd(t,s,c)){var f=x.after(t,c);s=f}else if(x.isStart(t,s,c)){var h=x.before(t,c);s=h}}var g=x.above(t,{match:te=>ce.isElement(te)&&x.isBlock(t,te),at:s,voids:o}),[,p]=g,d=x.isStart(t,s,p),y=x.isEnd(t,s,p),m=d&&y,v=!d||d&&y,w=!y,[,E]=q.first({children:n},[]),[,S]=q.last({children:n},[]),T=[],B=te=>{var[k,H]=te,j=H.length===0;return j?!1:m?!0:!(v&&M.isAncestor(H,E)&&ce.isElement(k)&&!t.isVoid(k)&&!t.isInline(k)||w&&M.isAncestor(H,S)&&ce.isElement(k)&&!t.isVoid(k)&&!t.isInline(k))};for(var R of q.nodes({children:n},{pass:B}))B(R)&&T.push(R);var b=[],O=[],V=[],L=!0,W=!1;for(var[z]of T)ce.isElement(z)&&!t.isInline(z)?(L=!1,W=!0,O.push(z)):L?b.push(z):V.push(z);var[_]=x.nodes(t,{at:s,match:te=>le.isText(te)||x.isInline(t,te),mode:"highest",voids:o}),[,J]=_,Z=x.isStart(t,s,J),N=x.isEnd(t,s,J),F=x.pathRef(t,y&&!V.length?M.next(p):p),U=x.pathRef(t,N?M.next(J):J);K.splitNodes(t,{at:s,match:te=>W?ce.isElement(te)&&x.isBlock(t,te):le.isText(te)||x.isInline(t,te),mode:W?"lowest":"highest",always:W&&(!d||b.length>0)&&(!y||V.length>0),voids:o});var se=x.pathRef(t,!Z||Z&&N?M.next(J):J);if(K.insertNodes(t,b,{at:se.current,match:te=>le.isText(te)||x.isInline(t,te),mode:"highest",voids:o}),m&&!b.length&&O.length&&!V.length&&K.delete(t,{at:p,voids:o}),K.insertNodes(t,O,{at:F.current,match:te=>ce.isElement(te)&&x.isBlock(t,te),mode:"lowest",voids:o}),K.insertNodes(t,V,{at:U.current,match:te=>le.isText(te)||x.isInline(t,te),mode:"highest",voids:o}),!r.at){var fe;if(V.length>0&&U.current?fe=M.previous(U.current):O.length>0&&F.current?fe=M.previous(F.current):se.current&&(fe=M.previous(se.current)),fe){var nt=x.end(t,fe);K.select(t,nt)}}se.unref(),F.unref(),U.unref()}}})},tb=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{edge:r="anchor"}=n,{selection:i}=t;if(i){if(r==="anchor")K.select(t,i.anchor);else if(r==="focus")K.select(t,i.focus);else if(r==="start"){var[o]=G.edges(i);K.select(t,o)}else if(r==="end"){var[,s]=G.edges(i);K.select(t,s)}}else return},nb=e=>{var{selection:t}=e;t&&e.apply({type:"set_selection",properties:t,newProperties:null})},rb=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{selection:r}=t,{distance:i=1,unit:o="character",reverse:s=!1}=n,{edge:u=null}=n;if(r){u==="start"&&(u=G.isBackward(r)?"focus":"anchor"),u==="end"&&(u=G.isBackward(r)?"anchor":"focus");var{anchor:l,focus:a}=r,c={distance:i,unit:o,ignoreNonSelectable:!0},f={};if(u==null||u==="anchor"){var h=s?x.before(t,l,c):x.after(t,l,c);h&&(f.anchor=h)}if(u==null||u==="focus"){var g=s?x.before(t,a,c):x.after(t,a,c);g&&(f.focus=g)}K.setSelection(t,f)}},ib=(e,t)=>{var{selection:n}=e;if(t=x.range(e,t),n){K.setSelection(e,t);return}if(!G.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(bt.stringify(t)));e.apply({type:"set_selection",properties:n,newProperties:t})};function uC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uC(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var ob=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{selection:i}=t,{edge:o="both"}=r;if(i){o==="start"&&(o=G.isBackward(i)?"focus":"anchor"),o==="end"&&(o=G.isBackward(i)?"anchor":"focus");var{anchor:s,focus:u}=i,l=o==="anchor"?s:u;K.setSelection(t,{[o==="anchor"?"anchor":"focus"]:lC(lC({},l),n)})}},sb=(e,t)=>{var{selection:n}=e,r={},i={};if(n){for(var o in t)(o==="anchor"&&t.anchor!=null&&!Oe.equals(t.anchor,n.anchor)||o==="focus"&&t.focus!=null&&!Oe.equals(t.focus,n.focus)||o!=="anchor"&&o!=="focus"&&t[o]!==n[o])&&(r[o]=n[o],i[o]=t[o]);Object.keys(r).length>0&&e.apply({type:"set_selection",properties:r,newProperties:i})}},ub=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};x.withoutNormalizing(t,()=>{var{hanging:i=!1,voids:o=!1,mode:s="lowest"}=r,{at:u,match:l,select:a}=r;if(q.isNode(n)&&(n=[n]),n.length!==0){var[c]=n;if(u||(u=pv(t),a!==!1&&(a=!0)),a==null&&(a=!1),G.isRange(u))if(i||(u=x.unhangRange(t,u,{voids:o})),G.isCollapsed(u))u=u.anchor;else{var[,f]=G.edges(u),h=x.pointRef(t,f);K.delete(t,{at:u}),u=h.unref()}if(Oe.isPoint(u)){l==null&&(le.isText(c)?l=B=>le.isText(B):t.isInline(c)?l=B=>le.isText(B)||x.isInline(t,B):l=B=>ce.isElement(B)&&x.isBlock(t,B));var[g]=x.nodes(t,{at:u.path,match:l,mode:s,voids:o});if(g){var[,p]=g,d=x.pathRef(t,p),y=x.isEnd(t,u,p);K.splitNodes(t,{at:u,match:l,mode:s,voids:o});var m=d.unref();u=y?M.next(m):m}else return}var v=M.parent(u),w=u[u.length-1];if(!(!o&&x.void(t,{at:v}))){for(var E of n){var S=v.concat(w);w++,t.apply({type:"insert_node",path:S,node:E}),u=M.next(u)}if(u=M.previous(u),a){var T=x.end(t,u);T&&K.select(t,T)}}}})},lb=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x.withoutNormalizing(t,()=>{var{at:r=t.selection,mode:i="lowest",voids:o=!1}=n,{match:s}=n;if(s==null&&(s=M.isPath(r)?pl(t,r):E=>ce.isElement(E)&&x.isBlock(t,E)),!!r){var u=x.nodes(t,{at:r,match:s,mode:i,voids:o}),l=Array.from(u,E=>{var[,S]=E;return x.pathRef(t,S)});for(var a of l){var c=a.unref();if(c.length<2)throw new Error("Cannot lift node at a path [".concat(c,"] because it has a depth of less than `2`."));var f=x.node(t,M.parent(c)),[h,g]=f,p=c[c.length-1],{length:d}=h.children;if(d===1){var y=M.next(g);K.moveNodes(t,{at:c,to:y,voids:o}),K.removeNodes(t,{at:g,voids:o})}else if(p===0)K.moveNodes(t,{at:c,to:g,voids:o});else if(p===d-1){var m=M.next(g);K.moveNodes(t,{at:c,to:m,voids:o})}else{var v=M.next(c),w=M.next(g);K.splitNodes(t,{at:v,voids:o}),K.moveNodes(t,{at:c,to:w,voids:o})}}}})},ab=["text"],cb=["children"],yS=(e,t)=>{if(ce.isElement(t)){var n=t;return x.isVoid(e,t)?!0:n.children.length===1?yS(e,n.children[0]):!1}else return!x.isEditor(t)},fb=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x.withoutNormalizing(t,()=>{var{match:r,at:i=t.selection}=n,{hanging:o=!1,voids:s=!1,mode:u="lowest"}=n;if(i){if(r==null)if(M.isPath(i)){var[l]=x.parent(t,i);r=O=>l.children.includes(O)}else r=O=>ce.isElement(O)&&x.isBlock(t,O);if(!o&&G.isRange(i)&&(i=x.unhangRange(t,i,{voids:s})),G.isRange(i))if(G.isCollapsed(i))i=i.anchor;else{var[,a]=G.edges(i),c=x.pointRef(t,a);K.delete(t,{at:i}),i=c.unref(),n.at==null&&K.select(t,i)}var[f]=x.nodes(t,{at:i,match:r,voids:s,mode:u}),h=x.previous(t,{at:i,match:r,voids:s,mode:u});if(!(!f||!h)){var[g,p]=f,[d,y]=h;if(!(p.length===0||y.length===0)){var m=M.next(y),v=M.common(p,y),w=M.isSibling(p,y),E=Array.from(x.levels(t,{at:p}),O=>{var[V]=O;return V}).slice(v.length).slice(0,-1),S=x.above(t,{at:p,mode:"highest",match:O=>E.includes(O)&&yS(t,O)}),T=S&&x.pathRef(t,S[1]),B,R;if(le.isText(g)&&le.isText(d)){var b=Fi(g,ab);R=d.text.length,B=b}else if(ce.isElement(g)&&ce.isElement(d)){var b=Fi(g,cb);R=d.children.length,B=b}else throw new Error("Cannot merge the node at path [".concat(p,"] with the previous sibling because it is not the same kind: ").concat(bt.stringify(g)," ").concat(bt.stringify(d)));w||K.moveNodes(t,{at:p,to:m,voids:s}),T&&K.removeNodes(t,{at:T.current,voids:s}),ce.isElement(d)&&x.isEmpty(t,d)||le.isText(d)&&d.text===""&&y[y.length-1]!==0?K.removeNodes(t,{at:y,voids:s}):t.apply({type:"merge_node",path:m,position:R,properties:B}),T&&T.unref()}}}})},hb=(e,t)=>{x.withoutNormalizing(e,()=>{var{to:n,at:r=e.selection,mode:i="lowest",voids:o=!1}=t,{match:s}=t;if(r){s==null&&(s=M.isPath(r)?pl(e,r):g=>ce.isElement(g)&&x.isBlock(e,g));var u=x.pathRef(e,n),l=x.nodes(e,{at:r,match:s,mode:i,voids:o}),a=Array.from(l,g=>{var[,p]=g;return x.pathRef(e,p)});for(var c of a){var f=c.unref(),h=u.current;f.length!==0&&e.apply({type:"move_node",path:f,newPath:h}),u.current&&M.isSibling(h,f)&&M.isAfter(h,f)&&(u.current=M.next(u.current))}u.unref()}})},db=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x.withoutNormalizing(t,()=>{var{hanging:r=!1,voids:i=!1,mode:o="lowest"}=n,{at:s=t.selection,match:u}=n;if(s){u==null&&(u=M.isPath(s)?pl(t,s):g=>ce.isElement(g)&&x.isBlock(t,g)),!r&&G.isRange(s)&&(s=x.unhangRange(t,s,{voids:i}));var l=x.nodes(t,{at:s,match:u,mode:o,voids:i}),a=Array.from(l,g=>{var[,p]=g;return x.pathRef(t,p)});for(var c of a){var f=c.unref();if(f){var[h]=x.node(t,f);t.apply({type:"remove_node",path:f,node:h})}}}})},gb=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};x.withoutNormalizing(t,()=>{var{match:i,at:o=t.selection,compare:s,merge:u}=r,{hanging:l=!1,mode:a="lowest",split:c=!1,voids:f=!1}=r;if(o){if(i==null&&(i=M.isPath(o)?pl(t,o):R=>ce.isElement(R)&&x.isBlock(t,R)),!l&&G.isRange(o)&&(o=x.unhangRange(t,o,{voids:f})),c&&G.isRange(o)){if(G.isCollapsed(o)&&x.leaf(t,o.anchor)[0].text.length>0)return;var h=x.rangeRef(t,o,{affinity:"inward"}),[g,p]=G.edges(o),d=a==="lowest"?"lowest":"highest",y=x.isEnd(t,p,p.path);K.splitNodes(t,{at:p,match:i,mode:d,voids:f,always:!y});var m=x.isStart(t,g,g.path);K.splitNodes(t,{at:g,match:i,mode:d,voids:f,always:!m}),o=h.unref(),r.at==null&&K.select(t,o)}s||(s=(R,b)=>R!==b);for(var[v,w]of x.nodes(t,{at:o,match:i,mode:a,voids:f})){var E={},S={};if(w.length!==0){var T=!1;for(var B in n)B==="children"||B==="text"||s(n[B],v[B])&&(T=!0,v.hasOwnProperty(B)&&(E[B]=v[B]),u?n[B]!=null&&(S[B]=u(v[B],n[B])):n[B]!=null&&(S[B]=n[B]));T&&t.apply({type:"set_node",path:w,properties:E,newProperties:S})}}}})},pb=(e,t)=>{if(G.isCollapsed(t))return t.anchor;var[,n]=G.edges(t),r=x.pointRef(e,n);return K.delete(e,{at:t}),r.unref()},mb=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x.withoutNormalizing(t,()=>{var{mode:r="lowest",voids:i=!1}=n,{match:o,at:s=t.selection,height:u=0,always:l=!1}=n;if(o==null&&(o=F=>ce.isElement(F)&&x.isBlock(t,F)),G.isRange(s)&&(s=pb(t,s)),M.isPath(s)){var a=s,c=x.point(t,a),[f]=x.parent(t,a);o=F=>F===f,u=c.path.length-a.length+1,s=c,l=!0}if(s){var h=x.pointRef(t,s,{affinity:"backward"}),g;try{var[p]=x.nodes(t,{at:s,match:o,mode:r,voids:i});if(!p)return;var d=x.void(t,{at:s,mode:"highest"}),y=0;if(!i&&d){var[m,v]=d;if(ce.isElement(m)&&t.isInline(m)){var w=x.after(t,v);if(!w){var E={text:""},S=M.next(v);K.insertNodes(t,E,{at:S,voids:i}),w=x.point(t,S)}s=w,l=!0}var T=s.path.length-v.length;u=T+1,l=!0}g=x.pointRef(t,s);var B=s.path.length-u,[,R]=p,b=s.path.slice(0,B),O=u===0?s.offset:s.path[B]+y;for(var[V,L]of x.levels(t,{at:b,reverse:!0,voids:i})){var W=!1;if(L.length<R.length||L.length===0||!i&&ce.isElement(V)&&x.isVoid(t,V))break;var z=h.current,_=x.isEnd(t,z,L);if(l||!h||!x.isEdge(t,z,L)){W=!0;var J=q.extractProps(V);t.apply({type:"split_node",path:L,position:O,properties:J})}O=L[L.length-1]+(W||_?1:0)}if(n.at==null){var Z=g.current||x.end(t,[]);K.select(t,Z)}}finally{var N;h.unref(),(N=g)===null||N===void 0||N.unref()}}})},vb=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};Array.isArray(n)||(n=[n]);var i={};for(var o of n)i[o]=null;K.setNodes(t,i,r)},yb=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};x.withoutNormalizing(t,()=>{var{mode:r="lowest",split:i=!1,voids:o=!1}=n,{at:s=t.selection,match:u}=n;if(s){u==null&&(u=M.isPath(s)?pl(t,s):g=>ce.isElement(g)&&x.isBlock(t,g)),M.isPath(s)&&(s=x.range(t,s));var l=G.isRange(s)?x.rangeRef(t,s):null,a=x.nodes(t,{at:s,match:u,mode:r,voids:o}),c=Array.from(a,g=>{var[,p]=g;return x.pathRef(t,p)}).reverse(),f=function(){var p=h.unref(),[d]=x.node(t,p),y=x.range(t,p);i&&l&&(y=G.intersection(l.current,y)),K.liftNodes(t,{at:y,match:m=>ce.isAncestor(d)&&d.children.includes(m),voids:o})};for(var h of c)f();l&&l.unref()}})};function aC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function cC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aC(Object(n),!0).forEach(function(r){vn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var wb=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};x.withoutNormalizing(t,()=>{var{mode:i="lowest",split:o=!1,voids:s=!1}=r,{match:u,at:l=t.selection}=r;if(l){if(u==null&&(M.isPath(l)?u=pl(t,l):t.isInline(n)?u=y=>ce.isElement(y)&&x.isInline(t,y)||le.isText(y):u=y=>ce.isElement(y)&&x.isBlock(t,y)),o&&G.isRange(l)){var[a,c]=G.edges(l),f=x.rangeRef(t,l,{affinity:"inward"});K.splitNodes(t,{at:c,match:u,voids:s}),K.splitNodes(t,{at:a,match:u,voids:s}),l=f.unref(),r.at==null&&K.select(t,l)}var h=Array.from(x.nodes(t,{at:l,match:t.isInline(n)?y=>ce.isElement(y)&&x.isBlock(t,y):y=>x.isEditor(y),mode:"lowest",voids:s})),g=function(){var m=G.isRange(l)?G.intersection(l,x.range(t,d)):l;if(!m)return 0;var v=Array.from(x.nodes(t,{at:m,match:u,mode:i,voids:s}));if(v.length>0){var[w]=v,E=v[v.length-1],[,S]=w,[,T]=E;if(S.length===0&&T.length===0)return 0;var B=M.equals(S,T)?M.parent(S):M.common(S,T),R=x.range(t,S,T),b=x.node(t,B),[O]=b,V=B.length+1,L=M.next(T.slice(0,V)),W=cC(cC({},n),{},{children:[]});K.insertNodes(t,W,{at:L,voids:s}),K.moveNodes(t,{at:R,match:z=>ce.isAncestor(O)&&O.children.includes(z),to:L.concat(0),voids:s})}},p;for(var[,d]of h)p=g()}})},Cb=()=>{var e={children:[],operations:[],selection:null,marks:null,isElementReadOnly:()=>!1,isInline:()=>!1,isSelectable:()=>!0,isVoid:()=>!1,markableVoid:()=>!1,onChange:()=>{},apply:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return VO(e,...r)},addMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ZO(e,...r)},deleteBackward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return eF(e,...r)},deleteForward:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return tF(e,...r)},deleteFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return nF(e,...r)},getFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return XO(e,...r)},insertBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return dF(e,...r)},insertSoftBreak:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return pF(e,...r)},insertFragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return eb(e,...r)},insertNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return gF(e,...r)},insertText:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return vF(e,...r)},normalizeNode:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return KO(e,...r)},removeMark:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return XF(e,...r)},getDirtyPaths:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return UO(e,...r)},shouldNormalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return YO(e,...r)},above:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return qO(e,...r)},after:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return QO(e,...r)},before:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return JO(e,...r)},collapse:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return tb(e,...r)},delete:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return JF(e,...r)},deselect:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return nb(e,...r)},edges:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return rF(e,...r)},elementReadOnly:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return iF(e,...r)},end:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return oF(e,...r)},first:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return sF(e,...r)},fragment:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return uF(e,...r)},getMarks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return MF(e,...r)},hasBlocks:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return aF(e,...r)},hasInlines:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return cF(e,...r)},hasPath:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return fF(e,...r)},hasTexts:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return hF(e,...r)},insertNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ub(e,...r)},isBlock:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return yF(e,...r)},isEdge:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return wF(e,...r)},isEmpty:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return CF(e,...r)},isEnd:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return xF(e,...r)},isNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return EF(e,...r)},isStart:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return PF(e,...r)},last:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return SF(e,...r)},leaf:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return DF(e,...r)},levels:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return TF(e,...r)},liftNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return lb(e,...r)},mergeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return fb(e,...r)},move:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return rb(e,...r)},moveNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return hb(e,...r)},next:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return RF(e,...r)},node:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return kF(e,...r)},nodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return OF(e,...r)},normalize:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return FF(e,...r)},parent:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return bF(e,...r)},path:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return GF(e,...r)},pathRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return IF(e,...r)},pathRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return LF(e,...r)},point:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return $F(e,...r)},pointRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return NF(e,...r)},pointRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return HF(e,...r)},positions:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return _F(e,...r)},previous:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return jF(e,...r)},range:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return VF(e,...r)},rangeRef:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return WF(e,...r)},rangeRefs:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return zF(e,...r)},removeNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return db(e,...r)},select:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ib(e,...r)},setNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return gb(e,...r)},setNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return KF(e,...r)},setPoint:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ob(e,...r)},setSelection:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return sb(e,...r)},splitNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return mb(e,...r)},start:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return YF(e,...r)},string:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return qF(e,...r)},unhangRange:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return ZF(e,...r)},unsetNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return vb(e,...r)},unwrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return yb(e,...r)},void:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return lF(e,...r)},withoutNormalizing:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return QF(e,...r)},wrapNodes:function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return wb(e,...r)}};return e},xb=Sb,wS="---",CS="A-Za-z--------",Eb=new RegExp("^[^"+CS+"]*["+wS+"]"),Pb=new RegExp("^[^"+wS+"]*["+CS+"]");function Sb(e){return e=String(e||""),Eb.test(e)?"rtl":Pb.test(e)?"ltr":"neutral"}const xS=$s(xb),fC=e=>typeof e=="object"&&e!=null&&e.nodeType===1,hC=(e,t)=>(!t||e!=="hidden")&&e!=="visible"&&e!=="clip",J0=(e,t)=>{if(e.clientHeight<e.scrollHeight||e.clientWidth<e.scrollWidth){const n=getComputedStyle(e,null);return hC(n.overflowY,t)||hC(n.overflowX,t)||(r=>{const i=(o=>{if(!o.ownerDocument||!o.ownerDocument.defaultView)return null;try{return o.ownerDocument.defaultView.frameElement}catch{return null}})(r);return!!i&&(i.clientHeight<r.scrollHeight||i.clientWidth<r.scrollWidth)})(e)}return!1},rf=(e,t,n,r,i,o,s,u)=>o<e&&s>t||o>e&&s<t?0:o<=e&&u<=n||s>=t&&u>=n?o-e-r:s>t&&u<n||o<e&&u>n?s-t+i:0,Db=e=>{const t=e.parentElement;return t??(e.getRootNode().host||null)},dC=(e,t)=>{var n,r,i,o;if(typeof document>"u")return[];const{scrollMode:s,block:u,inline:l,boundary:a,skipOverflowHiddenElements:c}=t,f=typeof a=="function"?a:J=>J!==a;if(!fC(e))throw new TypeError("Invalid target");const h=document.scrollingElement||document.documentElement,g=[];let p=e;for(;fC(p)&&f(p);){if(p=Db(p),p===h){g.push(p);break}p!=null&&p===document.body&&J0(p)&&!J0(document.documentElement)||p!=null&&J0(p,c)&&g.push(p)}const d=(r=(n=window.visualViewport)==null?void 0:n.width)!=null?r:innerWidth,y=(o=(i=window.visualViewport)==null?void 0:i.height)!=null?o:innerHeight,{scrollX:m,scrollY:v}=window,{height:w,width:E,top:S,right:T,bottom:B,left:R}=e.getBoundingClientRect(),{top:b,right:O,bottom:V,left:L}=(J=>{const Z=window.getComputedStyle(J);return{top:parseFloat(Z.scrollMarginTop)||0,right:parseFloat(Z.scrollMarginRight)||0,bottom:parseFloat(Z.scrollMarginBottom)||0,left:parseFloat(Z.scrollMarginLeft)||0}})(e);let W=u==="start"||u==="nearest"?S-b:u==="end"?B+V:S+w/2-b+V,z=l==="center"?R+E/2-L+O:l==="end"?T+O:R-L;const _=[];for(let J=0;J<g.length;J++){const Z=g[J],{height:N,width:F,top:U,right:se,bottom:fe,left:nt}=Z.getBoundingClientRect();if(s==="if-needed"&&S>=0&&R>=0&&B<=y&&T<=d&&S>=U&&B<=fe&&R>=nt&&T<=se)return _;const te=getComputedStyle(Z),k=parseInt(te.borderLeftWidth,10),H=parseInt(te.borderTopWidth,10),j=parseInt(te.borderRightWidth,10),Y=parseInt(te.borderBottomWidth,10);let ve=0,ie=0;const be="offsetWidth"in Z?Z.offsetWidth-Z.clientWidth-k-j:0,Ie="offsetHeight"in Z?Z.offsetHeight-Z.clientHeight-H-Y:0,Re="offsetWidth"in Z?Z.offsetWidth===0?0:F/Z.offsetWidth:0,De="offsetHeight"in Z?Z.offsetHeight===0?0:N/Z.offsetHeight:0;if(h===Z)ve=u==="start"?W:u==="end"?W-y:u==="nearest"?rf(v,v+y,y,H,Y,v+W,v+W+w,w):W-y/2,ie=l==="start"?z:l==="center"?z-d/2:l==="end"?z-d:rf(m,m+d,d,k,j,m+z,m+z+E,E),ve=Math.max(0,ve+v),ie=Math.max(0,ie+m);else{ve=u==="start"?W-U-H:u==="end"?W-fe+Y+Ie:u==="nearest"?rf(U,fe,N,H,Y+Ie,W,W+w,w):W-(U+N/2)+Ie/2,ie=l==="start"?z-nt-k:l==="center"?z-(nt+F/2)+be/2:l==="end"?z-se+j+be:rf(nt,se,F,k,j+be,z,z+E,E);const{scrollLeft:Le,scrollTop:at}=Z;ve=De===0?0:Math.max(0,Math.min(at+ve/De,Z.scrollHeight-N/De+Ie)),ie=Re===0?0:Math.max(0,Math.min(Le+ie/Re,Z.scrollWidth-F/Re+be)),W+=at-ve,z+=Le-ie}_.push({el:Z,top:ve,left:ie})}return _},Tb=e=>e===!1?{block:"end",inline:"nearest"}:(t=>t===Object(t)&&Object.keys(t).length!==0)(e)?e:{block:"start",inline:"nearest"};function Ab(e,t){if(!e.isConnected||!(i=>{let o=i;for(;o&&o.parentNode;){if(o.parentNode===document)return!0;o=o.parentNode instanceof ShadowRoot?o.parentNode.host:o.parentNode}return!1})(e))return;const n=(i=>{const o=window.getComputedStyle(i);return{top:parseFloat(o.scrollMarginTop)||0,right:parseFloat(o.scrollMarginRight)||0,bottom:parseFloat(o.scrollMarginBottom)||0,left:parseFloat(o.scrollMarginLeft)||0}})(e);if((i=>typeof i=="object"&&typeof i.behavior=="function")(t))return t.behavior(dC(e,t));const r=typeof t=="boolean"||t==null?void 0:t.behavior;for(const{el:i,top:o,left:s}of dC(e,Tb(t))){const u=o-n.top+n.bottom,l=s-n.left+n.right;i.scroll({top:u,left:l,behavior:r})}}var gs=[],Bb=function(){return gs.some(function(e){return e.activeTargets.length>0})},Mb=function(){return gs.some(function(e){return e.skippedTargets.length>0})},gC="ResizeObserver loop completed with undelivered notifications.",Rb=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:gC}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=gC),window.dispatchEvent(e)},$a;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})($a||($a={}));var ps=function(e){return Object.freeze(e)},kb=function(){function e(t,n){this.inlineSize=t,this.blockSize=n,ps(this)}return e}(),ES=function(){function e(t,n,r,i){return this.x=t,this.y=n,this.width=r,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,ps(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,r=t.y,i=t.top,o=t.right,s=t.bottom,u=t.left,l=t.width,a=t.height;return{x:n,y:r,top:i,right:o,bottom:s,left:u,width:l,height:a}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e}(),yv=function(e){return e instanceof SVGElement&&"getBBox"in e},PS=function(e){if(yv(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var i=e,o=i.offsetWidth,s=i.offsetHeight;return!(o||s||e.getClientRects().length)},pC=function(e){var t;if(e instanceof Element)return!0;var n=(t=e==null?void 0:e.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},Ob=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},ua=typeof window<"u"?window:{},of=new WeakMap,mC=/auto|scroll/,Fb=/^tb|vertical/,bb=/msie|trident/i.test(ua.navigator&&ua.navigator.userAgent),jr=function(e){return parseFloat(e||"0")},Iu=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new kb((n?t:e)||0,(n?e:t)||0)},vC=ps({devicePixelContentBoxSize:Iu(),borderBoxSize:Iu(),contentBoxSize:Iu(),contentRect:new ES(0,0,0,0)}),SS=function(e,t){if(t===void 0&&(t=!1),of.has(e)&&!t)return of.get(e);if(PS(e))return of.set(e,vC),vC;var n=getComputedStyle(e),r=yv(e)&&e.ownerSVGElement&&e.getBBox(),i=!bb&&n.boxSizing==="border-box",o=Fb.test(n.writingMode||""),s=!r&&mC.test(n.overflowY||""),u=!r&&mC.test(n.overflowX||""),l=r?0:jr(n.paddingTop),a=r?0:jr(n.paddingRight),c=r?0:jr(n.paddingBottom),f=r?0:jr(n.paddingLeft),h=r?0:jr(n.borderTopWidth),g=r?0:jr(n.borderRightWidth),p=r?0:jr(n.borderBottomWidth),d=r?0:jr(n.borderLeftWidth),y=f+a,m=l+c,v=d+g,w=h+p,E=u?e.offsetHeight-w-e.clientHeight:0,S=s?e.offsetWidth-v-e.clientWidth:0,T=i?y+v:0,B=i?m+w:0,R=r?r.width:jr(n.width)-T-S,b=r?r.height:jr(n.height)-B-E,O=R+y+S+v,V=b+m+E+w,L=ps({devicePixelContentBoxSize:Iu(Math.round(R*devicePixelRatio),Math.round(b*devicePixelRatio),o),borderBoxSize:Iu(O,V,o),contentBoxSize:Iu(R,b,o),contentRect:new ES(f,l,R,b)});return of.set(e,L),L},DS=function(e,t,n){var r=SS(e,n),i=r.borderBoxSize,o=r.contentBoxSize,s=r.devicePixelContentBoxSize;switch(t){case $a.DEVICE_PIXEL_CONTENT_BOX:return s;case $a.BORDER_BOX:return i;default:return o}},Ib=function(){function e(t){var n=SS(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=ps([n.borderBoxSize]),this.contentBoxSize=ps([n.contentBoxSize]),this.devicePixelContentBoxSize=ps([n.devicePixelContentBoxSize])}return e}(),TS=function(e){if(PS(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},Lb=function(){var e=1/0,t=[];gs.forEach(function(s){if(s.activeTargets.length!==0){var u=[];s.activeTargets.forEach(function(a){var c=new Ib(a.target),f=TS(a.target);u.push(c),a.lastReportedSize=DS(a.target,a.observedBox),f<e&&(e=f)}),t.push(function(){s.callback.call(s.observer,u,s.observer)}),s.activeTargets.splice(0,s.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){var i=r[n];i()}return e},yC=function(e){gs.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(i){i.isActive()&&(TS(i.target)>e?n.activeTargets.push(i):n.skippedTargets.push(i))})})},Gb=function(){var e=0;for(yC(e);Bb();)e=Lb(),yC(e);return Mb()&&Rb(),e>0},eg,AS=[],Nb=function(){return AS.splice(0).forEach(function(e){return e()})},Hb=function(e){if(!eg){var t=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return Nb()}).observe(n,r),eg=function(){n.textContent="".concat(t?t--:t++)}}AS.push(e),eg()},$b=function(e){Hb(function(){requestAnimationFrame(e)})},Nf=0,_b=function(){return!!Nf},jb=250,Wb={attributes:!0,characterData:!0,childList:!0,subtree:!0},wC=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],CC=function(e){return e===void 0&&(e=0),Date.now()+e},tg=!1,zb=function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=jb),!tg){tg=!0;var r=CC(t);$b(function(){var i=!1;try{i=Gb()}finally{if(tg=!1,t=r-CC(),!_b())return;i?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,Wb)};document.body?n():ua.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),wC.forEach(function(n){return ua.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),wC.forEach(function(n){return ua.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e}(),op=new zb,xC=function(e){!Nf&&e>0&&op.start(),Nf+=e,!Nf&&op.stop()},Vb=function(e){return!yv(e)&&!Ob(e)&&getComputedStyle(e).display==="inline"},Ub=function(){function e(t,n){this.target=t,this.observedBox=n||$a.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=DS(this.target,this.observedBox,!0);return Vb(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e}(),Xb=function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e}(),sf=new WeakMap,EC=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},uf=function(){function e(){}return e.connect=function(t,n){var r=new Xb(t,n);sf.set(t,r)},e.observe=function(t,n,r){var i=sf.get(t),o=i.observationTargets.length===0;EC(i.observationTargets,n)<0&&(o&&gs.push(i),i.observationTargets.push(new Ub(n,r&&r.box)),xC(1),op.schedule())},e.unobserve=function(t,n){var r=sf.get(t),i=EC(r.observationTargets,n),o=r.observationTargets.length===1;i>=0&&(o&&gs.splice(gs.indexOf(r),1),r.observationTargets.splice(i,1),xC(-1))},e.disconnect=function(t){var n=this,r=sf.get(t);r.observationTargets.slice().forEach(function(i){return n.unobserve(t,i.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e}(),Kb=function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");uf.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!pC(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");uf.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!pC(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");uf.unobserve(this,t)},e.prototype.disconnect=function(){uf.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e}();function Yb(e,t){if(e==null)return{};var n={},r=Object.keys(e),i,o;for(o=0;o<r.length;o++)i=r[o],!(t.indexOf(i)>=0)&&(n[i]=e[i]);return n}function Qu(e,t){if(e==null)return{};var n=Yb(e,t),r,i;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)r=o[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _a(e){"@babel/helpers - typeof";return _a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_a(e)}function qb(e,t){if(_a(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(_a(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Zb(e){var t=qb(e,"string");return _a(t)==="symbol"?t:String(t)}function pr(e,t,n){return t=Zb(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var wv=A.createContext(null),Lo=()=>{var e=A.useContext(wv);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},ng,rg,BS=parseInt(ye.version.split(".")[0],10),MS=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,PC=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),fn=typeof navigator<"u"&&/Android/.test(navigator.userAgent),xu=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Qo=typeof navigator<"u"&&/AppleWebKit(?!.*Chrome)/i.test(navigator.userAgent),Qb=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),RS=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),Jb=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),eI=fn&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),tI=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),nI=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),rI=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent)&&!/.*MacWechat/.test(navigator.userAgent),Hf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SC=typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&/Version\/(\d+)/.test(navigator.userAgent)&&((ng=navigator.userAgent.match(/Version\/(\d+)/))!==null&&ng!==void 0&&ng[1]?parseInt((rg=navigator.userAgent.match(/Version\/(\d+)/))===null||rg===void 0?void 0:rg[1],10)<17:!1),Wi=(!Jb||!eI)&&!Qb&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",Cv=new WeakMap,xv=new WeakMap,kS=new WeakMap,$f=new WeakMap,sp=new WeakMap,ja=new WeakMap,ms=new WeakMap,Ih=new WeakMap,_d=new WeakMap,up=new WeakMap,to=new WeakMap,ss=new WeakMap,la=new WeakMap,lp=new WeakMap,Ev=new WeakMap,kr=new WeakMap,yi=new WeakMap,Cn=new WeakMap,Xi=new WeakMap,Ki=new WeakMap,OS=new WeakMap,Ju=Symbol("placeholder"),FS=Symbol("mark-placeholder"),iI=globalThis.Text,Pv=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,oI=e=>xo(e)&&e.nodeType===8,sr=e=>xo(e)&&e.nodeType===1,xo=e=>{var t=Pv(e);return!!t&&e instanceof t.Node},ap=e=>{var t=e&&e.anchorNode&&Pv(e.anchorNode);return!!t&&e instanceof t.Selection},bS=e=>xo(e)&&e.nodeType===3,sI=e=>e.clipboardData&&e.clipboardData.getData("text/plain")!==""&&e.clipboardData.types.length===1,uI=e=>{var[t,n]=e;if(sr(t)&&t.childNodes.length){var r=n===t.childNodes.length,i=r?n-1:n;for([t,i]=IS(t,i,r?"backward":"forward"),r=i<n;sr(t)&&t.childNodes.length;){var o=r?t.childNodes.length-1:0;t=aI(t,o,r?"backward":"forward")}n=r&&t.textContent!=null?t.textContent.length:0}return[t,n]},lI=e=>{for(var t=e&&e.parentNode;t;){if(t.toString()==="[object ShadowRoot]")return!0;t=t.parentNode}return!1},IS=(e,t,n)=>{for(var{childNodes:r}=e,i=r[t],o=t,s=!1,u=!1;(oI(i)||sr(i)&&i.childNodes.length===0||sr(i)&&i.getAttribute("contenteditable")==="false")&&!(s&&u);){if(o>=r.length){s=!0,o=t-1,n="backward";continue}if(o<0){u=!0,o=t+1,n="forward";continue}i=r[o],t=o,o+=n==="forward"?1:-1}return[i,t]},aI=(e,t,n)=>{var[r]=IS(e,t,n);return r},LS=e=>{var t="";if(bS(e)&&e.nodeValue)return e.nodeValue;if(sr(e)){for(var n of Array.from(e.childNodes))t+=LS(n);var r=getComputedStyle(e).getPropertyValue("display");(r==="block"||r==="list"||e.tagName==="BR")&&(t+=`
`)}return t},cI=/data-slate-fragment="(.+?)"/m,fI=e=>{var t=e.getData("text/html"),[,n]=t.match(cI)||[];return n},Sv=(e,t,n)=>{var{target:r}=t;if(sr(r)&&r.matches('[contentEditable="false"]'))return!1;var{document:i}=$.getWindow(e);if(i.contains(r))return $.hasDOMNode(e,r,{editable:!0});var o=n.find(s=>{var{addedNodes:u,removedNodes:l}=s;for(var a of u)if(a===r||a.contains(r))return!0;for(var c of l)if(c===r||c.contains(r))return!0});return!o||o===t?!1:Sv(e,o,n)},hI=()=>{for(var e=document.activeElement;(t=e)!==null&&t!==void 0&&t.shadowRoot&&(n=e.shadowRoot)!==null&&n!==void 0&&n.activeElement;){var t,n,r;e=(r=e)===null||r===void 0||(r=r.shadowRoot)===null||r===void 0?void 0:r.activeElement}return e},dI=0;class gI{constructor(){pr(this,"id",void 0),this.id="".concat(dI++)}}var $={androidPendingDiffs:e=>Cn.get(e),androidScheduleFlush:e=>{var t;(t=Ev.get(e))===null||t===void 0||t()},blur:e=>{var t=$.toDOMNode(e,e),n=$.findDocumentOrShadowRoot(e);to.set(e,!1),n.activeElement===t&&t.blur()},deselect:e=>{var{selection:t}=e,n=$.findDocumentOrShadowRoot(e),r=n.getSelection();r&&r.rangeCount>0&&r.removeAllRanges(),t&&K.deselect(e)},findDocumentOrShadowRoot:e=>{var t=$.toDOMNode(e,e),n=t.getRootNode();return(n instanceof Document||n instanceof ShadowRoot)&&n.getSelection!=null?n:t.ownerDocument},findEventRange:(e,t)=>{"nativeEvent"in t&&(t=t.nativeEvent);var{clientX:n,clientY:r,target:i}=t;if(n==null||r==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var o=$.toSlateNode(e,t.target),s=$.findPath(e,o);if(ce.isElement(o)&&x.isVoid(e,o)){var u=i.getBoundingClientRect(),l=e.isInline(o)?n-u.left<u.left+u.width-n:r-u.top<u.top+u.height-r,a=x.point(e,s,{edge:l?"start":"end"}),c=l?x.before(e,a):x.after(e,a);if(c){var f=x.range(e,c);return f}}var h,{document:g}=$.getWindow(e);if(g.caretRangeFromPoint)h=g.caretRangeFromPoint(n,r);else{var p=g.caretPositionFromPoint(n,r);p&&(h=g.createRange(),h.setStart(p.offsetNode,p.offset),h.setEnd(p.offsetNode,p.offset))}if(!h)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var d=$.toSlateRange(e,h,{exactMatch:!1,suppressThrow:!1});return d},findKey:(e,t)=>{var n=Ih.get(t);return n||(n=new gI,Ih.set(t,n)),n},findPath:(e,t)=>{for(var n=[],r=t;;){var i=xv.get(r);if(i==null){if(x.isEditor(r))return n;break}var o=Cv.get(r);if(o==null)break;n.unshift(o),r=i}throw new Error("Unable to find the path for Slate node: ".concat(bt.stringify(t)))},focus:function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{retries:5};if(!to.get(t)){if(n.retries<=0)throw new Error("Could not set focus, editor seems stuck with pending operations");if(t.operations.length>0){setTimeout(()=>{$.focus(t,{retries:n.retries-1})},10);return}var r=$.toDOMNode(t,t),i=$.findDocumentOrShadowRoot(t);if(i.activeElement!==r){if(t.selection&&i instanceof Document){var o=i.getSelection(),s=$.toDOMRange(t,t.selection);o==null||o.removeAllRanges(),o==null||o.addRange(s)}t.selection||(K.select(t,x.start(t,[])),t.onChange()),to.set(t,!0),r.focus({preventScroll:!0})}}},getWindow:e=>{var t=kS.get(e);if(!t)throw new Error("Unable to find a host window element for this editor");return t},hasDOMNode:function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:i=!1}=r,o=$.toDOMNode(t,t),s;try{s=sr(n)?n:n.parentElement}catch(u){if(u instanceof Error&&!u.message.includes('Permission denied to access property "nodeType"'))throw u}return s?s.closest("[data-slate-editor]")===o&&(!i||s.isContentEditable?!0:typeof s.isContentEditable=="boolean"&&s.closest('[contenteditable="false"]')===o||!!s.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(e,t)=>xo(t)&&$.hasDOMNode(e,t,{editable:!0}),hasRange:(e,t)=>{var{anchor:n,focus:r}=t;return x.hasPath(e,n.path)&&x.hasPath(e,r.path)},hasSelectableTarget:(e,t)=>$.hasEditableTarget(e,t)||$.isTargetInsideNonReadonlyVoid(e,t),hasTarget:(e,t)=>xo(t)&&$.hasDOMNode(e,t),insertData:(e,t)=>{e.insertData(t)},insertFragmentData:(e,t)=>e.insertFragmentData(t),insertTextData:(e,t)=>e.insertTextData(t),isComposing:e=>!!ss.get(e),isFocused:e=>!!to.get(e),isReadOnly:e=>!!up.get(e),isTargetInsideNonReadonlyVoid:(e,t)=>{if(up.get(e))return!1;var n=$.hasTarget(e,t)&&$.toSlateNode(e,t);return ce.isElement(n)&&x.isVoid(e,n)},setFragmentData:(e,t,n)=>e.setFragmentData(t,n),toDOMNode:(e,t)=>{var n=_d.get(e),r=x.isEditor(t)?$f.get(e):n==null?void 0:n.get($.findKey(e,t));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(bt.stringify(t)));return r},toDOMPoint:(e,t)=>{var[n]=x.node(e,t.path),r=$.toDOMNode(e,n),i;x.void(e,{at:t})&&(t={path:t.path,offset:0});for(var o="[data-slate-string], [data-slate-zero-width]",s=Array.from(r.querySelectorAll(o)),u=0,l=0;l<s.length;l++){var a=s[l],c=a.childNodes[0];if(!(c==null||c.textContent==null)){var{length:f}=c.textContent,h=a.getAttribute("data-slate-length"),g=h==null?f:parseInt(h,10),p=u+g,d=s[l+1];if(t.offset===p&&d!==null&&d!==void 0&&d.hasAttribute("data-slate-mark-placeholder")){var y,m=d.childNodes[0];i=[m instanceof iI?m:d,(y=d.textContent)!==null&&y!==void 0&&y.startsWith("\uFEFF")?1:0];break}if(t.offset<=p){var v=Math.min(f,Math.max(0,t.offset-u));i=[c,v];break}u=p}}if(!i)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(bt.stringify(t)));return i},toDOMRange:(e,t)=>{var{anchor:n,focus:r}=t,i=G.isBackward(t),o=$.toDOMPoint(e,n),s=G.isCollapsed(t)?o:$.toDOMPoint(e,r),u=$.getWindow(e),l=u.document.createRange(),[a,c]=i?s:o,[f,h]=i?o:s,g=sr(a)?a:a.parentElement,p=!!g.getAttribute("data-slate-zero-width"),d=sr(f)?f:f.parentElement,y=!!d.getAttribute("data-slate-zero-width");return l.setStart(a,p?1:c),l.setEnd(f,y?1:h),l},toSlateNode:(e,t)=>{var n=sr(t)?t:t.parentElement;n&&!n.hasAttribute("data-slate-node")&&(n=n.closest("[data-slate-node]"));var r=n?ja.get(n):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(n));return r},toSlatePoint:(e,t,n)=>{var{exactMatch:r,suppressThrow:i}=n,[o,s]=r?t:uI(t),u=o.parentNode,l=null,a=0;if(u){var c,f,h=$.toDOMNode(e,e),g=u.closest('[data-slate-void="true"]'),p=g&&h.contains(g)?g:null,d=u.closest("[data-slate-leaf]"),y=null;if(d){if(l=d.closest('[data-slate-node="text"]'),l){var m=$.getWindow(e),v=m.document.createRange();v.setStart(l,0),v.setEnd(o,s);var w=v.cloneContents(),E=[...Array.prototype.slice.call(w.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(w.querySelectorAll("[contenteditable=false]"))];E.forEach(z=>{if(fn&&!r&&z.hasAttribute("data-slate-zero-width")&&z.textContent.length>0&&z.textContext!=="\uFEFF"){z.textContent.startsWith("\uFEFF")&&(z.textContent=z.textContent.slice(1));return}z.parentNode.removeChild(z)}),a=w.textContent.length,y=l}}else if(p){for(var S=p.querySelectorAll("[data-slate-leaf]"),T=0;T<S.length;T++){var B=S[T];if($.hasDOMNode(e,B)){d=B;break}}d?(l=d.closest('[data-slate-node="text"]'),y=d,a=y.textContent.length,y.querySelectorAll("[data-slate-zero-width]").forEach(z=>{a-=z.textContent.length})):a=1}y&&a===y.textContent.length&&fn&&y.getAttribute("data-slate-zero-width")==="z"&&(c=y.textContent)!==null&&c!==void 0&&c.startsWith("\uFEFF")&&(u.hasAttribute("data-slate-zero-width")||xu&&(f=y.textContent)!==null&&f!==void 0&&f.endsWith(`

`))&&a--}if(fn&&!l&&!r){var R=u.hasAttribute("data-slate-node")?u:u.closest("[data-slate-node]");if(R&&$.hasDOMNode(e,R,{editable:!0})){var b=$.toSlateNode(e,R),{path:O,offset:V}=x.start(e,$.findPath(e,b));return R.querySelector("[data-slate-leaf]")||(V=s),{path:O,offset:V}}}if(!l){if(i)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}var L=$.toSlateNode(e,l),W=$.findPath(e,L);return{path:W,offset:a}},toSlateRange:(e,t,n)=>{var r,{exactMatch:i,suppressThrow:o}=n,s=ap(t)?t.anchorNode:t.startContainer,u,l,a,c,f;if(s)if(ap(t)){if(xu&&t.rangeCount>1){a=t.focusNode;var h=t.getRangeAt(0),g=t.getRangeAt(t.rangeCount-1);if(a instanceof HTMLTableRowElement&&h.startContainer instanceof HTMLTableRowElement&&g.startContainer instanceof HTMLTableRowElement){let B=function(R){return R.childElementCount>0?B(R.children[0]):R};var T=B,p=h.startContainer,d=g.startContainer,y=B(p.children[h.startOffset]),m=B(d.children[g.startOffset]);c=0,m.childNodes.length>0?u=m.childNodes[0]:u=m,y.childNodes.length>0?a=y.childNodes[0]:a=y,m instanceof HTMLElement?l=m.innerHTML.length:l=0}else h.startContainer===a?(u=g.endContainer,l=g.endOffset,c=h.startOffset):(u=h.startContainer,l=h.endOffset,c=g.startOffset)}else u=t.anchorNode,l=t.anchorOffset,a=t.focusNode,c=t.focusOffset;RS&&lI(u)||xu?f=t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:f=t.isCollapsed}else u=t.startContainer,l=t.startOffset,a=t.endContainer,c=t.endOffset,f=t.collapsed;if(u==null||a==null||l==null||c==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));if(xu&&(r=a.textContent)!==null&&r!==void 0&&r.endsWith(`

`)&&c===a.textContent.length&&c--,"getAttribute"in a&&a.getAttribute("contenteditable")==="false"&&a.getAttribute("data-slate-void")!=="true"){var v;a=u,c=((v=u.textContent)===null||v===void 0?void 0:v.length)||0}var w=$.toSlatePoint(e,[u,l],{exactMatch:i,suppressThrow:o});if(!w)return null;var E=f?w:$.toSlatePoint(e,[a,c],{exactMatch:i,suppressThrow:o});if(!E)return null;var S={anchor:w,focus:E};return G.isExpanded(S)&&G.isForward(S)&&sr(a)&&x.void(e,{at:S.focus,mode:"highest"})&&(S=x.unhangRange(e,S,{voids:!0})),S}};function pI(e,t){var{path:n,diff:r}=t;if(!x.hasPath(e,n))return!1;var i=q.get(e,n);if(!le.isText(i))return!1;if(r.start!==i.text.length||r.text.length===0)return i.text.slice(r.start,r.start+r.text.length)===r.text;var o=M.next(n);if(!x.hasPath(e,o))return!1;var s=q.get(e,o);return le.isText(s)&&s.text.startsWith(r.text)}function GS(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return n.reduce((i,o)=>i.slice(0,o.start)+o.text+i.slice(o.end),e)}function mI(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++)if(e.charAt(r)!==t.charAt(r))return r;return n}function vI(e,t,n){for(var r=Math.min(e.length,t.length,n),i=0;i<r;i++)if(e.charAt(e.length-i-1)!==t.charAt(t.length-i-1))return i;return r}function NS(e,t){var{start:n,end:r,text:i}=t,o=e.slice(n,r),s=mI(o,i),u=Math.min(o.length-s,i.length-s),l=vI(o,i,u),a={start:n+s,end:r-l,text:i.slice(s,i.length-l)};return a.start===a.end&&a.text.length===0?null:a}function yI(e,t,n){var r=Math.min(t.start,n.start),i=Math.max(0,Math.min(t.start+t.text.length,n.end)-n.start),o=GS(e,t,n),s=Math.max(n.start+n.text.length,t.start+t.text.length+(t.start+t.text.length>n.start?n.text.length:0)-i),u=o.slice(r,s),l=Math.max(t.end,n.end-t.text.length+(t.end-t.start));return NS(e,{start:r,end:l,text:u})}function wI(e){var{path:t,diff:n}=e;return{anchor:{path:t,offset:n.start},focus:{path:t,offset:n.end}}}function cp(e,t){var{path:n,offset:r}=t;if(!x.hasPath(e,n))return null;var i=q.get(e,n);if(!le.isText(i))return null;var o=x.above(e,{match:u=>ce.isElement(u)&&x.isBlock(e,u),at:n});if(!o)return null;for(;r>i.text.length;){var s=x.next(e,{at:n,match:le.isText});if(!s||!M.isDescendant(s[1],o[1]))return null;r-=i.text.length,i=s[0],n=s[1]}return{path:n,offset:r}}function DC(e,t){var n=cp(e,t.anchor);if(!n)return null;if(G.isCollapsed(t))return{anchor:n,focus:n};var r=cp(e,t.focus);return r?{anchor:n,focus:r}:null}function fp(e,t,n){var r=Cn.get(e),i=r==null?void 0:r.find(c=>{var{path:f}=c;return M.equals(f,t.path)});if(!i||t.offset<=i.diff.start)return Oe.transform(t,n,{affinity:"backward"});var{diff:o}=i;if(t.offset<=o.start+o.text.length){var s={path:t.path,offset:o.start},u=Oe.transform(s,n,{affinity:"backward"});return u?{path:u.path,offset:u.offset+t.offset-o.start}:null}var l={path:t.path,offset:t.offset-o.text.length+o.end-o.start},a=Oe.transform(l,n,{affinity:"backward"});return a?n.type==="split_node"&&M.equals(n.path,t.path)&&l.offset<n.position&&o.start<n.position?a:{path:a.path,offset:a.offset+o.text.length-o.end+o.start}:null}function TC(e,t,n){var r=fp(e,t.anchor,n);if(!r)return null;if(G.isCollapsed(t))return{anchor:r,focus:r};var i=fp(e,t.focus,n);return i?{anchor:r,focus:i}:null}function CI(e,t){var{path:n,diff:r,id:i}=e;switch(t.type){case"insert_text":return!M.equals(t.path,n)||t.offset>=r.end?e:t.offset<=r.start?{diff:{start:t.text.length+r.start,end:t.text.length+r.end,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end+t.text.length,text:r.text},id:i,path:n};case"remove_text":return!M.equals(t.path,n)||t.offset>=r.end?e:t.offset+t.text.length<=r.start?{diff:{start:r.start-t.text.length,end:r.end-t.text.length,text:r.text},id:i,path:n}:{diff:{start:r.start,end:r.end-t.text.length,text:r.text},id:i,path:n};case"split_node":return!M.equals(t.path,n)||t.position>=r.end?{diff:r,id:i,path:M.transform(n,t,{affinity:"backward"})}:t.position>r.start?{diff:{start:r.start,end:Math.min(t.position,r.end),text:r.text},id:i,path:n}:{diff:{start:r.start-t.position,end:r.end-t.position,text:r.text},id:i,path:M.transform(n,t,{affinity:"forward"})};case"merge_node":return M.equals(t.path,n)?{diff:{start:r.start+t.position,end:r.end+t.position,text:r.text},id:i,path:M.transform(n,t)}:{diff:r,id:i,path:M.transform(n,t)}}var o=M.transform(n,t);return o?{diff:r,path:o,id:i}:null}function AC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function lf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?AC(Object(n),!0).forEach(function(r){pr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var xI=25,EI=200,PI=function(){},SI=e=>(e==null?void 0:e.constructor.name)==="DataTransfer";function DI(e){var{editor:t,scheduleOnDOMSelectionChange:n,onDOMSelectionChange:r}=e,i=!1,o=null,s=null,u=null,l=0,a=!1,c=()=>{var L=Ki.get(t);if(Ki.delete(t),L){var{selection:W}=t,z=DC(t,L);z&&(!W||!G.equals(z,W))&&K.select(t,z)}},f=()=>{var L=Xi.get(t);if(Xi.delete(t),!!L){if(L.at){var W=Oe.isPoint(L.at)?cp(t,L.at):DC(t,L.at);if(!W)return;var z=x.range(t,W);(!t.selection||!G.equals(t.selection,z))&&K.select(t,W)}L.run()}},h=()=>{if(s&&(clearTimeout(s),s=null),u&&(clearTimeout(u),u=null),!E()&&!w()){c();return}i||(i=!0,setTimeout(()=>i=!1)),w()&&(i="action");var L=t.selection&&x.rangeRef(t,t.selection,{affinity:"forward"});yi.set(t,t.marks),PI("flush",Xi.get(t),Cn.get(t));for(var W=E(),z;z=(_=Cn.get(t))===null||_===void 0?void 0:_[0];){var _,J,Z=kr.get(t);Z!==void 0&&(kr.delete(t),t.marks=Z),Z&&a===!1&&(a=null);var N=wI(z);(!t.selection||!G.equals(t.selection,N))&&K.select(t,N),z.diff.text?x.insertText(t,z.diff.text):x.deleteFragment(t),Cn.set(t,(J=Cn.get(t))===null||J===void 0?void 0:J.filter(se=>{var{id:fe}=se;return fe!==z.id})),pI(t,z)||(W=!1,Xi.delete(t),yi.delete(t),i="action",Ki.delete(t),n.cancel(),r.cancel(),L==null||L.unref())}var F=L==null?void 0:L.unref();if(F&&!Ki.get(t)&&(!t.selection||!G.equals(F,t.selection))&&K.select(t,F),w()){f();return}W&&n(),n.flush(),r.flush(),c();var U=yi.get(t);yi.delete(t),U!==void 0&&(t.marks=U,t.onChange())},g=L=>{o&&clearTimeout(o),o=setTimeout(()=>{ss.set(t,!1),h()},xI)},p=L=>{ss.set(t,!0),o&&(clearTimeout(o),o=null)},d=function(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,z=sp.get(t);if(z){if(E()||W){z.style.display="none";return}z.style.removeProperty("display")}},y=(L,W)=>{var z,_=(z=Cn.get(t))!==null&&z!==void 0?z:[];Cn.set(t,_);var J=q.leaf(t,L),Z=_.findIndex(U=>M.equals(U.path,L));if(Z<0){var N=NS(J.text,W);N&&_.push({path:L,diff:W,id:l++}),d();return}var F=yI(J.text,_[Z].diff,W);if(!F){_.splice(Z,1),d();return}_[Z]=lf(lf({},_[Z]),{},{diff:F})},m=function(W){var{at:z}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};a=!1,Ki.delete(t),n.cancel(),r.cancel(),w()&&h(),Xi.set(t,{at:z,run:W}),u=setTimeout(h)},v=L=>{var W;s&&(clearTimeout(s),s=null);var{inputType:z}=L,_=null,J=L.dataTransfer||L.data||void 0;a!==!1&&z!=="insertText"&&z!=="insertCompositionText"&&(a=!1);var[Z]=L.getTargetRanges();Z&&(_=$.toSlateRange(t,Z,{exactMatch:!1,suppressThrow:!0}));var N=$.getWindow(t),F=N.getSelection();if(!_&&F&&(Z=F,_=$.toSlateRange(t,F,{exactMatch:!1,suppressThrow:!0})),_=(W=_)!==null&&W!==void 0?W:t.selection,!!_){var U=!0;if(z.startsWith("delete")){if(G.isExpanded(_)){var[se,fe]=G.edges(_),nt=q.leaf(t,se.path);if(nt.text.length===se.offset&&fe.offset===0){var te=x.next(t,{at:se.path,match:le.isText});te&&M.equals(te[1],fe.path)&&(_={anchor:fe,focus:fe})}}var k=z.endsWith("Backward")?"backward":"forward",[H,j]=G.edges(_),[Y,ve]=x.leaf(t,H.path),ie={text:"",start:H.offset,end:j.offset},be=Cn.get(t),Ie=be==null?void 0:be.find(yn=>M.equals(yn.path,ve)),Re=Ie?[Ie.diff,ie]:[ie],De=GS(Y.text,...Re);if(De.length===0&&(U=!1),G.isExpanded(_)){if(U&&M.equals(_.anchor.path,_.focus.path)){var Le={path:_.anchor.path,offset:H.offset},at=x.range(t,Le,Le);return B(at),y(_.anchor.path,{text:"",end:j.offset,start:H.offset})}return m(()=>x.deleteFragment(t,{direction:k}),{at:_})}}switch(z){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return m(()=>x.deleteFragment(t),{at:_});case"deleteContent":case"deleteContentForward":{var{anchor:ze}=_;if(U&&G.isCollapsed(_)){var sn=q.leaf(t,ze.path);if(ze.offset<sn.text.length)return y(ze.path,{text:"",start:ze.offset,end:ze.offset+1})}return m(()=>x.deleteForward(t),{at:_})}case"deleteContentBackward":{var tr,{anchor:Ln}=_,Gn=ap(Z)?Z.isCollapsed:!!((tr=Z)!==null&&tr!==void 0&&tr.collapsed);return U&&Gn&&G.isCollapsed(_)&&Ln.offset>0?y(Ln.path,{text:"",start:Ln.offset-1,end:Ln.offset}):m(()=>x.deleteBackward(t),{at:_})}case"deleteEntireSoftLine":return m(()=>{x.deleteBackward(t,{unit:"line"}),x.deleteForward(t,{unit:"line"})},{at:_});case"deleteHardLineBackward":return m(()=>x.deleteBackward(t,{unit:"block"}),{at:_});case"deleteSoftLineBackward":return m(()=>x.deleteBackward(t,{unit:"line"}),{at:_});case"deleteHardLineForward":return m(()=>x.deleteForward(t,{unit:"block"}),{at:_});case"deleteSoftLineForward":return m(()=>x.deleteForward(t,{unit:"line"}),{at:_});case"deleteWordBackward":return m(()=>x.deleteBackward(t,{unit:"word"}),{at:_});case"deleteWordForward":return m(()=>x.deleteForward(t,{unit:"word"}),{at:_});case"insertLineBreak":return m(()=>x.insertSoftBreak(t),{at:_});case"insertParagraph":return m(()=>x.insertBreak(t),{at:_});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(SI(J))return m(()=>$.insertData(t,J),{at:_});var gt=J??"";if(kr.get(t)&&(gt=gt.replace("\uFEFF","")),z==="insertText"&&/.*\n.*\n$/.test(gt)&&(gt=gt.slice(0,-1)),gt.includes(`
`))return m(()=>{var yn=gt.split(`
`);yn.forEach(($r,Vo)=>{$r&&x.insertText(t,$r),Vo!==yn.length-1&&x.insertSoftBreak(t)})},{at:_});if(M.equals(_.anchor.path,_.focus.path)){var[Nn,kt]=G.edges(_),Xe={start:Nn.offset,end:kt.offset,text:gt};if(gt&&a&&z==="insertCompositionText"){var Er=a.start+a.text.search(/\S|$/),zo=Xe.start+Xe.text.search(/\S|$/);zo===Er+1&&Xe.end===a.start+a.text.length?(Xe.start-=1,a=null,O()):a=!1}else z==="insertText"?a===null?a=Xe:a&&G.isCollapsed(_)&&a.end+a.text.length===Nn.offset?a=lf(lf({},a),{},{text:a.text+gt}):a=!1:a=!1;if(U){y(Nn.path,Xe);return}}return m(()=>x.insertText(t,gt),{at:_})}}}},w=()=>!!Xi.get(t),E=()=>{var L;return!!((L=Cn.get(t))!==null&&L!==void 0&&L.length)},S=()=>w()||E(),T=()=>i,B=L=>{Ki.set(t,L),s&&(clearTimeout(s),s=null);var{selection:W}=t;if(L){var z=!W||!M.equals(W.anchor.path,L.anchor.path),_=!W||!M.equals(W.anchor.path.slice(0,-1),L.anchor.path.slice(0,-1));(z&&a||_)&&(a=!1),(z||E())&&(s=setTimeout(h,EI))}},R=()=>{(w()||!E())&&h()},b=L=>{E()||(d(!0),setTimeout(d))},O=()=>{w()||(u=setTimeout(h))},V=L=>{if(!(E()||w())&&L.some(z=>Sv(t,z,L))){var W;(W=OS.get(t))===null||W===void 0||W()}};return{flush:h,scheduleFlush:O,hasPendingDiffs:E,hasPendingAction:w,hasPendingChanges:S,isFlushing:T,handleUserSelect:B,handleCompositionEnd:g,handleCompositionStart:p,handleDOMBeforeInput:v,handleKeyDown:b,handleDomMutations:V,handleInput:R}}function TI(){var e=A.useRef(!1);return A.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),e.current}var Wa=Hf?A.useLayoutEffect:A.useEffect;function AI(e,t,n){var[r]=A.useState(()=>new MutationObserver(t));Wa(()=>{r.takeRecords()}),A.useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return r.observe(e.current,n),()=>r.disconnect()},[r,e,n])}var BI=["node"];function BC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function MI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BC(Object(n),!0).forEach(function(r){pr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var RI={subtree:!0,childList:!0,characterData:!0},kI=fn?e=>{var{node:t}=e,n=Qu(e,BI);if(!fn)return null;var r=Lo(),i=TI(),[o]=A.useState(()=>DI(MI({editor:r},n)));return AI(t,o.handleDomMutations,RI),Ev.set(r,o.scheduleFlush),i&&o.flush(),o}:()=>null,OI=["anchor","focus"],FI=["anchor","focus"],bI=(e,t)=>Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every(n=>t.hasOwnProperty(n)&&e[n]===t[n]),HS=(e,t)=>{var n=Qu(e,OI),r=Qu(t,FI);return e[Ju]===t[Ju]&&bI(n,r)},II=(e,t)=>{if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(!G.equals(r,i)||!HS(r,i))return!1}return!0},LI=(e,t)=>{if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++){var r=e[n],i=t[n];if(r.anchor.offset!==i.anchor.offset||r.focus.offset!==i.focus.offset||!HS(r,i))return!1}return!0};function MC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function GI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?MC(Object(n),!0).forEach(function(r){pr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):MC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var NI=e=>{var{isLast:t,leaf:n,parent:r,text:i}=e,o=Lo(),s=$.findPath(o,i),u=M.parent(s),l=!!n[FS];return o.isVoid(r)?ye.createElement(ig,{length:q.string(r).length}):n.text===""&&r.children[r.children.length-1]===i&&!o.isInline(r)&&x.string(o,u)===""?ye.createElement(ig,{isLineBreak:!0,isMarkPlaceholder:l}):n.text===""?ye.createElement(ig,{isMarkPlaceholder:l}):t&&n.text.slice(-1)===`
`?ye.createElement(RC,{isTrailing:!0,text:n.text}):ye.createElement(RC,{text:n.text})},RC=e=>{var{text:t,isTrailing:n=!1}=e,r=A.useRef(null),i=()=>"".concat(t??"").concat(n?`
`:""),[o]=A.useState(i);return Wa(()=>{var s=i();r.current&&r.current.textContent!==s&&(r.current.textContent=s)}),ye.createElement(HI,{ref:r},o)},HI=A.memo(A.forwardRef((e,t)=>ye.createElement("span",{"data-slate-string":!0,ref:t},e.children))),ig=e=>{var{length:t=0,isLineBreak:n=!1,isMarkPlaceholder:r=!1}=e,i={"data-slate-zero-width":n?"n":"z","data-slate-length":t};return r&&(i["data-slate-mark-placeholder"]=!0),ye.createElement("span",GI({},i),!(fn||MS)||!n?"\uFEFF":null,n?ye.createElement("br",null):null)};function kC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function $S(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?kC(Object(n),!0).forEach(function(r){pr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var $I=fn?300:0;function _I(e,t){e.current&&(e.current.disconnect(),t&&(e.current=null))}function OC(e){e.current&&(clearTimeout(e.current),e.current=null)}var jI=e=>{var{leaf:t,isLast:n,text:r,parent:i,renderPlaceholder:o,renderLeaf:s=v=>ye.createElement(zI,$S({},v))}=e,u=Lo(),l=A.useRef(null),a=A.useRef(null),[c,f]=A.useState(!1),h=A.useRef(null),g=A.useCallback(v=>{if(_I(l,v==null),v==null){var w;sp.delete(u),(w=t.onPlaceholderResize)===null||w===void 0||w.call(t,null)}else{if(sp.set(u,v),!l.current){var E=window.ResizeObserver||Kb;l.current=new E(()=>{var S;(S=t.onPlaceholderResize)===null||S===void 0||S.call(t,v)})}l.current.observe(v),a.current=v}},[a,t,u]),p=ye.createElement(NI,{isLast:n,leaf:t,parent:i,text:r}),d=!!t[Ju];if(A.useEffect(()=>(d?h.current||(h.current=setTimeout(()=>{f(!0),h.current=null},$I)):(OC(h),f(!1)),()=>OC(h)),[d,f]),d&&c){var y={children:t.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",top:0,pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:Qo?"inherit":void 0},contentEditable:!1,ref:g}};p=ye.createElement(ye.Fragment,null,o(y),p)}var m={"data-slate-leaf":!0};return s({attributes:m,children:p,leaf:t,text:r})},WI=ye.memo(jI,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&le.equals(t.leaf,e.leaf)&&t.leaf[Ju]===e.leaf[Ju]),zI=e=>{var{attributes:t,children:n}=e;return ye.createElement("span",$S({},t),n)},VI=e=>{for(var{decorations:t,isLast:n,parent:r,renderPlaceholder:i,renderLeaf:o,text:s}=e,u=Lo(),l=A.useRef(null),a=le.decorations(s,t),c=$.findKey(u,s),f=[],h=0;h<a.length;h++){var g=a[h];f.push(ye.createElement(WI,{isLast:n&&h===a.length-1,key:"".concat(c.id,"-").concat(h),renderPlaceholder:i,leaf:g,text:s,parent:r,renderLeaf:o}))}var p=A.useCallback(d=>{var y=_d.get(u);d?(y==null||y.set(c,d),ms.set(s,d),ja.set(d,s)):(y==null||y.delete(c),ms.delete(s),l.current&&ja.delete(l.current)),l.current=d},[l,u,c,s]);return ye.createElement("span",{"data-slate-node":"text",ref:p},f)},_S=ye.memo(VI,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&LI(t.decorations,e.decorations));function FC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function hp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?FC(Object(n),!0).forEach(function(r){pr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):FC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var UI=e=>{var{decorations:t,element:n,renderElement:r=v=>ye.createElement(KI,hp({},v)),renderPlaceholder:i,renderLeaf:o,selection:s}=e,u=Lo(),l=ZI(),a=u.isInline(n),c=$.findKey(u,n),f=A.useCallback(v=>{var w=_d.get(u);v?(w==null||w.set(c,v),ms.set(n,v),ja.set(v,n)):(w==null||w.delete(c),ms.delete(n))},[u,c,n]),h=WS({decorations:t,node:n,renderElement:r,renderPlaceholder:i,renderLeaf:o,selection:s}),g={"data-slate-node":"element",ref:f};if(a&&(g["data-slate-inline"]=!0),!a&&x.hasInlines(u,n)){var p=q.string(n),d=xS(p);d==="rtl"&&(g.dir=d)}if(x.isVoid(u,n)){g["data-slate-void"]=!0,!l&&a&&(g.contentEditable=!1);var y=a?"span":"div",[[m]]=q.texts(n);h=ye.createElement(y,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},ye.createElement(_S,{renderPlaceholder:i,decorations:[],isLast:!1,parent:n,text:m})),Cv.set(m,0),xv.set(m,n)}return r({attributes:g,children:h,element:n})},XI=ye.memo(UI,(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&II(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&G.equals(e.selection,t.selection))),KI=e=>{var{attributes:t,children:n,element:r}=e,i=Lo(),o=i.isInline(r)?"span":"div";return ye.createElement(o,hp(hp({},t),{},{style:{position:"relative"}}),n)},jS=A.createContext(()=>[]),YI=()=>A.useContext(jS),qI=A.createContext(!1),WS=e=>{for(var{decorations:t,node:n,renderElement:r,renderPlaceholder:i,renderLeaf:o,selection:s}=e,u=YI(),l=Lo(),a=$.findPath(l,n),c=[],f=ce.isElement(n)&&!l.isInline(n)&&x.hasInlines(l,n),h=0;h<n.children.length;h++){var g=a.concat(h),p=n.children[h],d=$.findKey(l,p),y=x.range(l,g),m=s&&G.intersection(y,s),v=u([p,g]);for(var w of t){var E=G.intersection(w,y);E&&v.push(E)}ce.isElement(p)?c.push(ye.createElement(qI.Provider,{key:"provider-".concat(d.id),value:!!m},ye.createElement(XI,{decorations:v,element:p,key:d.id,renderElement:r,renderPlaceholder:i,renderLeaf:o,selection:m}))):c.push(ye.createElement(_S,{decorations:v,key:d.id,isLast:f&&h===n.children.length-1,parent:n,renderPlaceholder:i,renderLeaf:o,text:p})),Cv.set(p,h),xv.set(p,n)}return c},zS=A.createContext(!1),ZI=()=>A.useContext(zS),VS=A.createContext(null),QI=()=>{var e=A.useContext(VS);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:t}=e;return t};function JI(){var e=Lo(),t=A.useRef(!1),n=A.useRef(0),r=A.useCallback(()=>{if(!t.current){t.current=!0;var i=$.getWindow(e);i.cancelAnimationFrame(n.current),n.current=i.requestAnimationFrame(()=>{t.current=!1})}},[e]);return A.useEffect(()=>()=>cancelAnimationFrame(n.current),[]),{receivedUserInput:t,onUserInput:r}}var eL=3,tL={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},nL={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},rL={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},ft=e=>{var t=tL[e],n=nL[e],r=rL[e],i=t&&or(t),o=n&&or(n),s=r&&or(r);return u=>!!(i&&i(u)||PC&&o&&o(u)||!PC&&s&&s(u))},pt={isBold:ft("bold"),isCompose:ft("compose"),isMoveBackward:ft("moveBackward"),isMoveForward:ft("moveForward"),isDeleteBackward:ft("deleteBackward"),isDeleteForward:ft("deleteForward"),isDeleteLineBackward:ft("deleteLineBackward"),isDeleteLineForward:ft("deleteLineForward"),isDeleteWordBackward:ft("deleteWordBackward"),isDeleteWordForward:ft("deleteWordForward"),isExtendBackward:ft("extendBackward"),isExtendForward:ft("extendForward"),isExtendLineBackward:ft("extendLineBackward"),isExtendLineForward:ft("extendLineForward"),isItalic:ft("italic"),isMoveLineBackward:ft("moveLineBackward"),isMoveLineForward:ft("moveLineForward"),isMoveWordBackward:ft("moveWordBackward"),isMoveWordForward:ft("moveWordForward"),isRedo:ft("redo"),isSoftBreak:ft("insertSoftBreak"),isSplitBlock:ft("splitBlock"),isTransposeCharacter:ft("transposeCharacter"),isUndo:ft("undo")},iL=(e,t)=>{var n=[],r=()=>{n=[]},i=s=>{if(t.current){var u=s.filter(l=>Sv(e,l,s));n.push(...u)}};function o(){n.length>0&&(n.reverse().forEach(s=>{s.type!=="characterData"&&(s.removedNodes.forEach(u=>{s.target.insertBefore(u,s.nextSibling)}),s.addedNodes.forEach(u=>{s.target.removeChild(u)}))}),r())}return{registerMutations:i,restoreDOM:o,clear:r}},oL={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0};class US extends A.Component{constructor(){super(...arguments),pr(this,"context",null),pr(this,"manager",null),pr(this,"mutationObserver",null)}observe(){var t,{node:n}=this.props;if(!n.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(t=this.mutationObserver)===null||t===void 0||t.observe(n.current,oL)}componentDidMount(){var{receivedUserInput:t}=this.props,n=this.context;this.manager=iL(n,t),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var t,n,r,i=(t=this.mutationObserver)===null||t===void 0?void 0:t.takeRecords();if(i!=null&&i.length){var o;(o=this.manager)===null||o===void 0||o.registerMutations(i)}return(n=this.mutationObserver)===null||n===void 0||n.disconnect(),(r=this.manager)===null||r===void 0||r.restoreDOM(),null}componentDidUpdate(){var t;(t=this.manager)===null||t===void 0||t.clear(),this.observe()}componentWillUnmount(){var t;(t=this.mutationObserver)===null||t===void 0||t.disconnect()}render(){return this.props.children}}pr(US,"contextType",wv);var sL=fn?US:e=>{var{children:t}=e;return ye.createElement(ye.Fragment,null,t)},uL=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],lL=["text"];function bC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vr(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bC(Object(n),!0).forEach(function(r){pr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var aL=e=>ye.createElement(ye.Fragment,null,WS(e)),cL=e=>{var t=A.useCallback(k=>ye.createElement(fL,Vr({},k)),[]),{autoFocus:n,decorate:r=hL,onDOMBeforeInput:i,placeholder:o,readOnly:s=!1,renderElement:u,renderLeaf:l,renderPlaceholder:a=t,scrollSelectionIntoView:c=dL,style:f={},as:h="div",disableDefaultStyles:g=!1}=e,p=Qu(e,uL),d=QI(),[y,m]=A.useState(!1),v=A.useRef(null),w=A.useRef([]),[E,S]=A.useState(),T=A.useRef(!1),{onUserInput:B,receivedUserInput:R}=JI(),[,b]=A.useReducer(k=>k+1,0);OS.set(d,b),up.set(d,s);var O=A.useMemo(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);A.useEffect(()=>{v.current&&n&&v.current.focus()},[n]);var V=A.useRef(),L=A.useMemo(()=>qk(()=>{var k=$.toDOMNode(d,d),H=k.getRootNode();if(SC&&!T.current&&Qo&&H instanceof ShadowRoot){T.current=!0;var j=hI();j?document.execCommand("indent"):K.deselect(d),T.current=!1;return}var Y=V.current;if((fn||!$.isComposing(d))&&(!O.isUpdatingSelection||Y!=null&&Y.isFlushing())&&!O.isDraggingInternally){var ve=$.findDocumentOrShadowRoot(d),{activeElement:ie}=ve,be=$.toDOMNode(d,d),Ie=ve.getSelection();if(ie===be?(O.latestElement=ie,to.set(d,!0)):to.delete(d),!Ie)return K.deselect(d);var{anchorNode:Re,focusNode:De}=Ie,Le=$.hasEditableTarget(d,Re)||$.isTargetInsideNonReadonlyVoid(d,Re),at=$.hasEditableTarget(d,De)||$.isTargetInsideNonReadonlyVoid(d,De);if(Le&&at){var ze=$.toSlateRange(d,Ie,{exactMatch:!1,suppressThrow:!0});ze&&(!$.isComposing(d)&&!(Y!=null&&Y.hasPendingChanges())&&!(Y!=null&&Y.isFlushing())?K.select(d,ze):Y==null||Y.handleUserSelect(ze))}s&&(!Le||!at)&&K.deselect(d)}},100),[d,s,O]),W=A.useMemo(()=>Wk(L,0),[L]);V.current=kI({node:v,onDOMSelectionChange:L,scheduleOnDOMSelectionChange:W}),Wa(()=>{var k,H,j;v.current&&(j=Pv(v.current))?(kS.set(d,j),$f.set(d,v.current),ms.set(d,v.current),ja.set(v.current,d)):ms.delete(d);var{selection:Y}=d,ve=$.findDocumentOrShadowRoot(d),ie=ve.getSelection();if(!(!ie||!$.isFocused(d)||(k=V.current)!==null&&k!==void 0&&k.hasPendingAction())){var be=Le=>{var at=ie.type!=="None";if(!(!Y&&!at)){var ze=ie.focusNode,sn;if(xu&&ie.rangeCount>1){var tr=ie.getRangeAt(0),Ln=ie.getRangeAt(ie.rangeCount-1);tr.startContainer===ze?sn=Ln.endContainer:sn=tr.startContainer}else sn=ie.anchorNode;var Gn=$f.get(d),gt=!1;if(Gn.contains(sn)&&Gn.contains(ze)&&(gt=!0),at&&gt&&Y&&!Le){var Nn=$.toSlateRange(d,ie,{exactMatch:!0,suppressThrow:!0});if(Nn&&G.equals(Nn,Y)){var kt;if(!O.hasMarkPlaceholder||(kt=sn)!==null&&kt!==void 0&&(kt=kt.parentElement)!==null&&kt!==void 0&&kt.hasAttribute("data-slate-mark-placeholder"))return}}if(Y&&!$.hasRange(d,Y)){d.selection=$.toSlateRange(d,ie,{exactMatch:!1,suppressThrow:!0});return}O.isUpdatingSelection=!0;var Xe=Y&&$.toDOMRange(d,Y);return Xe?($.isComposing(d)&&!fn?ie.collapseToEnd():G.isBackward(Y)?ie.setBaseAndExtent(Xe.endContainer,Xe.endOffset,Xe.startContainer,Xe.startOffset):ie.setBaseAndExtent(Xe.startContainer,Xe.startOffset,Xe.endContainer,Xe.endOffset),c(d,Xe)):ie.removeAllRanges(),Xe}};ie.rangeCount<=1&&be();var Ie=((H=V.current)===null||H===void 0?void 0:H.isFlushing())==="action";if(!fn||!Ie){setTimeout(()=>{O.isUpdatingSelection=!1});return}var Re=null,De=requestAnimationFrame(()=>{if(Ie){var Le=at=>{try{var ze=$.toDOMNode(d,d);ze.focus(),be(at)}catch{}};Le(),Re=setTimeout(()=>{Le(!0),O.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(De),Re&&clearTimeout(Re)}}});var z=A.useCallback(k=>{var H=$.toDOMNode(d,d),j=H.getRootNode();if(SC&&T!==null&&T!==void 0&&T.current&&Qo&&j instanceof ShadowRoot){var Y=k.getTargetRanges(),ve=Y[0],ie=new window.Range;ie.setStart(ve.startContainer,ve.startOffset),ie.setEnd(ve.endContainer,ve.endOffset);var be=$.toSlateRange(d,ie,{exactMatch:!1,suppressThrow:!1});K.select(d,be),k.preventDefault(),k.stopImmediatePropagation();return}if(B(),!s&&$.hasEditableTarget(d,k.target)&&!gL(k,i)){var Ie;if(V.current)return V.current.handleDOMBeforeInput(k);W.flush(),L.flush();var{selection:Re}=d,{inputType:De}=k,Le=k.dataTransfer||k.data||void 0,at=De==="insertCompositionText"||De==="deleteCompositionText";if(at&&$.isComposing(d))return;var ze=!1;if(De==="insertText"&&Re&&G.isCollapsed(Re)&&k.data&&k.data.length===1&&/[a-z ]/i.test(k.data)&&Re.anchor.offset!==0){var sn,tr;ze=!0,d.marks&&(ze=!1);var{anchor:Ln}=Re,[Gn,gt]=$.toDOMPoint(d,Ln),Nn=(sn=Gn.parentElement)===null||sn===void 0?void 0:sn.closest("a"),kt=$.getWindow(d);if(ze&&Nn&&$.hasDOMNode(d,Nn)){var Xe,Er=kt==null?void 0:kt.document.createTreeWalker(Nn,NodeFilter.SHOW_TEXT).lastChild();Er===Gn&&((Xe=Er.textContent)===null||Xe===void 0?void 0:Xe.length)===gt&&(ze=!1)}if(ze&&Gn.parentElement&&(kt==null||(tr=kt.getComputedStyle(Gn.parentElement))===null||tr===void 0?void 0:tr.whiteSpace)==="pre"){var zo=x.above(d,{at:Ln.path,match:Rc=>ce.isElement(Rc)&&x.isBlock(d,Rc)});zo&&q.string(zo[0]).includes("	")&&(ze=!1)}}if(!De.startsWith("delete")||De.startsWith("deleteBy")){var[yn]=k.getTargetRanges();if(yn){var $r=$.toSlateRange(d,yn,{exactMatch:!1,suppressThrow:!1});if(!Re||!G.equals(Re,$r)){ze=!1;var Vo=!at&&d.selection&&x.rangeRef(d,d.selection);K.select(d,$r),Vo&&la.set(d,Vo)}}}if(at)return;if(ze||k.preventDefault(),Re&&G.isExpanded(Re)&&De.startsWith("delete")){var ai=De.endsWith("Backward")?"backward":"forward";x.deleteFragment(d,{direction:ai});return}switch(De){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{x.deleteFragment(d);break}case"deleteContent":case"deleteContentForward":{x.deleteForward(d);break}case"deleteContentBackward":{x.deleteBackward(d);break}case"deleteEntireSoftLine":{x.deleteBackward(d,{unit:"line"}),x.deleteForward(d,{unit:"line"});break}case"deleteHardLineBackward":{x.deleteBackward(d,{unit:"block"});break}case"deleteSoftLineBackward":{x.deleteBackward(d,{unit:"line"});break}case"deleteHardLineForward":{x.deleteForward(d,{unit:"block"});break}case"deleteSoftLineForward":{x.deleteForward(d,{unit:"line"});break}case"deleteWordBackward":{x.deleteBackward(d,{unit:"word"});break}case"deleteWordForward":{x.deleteForward(d,{unit:"word"});break}case"insertLineBreak":x.insertSoftBreak(d);break;case"insertParagraph":{x.insertBreak(d);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{De==="insertFromComposition"&&$.isComposing(d)&&(m(!1),ss.set(d,!1)),(Le==null?void 0:Le.constructor.name)==="DataTransfer"?$.insertData(d,Le):typeof Le=="string"&&(ze?w.current.push(()=>x.insertText(d,Le)):x.insertText(d,Le));break}}var Cl=(Ie=la.get(d))===null||Ie===void 0?void 0:Ie.unref();la.delete(d),Cl&&(!d.selection||!G.equals(d.selection,Cl))&&K.select(d,Cl)}},[d,L,B,i,s,W]),_=A.useCallback(k=>{k==null?(L.cancel(),W.cancel(),$f.delete(d),ms.delete(d),v.current&&Wi&&v.current.removeEventListener("beforeinput",z)):Wi&&k.addEventListener("beforeinput",z),v.current=k},[L,W,d,z]);Wa(()=>{var k=$.getWindow(d);return k.document.addEventListener("selectionchange",W),()=>{k.document.removeEventListener("selectionchange",W)}},[W]);var J=r([d,[]]),Z=o&&d.children.length===1&&Array.from(q.texts(d)).length===1&&q.string(d)===""&&!y,N=A.useCallback(k=>{if(k&&Z){var H;S((H=k.getBoundingClientRect())===null||H===void 0?void 0:H.height)}else S(void 0)},[Z]);if(Z){var F=x.start(d,[]);J.push({[Ju]:!0,placeholder:o,onPlaceholderResize:N,anchor:F,focus:F})}var{marks:U}=d;if(O.hasMarkPlaceholder=!1,d.selection&&G.isCollapsed(d.selection)&&U){var{anchor:se}=d.selection,fe=q.leaf(d,se.path),nt=Qu(fe,lL);if(!le.equals(fe,U,{loose:!0})){O.hasMarkPlaceholder=!0;var te=Object.fromEntries(Object.keys(nt).map(k=>[k,null]));J.push(Vr(Vr(Vr({[FS]:!0},te),U),{},{anchor:se,focus:se}))}}return A.useEffect(()=>{setTimeout(()=>{var{selection:k}=d;if(k){var{anchor:H}=k,j=q.leaf(d,H.path);if(U&&!le.equals(j,U,{loose:!0})){kr.set(d,U);return}}kr.delete(d)})}),ye.createElement(zS.Provider,{value:s},ye.createElement(jS.Provider,{value:r},ye.createElement(sL,{node:v,receivedUserInput:R},ye.createElement(h,Vr(Vr({role:s?void 0:"textbox","aria-multiline":s?void 0:!0},p),{},{spellCheck:Wi||!Hf?p.spellCheck:!1,autoCorrect:Wi||!Hf?p.autoCorrect:"false",autoCapitalize:Wi||!Hf?p.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s,zindex:-1,suppressContentEditableWarning:!0,ref:_,style:Vr(Vr({},g?{}:Vr({position:"relative",whiteSpace:"pre-wrap",wordWrap:"break-word"},E?{minHeight:E}:{})),f),onBeforeInput:A.useCallback(k=>{if(!Wi&&!s&&!un(k,p.onBeforeInput)&&$.hasSelectableTarget(d,k.target)&&(k.preventDefault(),!$.isComposing(d))){var H=k.data;x.insertText(d,H)}},[p.onBeforeInput,d,s]),onInput:A.useCallback(k=>{if(!un(k,p.onInput)){if(V.current){V.current.handleInput();return}for(var H of w.current)H();w.current=[]}},[p.onInput]),onBlur:A.useCallback(k=>{if(!(s||O.isUpdatingSelection||!$.hasSelectableTarget(d,k.target)||un(k,p.onBlur))){var H=$.findDocumentOrShadowRoot(d);if(O.latestElement!==H.activeElement){var{relatedTarget:j}=k,Y=$.toDOMNode(d,d);if(j!==Y&&!(sr(j)&&j.hasAttribute("data-slate-spacer"))){if(j!=null&&xo(j)&&$.hasDOMNode(d,j)){var ve=$.toSlateNode(d,j);if(ce.isElement(ve)&&!d.isVoid(ve))return}if(Qo){var ie=H.getSelection();ie==null||ie.removeAllRanges()}to.delete(d)}}}},[s,O.isUpdatingSelection,O.latestElement,d,p.onBlur]),onClick:A.useCallback(k=>{if($.hasTarget(d,k.target)&&!un(k,p.onClick)&&xo(k.target)){var H=$.toSlateNode(d,k.target),j=$.findPath(d,H);if(!x.hasPath(d,j)||q.get(d,j)!==H)return;if(k.detail===eL&&j.length>=1){var Y=j;if(!(ce.isElement(H)&&x.isBlock(d,H))){var ve,ie=x.above(d,{match:ze=>ce.isElement(ze)&&x.isBlock(d,ze),at:j});Y=(ve=ie==null?void 0:ie[1])!==null&&ve!==void 0?ve:j.slice(0,1)}var be=x.range(d,Y);K.select(d,be);return}if(s)return;var Ie=x.start(d,j),Re=x.end(d,j),De=x.void(d,{at:Ie}),Le=x.void(d,{at:Re});if(De&&Le&&M.equals(De[1],Le[1])){var at=x.range(d,Ie);K.select(d,at)}}},[d,p.onClick,s]),onCompositionEnd:A.useCallback(k=>{if($.hasSelectableTarget(d,k.target)){var H;if($.isComposing(d)&&Promise.resolve().then(()=>{m(!1),ss.set(d,!1)}),(H=V.current)===null||H===void 0||H.handleCompositionEnd(k),un(k,p.onCompositionEnd)||fn)return;if(!Qo&&!tI&&!MS&&!rI&&!nI&&k.data){var j=kr.get(d);kr.delete(d),j!==void 0&&(yi.set(d,d.marks),d.marks=j),x.insertText(d,k.data);var Y=yi.get(d);yi.delete(d),Y!==void 0&&(d.marks=Y)}}},[p.onCompositionEnd,d]),onCompositionUpdate:A.useCallback(k=>{$.hasSelectableTarget(d,k.target)&&!un(k,p.onCompositionUpdate)&&($.isComposing(d)||(m(!0),ss.set(d,!0)))},[p.onCompositionUpdate,d]),onCompositionStart:A.useCallback(k=>{if($.hasSelectableTarget(d,k.target)){var H;if((H=V.current)===null||H===void 0||H.handleCompositionStart(k),un(k,p.onCompositionStart)||fn)return;m(!0);var{selection:j}=d;if(j&&G.isExpanded(j)){x.deleteFragment(d);return}}},[p.onCompositionStart,d]),onCopy:A.useCallback(k=>{$.hasSelectableTarget(d,k.target)&&!un(k,p.onCopy)&&!IC(k)&&(k.preventDefault(),$.setFragmentData(d,k.clipboardData,"copy"))},[p.onCopy,d]),onCut:A.useCallback(k=>{if(!s&&$.hasSelectableTarget(d,k.target)&&!un(k,p.onCut)&&!IC(k)){k.preventDefault(),$.setFragmentData(d,k.clipboardData,"cut");var{selection:H}=d;if(H)if(G.isExpanded(H))x.deleteFragment(d);else{var j=q.parent(d,H.anchor.path);x.isVoid(d,j)&&K.delete(d)}}},[s,d,p.onCut]),onDragOver:A.useCallback(k=>{if($.hasTarget(d,k.target)&&!un(k,p.onDragOver)){var H=$.toSlateNode(d,k.target);ce.isElement(H)&&x.isVoid(d,H)&&k.preventDefault()}},[p.onDragOver,d]),onDragStart:A.useCallback(k=>{if(!s&&$.hasTarget(d,k.target)&&!un(k,p.onDragStart)){var H=$.toSlateNode(d,k.target),j=$.findPath(d,H),Y=ce.isElement(H)&&x.isVoid(d,H)||x.void(d,{at:j,voids:!0});if(Y){var ve=x.range(d,j);K.select(d,ve)}O.isDraggingInternally=!0,$.setFragmentData(d,k.dataTransfer,"drag")}},[s,d,p.onDragStart,O]),onDrop:A.useCallback(k=>{if(!s&&$.hasTarget(d,k.target)&&!un(k,p.onDrop)){k.preventDefault();var H=d.selection,j=$.findEventRange(d,k),Y=k.dataTransfer;K.select(d,j),O.isDraggingInternally&&H&&!G.equals(H,j)&&!x.void(d,{at:j,voids:!0})&&K.delete(d,{at:H}),$.insertData(d,Y),$.isFocused(d)||$.focus(d)}O.isDraggingInternally=!1},[s,d,p.onDrop,O]),onDragEnd:A.useCallback(k=>{!s&&O.isDraggingInternally&&p.onDragEnd&&$.hasTarget(d,k.target)&&p.onDragEnd(k),O.isDraggingInternally=!1},[s,O,p,d]),onFocus:A.useCallback(k=>{if(!s&&!O.isUpdatingSelection&&$.hasEditableTarget(d,k.target)&&!un(k,p.onFocus)){var H=$.toDOMNode(d,d),j=$.findDocumentOrShadowRoot(d);if(O.latestElement=j.activeElement,xu&&k.target!==H){H.focus();return}to.set(d,!0)}},[s,O,d,p.onFocus]),onKeyDown:A.useCallback(k=>{if(!s&&$.hasEditableTarget(d,k.target)){var H;(H=V.current)===null||H===void 0||H.handleKeyDown(k);var{nativeEvent:j}=k;if($.isComposing(d)&&j.isComposing===!1&&(ss.set(d,!1),m(!1)),un(k,p.onKeyDown)||$.isComposing(d))return;var{selection:Y}=d,ve=d.children[Y!==null?Y.focus.path[0]:0],ie=xS(q.string(ve))==="rtl";if(pt.isRedo(j)){k.preventDefault();var be=d;typeof be.redo=="function"&&be.redo();return}if(pt.isUndo(j)){k.preventDefault();var Ie=d;typeof Ie.undo=="function"&&Ie.undo();return}if(pt.isMoveLineBackward(j)){k.preventDefault(),K.move(d,{unit:"line",reverse:!0});return}if(pt.isMoveLineForward(j)){k.preventDefault(),K.move(d,{unit:"line"});return}if(pt.isExtendLineBackward(j)){k.preventDefault(),K.move(d,{unit:"line",edge:"focus",reverse:!0});return}if(pt.isExtendLineForward(j)){k.preventDefault(),K.move(d,{unit:"line",edge:"focus"});return}if(pt.isMoveBackward(j)){k.preventDefault(),Y&&G.isCollapsed(Y)?K.move(d,{reverse:!ie}):K.collapse(d,{edge:ie?"end":"start"});return}if(pt.isMoveForward(j)){k.preventDefault(),Y&&G.isCollapsed(Y)?K.move(d,{reverse:ie}):K.collapse(d,{edge:ie?"start":"end"});return}if(pt.isMoveWordBackward(j)){k.preventDefault(),Y&&G.isExpanded(Y)&&K.collapse(d,{edge:"focus"}),K.move(d,{unit:"word",reverse:!ie});return}if(pt.isMoveWordForward(j)){k.preventDefault(),Y&&G.isExpanded(Y)&&K.collapse(d,{edge:"focus"}),K.move(d,{unit:"word",reverse:ie});return}if(Wi){if((RS||Qo)&&Y&&(pt.isDeleteBackward(j)||pt.isDeleteForward(j))&&G.isCollapsed(Y)){var Re=q.parent(d,Y.anchor.path);if(ce.isElement(Re)&&x.isVoid(d,Re)&&(x.isInline(d,Re)||x.isBlock(d,Re))){k.preventDefault(),x.deleteBackward(d,{unit:"block"});return}}}else{if(pt.isBold(j)||pt.isItalic(j)||pt.isTransposeCharacter(j)){k.preventDefault();return}if(pt.isSoftBreak(j)){k.preventDefault(),x.insertSoftBreak(d);return}if(pt.isSplitBlock(j)){k.preventDefault(),x.insertBreak(d);return}if(pt.isDeleteBackward(j)){k.preventDefault(),Y&&G.isExpanded(Y)?x.deleteFragment(d,{direction:"backward"}):x.deleteBackward(d);return}if(pt.isDeleteForward(j)){k.preventDefault(),Y&&G.isExpanded(Y)?x.deleteFragment(d,{direction:"forward"}):x.deleteForward(d);return}if(pt.isDeleteLineBackward(j)){k.preventDefault(),Y&&G.isExpanded(Y)?x.deleteFragment(d,{direction:"backward"}):x.deleteBackward(d,{unit:"line"});return}if(pt.isDeleteLineForward(j)){k.preventDefault(),Y&&G.isExpanded(Y)?x.deleteFragment(d,{direction:"forward"}):x.deleteForward(d,{unit:"line"});return}if(pt.isDeleteWordBackward(j)){k.preventDefault(),Y&&G.isExpanded(Y)?x.deleteFragment(d,{direction:"backward"}):x.deleteBackward(d,{unit:"word"});return}if(pt.isDeleteWordForward(j)){k.preventDefault(),Y&&G.isExpanded(Y)?x.deleteFragment(d,{direction:"forward"}):x.deleteForward(d,{unit:"word"});return}}}},[s,d,p.onKeyDown]),onPaste:A.useCallback(k=>{!s&&$.hasEditableTarget(d,k.target)&&!un(k,p.onPaste)&&(!Wi||sI(k.nativeEvent)||Qo)&&(k.preventDefault(),$.insertData(d,k.clipboardData))},[s,d,p.onPaste])}),ye.createElement(aL,{decorations:J,node:d,renderElement:u,renderPlaceholder:a,renderLeaf:l,selection:d.selection})))))},fL=e=>{var{attributes:t,children:n}=e;return ye.createElement("span",Vr({},t),n,fn&&ye.createElement("br",null))},hL=()=>[],dL=(e,t)=>{if(t.getBoundingClientRect&&(!e.selection||e.selection&&G.isCollapsed(e.selection))){var n=t.startContainer.parentElement;n.getBoundingClientRect=t.getBoundingClientRect.bind(t),Ab(n,{scrollMode:"if-needed"}),delete n.getBoundingClientRect}},un=(e,t)=>{if(!t)return!1;var n=t(e);return n??(e.isDefaultPrevented()||e.isPropagationStopped())},IC=e=>xo(e.target)&&(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement),gL=(e,t)=>{if(!t)return!1;var n=t(e);return n??e.defaultPrevented},pL=A.createContext(!1),mL=A.createContext({});function vL(e){var t=A.useRef([]).current,n=A.useRef({editor:e}).current,r=A.useCallback(o=>{n.editor=o,t.forEach(s=>s(o))},[t,n]),i=A.useMemo(()=>({getSlate:()=>n.editor,addEventListener:o=>(t.push(o),()=>{t.splice(t.indexOf(o),1)})}),[t,n]);return{selectorContext:i,onChange:r}}var yL=["editor","children","onChange","onSelectionChange","onValueChange","initialValue"],wL=e=>{var{editor:t,children:n,onChange:r,onSelectionChange:i,onValueChange:o,initialValue:s}=e,u=Qu(e,yL),[l,a]=ye.useState(()=>{if(!q.isNodeList(s))throw new Error("[Slate] initialValue is invalid! Expected a list of elements but got: ".concat(bt.stringify(s)));if(!x.isEditor(t))throw new Error("[Slate] editor is invalid! You passed: ".concat(bt.stringify(t)));return t.children=s,Object.assign(t,u),{v:0,editor:t}}),{selectorContext:c,onChange:f}=vL(t),h=A.useCallback(d=>{var y;switch(r&&r(t.children),d==null||(y=d.operation)===null||y===void 0?void 0:y.type){case"set_selection":i==null||i(t.selection);break;default:o==null||o(t.children)}a(m=>({v:m.v+1,editor:t})),f(t)},[t,f,r,i,o]);A.useEffect(()=>(lp.set(t,h),()=>{lp.set(t,()=>{})}),[t,h]);var[g,p]=A.useState($.isFocused(t));return A.useEffect(()=>{p($.isFocused(t))},[t]),Wa(()=>{var d=()=>p($.isFocused(t));return BS>=17?(document.addEventListener("focusin",d),document.addEventListener("focusout",d),()=>{document.removeEventListener("focusin",d),document.removeEventListener("focusout",d)}):(document.addEventListener("focus",d,!0),document.addEventListener("blur",d,!0),()=>{document.removeEventListener("focus",d,!0),document.removeEventListener("blur",d,!0)})},[]),ye.createElement(mL.Provider,{value:c},ye.createElement(VS.Provider,{value:l},ye.createElement(wv.Provider,{value:l.editor},ye.createElement(pL.Provider,{value:g},n))))},LC=(e,t)=>{var n=(t.top+t.bottom)/2;return e.top<=n&&e.bottom>=n},GC=(e,t,n)=>{var r=$.toDOMRange(e,t).getBoundingClientRect(),i=$.toDOMRange(e,n).getBoundingClientRect();return LC(r,i)&&LC(i,r)},CL=(e,t)=>{var n=x.range(e,G.end(t)),r=Array.from(x.positions(e,{at:t})),i=0,o=r.length,s=Math.floor(o/2);if(GC(e,x.range(e,r[i]),n))return x.range(e,r[i],n);if(r.length<2)return x.range(e,r[r.length-1],n);for(;s!==r.length&&s!==i;)GC(e,x.range(e,r[s]),n)?o=s:i=s,s=Math.floor((i+o)/2);return x.range(e,r[o],n)};function NC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function HC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NC(Object(n),!0).forEach(function(r){pr(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NC(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var xL=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",r=t,{apply:i,onChange:o,deleteBackward:s,addMark:u,removeMark:l}=r;return _d.set(r,new WeakMap),r.addMark=(a,c)=>{var f,h;(f=Ev.get(r))===null||f===void 0||f(),!kr.get(r)&&(h=Cn.get(r))!==null&&h!==void 0&&h.length&&kr.set(r,null),yi.delete(r),u(a,c)},r.removeMark=a=>{var c;!kr.get(r)&&(c=Cn.get(r))!==null&&c!==void 0&&c.length&&kr.set(r,null),yi.delete(r),l(a)},r.deleteBackward=a=>{if(a!=="line")return s(a);if(r.selection&&G.isCollapsed(r.selection)){var c=x.above(r,{match:p=>ce.isElement(p)&&x.isBlock(r,p),at:r.selection});if(c){var[,f]=c,h=x.range(r,f,r.selection.anchor),g=CL(r,h);G.isCollapsed(g)||K.delete(r,{at:g})}}},r.apply=a=>{var c=[],f=[],h=Cn.get(r);if(h!=null&&h.length){var g=h.map(z=>CI(z,a)).filter(Boolean);Cn.set(r,g)}var p=Ki.get(r);p&&Ki.set(r,TC(r,p,a));var d=Xi.get(r);if(d!=null&&d.at){var y=Oe.isPoint(d==null?void 0:d.at)?fp(r,d.at,a):TC(r,d.at,a);Xi.set(r,y?HC(HC({},d),{},{at:y}):null)}switch(a.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{c.push(...eu(r,a.path));break}case"set_selection":{var m;(m=la.get(r))===null||m===void 0||m.unref(),la.delete(r);break}case"insert_node":case"remove_node":{c.push(...eu(r,M.parent(a.path)));break}case"merge_node":{var v=M.previous(a.path);c.push(...eu(r,v));break}case"move_node":{var w=M.common(M.parent(a.path),M.parent(a.newPath));c.push(...eu(r,w));var E;M.isBefore(a.path,a.newPath)?(c.push(...eu(r,M.parent(a.path))),E=a.newPath):(c.push(...eu(r,M.parent(a.newPath))),E=a.path);var S=q.get(t,M.parent(E)),T=$.findKey(r,S),B=x.pathRef(r,M.parent(E));f.push([B,T]);break}}i(a);for(var[R,b]of c){var[O]=x.node(r,R);Ih.set(O,b)}for(var[V,L]of f)if(V.current){var[W]=x.node(r,V.current);Ih.set(W,L)}},r.setFragmentData=a=>{var{selection:c}=r;if(c){var[f,h]=G.edges(c),g=x.void(r,{at:f.path}),p=x.void(r,{at:h.path});if(!(G.isCollapsed(c)&&!g)){var d=$.toDOMRange(r,c),y=d.cloneContents(),m=y.childNodes[0];if(y.childNodes.forEach(O=>{O.textContent&&O.textContent.trim()!==""&&(m=O)}),p){var[v]=p,w=d.cloneRange(),E=$.toDOMNode(r,v);w.setEndAfter(E),y=w.cloneContents()}if(g&&(m=y.querySelector("[data-slate-spacer]")),Array.from(y.querySelectorAll("[data-slate-zero-width]")).forEach(O=>{var V=O.getAttribute("data-slate-zero-width")==="n";O.textContent=V?`
`:""}),bS(m)){var S=m.ownerDocument.createElement("span");S.style.whiteSpace="pre",S.appendChild(m),y.appendChild(S),m=S}var T=r.getFragment(),B=JSON.stringify(T),R=window.btoa(encodeURIComponent(B));m.setAttribute("data-slate-fragment",R),a.setData("application/".concat(n),R);var b=y.ownerDocument.createElement("div");return b.appendChild(y),b.setAttribute("hidden","true"),y.ownerDocument.body.appendChild(b),a.setData("text/html",b.innerHTML),a.setData("text/plain",LS(b)),y.ownerDocument.body.removeChild(b),a}}},r.insertData=a=>{r.insertFragmentData(a)||r.insertTextData(a)},r.insertFragmentData=a=>{var c=a.getData("application/".concat(n))||fI(a);if(c){var f=decodeURIComponent(window.atob(c)),h=JSON.parse(f);return r.insertFragment(h),!0}return!1},r.insertTextData=a=>{var c=a.getData("text/plain");if(c){var f=c.split(/\r\n|\r|\n/),h=!1;for(var g of f)h&&K.splitNodes(r,{always:!0}),r.insertText(g),h=!0;return!0}return!1},r.onChange=a=>{var c=BS<18?U8.unstable_batchedUpdates:f=>f();c(()=>{var f=lp.get(r);f&&f(a),o(a)})},r},eu=(e,t)=>{var n=[];for(var[r,i]of x.levels(e,{at:t})){var o=$.findKey(e,r);n.push([i,o])}return n},EL={isHistory(e){return zt(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(e.redos.length===0||vi.isOperationList(e.redos[0].operations))&&(e.undos.length===0||vi.isOperationList(e.undos[0].operations))}},og=new WeakMap,sg=new WeakMap,Eu={isHistoryEditor(e){return EL.isHistory(e.history)&&x.isEditor(e)},isMerging(e){return sg.get(e)},isSaving(e){return og.get(e)},redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,t){var n=Eu.isMerging(e);sg.set(e,!1),t(),sg.set(e,n)},withoutSaving(e,t){var n=Eu.isSaving(e);og.set(e,!1),t(),og.set(e,n)}},PL=e=>{var t=e,{apply:n}=t;return t.history={undos:[],redos:[]},t.redo=()=>{var{history:r}=t,{redos:i}=r;if(i.length>0){var o=i[i.length-1];o.selectionBefore&&K.setSelection(t,o.selectionBefore),Eu.withoutSaving(t,()=>{x.withoutNormalizing(t,()=>{for(var s of o.operations)t.apply(s)})}),r.redos.pop(),t.writeHistory("undos",o)}},t.undo=()=>{var{history:r}=t,{undos:i}=r;if(i.length>0){var o=i[i.length-1];Eu.withoutSaving(t,()=>{x.withoutNormalizing(t,()=>{var s=o.operations.map(vi.inverse).reverse();for(var u of s)t.apply(u);o.selectionBefore&&K.setSelection(t,o.selectionBefore)})}),t.writeHistory("redos",o),r.undos.pop()}},t.apply=r=>{var{operations:i,history:o}=t,{undos:s}=o,u=s[s.length-1],l=u&&u.operations[u.operations.length-1],a=Eu.isSaving(t),c=Eu.isMerging(t);if(a==null&&(a=DL(r)),a){if(c==null&&(u==null?c=!1:i.length!==0?c=!0:c=SL(r,l)),u&&c)u.operations.push(r);else{var f={operations:[r],selectionBefore:t.selection};t.writeHistory("undos",f)}for(;s.length>100;)s.shift();o.redos=[]}n(r)},t.writeHistory=(r,i)=>{t.history[r].push(i)},t},SL=(e,t)=>!!(t&&e.type==="insert_text"&&t.type==="insert_text"&&e.offset===t.offset+t.text.length&&M.equals(e.path,t.path)||t&&e.type==="remove_text"&&t.type==="remove_text"&&e.offset+e.text.length===t.offset&&M.equals(e.path,t.path)),DL=(e,t)=>e.type!=="set_selection";const $C=e=>{const{text:t,readonly:n,onChange:r,onComposition:i,afterInit:o}=e,s=A.useCallback(c=>D.jsx(TL,{...c}),[]),u=A.useCallback(c=>D.jsx(AL,{...c}),[]),l=[t],a=A.useMemo(()=>{const c=PL(xL(Cb()));return o&&o(c),c},[]);return D.jsx(wL,{editor:a,initialValue:l,onChange:c=>{r&&r({newText:a.children[0],operations:a.operations})},children:D.jsx(cL,{className:"slate-editable-container plait-text-container",renderElement:s,renderLeaf:u,readOnly:n===void 0?!0:n,onKeyDown:c=>{},onCompositionStart:c=>{i&&i(c)},onCompositionUpdate:c=>{i&&i(c)},onCompositionEnd:c=>{i&&i(c)}})})},TL=e=>{const{attributes:t,children:n,element:r}={...e},i={textAlign:r.align};return D.jsx("div",{style:i,...t,children:n})},AL=({children:e,leaf:t,attributes:n})=>(t.bold&&(e=D.jsx("strong",{children:e})),t.code&&(e=D.jsx("code",{children:e})),t.italic&&(e=D.jsx("em",{children:e})),t.underlined&&(e=D.jsx("u",{children:e})),D.jsx("span",{style:{color:t.color},...n,children:e})),BL=e=>{const t=e;return t.renderText=(n,r)=>{const i=cc(n);let o;const s=D.jsx($C,{...r,afterInit:a=>{o=a,r.afterInit&&r.afterInit(a)}});i.render(s);let u={...r};return{destroy:()=>{setTimeout(()=>{i.unmount()},0)},update:a=>{if(!(a&&u&&!Object.keys(a).every(h=>a[h]===u[h])))return;const f=$.isReadOnly(o);u={...u,...a},i.render(D.jsx($C,{...u})),f===!0&&u.readonly===!1?setTimeout(()=>{$.focus(o)},0):f===!1&&u.readonly===!0&&($.blur(o),$.deselect(o))}}},t},ml="#6698FF",lr=9,dp="plait-text-plugin-key",XS=30,ML="transparent",Lh=20,aa=18,RL='PingFangSC-Regular, "PingFang SC"',KS="none";var _C;(function(e){e.image="image"})(_C||(_C={}));const YS=["png","jpeg","gif","bmp"];var gp;(function(e){e.nw="0",e.n="4",e.ne="1",e.e="5",e.se="2",e.s="6",e.sw="3",e.w="7"})(gp||(gp={}));var mr;(function(e){e.solid="solid",e.dashed="dashed",e.dotted="dotted"})(mr||(mr={}));class In{constructor(t,n){this.board=t,this.options=n}processDrawing(t,n,r){var i;if(this.canDraw&&this.canDraw(t,r)){const o=this.draw(t,r);if(o){this.g&&n.contains(this.g)?this.g.replaceWith(o):(this.g&&this.g.remove(),(i=this.options)!=null&&i.prepend?n.prepend(o):n.appendChild(o)),this.g=o;const s=this.board.getRectangle(t);if(s){let u;Un.isGroup(t)?u=Sn(xr(this.board,t,!0)):u=t.angle,u&&dr(o,C.getCenterPoint(s),u)}}else this.destroy();kL(this)&&this.afterDraw(t)}else this.destroy()}destroy(){this.g&&(this.g.remove(),this.g=void 0)}}function kL(e){return!!e.afterDraw}const qS=(e,t)=>{const n={stroke:"#99999995",strokeWidth:2,fill:"#FFF",fillStyle:"solid"},r=Vs(P.getRoughSVG(e),t,lr,n);return r.classList.add(W6),r};function OL(e,t){return Vs(P.getRoughSVG(e),t,lr,{stroke:"#FFFFFF",strokeWidth:1,fill:`${ml}`,fillStyle:"solid"})}function jC(e,t){return Vs(P.getRoughSVG(e),t,lr,{stroke:`${ml}`,strokeWidth:2,fill:"#FFFFFF",fillStyle:"solid"})}const Uo=6,WC=(e,t)=>{const n={stroke:_t,strokeWidth:1,fillStyle:"solid"},r=[t.x-Lh-aa/2,t.y+t.height+Lh+aa/2],i=P.getRoughSVG(e),o=Te(),s=i.path(`M ${r[0]+Uo} ${r[1]} A ${Uo} ${Uo}, 0, 1, 0, ${r[0]} ${r[1]+Uo}`,n),u=i.polygon([[r[0],r[1]+Uo-2],[r[0],r[1]+Uo+2],[r[0]+4.5,r[1]+Uo]],{...n,fill:_t});return ke(u,"round"),o.append(s,u),o},By=class By extends In{constructor(t,n){super(t,n),this.board=t,this.options=n,this.hasResizeHandle=!1}canDraw(t,n){return!!n.selected}draw(t,n){const r=Te(),i=this.options.getRectangle(t),o=this.options.getStrokeWidth(),s=C.inflate(i,o),u=Hr(this.board,s,{stroke:ml,strokeWidth:o});return r.append(u),u.classList.add(cl),u.style.opacity=`${this.options.getStrokeOpacity()}`,this.options.hasResizeHandle()?(this.hasResizeHandle=!0,C.getCornerPoints(s).forEach(l=>{const a=qS(this.board,l);r.append(a)})):this.hasResizeHandle=!1,r}};By.key="active-generator";let bi=By;const Gh=e=>`${e}`,Nh=e=>Number(e),FL=(e,t)=>{let r=(pp(e,Gh(t))?t-4:t)+2;return r>=4&&(r=r-4),pp(e,Gh(t))?r+4:r},zC=e=>{switch(e){case 0:case 2:return Rr.nwse;case 1:case 3:return Rr.nesw;case 4:case 6:return Rr.ns;case 5:case 7:return Rr.ew;default:return null}},bL=(e,t)=>{const n=X0.indexOf(e);if(n>=0){const r=Math.round(t/(Math.PI/4));e=X0[(n+r)%X0.length]}return e},ZS=(e,t)=>{const n=C.getCornerPoints(e),r=n.map((o,s)=>({rectangle:{x:o[0]-t/2,y:o[1]-t/2,width:t,height:t},handle:Gh(s),cursorClass:zC(s)})),i=IL(n,t/2);return r.push(...i.map((o,s)=>({rectangle:o,handle:Gh(s+4),cursorClass:zC(s+4)}))),r},VC=(e,t)=>t<=3?C.getCornerPoints(e)[t]:C.getEdgeCenterPoints(e)[t-4],IL=(e,t)=>{const n=[];for(let r=0;r<e.length;r++){let i=C.getRectangleByPoints([e[r],e[(r+1)%4]]);const o=new Array(2).fill(0);o[(r+1)%2]=t/2,i=C.expand(i,o[0],o[1]),n.push(i)}return n},jd=new WeakMap,Pu=e=>!!jd.get(e),LL=(e,t)=>Pu(e)&&t(jd.get(e)),GL=(e,t,n)=>{P.getBoardContainer(e).classList.add(`${n}-resizing`),jd.set(e,t),_i(e,!0)},NL=(e,t)=>{P.getBoardContainer(e).classList.remove(`${t}-resizing`),jd.delete(e),_i(e,!1)},pp=(e,t)=>Nh(t)>=4,_f=(e,t)=>!pp(e,t),Dv=(e,t,n,r,i)=>{const o=At([r],n,i)[0],s=At([C.getCenterPoint(t)],n,i)[0],u=C.getPoints(t),l=C.getCenterPoint(e),a=At([s],o,-i)[0],c=At(u,l,i);return At(c,a,-i)},Tv=(e,t)=>{if(P.hasBeenTextEditing(e)||gn(e))return!1;const n=re(e);return n.length===1&&n[0]===t};function it(e,t){const n=t[0]-e[0],r=t[1]-e[1],i=Math.sqrt(n*n+r*r);if(i===0)throw new Error("Points must not be the same for a unit vector calculation.");const o=n/i,s=r/i;return[o,s]}function Su(e,t,n){const r=Math.hypot(t[0],t[1]);return[e[0]+t[0]/r*n,e[1]+t[1]/r*n]}function UC(e,t,n,r){return r?[e[0]+n,e[1]+n/t[0]*t[1]]:[e[0]+n/t[1]*t[0],e[1]+n]}function XC(e){const t=e[0],r=e[1],i=-t;return[r,i]}function za(e,t){if(!t)return e;const n=e[0],r=e[1],i=n*Math.cos(t)-r*Math.sin(t),o=n*Math.sin(t)+r*Math.cos(t);return[i,o]}function QS(e,t,n){const r=Ze(e[0],e[1],t[0],t[1]),i=Ze(e[0],e[1],n[0],n[1]),o=Ze(t[0],t[1],n[0],n[1]);return Math.abs(r+i-o)<.1}const HL=(e,t,n)=>{const r=[],i=[Math.min(t[0],n[0]),Math.max(t[0],n[0])],o=[Math.min(t[1],n[1]),Math.max(t[1],n[1])],s=it(t,n);if(e[0]>=i[0]&&e[0]<=i[1]){const u=UC(t,s,e[0]-t[0],!0);r.push(u)}else if(e[1]>=o[0]&&e[1]<=o[1]){const u=UC(t,s,e[1]-t[1],!1);r.push(u)}return r};function JS(e,t){const r=eD(e)*t;let i=0;for(let o=0;o<e.length-1;o++){const[s,u]=e[o],[l,a]=e[o+1],c=Ze(s,u,l,a);if(i+c>=r){const h=(r-i)/c,g=s+(l-s)*h,p=u+(a-u)*h;return[g,p]}i+=c}return e[e.length-1]}function eD(e){let t=0;for(let n=0;n<e.length-1;n++){const[r,i]=e[n],[o,s]=e[n+1];t+=Ze(r,i,o,s)}return t}function tD(e,t){const n=eD(e);let r=0;for(let i=0;i<e.length-1;i++){if(QS(t,e[i],e[i+1]))return r+=Ze(t[0],t[1],e[i][0],e[i][1]),r/n;r+=Ze(e[i][0],e[i][1],e[i+1][0],e[i+1][1])}throw new Error("Cannot get ratio by point")}const el=e=>{const t=[];return e.forEach(n=>{t.findIndex(i=>me.isEquals(n,i))===-1&&t.push(n)}),t};function gi(e){if(e.length<=2)return e;let t=[e[0]];for(let n=1;n<e.length-1;n++){const r=e[n-1],i=e[n],o=e[n+1];!(me.isOverHorizontal([r,i,o])||me.isOverVertical([r,i,o]))&&t.push(i)}return t.push(e[e.length-1]),t}const Va=(e,t,n)=>{const r=Ze(...e,...t),i=me.isEquals(e,t),o=i?1:(t[1]-e[1])/r,s=i?1:(t[0]-e[0])/r;return[e[0]+n*s,e[1]+n*o]},$L={[Ne.left]:{x:-1,y:0},[Ne.right]:{x:1,y:0},[Ne.top]:{x:0,y:-1},[Ne.bottom]:{x:0,y:1}};function _L(e){switch(e){case Ne.left:return Ne.right;case Ne.right:return Ne.left;case Ne.top:return Ne.bottom;case Ne.bottom:return Ne.top}}function nD(e){if(e[0]===0)return Ne.left;if(e[0]===1)return Ne.right;if(e[1]===0)return Ne.top;if(e[1]===1)return Ne.bottom}function ou(e){const t=e[0],n=e[1];if(t===0&&n===0)return null;if(t===0)return n>0?Ne.bottom:Ne.top;if(n===0)return t>0?Ne.right:Ne.left;const r=Math.atan2(n,t);return r>-Math.PI/4&&r<=Math.PI/4?Ne.right:r>Math.PI/4&&r<=3*Math.PI/4?Ne.bottom:r>-3*Math.PI/4&&r<=-Math.PI/4?Ne.top:Ne.left}function Bs(e){return $L[e]}function tl(e){return e===0?e:e/Math.abs(e)}const jL=(e,t,n,r,i)=>{const o=Bs(t),s=Bs(r),u=[e[0]+o.x*i,e[1]+o.y*i],l=[n[0]+s.x*i,n[1]+s.y*i],a=WL(u,t,l),c=a.x!==0?"x":"y",f=a[c];let h=[],g,p;const[d,y]=zL({sourceX:e[0],sourceY:e[1],targetX:n[0],targetY:n[1]});if(o[c]*s[c]===-1){g=d,p=y;const m=[[g,u[1]],[g,l[1]]],v=[[u[0],p],[l[0],p]];o[c]===f?h=c==="x"?m:v:h=c==="x"?v:m}else{const m=[[u[0],l[1]]],v=[[l[0],u[1]]];c==="x"?h=o.x===f?v:m:h=o.y===f?m:v;let w;if(t!==r){const E=c==="x"?1:0,S=o[c]===s[c==="x"?"y":"x"],T=u[E]>l[E],B=u[E]<l[E];w=o[c]===1&&(!S&&T||S&&B)||o[c]!==1&&(!S&&B||S&&T),w&&(h=c==="x"?m:v)}}return[e,u,...h,l,n]},WL=(e,t=Ne.bottom,n)=>t===Ne.left||t===Ne.right?e[0]<n[0]?{x:1,y:0}:{x:-1,y:0}:e[1]<n[1]?{x:0,y:1}:{x:0,y:-1};function zL({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,o=n<e?n+i:n-i,s=Math.abs(r-t)/2,u=r<t?r+s:r-s;return[o,u,i,s]}function Av(e){const t=e.ctrlKey||e.metaKey,n=Lt("alt",e),r=Lt("shift",e),i=e.key.includes("CapsLock"),o=e.key.includes("Tab"),s=e.key.includes("Escape"),u=e.key.startsWith("F"),l=!!e.key.includes("Arrow");return i||t||n||l||r||o||s||u}const VL=e=>Lt("mod+/",e),UL=e=>e.key==="Tab",XL=e=>e.key==="Enter",Bv=e=>e.code==="Space",Mv=e=>en.isDeleteBackward(e)||en.isDeleteForward(e);var ar;(function(e){e.dnd="dnd",e.drawing="drawing"})(ar||(ar={}));const rD=new WeakMap,iD=e=>rD.get(e),no=(e,t)=>{rD.set(e,t)},Wd=e=>iD(e)===ar.dnd,vl=e=>iD(e)===ar.drawing,yl=e=>{const t=Ue.getElementRef(e);return(t==null?void 0:t.getTextManages())||[]},Us=e=>{const t=yl(e)[0];return t||console.warn("can not find textManage"),t},Xs=e=>yl(e).map(t=>t.editor),oD=e=>{const t=Xs(e)[0];return t||console.warn("can not find textManage"),t},KL=e=>{const t=re(e);let n=null;return t.forEach(r=>{const i=Xs(r);!n&&i&&i.length>0&&(n=i[0])}),n},sD=e=>e.map(t=>{try{const n=Xs(t);return n.length?n.map(r=>{const i=q.texts(r);return Array.from(i).reduce((o,s)=>o+=s[0].text,"")}).join(" "):""}catch{return""}}).filter(t=>t).join(" "),uD=(e,t)=>{const n=t||re(e);if(n.length){const r=[];n.forEach(o=>{r.push(...yl(o))});const i=r.find(o=>o.isEditing);return i?[i.editor]:r.map(o=>o.editor)}},Ks=(e,t,n)=>{n=n||{};const r=typeof e=="string"?{children:[{text:e,...n}]}:e;return t&&(r.align=t),r},KC=e=>e===14?20:e===18?25:e*1.5,lD=async(e,t,n,r)=>{let i=0,o=0;await YL(t,n).then(a=>{i=a.width,o=a.height});let s=null;const u=URL.createObjectURL(t);P.getBoardContext(e).setUploadingFile({url:u,file:t}),s={url:u,width:i,height:o},r(s)};function YL(e,t){return new Promise((n,r)=>{const i=new Image;i.src=URL.createObjectURL(e),i.onload=function(){const o=t,s=t*i.naturalHeight/i.naturalWidth;n(i.naturalWidth>t?{width:o,height:s}:{width:i.naturalWidth,height:i.naturalHeight})}})}const Rv=new WeakMap,Dr=e=>Rv.get(e),aD=(e,t)=>{Rv.set(e,t)},qL=e=>{Rv.delete(e)};class ZL{constructor(){this.list=[]}enqueue(t){this.list.push(t),this.list=this.list.sort((n,r)=>n.priority-r.priority)}dequeue(){return this.list.shift()}}class QL{constructor(t){this.graph=t,this.cameFrom=new Map}heuristic(t,n){return Math.abs(t[0]-n[0])+Math.abs(t[1]-n[1])}search(t,n,r){const i=new ZL,o=this.graph.get(t);this.cameFrom=new Map;const s=new Map;for(s.set(o,0),i.enqueue({node:o,priority:0});i.list.length>0;){var u=i.dequeue();if(!u)throw new Error("can't find current");const l=u.node.data;if(l[0]===n[0]&&l[1]===n[1])break;u.node.adjacentNodes.forEach(a=>{let c=s.get(u.node)+this.heuristic(a.data,u.node.data);const f=this.cameFrom.get(u.node),h=f?f.data:r,g=h[0]===(u==null?void 0:u.node.data[0])&&h[0]===a.data[0],p=h[1]===(u==null?void 0:u.node.data[1])&&h[1]===a.data[1];if(!g&&!p&&(c=c+1),!s.has(a)||s.get(a)&&c<s.get(a)){s.set(a,c);const d=c+this.heuristic(a.data,n);i.enqueue({node:a,priority:d}),this.cameFrom.set(a,u.node)}})}}getRoute(t,n){const r=[];let i=n;for(;i[0]!==t[0]||i[1]!==t[1];){const o=this.graph.get(i),s=this.cameFrom.get(o);r.unshift(s.data),i=s.data}return r}}class JL{constructor(t){this.data=t,this.distance=Number.MAX_SAFE_INTEGER,this.adjacentNodes=[]}}class eG{constructor(){this.index={}}add(t){const n=t[0],r=t[1],i=n.toString(),o=r.toString();i in this.index||(this.index[i]={}),o in this.index[i]||(this.index[i][o]=new JL(t))}connect(t,n){const r=this.get(t),i=this.get(n);if(!r||!i)throw new Error("A point was not found");r.adjacentNodes.push(i)}has(t){const n=t[0],r=t[1],i=n.toString(),o=r.toString();return i in this.index&&o in this.index[i]}get(t){const n=t[0],r=t[1],i=n.toString(),o=r.toString();return i in this.index&&o in this.index[i]?this.index[i][o]:null}}const cD=pc("debug:plait:elbow-line-routing"),fD=(e,t)=>{const{nextSourcePoint:n,nextTargetPoint:r}=e,i=nG(e),o=rG(i),s=new QL(o);s.search(n,r,e.sourcePoint);let u=s.getRoute(n,r);u=[e.sourcePoint,...u,r,e.targetPoint];const l=C.isHitX(e.sourceOuterRectangle,e.targetOuterRectangle),a=C.isHitY(e.sourceOuterRectangle,e.targetOuterRectangle),c=l?void 0:C.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!0),f=a?void 0:C.getGapCenter(e.sourceOuterRectangle,e.targetOuterRectangle,!1);return u=tG(u,{centerX:c,centerY:f,sourceRectangle:e.sourceRectangle,targetRectangle:e.targetRectangle},t),u},tG=(e,t,n)=>{const{sourceRectangle:r,targetRectangle:i,centerX:o,centerY:s}=t;if(n&&cD.clear(),o!==void 0){const u=qC(e,o,!0),l=u.pointOfHit&&YC(e,{parallelPaths:u.parallelPaths,pointOfHit:u.pointOfHit,sourceRectangle:r,targetRectangle:i},n);l&&(e=l)}if(s!==void 0){const u=qC(e,s,!1),l=u.pointOfHit&&YC(e,{parallelPaths:u.parallelPaths,pointOfHit:u.pointOfHit,sourceRectangle:r,targetRectangle:i},n);l&&(e=l)}return e},YC=(e,t,n)=>{const{parallelPaths:r,pointOfHit:i,sourceRectangle:o,targetRectangle:s}=t;let u=null;return r.forEach(l=>{const a=[i,l[0],l[1]],c=C.getRectangleByPoints(a);if(!C.isHit(c,o)&&!C.isHit(c,s)){const f=C.getCornerPointsByPoints(a);n&&cD.drawRectangle(n,c);const h=[],g=[];e.forEach((E,S)=>{const T=f.findIndex(B=>me.isEquals(E,B));T!==-1&&(h.push(S),g.push(T))});const p=[...e],d=f.find((E,S)=>!g.includes(S)),y=Math.abs(h[0]-h[h.length-1])+1;p.splice(h[0]+1,y-2,d);const m=gi([...e]).length-1;gi([...p]).length-1<=m&&(u=p)}return null}),u},qC=(e,t,n)=>{const r=[];let i=null,o=null;const s=n?0:1;for(let u=0;u<e.length;u++){const l=e[u-1],a=e[u];i===null&&l&&l[s]===a[s]&&(i=l),i!==null&&l[s]!==a[s]&&(r.push([i,l]),i=null),a[s]===t&&(o=a)}return i&&r.push([i,e[e.length-1]]),{pointOfHit:o,parallelPaths:r}},nG=e=>{const{nextSourcePoint:t,nextTargetPoint:n,sourceOuterRectangle:r,targetOuterRectangle:i}=e,o=[],s=[];let u=[];[r,i].forEach(c=>{o.push(c.x,c.x+c.width/2,c.x+c.width),s.push(c.y,c.y+c.height/2,c.y+c.height)});const l=[r.x,r.x+r.width,i.x,i.x+i.width].sort((c,f)=>c-f);o.push((l[1]+l[2])/2,t[0],n[0]);const a=[r.y,r.y+r.height,i.y,i.y+i.height].sort((c,f)=>c-f);s.push((a[1]+a[2])/2,t[1],n[1]);for(let c=0;c<o.length;c++)for(let f=0;f<s.length;f++){const h=[o[c],s[f]],g=C.isPointInRectangle(r,h),p=C.isPointInRectangle(i,h);!g&&!p&&u.push(h)}return u=el(u).filter(c=>{const f=C.isPointInRectangle(r,c),h=C.isPointInRectangle(i,c);return!f&&!h}),u},rG=e=>{const t=new eG,n=[],r=[];e.forEach(o=>{const s=o[0],u=o[1];n.indexOf(s)<0&&n.push(s),r.indexOf(u)<0&&r.push(u),t.add(o)}),n.sort((o,s)=>o-s),r.sort((o,s)=>o-s);const i=o=>t.has(o);for(let o=0;o<n.length;o++)for(let s=0;s<r.length;s++){const u=[n[o],r[s]];if(i(u)){if(o>0){const l=[n[o-1],r[s]];i(l)&&(t.connect(l,u),t.connect(u,l))}if(s>0){const l=[n[o],r[s-1]];i(l)&&(t.connect(l,u),t.connect(u,l))}}}return t},iG=(e,t)=>{const n=XS;let r=new Array(4).fill(n),i=new Array(4).fill(n);const o=e.x-(t.x+t.width),s=t.x-(e.x+e.width);if(o>0&&o<n*2){const a=o/2;r[3]=a,i[1]=a}if(s>0&&s<n*2){const a=s/2;i[3]=a,r[1]=a}const u=e.y-(t.y+t.height),l=t.y-(e.y+e.height);if(u>0&&u<n*2){const a=u/2;r[0]=a,i[2]=a}if(l>0&&l<n*2){const a=l/2;r[2]=a,i[0]=a}return{sourceOffset:r,targetOffset:i}},ZC=(e,t,n)=>{switch(n){case Ne.top:return[e[0],t.y];case Ne.bottom:return[e[0],t.y+t.height];case Ne.right:return[t.x+t.width,e[1]];default:return[t.x,e[1]]}},oG=(e,t)=>{const{sourceOffset:n,targetOffset:r}=iG(e,t),i=C.expand(e,n[3],n[0],n[1],n[2]),o=C.expand(t,r[3],r[0],r[1],r[2]);return{sourceOuterRectangle:i,targetOuterRectangle:o}},sG=e=>{const{sourcePoint:t,nextSourcePoint:n,sourceRectangle:r,sourceOuterRectangle:i,targetPoint:o,nextTargetPoint:s,targetRectangle:u,targetOuterRectangle:l}=e;return C.isPointInRectangle(u,t)||C.isPointInRectangle(l,n)||C.isPointInRectangle(i,s)||C.isPointInRectangle(r,o)},jf=new Map,kv=(e,t,n)=>{let r=jf.has(e)?jf.get(e):{};r[t]=n,jf.set(e,r)},zd=e=>jf.get(e),hD=new WeakMap,uG=(e,t)=>{P.getBoardContainer(e).classList.add("draw-elements-rotating"),hD.set(e,t),_i(e,!0)},lG=e=>{P.getBoardContainer(e).classList.remove("draw-elements-rotating"),hD.delete(e),_i(e,!1)},QC=(e,t)=>{const n=e.getRectangle(t);return n?n.width*n.height:0},aG=(e,t,n="asc")=>t.sort((r,i)=>{const o=QC(e,r),s=QC(e,i);return n==="asc"?o-s:s-o}),cG=e=>e&&e!==KS&&e!==ML,Go=(e,t)=>{switch(e){case mr.dashed:return[8,8+t];case mr.dotted:return[2,4+t];default:return}},dD=(e,t,n,r)=>t.map(i=>{const o=r&&r(i);if(o)return o;if(i.points){const s=i.points.map(u=>[u[0]-n[0],u[1]-n[1]]);return{...i,points:s}}return i}),gD=(e,t,n,r)=>{const i={};t.forEach(o=>{i[o.id]=Ve()}),t.forEach(o=>{o.id=i[o.id],r&&r(o,i),o.points&&(o.points=o.points.map(s=>[n[0]+s[0],n[1]+s[1]])),ee.insertNode(e,o,[e.children.length])}),ee.addSelectionWithTemporaryElements(e,t)},fG="foreign-object-image",My=class My extends In{constructor(t,n){super(t,n),this.board=t,this.options=n,this.isFocus=!1}canDraw(t){return!!this.options.getImageItem(t)}draw(t){this.element=t;const n=Te(),r=this.options.getRectangle(t);this.foreignObject=Qm(r.x,r.y,r.width,r.height),this.foreignObject.classList.add(fG),n.append(this.foreignObject);const i={board:this.board,imageItem:this.options.getImageItem(t),element:t,getRectangle:()=>this.options.getRectangle(t)};return this.imageComponentRef=this.board.renderImage(this.foreignObject,i),this.activeGenerator=new bi(this.board,{getStrokeWidth:()=>(re(this.board).length===1&&!gn(this.board),xt),getStrokeOpacity:()=>{const o=re(this.board);return o.length===1&&!gn(this.board)||!o.length?1:.5},getRectangle:()=>this.options.getRectangle(this.element),hasResizeHandle:()=>{const o=Tv(this.board,this.element);return!!Dr(this.board)||o}}),n}updateImage(t,n,r){if(this.element=r,n!==r&&this.imageComponentRef){const s={imageItem:this.options.getImageItem(r),element:r,getRectangle:()=>this.options.getRectangle(r)};this.imageComponentRef.update(s)}const i=this.options.getRectangle(r);ia(this.g,i.width,i.height,i.x,i.y),i&&r.angle&&dr(this.g,C.getCenterPoint(i),r.angle);const o=P.getElementActiveHost(this.board);this.activeGenerator.processDrawing(r,o,{selected:this.isFocus})}setFocus(t,n){this.isFocus=n;const r=P.getElementActiveHost(this.board);this.activeGenerator.processDrawing(t,r,{selected:n});const i={isFocus:n};this.imageComponentRef.update(i)}destroy(){var t,n;super.destroy(),(t=this.imageComponentRef)==null||t.destroy(),(n=this.activeGenerator)==null||n.destroy()}};My.key="image-generator";let Eo=My;const yc=(e,t,n)=>{re(e).forEach(i=>{if(n!=null&&n.match&&!(n!=null&&n.match(i)))return;const o=P.findPath(e,i),s=n!=null&&n.getMemorizeKey?n==null?void 0:n.getMemorizeKey(i):"";for(let u in t)s&&kv(s,u,t[u]);n!=null&&n.callback?n.callback(i,o):ee.setNode(e,t,o)})},hG=(e,t,n)=>{yc(e,{strokeStyle:t},n)},dG=(e,t,n)=>{yc(e,{fill:t},n)},gG=(e,t,n)=>{yc(e,{strokeColor:t},n)},pG=(e,t,n)=>{yc(e,{strokeWidth:t},n)},Po={setFillColor:dG,setStrokeStyle:hG,setProperty:yc,setStrokeWidth:pG,setStrokeColor:gG},Ms=(e,t=!1)=>{let n=e[0],r=e[1];if(t){const s=Math.abs(n[0]-r[0]),u=Math.abs(n[1]-r[1]),l=Math.max(u,s);r=[n[0]+(r[0]>n[0]?l:-l),n[1]+(r[1]>n[1]?l:-l)]}const i=[Math.min(n[0],r[0]),Math.min(n[1],r[1])];let o=[Math.max(n[0],r[0]),Math.max(n[1],r[1])];return[i,o]},JC=(e,t)=>!P.isReadonly(e)&&!P.hasBeenTextEditing(e)&&P.isPointer(e,$e.selection),Ys=(e,t)=>{const{pointerDown:n,pointerMove:r,globalPointerUp:i}=e;let o=null,s=null,u=null,l=null;e.pointerDown=c=>{if(!t.canResize()||!JC(e)||!Hi(c)){n(c);return}const f=Ce(e,xe(e,c.x,c.y));if(o=t.hitTest(f),o){o.cursorClass&&P.getBoardContainer(e).classList.add(`${o.cursorClass}`),u=[c.x,c.y],s={path:Array.isArray(o.element)?o.element.map(g=>P.findPath(e,g)):P.findPath(e,o.element),element:o.element,handle:o.handle,handleIndex:o.handleIndex,rectangle:o.rectangle,options:o.options};return}n(c)},e.pointerMove=c=>{if(!t.canResize()||!JC(e)){a(),r(c);return}if(u&&o&&!Pu(e)){const f=[c.x,c.y];Ze(u[0],u[1],f[0],f[1])>Fd&&(GL(e,s,t.key),gr.set(e,!0),t.beforeResize&&t.beforeResize(s))}if(!Pu(e)&&!Ts(e)){const f=Ce(e,xe(e,c.x,c.y));ni(e,t.key+"-common-resize-hit-test",()=>{const h=t.hitTest(f);h?(l&&h.cursorClass!==l.cursorClass&&P.getBoardContainer(e).classList.remove(`${l.cursorClass}`),l=h,l.cursorClass&&P.getBoardContainer(e).classList.add(`${l.cursorClass}`)):a()})}else if(u&&Pu(e)){c.preventDefault();const f=Ce(e,xe(e,c.x,c.y));ni(e,"with-common-resize",()=>{u&&s&&t.onResize(s,{startPoint:Ce(e,xe(e,u[0],u[1])),endPoint:f,isShift:!!c.shiftKey})});return}r(c)},e.globalPointerUp=c=>{i(c),(Pu(e)||o)&&(t.afterResize&&t.afterResize(s),NL(e,t.key),u=null,o=null,s=null,gr.set(e,!1))};const a=()=>{l&&(l.cursorClass&&P.getBoardContainer(e).classList.remove(`${l.cursorClass}`),l=null)};return e};class mG extends In{canDraw(t){return!0}draw(t,n){const r={stroke:"",strokeWidth:xt,strokeLineDash:[5]};let i={x:0,y:0,width:0,height:0};return n&&(r.stroke="#999",i=ov(this.board,t,!0)),Hr(this.board,i,r)}}class vG{constructor(){this.textManages=[],this.generatorMap=new Map}addGenerator(t,n){this.generatorMap.set(t,n)}getGenerator(t){return this.generatorMap.get(t)}initializeTextManage(t){this.textManages=[],Array.isArray(t)?this.textManages.push(...t):this.textManages.push(t)}getTextManages(){return this.textManages}destroyTextManage(){this.textManages.forEach(t=>{t.destroy()}),this.textManages=[]}}class No extends CR{constructor(t=new vG){super(t)}}class yG extends No{constructor(){super()}initializeGenerator(){this.activeGenerator=new bi(this.board,{getRectangle:t=>ov(this.board,t),getStrokeWidth:()=>0,getStrokeOpacity:()=>0,hasResizeHandle:()=>!gn(this.board)}),this.groupGenerator=new mG(this.board)}initialize(){super.initialize(),this.initializeGenerator();const t=P.getBoardContext(this.board);this.onStableSubscription=t.onStable().subscribe(()=>{const n=xr(this.board,this.element,!1,!0),r=n.some(i=>tp(this.board,i))&&!n.every(i=>tp(this.board,i));this.groupGenerator.processDrawing(this.element,this.getElementG(),r)})}onContextChanged(t,n){}destroy(){var t;super.destroy(),(t=this.onStableSubscription)==null||t.unsubscribe()}}function wG(e){let t,n;const{drawElement:r,pointerMove:i,globalPointerUp:o,insertFragment:s,getDeletedFragment:u,deleteFragment:l,getRelatedFragment:a,getRectangle:c,keyDown:f}=e;return e.drawElement=h=>Un.isGroup(h.element)?yG:r(h),e.pointerMove=h=>{ni(e,"with-group",()=>{t==null||t.remove();const g=Ce(e,xe(e,h.x,h.y));let p={anchor:g,focus:g};e.selection&&!Zu.isCollapsed(e.selection)&&(p=e.selection);const d=P.getPointer(e);if(!Pu(e)&&!Rh(e)&&d===$e.selection){const y=x5(e,p);y.length&&(t=OM(e,y),t&&P.getElementActiveHost(e).append(t))}}),i(h)},e.globalPointerUp=h=>{t==null||t.remove(),t=null,o(h)},e.getRelatedFragment=(h,g)=>{const p=RM(e,h,g);return a([...h,...p],g)},e.insertFragment=(h,g,p)=>{var m,v;let d=[];if((m=h==null?void 0:h.elements)!=null&&m.length){d=new Array((v=h==null?void 0:h.elements)==null?void 0:v.length);const w=Io(e,h==null?void 0:h.elements);uv(e,h==null?void 0:h.elements).forEach(S=>{const T=h.elements.map(B=>B.id).indexOf(S.id);d.splice(T,1,S.groupId?Hh(S,void 0):S)}),w.length&&w.forEach(S=>{const T=h.elements.map(R=>R.id).indexOf(S.id),B={...Hh(S,void 0),id:Ve()};d.splice(T,1,B),pD(S,h.elements,B.id,d)}),h.elements=d}s(h,g,p),(d==null?void 0:d.filter(w=>Un.isGroup(w))).forEach(w=>{ee.insertNode(e,w,[e.children.length])})},e.getDeletedFragment=h=>(n=CG(e),n&&n.length&&h.push(...n),u(h)),e.deleteFragment=h=>{n!=null&&n.length&&EG(e,n),l(h),n=null},e.getRectangle=h=>Un.isGroup(h)?ov(e,h,!0):c(h),e.keyDown=h=>{if(!P.isReadonly(e)){if(Lt("mod+g",h)){h.preventDefault(),ee.addGroup(e);return}if(Lt("mod+shift+g",h)){h.preventDefault(),ee.removeGroup(e);return}}f(h)},e}const Hh=(e,t)=>({...e,groupId:t}),pD=(e,t,n,r)=>{const i=t.filter(o=>o.groupId===e.id);return i.length&&i.forEach(o=>{const s=t.map(u=>u.id).indexOf(o.id);if(Un.isGroup(o)){const u={...Hh(o,n),id:Ve()};r.splice(s,1,u),pD(o,t,u.id,r)}else r.splice(s,1,Hh(o,n))}),r},CG=e=>{const n=[...e.getRelatedFragment([])],r=Io(e),i=lv(e),o=[...r,...i];return o.forEach(s=>{const u=bo(e,s,!0);if(u.length){const a=xr(e,u[0],!1,!0).filter(c=>![...o,...n].map(f=>f.id).includes(c.id));if((a.length===1||a.length===0)&&(n.includes(u[0])||n.push(u[0]),a.length===1&&u.length>1)){const c=xG(e,u.slice(1,u.length),[...o,...n]);let f=u.length;c&&(f=u.findIndex(h=>h.id===c.id)),[...u.slice(1,f)].forEach(h=>{n.includes(h)||n.push(h)})}}}),n},xG=(e,t,n)=>{let r=null;for(let i=0;i<t.length;i++)if(xr(e,t[i],!1,!0).filter(u=>!n.map(l=>l.id).includes(u.id)).length>0){r=t[i];break}return r},EG=(e,t)=>{const n=lv(e),r=Io(e),i=n.filter(o=>o.groupId);[...r,...i].forEach(o=>{const s=bo(e,o,!0);if(s.length){const l=xr(e,s[0],!1,!0).filter(a=>a.id!==o.id);if(l.length===1){const a=t.map(c=>c.id);if(s.some(c=>a.includes(c.id))){const c=s.find(h=>!a.includes(h.id)),f=P.findPath(e,l[0]);ee.setNode(e,{groupId:(c==null?void 0:c.id)||void 0},f)}}}})};function Ov(e,t,n=1e4){const i=document.createElement("canvas").getContext("2d"),o=q.texts(e),s=[[]];for(const a of o){const[c]=a;q.string(c).split(`
`).forEach((g,p)=>{const d={...c,text:g};if(p===0)s[s.length-1].push(d);else{const y=[];y.push(d),s.push(y)}})}let u=0,l=0;return s.forEach((a,c)=>{let f=0,h=KC(t.fontSize);if(a.forEach((g,p)=>{const d=PG(g,{fontFamily:t.fontFamily,fontSize:t.fontSize});i.font=d;const y=i.measureText(g.text);f+=y.width;const m=p===a.length-1;if(g["font-size"]&&(m||g.text!=="")){const v=KC(parseFloat(g["font-size"]));v>h&&(h=v)}}),f<=n)f>u&&(u=f),l+=h;else{u=n;const g=Math.ceil(f/n);l+=h*g}}),{width:u,height:l}}const PG=(e,t)=>`${e.italic?"italic ":""} ${e.bold?"bold ":""} ${e["font-size"]||t.fontSize}px ${t.fontFamily} `;class wc{constructor(t,n){this.board=t,this.options=n,this.isEditing=!1,this.getSize=(r,i)=>{const o=window.getComputedStyle(this.foreignObject.children[0]),s=o.fontFamily,u=parseFloat(o.fontSize),l=r||this.editor.children[0];return Ov(l,{fontSize:u,fontFamily:s},i||this.options.getMaxWidth())},this.getText=()=>this.editor.children[0],this.options.getMaxWidth||(this.options.getMaxWidth=()=>999)}draw(t){const n=this.options.getRectangle();this.g=Te(),this.foreignObject=Qm(n.x,n.y,n.width,n.height),this.g.append(this.foreignObject),this.g.classList.add("text");const r={board:this.board,text:t,textPlugins:this.options.textPlugins,onChange:i=>{if(i.operations.some(o=>!vi.isSelectionOperation(o))){const{width:o,height:s}=this.getSize();this.options.onChange&&this.options.onChange({...i,width:o,height:s}),gr.set(this.board,!0)}},afterInit:i=>{this.editor=i},onComposition:i=>{if(i.type==="compositionend")return;const o=SG(this.editor,i.data);if(o){const s=this.getSize(o.children[0]);this.options.onChange&&this.options.onChange({...s}),gr.set(this.board,!0)}}};this.textComponentRef=this.board.renderText(this.foreignObject,r)}updateRectangleWidth(t){f9(this.g,t)}updateAngle(t,n=0){dr(this.g,t,n)}updateRectangle(t){const{x:n,y:r,width:i,height:o}=t||this.options.getRectangle();ia(this.g,i,o,n,r)}updateText(t){const n={text:t};this.textComponentRef.update(n)}edit(t,n){this.isEditing=!0,V1.set(this.board,!0);const r={readonly:!1};this.textComponentRef.update(r),K.select(this.editor,[0]);const i=Ds(document,"mousedown").subscribe(u=>{const l=Ce(this.board,xe(this.board,u.x,u.y)),a=this.options.getRenderRectangle?this.options.getRenderRectangle():this.options.getRectangle(),c=C.isHit(C.getRectangleByPoints([l,l]),a),f=u.target.closest(".plait-board-attached");!c&&!f&&G6(0).subscribe(()=>{s()})}),o=Ds(document,"keydown").subscribe(u=>{if(!u.isComposing&&(u.key==="Escape"||u.key==="Tab"||n&&n(u))){u.preventDefault(),u.stopPropagation(),s();return}}),s=()=>{if(this.isEditing){this.updateRectangle(),i.unsubscribe(),o.unsubscribe(),V1.set(this.board,!1),gr.set(this.board,!1),t&&t();const u={readonly:!0};this.textComponentRef.update(u),this.isEditing=!1,this.exitCallback=void 0}};return this.exitCallback=s,s}destroy(){var t,n;(t=this.g)==null||t.remove(),(n=this.textComponentRef)==null||n.destroy(),this.exitCallback&&this.exitCallback()}}const SG=(e,t)=>{if(e.selection&&G.isCollapsed(e.selection)){const[n,r]=x.node(e,e.selection),i=e.selection.anchor.offset,s={children:[JSON.parse(JSON.stringify(e.children[0]))]},u=n.text.slice(0,i+1)+t+n.text.slice(i+1),l=q.get(s,r);return l.text=u,s}return null},DG=e=>{const t=e;return t.renderText=(n,r)=>{throw new Error("No implementation for renderText method.")},t};var Yt;(function(e){e.left="left",e.center="center",e.right="right"})(Yt||(Yt={}));const TG=e=>{const t=e;return t.renderImage=(n,r)=>{throw new Error("No implementation for renderImage method.")},t},AG=({value:e,children:t,options:n,plugins:r,viewport:i,theme:o,onChange:s,onSelectionChange:u,onValueChange:l,onViewportChange:a,onThemeChange:c})=>{const[f,h]=A.useState(()=>{const y=BG(e,n,r,i,o),m=MG(y);return{v:0,board:y,listRender:m}}),{board:g,listRender:p}=f,d=A.useCallback(()=>{if(s){const y={children:g.children,operations:g.operations,viewport:g.viewport,selection:g.selection,theme:g.theme};s(y)}g.operations.some(y=>fv.isSetViewportOperation(y))&&(a==null||a(g.viewport)),h(y=>({v:y.v+1,board:g,listRender:p}))},[g,s,u,l]);return A.useEffect(()=>(Dh.set(g,()=>{p.update(g.children,{board:g,parent:g,parentG:P.getElementHost(g)})}),Th.set(g,()=>{d()}),()=>{Dh.set(g,()=>{}),Th.set(g,()=>{})}),[g,d]),D.jsx(gv.Provider,{value:f,children:t})},BG=(e,t,n,r,i)=>{let o=HR(AR(DR(TR($R(LR(SR(_R(NR(BL(TG(DG(PR(e,t)))))))))))));return n.forEach(s=>{o=s(o)}),r&&(o.viewport=r),i&&(o.theme=i),o},MG=e=>new iS(e);function RG(e,t){return Math.sqrt(kG(e,t))}function kG(e,t){return Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2)}function tu(e,t,n){return[e[0]+(t[0]-e[0])*n,e[1]+(t[1]-e[1])*n]}function OG(e,t){const n=e[t+0],r=e[t+1],i=e[t+2],o=e[t+3];let s=3*r[0]-2*n[0]-o[0];s*=s;let u=3*r[1]-2*n[1]-o[1];u*=u;let l=3*i[0]-2*o[0]-n[0];l*=l;let a=3*i[1]-2*o[1]-n[1];return a*=a,s<l&&(s=l),u<a&&(u=a),s+u}function mp(e,t,n,r){const i=r||[];if(OG(e,t)<n){const o=e[t+0];i.length?RG(i[i.length-1],o)>1&&i.push(o):i.push(o),i.push(e[t+3])}else{const s=e[t+0],u=e[t+1],l=e[t+2],a=e[t+3],c=tu(s,u,.5),f=tu(u,l,.5),h=tu(l,a,.5),g=tu(c,f,.5),p=tu(f,h,.5),d=tu(g,p,.5);mp([s,c,g,d],0,n,i),mp([d,p,h,a],0,n,i)}return i}function ei(e,t=.15,n){const r=[],i=(e.length-1)/3;for(let o=0;o<i;o++){const s=o*3;mp(e,s,t,r)}return r}const vp={isActive(e,t){const n=q.get(e,ex);if(n){const{align:r}=n;return r===t}return!1},setAlign(e,t){const n={align:t};K.setNodes(e,n,{at:ex})}},ex=[0];var Vt;(function(e){e.bold="bold",e.italic="italic",e.underline="underlined",e.strike="strike",e.color="color",e.fontSize="font-size"})(Vt||(Vt={}));const tx=[Vt.bold,Vt.color,Vt.italic,Vt.strike,Vt.underline,Vt.fontSize];var nx;(function(e){e.fontSize12="12",e.fontSize13="13",e.fontSize14="14",e.fontSize15="15",e.fontSize16="16",e.fontSize18="18",e.fontSize20="20",e.fontSize24="24",e.fontSize28="28",e.fontSize32="32",e.fontSize40="40",e.fontSize48="48"})(nx||(nx={}));Vt.bold,Vt.italic,Vt.underline,Vt.strike;const Fv=14,Ir={getMarks(e){const t={};let n=[];e.selection?n=e.selection:e.children&&e.children.length>0&&(n={anchor:x.start(e,[0]),focus:x.end(e,[0])});const r=x.nodes(e,{match:le.isText,at:n});for(const i of r){const[o]=i,{text:s,...u}=o;Object.assign(t,u)}for(const i in t)tx.includes(i)||delete t[i];return t},getMarksByElement(e){const t={},n=q.texts(e);for(const r of n){const[i]=r,{text:o,...s}=i;Object.assign(t,s)}for(const r in t)tx.includes(r)||delete t[r];return t},isMarkActive(e,t){var i,o;if(!(e!=null&&e.selection))return;const n=q.get(e,(o=(i=e==null?void 0:e.selection)==null?void 0:i.anchor)==null?void 0:o.path);if(!le.isText(n))return!1;const r=Ir.getMarks(e);return!!(r&&r[t])},toggleMark(e,t){ug(e),Ir.isMarkActive(e,t)?x.removeMark(e,t):x.addMark(e,t,!0)},setFontSizeMark(e,t,n=Fv){ug(e),Number(t)===n?x.removeMark(e,Vt.fontSize):x.addMark(e,Vt.fontSize,Number(t))},setColorMark(e,t,n=_t){ug(e),t===n||t===null||t===void 0?x.removeMark(e,"color"):x.addMark(e,"color",t)}};function ug(e){e.selection||K.select(e,[0])}const mD=20,vD=e=>{const n=Xs(e)[0];return!n||n.children.length===0?{}:Ir.getMarks(n)},FG=(e,t,n)=>{let r;if(n!=null&&n.length)r=n;else{const i=re(e);if(i.length){const o=KL(e);if(!o)return;const s=Ir.getMarks(o),u=i.filter(l=>Xs(l).some(c=>Ir.getMarks(c)[t]===s[t]));r=uD(e,u)}}r&&r.length&&r.forEach(i=>{Ir.toggleMark(i,t)})},bG=(e,t,n,r)=>{const i=bv(e,r);if(i&&i.length){const o=re(e);i.forEach(s=>{let u;if(typeof n=="function"){const l=o.find(a=>Xs(a).includes(s));u=n(l)}else u=n;Ir.setFontSizeMark(s,t,u)})}},IG=(e,t,n,r)=>{const i=bv(e,r);i&&i.length&&i.forEach(o=>{n&&K.select(o,n),t==="transparent"?x.removeMark(o,Vt.color):Ir.setColorMark(o,t)})},LG=(e,t,n)=>{const r=bv(e,n);r&&r.length&&r.forEach(i=>vp.setAlign(i,t))},bv=(e,t)=>{let n;return t!=null&&t.length?n=t:n=uD(e),n},GG={setTextAlign:LG,setTextColor:IG,setFontSize:bG,setTextMarks:FG};var pe;(function(e){e.rectangle="rectangle",e.ellipse="ellipse",e.diamond="diamond",e.roundRectangle="roundRectangle",e.parallelogram="parallelogram",e.text="text",e.triangle="triangle",e.leftArrow="leftArrow",e.trapezoid="trapezoid",e.rightArrow="rightArrow",e.cross="cross",e.star="star",e.pentagon="pentagon",e.hexagon="hexagon",e.octagon="octagon",e.pentagonArrow="pentagonArrow",e.processArrow="processArrow",e.twoWayArrow="twoWayArrow",e.comment="comment",e.roundComment="roundComment",e.cloud="cloud"})(pe||(pe={}));var he;(function(e){e.process="process",e.decision="decision",e.data="data",e.connector="connector",e.terminal="terminal",e.manualInput="manualInput",e.preparation="preparation",e.manualLoop="manualLoop",e.merge="merge",e.delay="delay",e.storedData="storedData",e.or="or",e.summingJunction="summingJunction",e.predefinedProcess="predefinedProcess",e.offPage="offPage",e.document="document",e.multiDocument="multiDocument",e.database="database",e.hardDisk="hardDisk",e.internalStorage="internalStorage",e.noteCurlyRight="noteCurlyRight",e.noteCurlyLeft="noteCurlyLeft",e.noteSquare="noteSquare",e.display="display"})(he||(he={}));var ae;(function(e){e.actor="actor",e.useCase="useCase",e.container="container",e.note="note",e.simpleClass="simpleClass",e.activityClass="activityClass",e.branchMerge="branchMerge",e.port="port",e.package="package",e.combinedFragment="combinedFragment",e.class="class",e.interface="interface",e.object="object",e.component="component",e.componentBox="componentBox",e.template="template",e.activation="activation",e.deletion="deletion",e.assembly="assembly",e.providedInterface="providedInterface",e.requiredInterface="requiredInterface"})(ae||(ae={}));var Qn;(function(e){e.name="name",e.content="content"})(Qn||(Qn={}));var Dn;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal"})(Dn||(Dn={}));var Or;(function(e){e.swimlaneVertical="swimlaneVertical",e.swimlaneHorizontal="swimlaneHorizontal",e.swimlaneVerticalWithHeader="swimlaneVerticalWithHeader",e.swimlaneHorizontalWithHeader="swimlaneHorizontalWithHeader"})(Or||(Or={}));var nl;(function(e){e.table="table"})(nl||(nl={}));const Ua={isTable:e=>e.type==="table",isVerticalText:e=>{var t;return((t=e.text)==null?void 0:t.direction)==="vertical"}},yD="plait-draw-plugin-key",oe={rectangleAndText:4},Iv={strokeWidth:2,defaultRadius:4,strokeColor:"#000",fill:KS},NG={strokeWidth:xt,selectionStrokeWidth:xt},Xa={width:100,height:100,strokeColor:_t,strokeWidth:2},rx={width:120,height:50},HG={width:138,height:80},ix={width:100,height:80},$G={width:120,height:100},Ho={width:36,height:20,text:"Text"},wD={defaultTextMaxWidth:34*14},lg={width:44,height:44},Wr={width:120,height:60},_G={width:70,height:80},jG={width:80,height:80},WG={width:140,height:70},zG={width:124,height:60},CD={width:120,height:70},ag={width:160,height:100},yp={width:120,height:80},VG={width:117,height:59},UG={width:47,height:33},XG={width:68,height:100},KG={width:300,height:240},YG={width:210,height:150,texts:[{id:Qn.name,text:"",align:Yt.left},{id:Qn.content,text:"",align:Yt.left}]},qG={width:18,height:80},af={width:120,height:60},ZG={width:200,height:150},ox={width:40,height:40},QG={width:20,height:20},JG={width:70,height:56},eN={width:120,height:56},tN={width:70,height:34},nN={width:400,height:280,texts:[{id:Qn.name,text:"Opt | Alt | Loop",align:Yt.left},{id:Qn.content,text:"[Condition]",align:Yt.left}]},rN={width:230,height:180,texts:[{text:"Class",align:Yt.center},{text:`+ attribute1:type  defaultValue
+ attribute2:type
- attribute3:type`,align:Yt.left},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:Yt.left}]},iN={width:230,height:140,texts:[{text:`<<interface>>
Interface`,align:Yt.center},{text:`+ operation1(params):returnType
- operation2(params)
- operation3()`,align:Yt.left}]},xD={[pe.pentagonArrow]:rx,[pe.processArrow]:rx,[pe.cloud]:$G,[pe.twoWayArrow]:HG,[pe.leftArrow]:ix,[pe.rightArrow]:ix},ED={[he.connector]:lg,[he.process]:Wr,[he.decision]:WG,[he.data]:zG,[he.terminal]:Wr,[he.manualInput]:VG,[he.preparation]:Wr,[he.manualLoop]:Wr,[he.merge]:UG,[he.delay]:Wr,[he.storedData]:Wr,[he.or]:lg,[he.summingJunction]:lg,[he.predefinedProcess]:Wr,[he.offPage]:Wr,[he.document]:CD,[he.multiDocument]:yp,[he.database]:_G,[he.hardDisk]:Wr,[he.internalStorage]:jG,[he.noteCurlyLeft]:ag,[he.noteCurlyRight]:ag,[he.noteSquare]:ag,[he.display]:Wr},PD={[ae.actor]:XG,[ae.useCase]:CD,[ae.container]:KG,[ae.note]:af,[ae.package]:YG,[ae.combinedFragment]:nN,[ae.class]:rN,[ae.interface]:iN,[ae.activation]:qG,[ae.object]:af,[ae.deletion]:ox,[ae.activityClass]:af,[ae.simpleClass]:af,[ae.component]:yp,[ae.template]:yp,[ae.componentBox]:ZG,[ae.port]:QG,[ae.branchMerge]:ox,[ae.assembly]:eN,[ae.providedInterface]:tN,[ae.requiredInterface]:JG},oN={[ae.package]:Object.keys(Qn),[ae.combinedFragment]:Object.keys(Qn)},$h=10,sN=6,uN=8,SD=[he.or,he.summingJunction,ae.activation,ae.deletion,ae.port,ae.branchMerge,ae.assembly,ae.providedInterface,ae.requiredInterface],lN=[ae.package,ae.combinedFragment],aN=[he.noteCurlyLeft,he.noteCurlyRight,he.noteSquare,ae.requiredInterface,ae.deletion],Lv=()=>[...Object.keys(pe),...Object.keys(he),...Object.keys(ae)],DD=()=>Object.keys(Or),cN=()=>Object.keys(he),fN=()=>Object.keys(ae),hN=()=>Object.keys(et),dN=()=>Object.keys(Xh),gN=1e3,TD={[nn.default]:{strokeColor:_t,fill:"#FFFFFF"},[nn.colorful]:{strokeColor:"#06ADBF",fill:"#CDEFF2"},[nn.soft]:{strokeColor:"#6D89C1",fill:"#DADFEB"},[nn.retro]:{strokeColor:"#E9C358",fill:"#F6EDCF"},[nn.dark]:{strokeColor:"#FFFFFF",fill:"#434343"},[nn.starry]:{strokeColor:"#42ABE5",fill:"#163F5A"}},Il=42,pN={width:580,height:524},mN={width:524,height:580},vN={width:580,height:524},yN={width:524,height:580},AD={[Or.swimlaneHorizontal]:yN,[Or.swimlaneVertical]:vN,[Or.swimlaneHorizontalWithHeader]:mN,[Or.swimlaneVerticalWithHeader]:pN},_h=5,$o=e=>I.isImage(e)?pe.rectangle:I.isTable(e)?nl.table:e.shape,Ka=new WeakMap,sx=(e,t,n,r)=>{const i=Ka.get(e);return Ka.set(e,{...i,[XD(t,n)]:r})},ca=(e,t,n)=>Ka.get(e)[XD(t,n)],ux=(e,t)=>{const n=Ka.get(e);delete n[t],Ka.set(e,n)};class Gv{get shape(){return this.element.shape||this.element.type}constructor(t,n,r,i){this.board=t,this.texts=r,this.element=n,this.options=i}initialize(){const t=(this.board.getPluginOptions(dp)||{}).textPlugins;this.textManages=this.texts.map(r=>{const i=this.createTextManage(r,t);return sx(this.board,this.element,r,i),i}),Ue.getElementRef(this.element).initializeTextManage(this.textManages)}draw(t){const n=C.getCenterPoint(this.board.getRectangle(this.element));this.texts.forEach(r=>{const i=ca(this.board,this.element,r);r.text&&i&&(i.draw(r.text),t.append(i.g),(this.element.angle||this.element.angle===0)&&i.updateAngle(n,this.element.angle))})}update(t,n,r,i){this.element=t;const o=C.getCenterPoint(this.board.getRectangle(this.element)),s=(this.board.getPluginOptions(dp)||{}).textPlugins,u=n.filter(l=>!r.find(a=>a.id===l.id));u.length&&u.forEach(l=>{const a=ca(this.board,t,l),c=this.textManages.findIndex(f=>f===a);c>-1&&l.text&&l.textHeight&&this.textManages.splice(c,1),a==null||a.destroy(),ux(this.board,l.id)}),r.forEach(l=>{if(l.text){let a=ca(this.board,this.element,l);a?(a.updateText(l.text),a.updateRectangle()):(a=this.createTextManage(l,s),sx(this.board,t,l,a),a.draw(l.text),i.append(a.g),this.textManages.push(a)),(this.element.angle||this.element.angle===0)&&a.updateAngle(o,this.element.angle)}})}createTextManage(t,n){return new wc(this.board,{getRectangle:()=>this.getRectangle(t),onChange:i=>this.options.onChange(this.element,i,t),getMaxWidth:()=>this.getMaxWidth(t),getRenderRectangle:()=>this.options.getRenderRectangle?this.options.getRenderRectangle(this.element,t):this.getRectangle(t),textPlugins:n})}getRectangle(t){const n=Zt(this.shape).getTextRectangle;return n?n(this.element,t):St(this.element)}getMaxWidth(t){return this.options.getMaxWidth?this.options.getMaxWidth():this.getRectangle(t).width}destroy(){Ue.getElementRef(this.element).destroyTextManage(),this.textManages=[],this.texts.forEach(n=>{ux(this.board,n.id)})}}const wN=e=>{const t=re(e);return t&&t.length===1&&I.isElementByTable(t[0])},BD=e=>{const t=re(e);return t&&t.length===1&&I.isElementByTable(t[0])},MD=(e,t)=>re(e).filter(r=>I.isElementByTable(r)),Nv=new WeakMap;function us(e){return Nv.get(e)}function RD(e,t){return Nv.set(e,t)}function lx(e){return Nv.delete(e)}function Cc(e,t){const n=e==null?void 0:e.buildTable(t);if(!n||!n.points||!n.columns||!n.rows)throw new Error("can not get table cells points");const r=C.getRectangleByPoints(n.points),i=n.columns.length,o=n.rows.length,s=ax(n.columns,r.width,i,!0),u=ax(n.rows,r.height,o,!1);return n.cells.map(a=>{const c=n.rows.findIndex(v=>v.id===a.rowId),f=n.columns.findIndex(v=>v.id===a.columnId);let h=r.x;for(let v=0;v<f;v++)h+=s[v];let g=r.y;for(let v=0;v<c;v++)g+=u[v];const p=cx(a,s,f,!0),d=h+p,y=cx(a,u,c,!1),m=g+y;return{...a,points:[[h,g],[d,m]]}})}function qs(e,t,n){try{const r=Cc(e,t),i=r&&t.cells.findIndex(o=>o.id===n);return r[i]}catch{throw new Error("can not get table cell points")}}function ax(e,t,n,r){const i=[],o=r?"width":"height";let s=t;e.forEach((a,c)=>{a[o]&&(i[c]=a[o],s-=a[o])});const u=n-i.filter(a=>!!a).length,l=u>0?s/u:0;for(let a=0;a<n;a++)i[a]||(i[a]=l);return i}function cx(e,t,n,r){const i=r?e.colspan||1:e.rowspan||1;let o=0;for(let s=0;s<i;s++){const u=n+s;o+=t[u]}return o}function fx(e,t,n){const r=e.buildTable(t),i=Cc(e,r),o=C.getRectangleByPoints([n,n]),s=i.find(u=>{const l=C.getRectangleByPoints(u.points);return C.isHit(o,l)});return s?r.cells.find(u=>u.id===s.id):null}function hx(e,t){const n=Hv(e,t);n&&n.edit()}function Hv(e,t){return ca(e,void 0,t)}const kD=(e,t,n,r)=>{const i=e.columns.map(s=>s.id===t?{...s,width:n}:s),o=[e.points[0],[e.points[1][0]+r,e.points[1][1]]];return{columns:i,points:o}},OD=(e,t,n,r)=>{const i=e.rows.map(s=>s.id===t?{...s,height:n}:s),o=[e.points[0],[e.points[1][0],e.points[1][1]+r]];return{rows:i,points:o}};function CN(e,t,n,r){const i=`${r}Id`;e.forEach(o=>{o[i]===t&&(o[i]=n)})}function dx(e,t){e[`${t}s`].forEach(n=>{const r=Ve();CN(e.cells,n.id,r,t),n.id=r})}function xN(e){e.forEach(t=>{const n=Ve();t.id=n})}function FD(e){return e.text&&e.textHeight}function EN(e,t,n){const r=Cc(e,t),i=n.map(o=>r.find(u=>u.id===o.id).points);return C.getRectangleByPoints(i)}const cg=(e,t,n=null)=>{const r={id:Ve(),rowId:e,columnId:t};return n!==null&&(r.textHeight=mD,r.text={children:[{text:n}],align:Yt.center}),r},bD=e=>{if(BD(e)){const t=MD(e),n=us(t[0]),r=n==null?void 0:n.map(i=>{const o=Hv(e,i);return o==null?void 0:o.editor});if(r!=null&&r.length)return r}},PN=6,fg=new WeakMap,jh=e=>{let t="";switch(!0){case I.isText(e):{t=jn.text;break}case I.isBasicShape(e):{t=jn.basicShape;break}case I.isFlowchart(e):{t=jn.flowchart;break}case I.isArrowLine(e):{t=jn.arrowLine;break}case I.isUML(e):t=jn.UML}return t},ID=()=>({...zd(jn.arrowLine)}),_o=e=>{let t="";I.isBasicShape({shape:e})?t=e===pe.text?jn.text:jn.basicShape:I.isUML({shape:e})?t=jn.UML:t=jn.flowchart;const n={...zd(t)},r={...n.text};return delete n.text,{textProperties:r,geometryProperties:n}},$v=(e,t)=>{var o;const n=jh(e);let r=((o=zd(n))==null?void 0:o.text)||{};const i=t.find(s=>s.type==="set_node");if(i){const{properties:s,newProperties:u}=i;for(const l in u){const a=u[l];a==null?delete r[l]:r[l]=a}for(const l in s)u.hasOwnProperty(l)||delete r[l];kv(n,"text",r)}},SN=(e,t)=>{const n=fg.has(e)?fg.get(e):[],r=n.indexOf(t);t===pe.text||r===0||(r!==-1?n.splice(r,1):n.length===PN&&n.pop(),n.unshift(t),fg.set(e,n))},_v=(e,t,n)=>{const r=t.texts;if(!r.length)return-1;const i=On(e,t);return r.findIndex(o=>{const s=JS(i,o.position),u={x:s[0]-o.width/2,y:s[1]-o.height/2,width:o.width,height:o.height};return C.isHit(u,C.getRectangleByPoints([n,n]))})},jv=e=>lN.includes(e),Di=e=>I.isGeometry(e)&&jv(e.shape),DN=e=>oN[e],TN=(e,t,n={})=>{const r=Ve(),i=AN(e);return{id:r,type:"geometry",shape:e,angle:0,opacity:1,texts:i,points:t,...n}},AN=e=>{var u;const n={..._o(e).textProperties},r=n==null?void 0:n.align,i=(n==null?void 0:n.textHeight)||Ho.height;n==null||delete n.align,n==null||delete n.textHeight;const o=((u=qv(e))==null?void 0:u.texts)||[];return(DN(e)||[]).map(l=>{const a=o==null?void 0:o.find(c=>(c==null?void 0:c.key)===l);return{id:l,text:Ks((a==null?void 0:a.text)||"",r||(a==null?void 0:a.align)||Yt.center,n),textHeight:i}})},BN=(e,t)=>{const n=Zt(e.shape),r=C.getRectangleByPoints([t,t]);let i;return n.getTextRectangle&&(i=e.texts.find(o=>{const s=n.getTextRectangle(e,{id:o.id});return C.isHit(r,s)})),i},LD={strokeWidth:2,strokeColor:"#000"},MN=4,RN=6,kN=.6,ON=.8,FN=10,Du=3,GD="Text";class ND extends In{canDraw(t){return!0}draw(t){let n;return n=LN(this.board,t),n}}const Rs=(e,t)=>{switch(t.shape){case Za.straight:return t.points;case Za.curve:{if(t.points.length===2)return ei(t.points);{let n=t.points;const r=gc(n);return ei(r)}}default:return null}},bN=(e,t,n)=>({id:Ve(),type:"vector-line",shape:e,opacity:1,points:t,...n}),IN=(e,t,n,r,i)=>{const o=new ND(e),s=ID(),u=bN(t,[...n,r],{strokeWidth:LD.strokeWidth,...s}),l=n[n.length-1];return u.points[u.points.length-1]=Uv(l,r),o.processDrawing(u,i),P.getElementActiveHost(e).append(i),u},LN=(e,t)=>{const n=Me(t),r=Pc(e,t),i=Vd(e,t),o=Go(i,n),s=Vv(e,t),u={stroke:r,strokeWidth:n,strokeLineDash:o,fill:s},l=Te();let a=Rs(e,t);const c=Zn(a,u),f=Ve();return c.setAttribute("mask",`url(#${f})`),t.strokeStyle===mr.dotted&&ke(c,"round"),l.appendChild(c),l},HD=(e,t,n)=>_v(e,t,n)!==-1,Ya=(e,t)=>w5(e,t)<=g5,$D=(e,t,n)=>{const r=On(e,t);return HD(e,t,n)||Ya(r,n)},_D=(e,t,n)=>{const r=Rs(e,t);return Ec(t.points)&&yo(n,r)||Ya(r,n)},GN=(e,t)=>{const n=Zt(e.shape);if(Di(e))return e.texts.some(i=>{const o=n.getTextRectangle(e,{id:i.id});return Wh(t,C.getCornerPoints(o),e.angle)});{const r=n.getTextRectangle?n.getTextRectangle(e):St(e);return Wh(t,C.getCornerPoints(r),e.angle)}},jD=(e,t)=>{const n=Zt(e.shape);if(Di(e))return e.texts.some(i=>{const o=n.getTextRectangle(e,{id:i.id});return C.isPointInRectangle(o,t)});{const r=n.getTextRectangle?n.getTextRectangle(e):St(e);return C.isPointInRectangle(r,t)}},NN=(e,t,n)=>{const r=C.getRectangleByPoints([n.anchor,n.focus]);if(I.isGeometry(t)){const i=gx(e,r,t);return i||GN(t,r)}if(I.isImage(t))return gx(e,r,t);if(I.isArrowLine(t)){const i=On(e,t);return Bh(i,r)}if(I.isVectorLine(t)){const i=Rs(e,t);return Bh(i,r,!1)}return null},gx=(e,t,n)=>{const r=C.getRectangleByPoints(n.points);return Wh(t,C.getCornerPoints(r),n.angle)},Wh=(e,t,n)=>{let r=nR(t,n)||t;return Bh(r,e)},WD=(e,t)=>{let n=HN(e,t),r=t.length;n&&(r=t.indexOf(n)+1);const i=t.slice(0,r),o=$N(i);return o||aG(e,i,"asc")[0]},HN=(e,t)=>{let n=null;for(let r=0;r<t.length;r++){const i=t[r];if(VD(e,i)||xc(i)){const o=Vv(e,i);if(cG(o)){n=i;break}}}return n},$N=e=>{const t=e.filter(r=>I.isText(r));if(t.length)return t[0];const n=e.filter(r=>I.isArrowLine(r));return n.length?n[0]:null},_N=(e,t,n)=>{const r=e.getRectangle(t);if(n=Co(n,t)||n,I.isGeometry(t)){if(zD(e,t,n,g5))return!0;const i=Zt($o(t));if(I.isText(t)){const s=St(t);return C.isPointInRectangle(s,n)}return jD(t,n)||i.isInsidePoint(r,n)}if(I.isImage(t)){const i=C.getRectangleByPoints(t.points);return C.isPointInRectangle(i,n)}return I.isArrowLine(t)?$D(e,t,n):I.isVectorLine(t)?_D(e,t,n):null},zD=(e,t,n,r)=>{const i=eT(t,n);return Ze(i[0],i[1],n[0],n[1])<=r},jN=(e,t,n,r)=>{const i=C.inflate(C.getRectangleByPoints(t.points),r);return Zt($o(t)).isInsidePoint(i,n)},WN=(e,t,n)=>{const r=e.getRectangle(t);if(n=Co(n,t)||n,I.isGeometry(t)&&!I.isGeometryByTable(t)){const i=Zt($o(t)),o=i.isInsidePoint(r,n);if(o)return o;if(i.getTextRectangle){const s=jD(t,n);if(s)return s}}if(I.isImage(t)){const i=C.getRectangleByPoints(t.points);return C.isPointInRectangle(i,n)}return I.isArrowLine(t)?$D(e,t,n):I.isVectorLine(t)?_D(e,t,n):null},St=e=>{const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+oe.rectangleAndText+n,y:t.y+(t.height-r)/2}},Me=e=>I.isText(e)?0:e.strokeWidth||Iv.strokeWidth,So=(e,t)=>{SN(e,t.shape),ee.insertNode(e,t,[e.children.length]),zs(e),Fo(e,t),Je.updatePointerType(e,$e.selection)},zN=e=>I.isText(e)?!0:I.isImage(e)?!1:I.isGeometry(e)?Qv(e):I.isArrowLine(e)?Xs(e).length>0:I.isElementByTable(e)?e.cells.some(t=>FD(t)):!0,VN=e=>e.some(t=>zN(t)),xc=e=>I.isText(e)||I.isArrowLine(e)||I.isImage(e)?!1:I.isVectorLine(e)?Ec(e.points):I.isGeometry(e)?TH(e):!0,VD=(e,t)=>I.isCustomGeometryElement(e,t)&&Ec(t.points),Wv=(e,t)=>{let n=UD(e,t);if(n){const r=zv(e,n,t);if(r.isHitConnector||r.isHitEdge)return n}return null},zv=(e,t,n)=>{const r=Co(n,t)||n,i=cH(r,t),o=eT(t,r);return{isHitEdge:zD(e,t,r,sN),isHitConnector:!!i,connectorPoint:i,edgePoint:o}},UD=(e,t,n=$h)=>{let r=null;return UN(e,i=>{r===null&&jN(e,i,Co(t,i)||t,n*2)&&(r=i)}),r},UN=(e,t)=>{on(e,n=>{!P.isBoard(n)&&I.isShapeElement(n)&&t(n)},Ws(e),!0)},px=(e,t,n,r,i)=>Zt(n).draw(e,t,r,i),XN=(e,t,n={hasMask:!0,hasConnector:!0})=>{const r=Te(),i=C.getRectangleByPoints(t.points),o=C.inflate(i,W1),s=$o(t);let u={};I.isElementByTable(t)&&(u={element:t});const l=px(e,o,s,{stroke:Rn,strokeWidth:W1},u);if(r.appendChild(l),n.hasMask){const a=px(e,o,s,{stroke:Rn,strokeWidth:0,fill:xc(t)?Jm:Iv.fill,fillStyle:"solid"},u);r.appendChild(a)}return n.hasConnector&&Zt(s).getConnectorPoints(i).forEach(c=>{const f=Vs(P.getRoughSVG(e),c,8,{stroke:Rn,strokeWidth:xt,fill:"#FFF",fillStyle:"solid"});r.appendChild(f)}),r},XD=(e,t)=>e&&Di(e)?`${e.id}-${t.id}`:t.id,Ec=e=>{const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]},Pc=(e,t)=>{const n=EH(e.theme.themeColorMode);return t.strokeColor||n},Vv=(e,t)=>{const n=xc(t)||VD(e,t)?PH(e.theme.themeColorMode):Iv.fill;return t.fill||n},Vd=(e,t)=>t.strokeStyle||mr.solid,KN="debug:plait:line-mirror",cf=pc(KN),Uv=(e,t)=>{const n=[...t];return me.isVertical(n,e,Du)&&(n[0]=e[0]),me.isHorizontal(n,e,Du)&&(n[1]=e[1]),n};function YN(e,t,n,r){const i={previous:null,next:null},o=e[r],s=e[r+1],u=me.isHorizontal(o,s),l=me.isVertical(o,s),a=e[r-1]??e[0],c=e[r-2]??t;(u&&me.isHorizontal(c,a)||l&&me.isVertical(c,a))&&(i.previous=a);const f=e[r+2]??e[e.length-1],h=e[r+3]??n;return(u&&me.isHorizontal(f,h)||l&&me.isVertical(f,h))&&(i.next=f),i}function qN(e,t,n,r){let i=e,o=t;if(me.isHorizontal(e,t)){const s=me.getOffsetY(n.startPoint,n.endPoint);let u=e[1]+s;r.previous&&Math.abs(r.previous[1]-u)<Du?u=r.previous[1]:r.next&&Math.abs(r.next[1]-u)<Du&&(u=r.next[1]),i=[e[0],u],o=[t[0],u]}if(me.isVertical(e,t)){const s=me.getOffsetX(n.startPoint,n.endPoint);let u=e[0]+s;r.previous&&Math.abs(r.previous[0]-u)<Du?u=r.previous[0]:r.next&&Math.abs(r.next[0]-u)<Du&&(u=r.next[0]),i=[u,e[1]],o=[u,t[1]]}return[i,o]}function KD(e,t,n,r,i){let o=null,s=null;const u=r[i],l=r[i+1];if(!u||!l)return{index:o,deleteCount:s};const a=n.slice(1,-1),c=a.findIndex(h=>me.isEquals(h,u)),f=a.findIndex(h=>me.isEquals(h,l));if(Math.max(c,f)>-1){if(c>-1&&f>-1)return{index:c,deleteCount:2};if(c>-1&&f===-1)return c<a.length-1&&me.isAlign([a[c],a[c+1],u,l])?{index:c,deleteCount:2}:{index:c,deleteCount:1};if(c===-1&&f>-1)return f>0&&me.isAlign([a[f],a[f-1],u,l])?{index:f-1,deleteCount:2}:{index:f,deleteCount:1}}else for(let h=0;h<a.length-1;h++){const g=a[h],p=a[h+1];if(me.isAlign([g,p,u,l])){o=h,s=2;break}if(me.isAlign([g,p,u])){o=Math.min(h+1,a.length-1),s=1;break}if(me.isAlign([g,p,l])){o=Math.max(h-1,0),s=1;break}}if(o===null)if(s=0,a.length>0){const h=Dc(e,t),g=Tc(e,t,h),p=el(fD(g,e)),d=gi(p.slice(1,p.length-1)),y=[r[0],...a,r[r.length-1]],m=YD(e,y,d,g);for(let v=i-1;v>=0;v--){const w=m.slice(1,-1).findIndex(E=>me.isEquals(E,r[v]));if(w>-1){o=w+1;break}}o===null&&(o=0,me.isAlign(r)&&(s=a.length))}else o=0;return{index:o,deleteCount:s}}function YD(e,t,n,r){for(let i=1;i<t.length-2;i++)ZN(e,i,t,n,r);return t}const ZN=(e,t,n,r,i)=>{const o=n[t-1],s=n[t],u=n[t+1],l=n[t+2],a=[o,s],c=[u,l],f=me.isAlign(a),h=me.isAlign(c);let g=!1,p=!1;if(!f||!h){const d=wp(r,a[0],a[1]),y=wp(r,c[0],c[1]),m=d.length>0&&y.length>0;g=!f&&!m,p=!h&&!m}if(g||p){const d=[s,u],y=JN(d,r),m=eH(e,d,y,i.sourceRectangle,i.targetRectangle);if(m.length===1){const v=m[0];g&&n.splice(t,1,v[0]),p&&n.splice(t+1,1,v[1])}else{const w=me.isHorizontal(s,u)?0:1;if(g){const E=[s[0],s[1]];E[w]=o[w],n.splice(t,1,E)}if(p){const E=[u[0],u[1]];E[w]=l[w],n.splice(t+1,1,E)}}}};function QN(e,t,n,r,i){const{deleteCount:o}=KD(e,t,n,r,i);return o!==null&&o>1}function wp(e,t,n){let r=[],i=-1,o=-1;for(let s=0;s<e.length;s++)if(me.isAlign([e[s],t])&&(i=s),i>-1&&me.isAlign([e[s],n])){o=s;break}return i>-1&&o>-1&&(r=e.slice(i,o+1)),r}function JN(e,t){const n=me.isHorizontal(e[0],e[1]),r=[];for(let i=0;i<t.length-1;i++){const o=t[i],s=t[i+1],u=me.isHorizontal(o,s,.1);n&&u&&r.push([o,s]),!n&&!u&&r.push([o,s])}return r}function eH(e,t,n,r,i){cf.isDebug()&&cf.clear();const o=[];for(let s=0;s<n.length;s++){const u=n[s],l=[t[0][0],t[0][1]],a=[t[1][0],t[1][1]],f=me.isHorizontal(l,a)?0:1;l[f]=u[0][f],a[f]=u[1][f];const h=C.getRectangleByPoints([l,a,...u]);!C.isHit(h,r)&&!C.isHit(h,i)&&(o.push([l,a]),cf.isDebug()&&cf.drawPolygon(e,C.getCornerPoints(h)))}return o}const qD=e=>e.length===1?!0:e.some((t,n)=>{const r=e[n-1],i=e[n+1],o=r&&[r,t],s=i&&[t,i],u=o&&me.isAlign(o),l=s&&me.isAlign(s);return n===0?!l:n===e.length-1?!u:!u&&!l}),mx=20,tH=(e,t,n)=>{const r=Te();if(Nt.isSourceMark(e,Ft.none)&&Nt.isTargetMark(e,Ft.none))return null;const i=Me(e),o=i*i/3;if(t.length===1&&(t=[t[0],[t[0][0]+.1,t[0][1]]]),!Nt.isSourceMark(e,Ft.none)){const s=Va(t[0],t[1],mx+o),u=vx(e,{marker:e.source.marker,source:s,target:t[0],isSource:!0},n);u&&r.appendChild(u)}if(!Nt.isTargetMark(e,Ft.none)){const s=Va(t[t.length-1],t[t.length-2],mx+o),u=vx(e,{marker:e.target.marker,source:s,target:t[t.length-1],isSource:!1},n);u&&r.appendChild(u)}return r},vx=(e,t,n)=>{const{marker:r,target:i,source:o,isSource:s}=t;let u;switch(r){case Ft.openTriangle:{u=oH(e,o,i,n);break}case Ft.solidTriangle:{u=iH(o,i,n);break}case Ft.arrow:{u=rH(e,o,i,n);break}case Ft.sharpArrow:{u=nH(o,i,n);break}case Ft.oneSideUp:{u=yx(o,i,s?"down":"up",n);break}case Ft.oneSideDown:{u=yx(o,i,s?"up":"down",n);break}case Ft.hollowTriangle:{u=uH(o,i,n);break}case Ft.singleSlash:{u=sH(o,i,s,n);break}}return u},nH=(e,t,n)=>{const r=t,{pointLeft:i,pointRight:o}=dl(e,t,20),s=Te(),u=Zm();let l=`M${o[0]},${o[1]}A25,25,20,0,1,${i[0]},${i[1]}L${r[0]},${r[1]}Z`;return u.setAttribute("d",l),u.setAttribute("stroke",`${n==null?void 0:n.stroke}`),u.setAttribute("stroke-width",`${n==null?void 0:n.strokeWidth}`),u.setAttribute("fill",`${n==null?void 0:n.stroke}`),s.appendChild(u),s},rH=(e,t,n,r)=>{const i=it(t,n),o=Me(e),s=[n[0]+o*i[0]/2,n[1]+o*i[1]/2],u=Ze(...t,...s),l=[s[0]-(u*3/5+o)/2*i[0],s[1]-(u*3/5+o)/2*i[1]],{pointLeft:a,pointRight:c}=dl(t,s,30),f=Zn([a,s,c,l],{...r,fill:r.stroke},!0);return f.querySelector("path").setAttribute("stroke-linejoin","round"),f},iH=(e,t,n)=>{const r=t,{pointLeft:i,pointRight:o}=dl(e,r,30);return Zn([i,r,o],{...n,fill:n.stroke},!0)},oH=(e,t,n,r)=>{const i=it(t,n),o=Me(e),s=[n[0]+o*i[0]/2,n[1]+o*i[1]/2],{pointLeft:u,pointRight:l}=dl(t,s,40);return Zn([u,s,l],r)},yx=(e,t,n,r)=>{const{pointLeft:i,pointRight:o}=dl(e,t,40);return Zn([n==="up"?o:i,t],r)},sH=(e,t,n,r)=>{const i=Ze(...e,...t),o=Va(t,e,i/2),s=n?120:60,u=qu(...e,...o,s*Math.PI/180),l=qu(...t,...o,s*Math.PI/180);return Zn([u,l],r)},uH=(e,t,n)=>{const{pointLeft:r,pointRight:i}=dl(e,t,30);return Zn([r,i,t],{...n,fill:"white"},!0)};class ZD extends In{canDraw(t){return!0}draw(t){let n;return n=aH(this.board,t),n}}const lH=(e,t,n,r,i,o)=>({id:Ve(),type:"arrow-line",shape:e,source:n,texts:i||[],target:r,opacity:1,points:t,...o}),On=(e,t)=>{switch(t.shape){case et.elbow:return Ud(e,t);case et.curve:return QD(e,t);default:{const n=Nt.getPoints(e,t),r=Dc(e,t);return n[0]=r.source.point,n[n.length-1]=r.target.point,n}}},QD=(e,t)=>{if(t.points.length===2){const n=Dc(e,t),{source:r,target:i}=n,o=n.source.boundElement,s=n.target.boundElement;let u=[r.point];const a=12+Ze(...r.point,...i.point)/3;if(o&&u.push(Su(r.point,r.vector,a)),s&&u.push(Su(i.point,i.vector,a)),o&&!s||!o&&s){u.push(i.point);const f=hH(u);return ei(f)}return!o&&!s&&(u.push(Su(r.point,r.vector,a)),u.push(Su(i.point,i.vector,a))),u.push(i.point),ei(u)}else{let n=Nt.getPoints(e,t);n=el(n);const r=gc(n);return ei(r)}},aH=(e,t)=>{const n=Me(t),r=Pc(e,t),i=Vd(e,t),o=Go(i,n),s={stroke:r,strokeWidth:n,strokeLineDash:o},u=Te();let l=On(e,t),a;t.shape===et.curve?a=P.getRoughSVG(e).curve(l,s):a=Zn(l,s);const c=Ve();a.setAttribute("mask",`url(#${c})`),t.strokeStyle===mr.dotted&&ke(a,"round"),u.appendChild(a);const{mask:f,maskTargetFillRect:h}=dH(e,t,c);u.appendChild(f),a.appendChild(h);const g=tH(t,l,{stroke:r,strokeWidth:n});return g&&u.appendChild(g),u},qa=(e,t,n)=>{let r=C.getRectangleByPoints(n.points);const i=zv(e,n,t),o=i.connectorPoint||i.edgePoint;return[(o[0]-r.x)/r.width,(o[1]-r.y)/r.height]},cH=(e,t)=>{const n=C.getRectangleByPoints(t.points),r=$o(t);return Zt(r).getConnectorPoints(n).find(o=>Ze(...o,...e)<=uN)},Xv=(e,t,n)=>{const r=t.texts[n],i=On(e,t),o=JS(i,r.position);return{x:o[0]-r.width/2,y:o[1]-r.height/2,width:r.width,height:r.height}},fH=e=>gl(e,{match:t=>I.isArrowLine(t),recursion:t=>I.isDrawElement(t)}),hH=e=>{const t=[],n=e.length/3;for(let r=0;r<n;r++){const i=e[r],o=e[r+1],s=e[r+2],u=Ze(...i,...o),l=Ze(...s,...o),a=Va(i,o,u*2/3),c=Va(s,o,l*2/3);t.push(i,a,c,s)}return t},JD=(e,t,n,r,i,o)=>{const s=Wv(e,r),u=s?qa(e,r,s):void 0,l=i?qa(e,n,i):void 0,a=s?s.id:void 0,c=new ZD(e),f=ID();let h,g;h=f.source,g=f.target,h&&delete f.source,g&&delete f.target;const p=lH(t,[n,r],{marker:h||Ft.none,connection:l,boundId:i==null?void 0:i.id},{marker:g||Ft.arrow,connection:u,boundId:a},[],{strokeWidth:LD.strokeWidth,...f}),y=On(e,p)[0];return p.points[1]=Uv(y,r),c.processDrawing(p,o),P.getElementActiveHost(e).append(o),p};function dH(e,t,n){const r=s9();r.setAttribute("id",n);const i=On(e,t);let o=C.getRectangleByPoints(i);o=C.getOutlineRectangle(o,-30);const s=Y0(o,{fill:"white"});r.appendChild(s),t.texts.forEach((a,c)=>{let f=Xv(e,t,c);f=C.inflate(f,MN*2);const h=Y0(f,{fill:"black"});r.appendChild(h)});const l=Y0(o);return l.setAttribute("opacity","0"),l.setAttribute("fill","none"),{mask:r,maskTargetFillRect:l}}const gH=(e,t,n)=>{const r=_o(t),i={id:Ve(),type:"geometry",angle:0,opacity:1,points:n,strokeWidth:Xa.strokeWidth,...r.geometryProperties};let o,s;return t===ae.class?(o=[{id:Ve(),height:30},{id:Ve()},{id:Ve()}],s=[{id:Ve()}]):(o=[{id:Ve(),height:50},{id:Ve()}],s=[{id:Ve()}]),{...i,shape:t,rows:o,columns:s,cells:pH(e,o,s,t)}},pH=(e,t,n,r)=>{var l;const i=_o(r),o=t.length*n.length,s=((l=qv(r))==null?void 0:l.texts)||[],u=s.map(a=>Sc(e,a.text||Ho.text,i.textProperties["font-size"]).height);return new Array(o).fill("").map((a,c)=>{const f=Math.floor(c/n.length),h=c%n.length;return{id:Ve(),rowId:t[f].id,columnId:n[h].id,textHeight:u[c],text:{children:[{text:s[c].text}],align:s[c].align}}})},Kv=(e,t,n,r={},i={})=>SD.includes(e)?vH(e,t,r):mH(e,t,n,r,i),mH=(e,t,n,r={},i={})=>{let o={},s=Yt.center,u=Ho.height;return e===pe.text&&(o={autoSize:!0},s=void 0),i={...i},i!=null&&i.align&&(s=i==null?void 0:i.align),i!=null&&i.textHeight&&(u=i==null?void 0:i.textHeight),i==null||delete i.align,i==null||delete i.textHeight,{id:Ve(),type:"geometry",shape:e,angle:0,opacity:1,textHeight:u,text:Ks(n,s,i),points:t,...o,...r}},vH=(e,t,n={})=>({id:Ve(),type:"geometry",shape:e,angle:0,opacity:1,points:t,...n}),yH=(e,t,n,r)=>Zt(n).draw(e,t,r),eT=(e,t)=>{const n=C.getRectangleByPoints(e.points),r=$o(e);return Zt(r).getNearestPoint(n,t)},wH=e=>ED[e],CH=e=>xD[e]||Xa,xH=e=>PD[e],Yv=e=>{const t=(12+lr/2)*2;let n=C.getRectangleByPoints(e.points);return n=C.inflate(n,t),C.getEdgeCenterPoints(n)},tT=(e,t)=>t.findIndex(n=>{const r=C.getRectangleByPoints([e]);let i=C.getRectangleByPoints([n]);return i=C.inflate(i,lr),C.isHit(r,i)}),EH=e=>TD[e].strokeColor,PH=e=>TD[e].fill,Sc=(e,t=Ho.text,n)=>{n=n?Number(n):Fv;const r=Ov(Ks(t),{fontSize:n,fontFamily:RL});return{width:r.width+oe.rectangleAndText*2,height:r.height}},nT=(e,t)=>{const n=qv(e);return C.getPoints(C.getRectangleByCenterPoint(t,n.width,n.height))},qv=e=>{const t=cN().includes(e),n=fN().includes(e);return t?wH(e):n?xH(e):CH(e)},Zv=(e,t,n=Ho.text,r)=>{const i=_o(pe.text);return r=r||C.getRectangleByPoints(t).height,Kv(pe.text,t,n,i.geometryProperties,{...i.textProperties,textHeight:r})},zh=(e,t,n)=>{const r=_o(n),i=Sc(e,Ho.text,r.textProperties["font-size"]).height;return I.isUMLClassOrInterface({shape:n})?gH(e,n,t):jv(n)?TN(n,t,{strokeWidth:Xa.strokeWidth,...r.geometryProperties}):Kv(n,t,"",{strokeWidth:Xa.strokeWidth,...r.geometryProperties},{...r.textProperties,textHeight:i})},hg=(e,t,n)=>{const r=n?ca(e,t,n):Us(t);r&&r.edit(()=>{setTimeout(()=>{wx(e,t)},200)}),wx(e,t)},wx=(e,t)=>{const r=Ue.getElementRef(t).getGenerator(bi.key),i=re(e).includes(t);r.processDrawing(t,P.getElementActiveHost(e),{selected:i})},Qv=e=>DH(e)||Di(e),SH=e=>!SD.includes(e)&&!jv(e),DH=e=>I.isGeometry(e)&&SH(e.shape),TH=e=>!aN.includes(e.shape),AH=e=>e.source.boundId&&e.source.boundId===e.target.boundId,Jv=(e,t)=>sG(t)&&!AH(e),Ud=(e,t)=>{const n=Dc(e,t),r=Tc(e,t,n);if(Jv(t,r))return gi(jL(n.source.point,n.source.direction,n.target.point,n.target.direction,XS));const i=el(fD(r,e)),o=i.slice(1,i.length-1);if(t.points.length===2)return gi(i);{const s=gi(o),l=el(Nt.getPoints(e,t)).slice(1,-1);if(qD(l))return gi(i);const a=[s[0],...l,s[s.length-1]],c=YD(e,a,s,r),f=[i[0]];for(let g=0;g<c.length-1;g++){let p=c[g],d=c[g+1];if(me.isAlign([p,d]))f.push(p);else{const m=wp(s,p,d);m.length?(f.push(p),f.push(...m)):(f.push(p),console.log("unknown data points"))}}return f.push(i[i.length-2],i[i.length-1]),gi(f)}},rT=(e,t)=>{const n=Tc(e,t);return[n.nextSourcePoint,n.nextTargetPoint]},BH=(e,t,n)=>{let r=t.source.boundId?zn(e,t.source.boundId):void 0,i=t.target.boundId?zn(e,t.target.boundId):void 0;if(!r){const a=n.source;r=Cx(a.point,a.vector)}if(!i){const a=n.target;i=Cx(a.point,a.vector)}let o=C.getRectangleByPoints(r.points);const s=wo(C.getCornerPoints(o),r)||C.getCornerPoints(o);o=C.getRectangleByPoints(s),o=C.inflate(o,Me(r)*2);let u=C.getRectangleByPoints(i.points);const l=wo(C.getCornerPoints(u),i)||C.getCornerPoints(u);return u=C.getRectangleByPoints(l),u=C.inflate(u,Me(i)*2),{sourceRectangle:o,targetRectangle:u}},Cx=(e,t)=>{const n=Su(e,t,-25),r=C.getPoints(C.getRectangleByCenterPoint(n,50,50));return Kv(pe.rectangle,r,"")};function iT(e,t,n){let r=n??Ud(e,t);const[i,o]=rT(e,t);return r.splice(0,1,i),r.splice(-1,1,o),el(r)}const Vh=(e,t)=>(t!=null&&t.length?t:re(e)).filter(r=>I.isDrawElement(r)),ey=e=>re(e).filter(n=>I.isArrowLine(n)),oT=e=>re(e).filter(n=>I.isVectorLine(n)),MH=e=>{const t=re(e);return t&&t.length===1&&I.isSwimlane(t[0])},RH=e=>{const t=re(e);return t&&t.length===1&&I.isArrowLine(t[0])},sT=(e,t,n)=>{const r=zh(e,t,n);return So(e,r),r},kH=(e,t,n)=>{const r=_o(pe.text),i=Sc(e,n,r.textProperties["font-size"]),o=[t,[t[0]+i.width,t[1]+i.height]],s=Zv(e,o,n);So(e,s)},OH=(e,t,n,r)=>{const i=Ms(t),o=Ae.get(e,r),s={points:i,textHeight:n};I.isText(o)&&o.autoSize&&(s.autoSize=!1),ee.setNode(e,s,r)},FH=(e,t)=>{const n=re(e),r=[];n.forEach(i=>{if(I.isGeometry(i)&&!I.isText(i)){const o=P.findPath(e,i);ee.setNode(e,{shape:t},o),w_(e,{...i,shape:t},r)}}),r.length&&r.forEach(i=>{dn.resizeArrowLine(e,i.property,i.path)})},uT=(e,t,n,r)=>{let i=t.points,o=t.autoSize;const s=oe.rectangleAndText;if(o){const u=n<_h?_h:n,l=oD(t);if(vp.isActive(l,Yt.right))i=[[i[1][0]-(u+s*2),i[0][1]],[i[1][0],i[0][1]+r]];else if(vp.isActive(l,Yt.center)){const a=Math.abs(i[0][0]-i[1][0]),c=(u-a)/2;i=[[i[0][0]-c-s,i[0][1]],[i[1][0]+c+s,i[0][1]+r]]}else i=[i[0],[i[0][0]+u+s*2,i[0][1]+r]];Oi(t)&&(i=Dv(C.getRectangleByPoints(t.points),C.getRectangleByPoints(i),C.getCenterPoint(C.getRectangleByPoints(t.points)),C.getCenterPoint(C.getRectangleByPoints(i)),t.angle))}return{points:i}},bH=(e,t,n,r,i)=>{const o={text:n,textHeight:i,...uT(e,t,r,i)},s=e.children.findIndex(u=>u===t);ee.setNode(e,o,[s])},IH=(e,t,n,r)=>{if(t.autoSize){const i={textHeight:r,...uT(e,t,n,r)},o=me.isEquals(t.points[0],i.points[0])&&me.isEquals(t.points[1],i.points[1]),s=Math.round(r)===Math.round(t.textHeight);if(!o||!s){const u=e.children.findIndex(l=>l===t);ee.setNode(e,i,[u])}}},LH=(e,t,n)=>{const{width:r,height:i,url:o}=t,s=P.getBoardContainer(e).clientWidth,u=P.getBoardContainer(e).clientHeight,l=Ce(e,xe(e,s/2,u/2)),a=n?[n,[n[0]+r,n[1]+i]]:[[l[0]-r/2,l[1]-i/2],[l[0]+r/2,l[1]+i/2]],c={id:Ve(),type:"image",points:a,url:o};ee.insertNode(e,c,[e.children.length]),ee.addSelectionWithTemporaryElements(e,[c])},lT=(e,t,n)=>{ee.setNode(e,t,n)},GH=(e,t,n)=>{const r=P.findPath(e,t);ee.setNode(e,{texts:n},r)},NH=(e,t,n)=>{var s;const r=P.findPath(e,t),o=[...(s=t.texts)!=null&&s.length?[...t.texts]:[]];o.splice(n,1),ee.setNode(e,{texts:o},r)},HH=(e,t,n)=>{kv(jn.arrowLine,t,n),ey(e).forEach(i=>{const o=P.findPath(e,i);let s=t===cr.source?i.source:i.target;s={...s,marker:n},ee.setNode(e,{[t]:s},o)})},$H=(e,t)=>{ey(e).map(r=>{const i={...t};if(r.shape===t.shape)return;const o=P.findPath(e,r);ee.setNode(e,i,o)})},_H=(e,t,n,r)=>{const i=Nt.getPoints(e,t),o=n===cr.source?i[0]:i[i.length-1],s=qa(e,o,r);if(s){let u=t.source,l=t.target;n===cr.source?u={...u,boundId:r.id,connection:s}:l={...l,boundId:r.id,connection:s};const a=P.findPath(e,t);lT(e,{source:u,target:l},a)}};function jH(e){const t={...e};return I.isHorizontalSwimlane(e)?(t.cells=e.cells.map((n,r)=>(r===0&&e.header&&(n={...e.cells[0],rowspan:e.rows.length}),n.text&&n.textHeight&&!n.text.direction&&(n={...n,text:{...n.text,direction:"vertical"}}),n)),t):(e.header&&(t.cells=[{...e.cells[0],colspan:e.columns.length},...e.cells.slice(1,e.cells.length)]),t)}const aT=(e,t)=>{const n=AD[e];return C.getPoints(C.getRectangleByCenterPoint(t,n.width,n.height))},Uh=(e,t)=>{const n=VH(e),r=UH(e),i=t[1][0]-t[0][0],o=t[1][1]-t[0][1],s=xx(r,"row",n,o),u=xx(r,"column",n,i);return{id:Ve(),type:"swimlane",shape:r,points:t,rows:s,columns:u,header:n,cells:WH(r,s,u,n)}},xx=(e,t,n,r)=>{const i=s=>new Array(s).fill("").map(()=>({id:Ve()}));let o=i(3);if(t==="row"&&e===Dn.swimlaneVertical||t==="column"&&e===Dn.swimlaneHorizontal){o=n?o:i(2);const s=t==="row"?"height":"width";let u=Il;r<Il*o.length&&(u=Math.min(r/o.length/Il*Il,Il)),o=o.map((l,a)=>a===0||a===1&&n?{...l,[s]:u}:l)}return o},WH=(e,t,n,r)=>{let i=[],o=0;r&&(i=[cg(t[0].id,n[0].id,"New Swimlane")],o=1);const s=new Array(6).fill("").map((u,l)=>{if(l<3){const f=e===Dn.swimlaneVertical?t[o].id:t[l].id,h=e===Dn.swimlaneVertical?n[l].id:n[o].id;return cg(f,h,r?"Lane":"New Swimlane")}const a=e===Dn.swimlaneVertical?t[o+1].id:t[l-3].id,c=e===Dn.swimlaneVertical?n[l-3].id:n[o+1].id;return cg(a,c)});return[...i,...s]},zH=e=>I.isHorizontalSwimlane(e)?e.rows.length:I.isVerticalSwimlane(e)?e.columns.length:0,VH=e=>[Or.swimlaneHorizontalWithHeader,Or.swimlaneVerticalWithHeader].includes(e),UH=e=>[Or.swimlaneHorizontalWithHeader,Or.swimlaneHorizontal].includes(e)?Dn.swimlaneHorizontal:Dn.swimlaneVertical,cT=e=>P.isInPointer(e,DD()),XH=(e,t,n)=>{if(n>0&&I.isSwimlane(t)){const r=zH(t);if(I.isHorizontalSwimlane(t))if(n>r)fT(e,t,t.rows.length,n-r);else{const i=t.rows.length-(r-n);dT(e,t,i,r-n)}if(I.isVerticalSwimlane(t))if(n>r)hT(e,t,t.columns.length,n-r);else{const i=t.columns.length-(r-n);gT(e,t,i,r-n)}}},fT=(e,t,n,r=1)=>{if(I.isHorizontalSwimlane(t)){const i=[...t.rows],o=[];for(let c=0;c<r;c++)o.push({id:Ve()});i.splice(n,0,...o);const s=[...t.cells];o.forEach(c=>{s.push(...pT(t,c.id,"column"))});const u=qs(e,t,t.cells[t.cells.length-1].id).points,l=C.getRectangleByPoints(u).height,a=[t.points[0],[t.points[1][0],t.points[1][1]+l*r]];Xd(e,t,t.columns,i,s,a)}},hT=(e,t,n,r=1)=>{if(I.isVerticalSwimlane(t)){const i=[...t.columns],o=[];for(let c=0;c<r;c++)o.push({id:Ve()});i.splice(n,0,...o);const s=[...t.cells];o.forEach(c=>{s.push(...pT(t,c.id,"row"))});const u=qs(e,t,t.cells[t.cells.length-1].id).points,l=C.getRectangleByPoints(u).width,a=[t.points[0],[t.points[1][0]+l*r,t.points[1][1]]];Xd(e,t,i,t.rows,s,a)}},dT=(e,t,n,r=1)=>{if(I.isHorizontalSwimlane(t)){if(r>t.rows.length)return;const i=[...t.rows];if(i.splice(n,r),i.length===0){const o=P.findPath(e,t);ee.removeNode(e,o)}else{let o=[...t.cells];const s=[];for(let a=n;a<r+n;a++){const c=t.rows[a];s.push(c),o=o.filter(f=>f.rowId!==c.id)}let u=0;s.forEach(a=>{if(a.height)u+=a.height;else{const c=t.cells.find(h=>h.rowId===a.id),f=qs(e,t,c.id).points;u+=C.getRectangleByPoints(f).height}});const l=[t.points[0],[t.points[1][0],t.points[1][1]-u]];Xd(e,t,t.columns,i,o,l)}}},gT=(e,t,n,r=1)=>{if(I.isVerticalSwimlane(t)){if(r>t.columns.length)return;const i=[...t.columns];if(i.splice(n,r),i.length===0){const o=P.findPath(e,t);ee.removeNode(e,o)}else{let o=[...t.cells];const s=[];for(let a=n;a<r+n;a++){const c=t.columns[a];s.push(c),o=o.filter(f=>f.columnId!==c.id)}let u=0;s.forEach(a=>{if(a.width)u+=a.width;else{const c=t.cells.find(h=>h.columnId===a.id),f=qs(e,t,c.id).points;u+=C.getRectangleByPoints(f).width}});const l=[t.points[0],[t.points[1][0]-u,t.points[1][1]]];Xd(e,t,i,t.rows,o,l)}}},pT=(e,t,n)=>{const r=e[`${n}s`].map(i=>({id:Ve(),rowId:n==="row"?i.id:t,columnId:n==="row"?t:i.id}));return e.header&&r.shift(),r[0]={...r[0],text:{children:[{text:e.header?"Lane":"New Swimlane"}],align:Yt.center,direction:n==="row"?void 0:"vertical"},textHeight:20},r},Xd=(e,t,n,r,i,o)=>{const s=P.findPath(e,t);ee.setNode(e,{columns:n,rows:r,cells:i,points:o},s)},KH=(e,t,n)=>{var s;const i={texts:(s=t.texts)==null?void 0:s.map(u=>u.id===n.id?{...u,...n}:u)},o=e.children.findIndex(u=>u===t);ee.setNode(e,i,[o])},YH=(e,t,n,r,i)=>{const o=Ae.get(e,t),s=qs(e,o,n),u=o.cells.findIndex(d=>d.id===s.id);let l=[...o.rows],a=[...o.columns],c=[...o.cells],f=[...o.points];const{width:h,height:g}=C.getRectangleByPoints(s.points),p=oe.rectangleAndText;if(Ua.isVerticalText(s)){const d=o.columns.findIndex(y=>y.id===s.columnId);if(i>h){const y=i+p*2,m=y-h,v=kD(o,o.columns[d].id,y,m);f=v.points,a=v.columns}}else{const d=o.rows.findIndex(v=>v.id===s.rowId),m=o.rows[d].height??Math.max(g,s.textHeight||0);if(i>m){const v=i+p*2,w=v-m,E=OD(o,o.rows[d].id,v,w);f=E.points,l=E.rows}}c[u]={...c[u],textHeight:i,text:r},ee.setNode(e,{rows:l,columns:a,cells:c,points:f},t)},qH=(e,t,n,r)=>{const i=us(t);let o=t.cells;i!=null&&i.length?o=t.cells.map(s=>i.map(u=>u.id).includes(s.id)?Ex(s,n):s):o=t.cells.map(s=>s.text&&s.textHeight?Ex(s,n):s),ee.setNode(e,{cells:o},r)},Ex=(e,t)=>{const n={...e};return t?n.fill=t:delete n.fill,n},ZH=(e,t)=>{oT(e).map(r=>{if(r.shape===t.shape)return;const i=P.findPath(e,r);ee.setNode(e,{...t},i)})},QH=(e,t,n,r)=>{const o=DD().includes(n);let s=ED[n]||xD[n]||PD[n]||Xa;o&&(s=AD[n]);const u=ou(r);if(u){let l=0;[Ne.left,Ne.right].includes(u)?l=-s.width/2:l=-s.height/2;const a=Su(t,r,l),c=C.getPoints(C.getRectangleByCenterPoint(a,s.width,s.height));if(o){const f=Uh(n,c);return So(e,f),f}return sT(e,c,n)}return null},dn={setText:bH,setDrawTexts:KH,insertGeometry:sT,resizeGeometry:OH,insertText:kH,setTextSize:IH,resizeArrowLine:lT,setArrowLineTexts:GH,removeArrowLineText:NH,setArrowLineMark:HH,setArrowLineShape:$H,setVectorLineShape:ZH,insertImage:LH,connectArrowLineToDraw:_H,switchGeometryShape:FH,setTableText:YH,addSwimlaneRow:fT,addSwimlaneColumn:hT,removeSwimlaneRow:dT,removeSwimlaneColumn:gT,updateSwimlaneCount:XH,setTableFill:qH,insertDrawByVector:QH},Cp=(e,t,n,r=0)=>{const i=C.getCenterPoint(t),o=ZS(t,lr);if(r){const s=At([n],i,-r)[0];let u=o.find(l=>C.isHit(C.getRectangleByPoints([s,s]),l.rectangle));return u&&(u.cursorClass=bL(u.cursorClass,r)),u}else return o.find(s=>C.isHit(C.getRectangleByPoints([n,n]),s.rectangle))},JH=e=>({x:e.x-Lh-aa,y:e.y+e.height+Lh,width:aa,height:aa}),e$="debug:plait:resize-for-rotation",ir=pc(e$);function t$(e){const{afterChange:t,drawSelectionRectangle:n}=e;let r,i,o=!1,s=null;const u=()=>{const a=re(e);return a.length>=1&&a.every(c=>(I.isDrawElement(c)||I.isCustomGeometryElement(e,c))&&!RH(e)&&!MH(e))};return Ys(e,{key:"draw-elements",canResize:u,hitTest:a=>{const c=re(e),f=He(e,c,!1),h=Sn(c),g=Cp(e,f,a,h);return g?{element:[...c],rectangle:f,handle:g.handle,cursorClass:g.cursorClass}:null},onResize:(a,c)=>{r==null||r.remove(),ir.isDebug()&&ir.clear();const f=_f(e,a.handle),h=c.isShift,g=C.getCenterPoint(a.rectangle),p=Nh(a.handle),{originPoint:d,handlePoint:y}=xp(e,p,a.rectangle),m=Sn(a.element);let v;if(m){v={angle:m,offsetX:0,offsetY:0,newCenterPoint:[0,0]};const[S,T]=At([c.startPoint,c.endPoint],g,-v.angle);c.startPoint=S,c.endPoint=T}const w=mT(e,a,c,{originPoint:d,handlePoint:y},h,f),E=Kd(e,a.element,w);if(s=E.activePoints,r=E.snapG,P.getElementActiveHost(e).append(r),v){const S=C.getPoints(a.rectangle),T=S.map(V=>wi(V,d,E.xZoom,E.yZoom)),B=C.getRectangleByPoints(T);ir.isDebug()&&ir.drawRectangle(e,B,{stroke:"blue"});const R=C.getCenterPoint(B),b=Dv(C.getRectangleByPoints(S),C.getRectangleByPoints(T),g,R,v.angle),O=C.getCenterPoint(C.getRectangleByPoints(b));v=Object.assign(v,{offsetX:O[0]-R[0],offsetY:O[1]-R[1],newCenterPoint:O}),ir.isDebug()&&ir.drawRectangle(e,b)}a.element.forEach(S=>{const T=P.findPath(e,S);let B;if(v){B=np(S.points,g,-v.angle).map(O=>wi(O,d,E.xZoom,E.yZoom));const b=B.map(O=>[O[0]+v.offsetX,O[1]+v.offsetY]);B=np(b,v.newCenterPoint,v.angle)}else Oi(S)&&(o=!0),Oi(S)&&rR(S.angle)?B=n$(e,S.points,d,E.xZoom,E.yZoom):B=S.points.map(R=>wi(R,d,E.xZoom,E.yZoom));if(I.isGeometry(S))if(I.isGeometry(S)&&Qv(S)){const{height:R}=Us(S).getSize();dn.resizeGeometry(e,B,R,T)}else B=Ms(B),ee.setNode(e,{points:B},T);else if(I.isLine(S)||I.isCustomGeometryElement(e,S)||I.isVectorLine(S))ee.setNode(e,{points:B},T);else if(I.isImage(S))if(h)ee.setNode(e,{points:B},T);else{const R=C.getRectangleByPoints(S.points),b=C.getCenterPoint(R),O=wi(b,d,E.xZoom,E.yZoom),V=C.getRectangleByCenterPoint(O,R.width,R.height);ee.setNode(e,{points:C.getPoints(V)},T)}})},afterResize:a=>{if(r==null||r.remove(),r=null,o){o=!1,s=null;const c=re(e);ee.addSelectionWithTemporaryElements(e,c)}}}),e.afterChange=()=>{if(t(),i&&(i.remove(),i=null),u()&&!gn(e)){i=Te();const a=re(e),c=o?C.getRectangleByPoints(s):He(e,a,!1);let f=C.getCornerPoints(c);const h=Sn(a);if(h){const g=C.getCenterPoint(c);f=At(f,g,h)}f.forEach(g=>{const p=qS(e,g);i&&i.append(p)}),P.getElementActiveHost(e).append(i)}},e.drawSelectionRectangle=()=>{if(o){const a=C.getRectangleByPoints(s);return Hr(e,C.inflate(a,xt),{stroke:Rn,strokeWidth:xt})}return n()},e}const xp=(e,t,n)=>{const r=FL(e,t),i=VC(n,r),o=VC(n,t);return{originPoint:i,handlePoint:o}},ty=(e,t,n,r,i)=>{const[o,s]=e;let u=0,l=0;if(r)if(i)u=me.getOffsetX(o,s)/(n[0]-t[0]),l=u;else{let a=me.getOffsetX(o,s),c=me.getOffsetY(o,s);u=a/(n[0]-t[0]),l=c/(n[1]-t[1])}else{const a=me.isHorizontal(t,n,.1)||!1;let c=a?me.getOffsetX(o,s):me.getOffsetY(o,s),f=a?n[0]-t[0]:n[1]-t[1];const h=c/f;i?(u=h,l=h):a?u=h:l=h}return{xZoom:u,yZoom:l}},wi=(e,t,n,r)=>{const i=(e[0]-t[0])*n,o=(e[1]-t[1])*r;return[e[0]+i,e[1]+o]},n$=(e,t,n,r,i)=>{const o=C.getRectangleByPoints(t);ir.isDebug()&&ir.drawRectangle(e,o,{stroke:"black"});let s=t;s=At(s,C.getCenterPoint(o),1/2*Math.PI),ir.isDebug()&&ir.drawRectangle(e,s,{stroke:"blue"}),s=s.map(l=>wi(l,n,r,i)),ir.isDebug()&&ir.drawRectangle(e,s);const u=C.getRectangleByPoints(s);return At(s,C.getCenterPoint(u),-(1/2)*Math.PI)},r$="debug:plait:point-for-geometry",Px=pc(r$),ff=10;function mT(e,t,n,r,i,o){const{originPoint:s,handlePoint:u}=r,l=[n.startPoint,n.endPoint],{xZoom:a,yZoom:c}=ty(l,s,u,o,i);let f,h=[];if(Array.isArray(t.element)){f=t.element;const w=He(e,t.element,!1);h=C.getPoints(w)}else f=[t.element],h=t.element.points;const g=h.map(w=>wi(w,s,a,c)),p=C.getRectangleByPoints(g),d=vc(p,Sn(f)),y=wi(u,s,a,c),[m,v]=it(s,y);return{resizePoints:l,resizeOriginPoint:h,activeRectangle:d,originPoint:s,handlePoint:u,directionFactors:[tl(m),tl(v)],isAspectRatio:i,isFromCorner:o}}function Kd(e,t,n){const r=Te(),i=j5(e,t);let o=s$(i,n);o.deltaX===0&&o.deltaY===0&&(o=i$(i,n));const s=Sn(t),u=o$(o,n,s),l=l$(e,u.activePoints,i,n,s),a=u$(e,u.activePoints,i,n,s);return r.append(l,a),{...u,...o,snapG:r}}function i$(e,t){let n={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:i,directionFactors:o}=t,s=o[0]!==0||r,u=o[1]!==0||r;if(s){const l=As(i,!0),a=o[0]===-1?l[0]:l[2],c=oa(e,a,!0);if(Math.abs(c)<Si&&(n.deltaX=c,n.deltaX!==0&&r))return n.deltaY=n.deltaX/(i.width/i.height),n}if(u){const l=As(i,!1),a=o[1]===-1?l[0]:l[2],c=oa(e,a,!1);if(Math.abs(c)<Si&&(n.deltaY=c,n.deltaY!==0&&r))return n.deltaX=n.deltaY*(i.width/i.height),n}return n}function o$(e,t,n){const{deltaX:r,deltaY:i}=e,{resizePoints:o,isCreate:s}=t,u=[o[0],[o[1][0]+r,o[1][1]+i]];let l=u,a=0,c=0;if(!s){const{originPoint:f,handlePoint:h,isFromCorner:g,isAspectRatio:p,resizeOriginPoint:d}=t,y=ty(u,f,h,g,p);a=y.xZoom,c=y.yZoom,l=d.map(m=>wi(m,f,a,c)),n&&(l=Dv(C.getRectangleByPoints(d),C.getRectangleByPoints(l),C.getCenterPoint(C.getRectangleByPoints(d)),C.getCenterPoint(C.getRectangleByPoints(l)),n))}return{xZoom:a,yZoom:c,activePoints:l}}function s$(e,t){let n={deltaX:0,deltaY:0};const{isAspectRatio:r,activeRectangle:i}=t,o=e.find(u=>Math.abs(u.width-i.width)<Si);if(o){const u=o.width-i.width;if(n.deltaX=u*t.directionFactors[0],r){const l=u/(i.width/i.height);return n.deltaY=l*t.directionFactors[1],n}}const s=e.find(u=>Math.abs(u.height-i.height)<Si);if(s){const u=s.height-i.height;if(n.deltaY=u*t.directionFactors[1],r){const l=u*(i.width/i.height);return n.deltaX=l*t.directionFactors[0],n}}return n}function hf(e,t){return t?[[e.x,e.y-ff],[e.x+e.width,e.y-ff]]:[[e.x-ff,e.y],[e.x-ff,e.y+e.height]]}function u$(e,t,n,r,i){Px.isDebug()&&Px.clear();const o=C.getRectangleByPoints(t),s=vc(o,i),{isAspectRatio:u,directionFactors:l}=r,a=l[0]!==0||u,c=l[1]!==0||u;return W5(e,s,n,a,c)}function l$(e,t,n,r,i){let o=[],s=[];const u=r.directionFactors[0]!==0||r.isAspectRatio,l=r.directionFactors[1]!==0||r.isAspectRatio,a=C.getRectangleByPoints(t),c=vc(a,i);for(let h of n)c.width===h.width&&u&&o.push(hf(h,!0)),c.height===h.height&&l&&s.push(hf(h,!1));o.length&&u&&o.push(hf(c,!0)),s.length&&l&&s.push(hf(c,!1));const f=[...o,...s];return z5(e,f)}function vT(e,t){const n=[],r=t.shape,i=10;if(r===et.straight){const o=I.isArrowLine(t)?Nt.getPoints(e,t):t.points;for(let s=0;s<o.length-1;s++)Ze(...o[s],...o[s+1])<i||n.push([(o[s][0]+o[s+1][0])/2,(o[s][1]+o[s+1][1])/2])}if(r===et.curve){const o=I.isArrowLine(t)?Nt.getPoints(e,t):t.points,s=I.isArrowLine(t)?QD(e,t):Rs(e,t);if(o.length===2){const l=s.length-1,a=Math.round((0+l)/2);n.push(s[a])}else for(let u=0;u<o.length-1;u++){const l=s.findIndex(h=>h[0]===o[u][0]&&h[1]===o[u][1]),a=s.findIndex(h=>h[0]===o[u+1][0]&&h[1]===o[u+1][1]),c=Math.round((l+a)/2);Ze(...o[u],...o[u+1])<i||n.push(s[c])}}if(r===et.elbow){const o=Ud(e,t),s=Tc(e,t);if(!Jv(t,s)){const[u,l]=rT(e,t);for(let a=0;a<o.length-1;a++){if(a==0&&me.isEquals(o[a+1],u)||a===o.length-2&&me.isEquals(o[o.length-2],l))continue;const[c,f]=o[a],[h,g]=o[a+1],p=[(c+h)/2,(f+g)/2];n.push(p)}}}return n}const a$=(e,t,n)=>dD(e,t,n,r=>{if(I.isArrowLine(r)){let i={...r.source},o={...r.target},s=[...r.points];return r.source.boundId&&(s[0]=ro(zn(e,r.source.boundId),r.source.connection),zn(e,r.source.boundId,t)||(delete i.boundId,delete i.connection)),r.target.boundId&&(s[s.length-1]=ro(zn(e,r.target.boundId),r.target.connection),zn(e,r.target.boundId,t)||(delete o.boundId,delete o.connection)),s=s.map(u=>[u[0]-n[0],u[1]-n[1]]),{...r,points:s,source:i,target:o}}}),c$=(e,t,n)=>{gD(e,t,n,(r,i)=>{I.isArrowLine(r)&&(r.source.boundId&&t.find(s=>[r.source.boundId,i[r.source.boundId]].includes(s.id))&&(r.source.boundId=i[r.source.boundId]),r.target.boundId&&t.find(s=>[r.target.boundId,i[r.target.boundId]].includes(s.id))&&(r.target.boundId=i[r.target.boundId])),I.isElementByTable(r)&&(dx(r,"row"),dx(r,"column"),xN(r.cells))})},wl=e=>{const t=[];for(let n=0;n<e.length;n++){let r=n==e.length-1?0:n+1;t.push([(e[n][0]+e[r][0])/2,(e[n][1]+e[r][1])/2])}return t},yT=(e,t)=>{const n=[];for(let r=1;r<=e.length;r++){let i=e[r-1],o=r===e.length?e[0]:e[r];const s=HL(t,i,o);n.push(...s)}return n},jt=(e,t)=>{for(let n=1;n<=e.length;n++){let r=e[n-1],i=n===e.length?e[0]:e[n];if(QS(t,r,i))return[r,i]}return null},Xl=3/4,f$={draw(e,t,n){const r=Ll(t),o=P.getRoughSVG(e).polygon(r,{...n,fillStyle:"solid"});return ke(o,"round"),o},isInsidePoint(e,t){const n=Ll(e);return yo(t,n)},getCornerPoints(e){return Ll(e)},getNearestPoint(e,t){return Be(t,Ll(e))},getEdgeByConnectionPoint(e,t){const n=Ll(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle(e){const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+oe.rectangleAndText+n,y:t.y+(t.height*Xl-r)/2}}},Ll=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*Xl],[e.x+e.width*3/5,e.y+e.height*Xl],[e.x+e.width/2,e.y+e.height],[e.x+e.width*2/5,e.y+e.height*Xl],[e.x,e.y+e.height*Xl]];function Rt(e){const t=e.getPolygonPoints,n={draw(r,i,o){const s=t(i),l=P.getRoughSVG(r).polygon(s,{...o,fillStyle:"solid"});return ke(l,"round"),l},isInsidePoint(r,i){const o=t(r);return yo(i,o)},getCornerPoints(r){return t(r)},getNearestPoint(r,i){return Be(i,t(r))},getNearestCrossingPoint(r,i){const o=t(r),s=yT(o,i);let u=s[0],l=Ze(i[0],i[1],u[0],u[1]);return s.filter((a,c)=>c>0).forEach(a=>{let c=Ze(i[0],i[1],a[0],a[1]);c<l&&(l=c,u=a)}),u},getEdgeByConnectionPoint(r,i){const o=t(r),s=C.getConnectionPoint(r,i);return jt(o,s)},getConnectorPoints(r){return e.getConnectorPoints?e.getConnectorPoints(r):t(r)}};return e.getTextRectangle&&(n.getTextRectangle=e.getTextRectangle),n}const h$=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width*3/4,e.y+e.height/4],[e.x+e.width,e.y+e.height/4],[e.x+e.width,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height*3/4],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*3/4],[e.x,e.y+e.height*3/4],[e.x,e.y+e.height/4],[e.x+e.width/4,e.y+e.height/4]],d$=Rt({getPolygonPoints:h$,getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle(e){const t=St(e),n=t.width;return t.width=t.width/2,t.x+=n/4,t}}),dg=Rt({getPolygonPoints:C.getEdgeCenterPoints,getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle(e){const t=St(e);return t.width=t.width/2,t.x+=t.width/2,t}});function ny(e){const t={draw(n,r,i){const o=[r.x+r.width/2,r.y+r.height/2],u=P.getRoughSVG(n).ellipse(o[0],o[1],r.width,r.height,{...i,fillStyle:"solid"});return ke(u,"round"),u},isInsidePoint(n,r){const i=[n.x+n.width/2,n.y+n.height/2];return Ri(r,i,n.width/2,n.height/2)},getCornerPoints(n){return C.getEdgeCenterPoints(n)},getNearestPoint(n,r){const i=[n.x+n.width/2,n.y+n.height/2];return kn(r,i,n.width/2,n.height/2)},getTangentVectorByConnectionPoint(n,r){const i=C.getConnectionPoint(n,r),o=[n.x+n.width/2,n.y+n.height/2],s=[i[0]-o[0],-(i[1]-o[1])],u=n.width/2,l=n.height/2,a=ii(s[0],s[1],u,l);return oi(s[0],s[1],a)},getConnectorPoints(n){return C.getEdgeCenterPoints(n)},getTextRectangle(n){const r=St(n),i=r.width;return r.width=r.width*3/4,r.x+=i/8,r}};return e!=null&&e.draw&&(t.draw=e.draw),e!=null&&e.getTextRectangle&&(t.getTextRectangle=e.getTextRectangle),t}const gg=ny(),g$=e=>[[e.x+e.width/4,e.y],[e.x+e.width*3/4,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*3/4,e.y+e.height],[e.x+e.width/4,e.y+e.height],[e.x,e.y+e.height/2]],p$=Rt({getPolygonPoints:g$,getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle(e){const t=St(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),m$=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.32,e.y],[e.x+e.width*.32,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.2],[e.x+e.width,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height*.8],[e.x+e.width*.32,e.y+e.height]],v$=Rt({getPolygonPoints:m$,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const t=St(e),n=t.width;return t.width=t.width*(1-.32),t.x+=n*.32,t}}),y$=e=>[[e.x+e.width*3/10,e.y],[e.x+e.width*7/10,e.y],[e.x+e.width,e.y+e.height*3/10],[e.x+e.width,e.y+e.height*7/10],[e.x+e.width*7/10,e.y+e.height],[e.x+e.width*3/10,e.y+e.height],[e.x,e.y+e.height*7/10],[e.x,e.y+e.height*3/10]],w$=Rt({getPolygonPoints:y$,getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle(e){const t=St(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),Sx=e=>[[e.x+e.width/4,e.y],[e.x+e.width,e.y],[e.x+e.width*3/4,e.y+e.height],[e.x,e.y+e.height]],Dx=Rt({getPolygonPoints:Sx,getConnectorPoints:e=>{const t=Sx(e);return wl(t)},getTextRectangle(e){const t=St(e),n=t.width;return t.width=t.width/2,t.x+=n/4,t}}),C$=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height*2/5],[e.x+e.width*4/5,e.y+e.height],[e.x+e.width/5,e.y+e.height],[e.x,e.y+e.height*2/5]],x$=Rt({getPolygonPoints:C$,getTextRectangle(e){const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2,o=i*3/5;return{height:r,width:o>0?o:0,x:t.x+oe.rectangleAndText+n+i/5,y:t.y+t.height/5+(t.height*4/5-r)/2}}}),E$=e=>{const t=e.width>e.height/2;return[[e.x,e.y],[e.x+(t?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(t?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height]]},P$=Rt({getPolygonPoints:E$,getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle(e){const t=C.getRectangleByPoints(e.points),n=St(e),r=t.width>t.height/2+20;return n.width=r?t.width-t.height/2:n.width,n}}),S$=e=>{const t=e.width>e.height/2;return[[e.x,e.y],[e.x+(t?e.width-e.height/2:0),e.y],[e.x+e.width,e.y+e.height/2],[e.x+(t?e.width-e.height/2:0),e.y+e.height],[e.x,e.y+e.height],[e.x+(t?e.height/2:e.width),e.y+e.height/2]]},D$=Rt({getPolygonPoints:S$,getTextRectangle(e){const t=C.getRectangleByPoints(e.points),n=St(e),r=t.width>t.height+20;return n.width=r?t.width-t.height:n.width,n.x=r?t.x+t.height/2:n.x,n}}),T$=e=>[[e.x,e.y+e.height*.2],[e.x+e.width*.68,e.y+e.height*.2],[e.x+e.width*.68,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*.68,e.y+e.height],[e.x+e.width*.68,e.y+e.height*.8],[e.x,e.y+e.height*.8]],A$=Rt({getPolygonPoints:T$,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]],getTextRectangle(e){const t=St(e);return t.width=t.width*.68,t}}),Se={draw(e,t,n){return Hr(e,t,{...n,fillStyle:"solid"})},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return Be(t,Se.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=Se.getCornerPoints(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)}},B$={draw(e,t,n){return hl(P.getRoughSVG(e),t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid"},!1,Lu(t))},isInsidePoint(e,t){return Km(t,e,Lu(e))},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return wT(t,e,Lu(e))},getEdgeByConnectionPoint(e,t){const n=Se.getCornerPoints(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)}},Lu=e=>Math.min(e.width*.1,e.height*.1);function wT(e,t,n){const{x:r,y:i,width:o,height:s}=t,u=C.getCornerPoints(t);let l=Be(e,u),a=null;return e[0]>=r&&e[0]<=r+n&&e[1]>=i&&e[1]<=i+n&&(a=[r+n,i+n]),e[0]>=r&&e[0]<=r+n&&e[1]>=i+s&&e[1]<=i+s-n&&(a=[r+n,i+s-n]),e[0]>=r+o-n&&e[0]<=r+o&&e[1]>=i&&e[1]<=i+n&&(a=[r+o-n,i+n]),e[0]>=r+o-n&&e[0]<=r+o&&e[1]>=i+s-n&&e[1]<=i+s&&(a=[r+o-n,i+s-n]),a&&(l=kn(e,a,n,n)),l}const ls=3/4,M$={draw(e,t,n){const r=P.getRoughSVG(e),i=t.x,o=t.y,s=t.x+t.width,u=t.y+t.height*ls,l=Lu(t),a=[i+l,o],c=[s-l,o],f=[s,o+l],h=[s,u-l],g=[s-l,u],p=[i+l,u],d=[i,u-l],y=[i,o+l],m=[i+t.width/4,u],v=[i+t.width/4,t.y+t.height],w=[i+t.width/2,u],E=r.path(`M${c[0]} ${c[1]} A ${l} ${l}, 0, 0, 1, ${f[0]} ${f[1]} L ${h[0]} ${h[1]} A ${l} ${l}, 0, 0, 1, ${g[0]} ${g[1]} L    ${w[0]} ${w[1]}  ${v[0]} ${v[1]}   ${m[0]} ${m[1]}   ${p[0]} ${p[1]} A ${l} ${l}, 0, 0, 1, ${d[0]} ${d[1]} L ${y[0]} ${y[1]} A ${l} ${l}, 0, 0, 1, ${a[0]} ${a[1]} Z`,{...n,fillStyle:"solid"});return ke(E,"round"),E},isInsidePoint(e,t){const n=[[e.x+e.width/4,e.y+e.height*3/4],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height*3/4]];return e.height=e.height*3/4,yo(t,n)||Km(t,e,Lu(e))},getCornerPoints(e){return pg(e)},getNearestPoint(e,t){return Be(t,pg(e))},getEdgeByConnectionPoint(e,t){const n=pg(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height*ls],[e.x,e.y+e.height/2]]},getTextRectangle(e){const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+oe.rectangleAndText+n,y:t.y+(t.height*ls-r)/2}}},pg=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height*ls],[e.x+e.width/2,e.y+e.height*ls],[e.x+e.width/4,e.y+e.height],[e.x+e.width/4,e.y+e.height*ls],[e.x,e.y+e.height*ls]],Tx=e=>[[e.x+e.width*.15,e.y],[e.x+e.width*.85,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],R$=Rt({getPolygonPoints:Tx,getConnectorPoints(e){const t=Tx(e);return wl(t)},getTextRectangle(e){const t=St(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),Ax=e=>[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],k$=Rt({getPolygonPoints:Ax,getConnectorPoints(e){const t=Ax(e);return[...wl(t),...t]},getTextRectangle(e){const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2,o=i*2/3;return{height:r,width:o>0?o:0,x:t.x+oe.rectangleAndText+n+i/6,y:t.y+t.height*3/5+(t.height*2/5-r)/2}}}),O$=e=>[[e.x,e.y+e.height/2],[e.x+e.width*8/25,e.y],[e.x+e.width*8/25,e.y+e.height/5],[e.x+e.width*17/25,e.y+e.height/5],[e.x+e.width*17/25,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*17/25,e.y+e.height],[e.x+e.width*17/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height*4/5],[e.x+e.width*8/25,e.y+e.height]],F$=Rt({getPolygonPoints:O$,getConnectorPoints:e=>[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]]}),Bx=e=>[[e.x+e.width/2,e.y+e.height*75/91],[e.x+e.width*18.61/96,e.y+e.height],[e.x+e.width*24.2235871/96,e.y+e.height*57.7254249/91],[e.x,e.y+e.height*34.5491503/91],[e.x+e.width*33.3053687/96,e.y+e.height*29.7745751/91],[e.x+e.width/2,e.y],[e.x+e.width*62.6946313/96,e.y+e.height*29.7745751/91],[e.x+e.width,e.y+e.height*34.5491503/91],[e.x+e.width*71.7764129/96,e.y+e.height*57.7254249/91],[e.x+e.width*77.3892626/96,e.y+e.height]],b$=Rt({getPolygonPoints:Bx,getConnectorPoints:e=>{const t=Bx(e);return[t[1],t[3],t[5],t[7],t[9]]},getTextRectangle(e){const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2,o=i/2;return{height:r,width:o>0?o:0,x:t.x+oe.rectangleAndText+n+i/4,y:t.y+t.height*1/6+(t.height*4/5-r)/2}}}),I$={draw(e,t,n){return hl(P.getRoughSVG(e),t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid"},!1,df(t))},isInsidePoint(e,t){return Km(t,e,df(e))},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return L$(t,e,df(e))},getTangentVectorByConnectionPoint(e,t){const n=C.getConnectionPoint(e,t),r=df(e),i=CT(e,r,n);if(i){const o=[n[0]-i[0],-(n[1]-i[1])],s=r,u=r,l=ii(o[0],o[1],s,u);return oi(o[0],o[1],l)}return null},getConnectorPoints(e){return C.getEdgeCenterPoints(e)}},df=e=>Math.min(e.width/2,e.height/2);function L$(e,t,n){let r=null,i=CT(t,n,e);if(i)r=kn(e,i,n,n);else{const o=C.getCornerPoints(t);r=Be(e,o)}return r}function CT(e,t,n){const{x:r,y:i,width:o,height:s}=e;let u=null;return n[0]>=r&&n[0]<=r+t&&n[1]>=i&&n[1]<=i+t&&(u=[r+t,i+t]),n[0]>=r&&n[0]<=r+t&&n[1]>=i+s-t&&n[1]<=i+s&&(u=[r+t,i+s-t]),n[0]>=r+o-t&&n[0]<=r+o&&n[1]>=i&&n[1]<=i+t&&(u=[r+o-t,i+t]),n[0]>=r+o-t&&n[0]<=r+o&&n[1]>=i+s-t&&n[1]<=i+s&&(u=[r+o-t,i+s-t]),u}const Mx=e=>[[e.x,e.y+e.height/4],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x,e.y+e.height]],G$=Rt({getPolygonPoints:Mx,getConnectorPoints:e=>{const t=Mx(e);return wl(t)},getTextRectangle:e=>{const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+oe.rectangleAndText+n,y:t.y+t.height/4+(t.height*3/4-r)/2}}}),N$=e=>[[e.x,e.y+e.height/2],[e.x+e.width/6,e.y],[e.x+e.width*5/6,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width*5/6,e.y+e.height],[e.x+e.width/6,e.y+e.height]],H$=Rt({getPolygonPoints:N$,getConnectorPoints:e=>C.getEdgeCenterPoints(e),getTextRectangle(e){const t=St(e),n=t.width;return t.width=t.width*2/3,t.x+=n/6,t}}),Rx=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width*7/8,e.y+e.height],[e.x+e.width/8,e.y+e.height]],$$=Rt({getPolygonPoints:Rx,getConnectorPoints:e=>{const t=Rx(e);return wl(t)},getTextRectangle(e){const t=St(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}}),kx=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width/2,e.y+e.height]],_$=Rt({getPolygonPoints:kx,getConnectorPoints:e=>{const t=kx(e);return[...wl(t),...t]},getTextRectangle(e){const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2,o=i*2/3;return{height:r,width:o>0?o:0,x:t.x+oe.rectangleAndText+n+i/6,y:t.y+(t.height*2/3-r)/2}}}),j$={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x} ${t.y} L${t.x+t.width*3/4} ${t.y} A  ${t.width/4} ${t.height/2}, 0, 0, 1,${t.x+t.width*3/4} ${t.y+t.height} L${t.x} ${t.y+t.height} Z`,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]),r=C.isHit({...e,width:e.width*3/4},n),i=Ri(t,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2);return r||i},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){const n=Be(t,Se.getCornerPoints(e));return n[0]>e.x+e.width*3/4?kn(t,[e.x+e.width*3/4,e.y+e.height/2],e.width/4,e.height/2):n},getTangentVectorByConnectionPoint(e,t){const n=C.getConnectionPoint(e,t),r=[e.x+e.width*3/4,e.y+e.height/2],i=[n[0]-r[0],-(n[1]-r[1])],o=e.width/4,s=e.height/2,u=ii(i[0],i[1],o,s);return oi(i[0],i[1],u)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)}},W$={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x+t.width/10} ${t.y} L${t.x+t.width} ${t.y} A  ${t.width/10} ${t.height/2}, 0, 0, 0,${t.x+t.width} ${t.y+t.height} L${t.x+t.width/10} ${t.y+t.height}A  ${t.width/10} ${t.height/2}, 0, 0, 1,${t.x+t.width/10} ${t.y}`,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]),r=C.isHit({...e,x:e.x+e.width/10,width:e.width*9/10},n),i=Ri(t,[e.x+e.width/10,e.y+e.height/2],e.width/10,e.height/2),o=!Ri(t,[e.x+e.width,e.y+e.height/2],e.width/10,e.height/2);return r&&o||i},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){const n=Be(t,Se.getCornerPoints(e));if(n[0]<e.x+e.width/10){const r=[e.x+e.width/10,e.y+e.height/2],i=kn(t,r,e.width/10,e.height/2);return i[0]>r[0]&&(i[0]=r[0]*2-i[0]),i}if(n[0]>e.x+e.width*9/10){const r=[e.x+e.width,e.y+e.height/2],i=kn(t,r,e.width/10,e.height/2);return i[0]>r[0]&&(i[0]=r[0]*2-i[0]),i}return n},getTangentVectorByConnectionPoint(e,t){const n=C.getConnectionPoint(e,t);let r=[e.x+e.width/10,e.y+e.height/2],i=e.width/10,o=e.height/2;const s=n[0]>e.x+e.width*9/10&&n[1]>e.y;s&&(r=[e.x+e.width,e.y+e.height/2]);const u=[n[0]-r[0],-(n[1]-r[1])],l=ii(u[0],u[1],i,o),a=oi(u[0],u[1],l);return s?a.map(c=>-c):a},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width*9/10,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]]},getTextRectangle(e){const t=St(e),n=t.width;return t.width=t.width*3/4,t.x+=n/8,t}},z$={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+t.width*.06} ${t.y} L${t.x+t.width*.06} ${t.y+t.height} M${t.x+t.width-t.width*.06} ${t.y} L${t.x+t.width-t.width*.06} ${t.y+t.height}`,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return Be(t,Se.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=Se.getCornerPoints(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2-t.width*.06*2;return{height:r,width:i>0?i:0,x:t.x+oe.rectangleAndText+n+t.width*.06,y:t.y+(t.height-r)/2}}},V$=e=>[[e.x,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x,e.y+e.height/2]],U$=Rt({getPolygonPoints:V$,getConnectorPoints:e=>C.getEdgeCenterPoints(e),getTextRectangle:e=>{const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2;return{width:i>0?i:0,height:r,x:t.x+oe.rectangleAndText+n,y:t.y+(t.height-t.height/2-r)/2}}}),Ep={draw(e,t,n){const r=P.getRoughSVG(e),i=t.width/7,o=t.height/3.2,s=i/8.5,u=o/20,l=r.path(`M ${t.x+i} ${t.y+o}
             A ${s} ${u*1.2} 0 1 1 ${t.x+i*2} ${t.y+o/2}
             A ${s} ${u} 0 1 1 ${t.x+i*4.2} ${t.y+o/2.2}
             A ${s} ${u} 0 1 1 ${t.x+i*5.8} ${t.y+o}
             A ${s} ${u*1.3} 0 1 1 ${t.x+i*6} ${t.y+o*2.2}
             A ${s} ${u*1.2} 0 1 1 ${t.x+i*5} ${t.y+o*2.8}
             A ${s} ${u/1.2} 0 1 1 ${t.x+i*2.8} ${t.y+o*2.8}
             A ${s} ${u} 0 1 1 ${t.x+i} ${t.y+o*2.2}
             A ${s} ${u*1.42} 0 1 1 ${t.x+i} ${t.y+o}
            Z`,{...n,fillStyle:"solid"});return o9(l,"round"),l},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return Be(t,Ep.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=Ep.getCornerPoints(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle(e){const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2,o=i/1.5;return{height:r,width:o>0?o:0,x:t.x+oe.rectangleAndText+n+i/6,y:t.y+t.height/6+(t.height*4/6-r)/2}}},X$=ny({draw(e,t,n){const r=P.getRoughSVG(e),i=t.width/2,o=t.height/2,s=[t.x+t.width,t.y+t.height/2],u=r.path(`M${s[0]} ${s[1]}
        A${i},${o} 0 1,1 ${s[0]} ${s[1]-.01}
        M${t.x} ${t.y+t.height/2}
        L${t.x+t.width} ${t.y+t.height/2}
        M${t.x+t.width/2} ${t.y}
        L${t.x+t.width/2} ${t.y+t.height}
        `,{...n,fillStyle:"solid"});return ke(u,"round"),u}}),K$=ny({draw(e,t,n){const r=P.getRoughSVG(e),i=t.width/2,o=t.height/2,s=[t.x+t.width,t.y+t.height/2],u=[t.x+t.width/2,t.y+t.height/2],l=f2([t.x,t.y],[t.x+t.width,t.y+t.height],u[0],u[1],i,o),a=f2([t.x+t.width,t.y],[t.x,t.y+t.height],u[0],u[1],i,o),c=r.path(`M${s[0]} ${s[1]}
        A${i},${o} 0 1,1 ${s[0]} ${s[1]-.01}
        M${l[0][0]} ${l[0][1]}
        L${l[1][0]} ${l[1][1]}
        M${a[0][0]} ${a[0][1]}
        L${a[1][0]} ${a[1][1]}
        `,{...n,fillStyle:"solid"});return ke(c,"round"),c}}),Y$={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x} ${t.y+t.height-t.height/9} V${t.y} H${t.x+t.width} V${t.y+t.height-t.height/9}
            Q${t.x+t.width-t.width/4} ${t.y+t.height-t.height/9*3}, ${t.x+t.width/2} ${t.y+t.height-t.height/9} T${t.x} ${t.y+t.height-t.height/9}
            `,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){let n=Be(t,Se.getCornerPoints(e)),r=gc([[e.x,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x+e.width/4*3,e.y+e.height-e.height/9*2],[e.x+e.width,e.y+e.height-e.height/9]]);if(r=ei(r),n[1]>e.y+e.height-e.height/9){if(n[0]===e.x+e.width/2)return n[1]=e.y+e.height-e.height/9,n;n=Be(t,r,!1)}return n},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height-e.height/9],[e.x,e.y+e.height/2]]},getTangentVectorByConnectionPoint(e,t){const n=C.getConnectionPoint(e,t);return n[0]>e.x&&n[0]<e.x+e.width/4?it([e.x+e.width/4,e.y+e.height],n):n[0]>e.x+e.width/4&&n[0]<e.x+e.width/4*3?it([e.x+e.width/4*3,e.y+e.height-e.height/9],[e.x+e.width/4,e.y+e.height]):n[0]>e.x+e.width/4*3?it([e.x+e.width,e.y+e.height-e.height/9],n):it(n,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2-t.width*.06*2;return{height:r,width:i>0?i:0,x:t.x+oe.rectangleAndText+n+t.width*.06,y:t.y+(t.height-r)/2}}},Ox=e=>{const t=[[e.x,e.y+10],[e.x+5,e.y+10],[e.x+5,e.y+5],[e.x+10,e.y+5],[e.x+10,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height-e.height/9-10-3],[e.x+e.width-5,e.y+e.height-e.height/9-10-3-4],[e.x+e.width-5,e.y+e.height-e.height/9-5-3],[e.x+e.width-10,e.y+e.height-e.height/9-5-3-4],[e.x+e.width-10,e.y+e.height-e.height/9]];let n=gc([[e.x+e.width-10,e.y+e.height-e.height/9],[e.x+e.width-10-(e.width-10)/4,e.y+e.height-e.height/9*2],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x,e.y+e.height-e.height/9]]);return n=ei(n),[...t,...n]},q$={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x} ${t.y+t.height-t.height/9} V${t.y+10} H${t.x+5} V${t.y+5} H${t.x+10} V${t.y} H${t.x+t.width} V${t.y+t.height-t.height/9-10-3} L${t.x+t.width-5} ${t.y+t.height-t.height/9-10-3-4} V${t.y+t.height-t.height/9-5-3}
                 L${t.x+t.width-10} ${t.y+t.height-t.height/9-5-3-4} V${t.y+t.height-t.height/9}

             Q${t.x+t.width-10-(t.width-10)/4} ${t.y+t.height-t.height/9*3}, ${t.x+(t.width-10)/2} ${t.y+t.height-t.height/9} T${t.x} ${t.y+t.height-t.height/9}

                M${t.x+5} ${t.y+10} H${t.x+t.width-10} V${t.y+t.height-t.height/9}

                M${t.x+10} ${t.y+5} H${t.x+t.width-5} V${t.y+t.height-t.height/9-10-3}
            `,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return Be(t,Ox(e),!1)},getConnectorPoints(e){let t=gc([[e.x,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height],[e.x+(e.width-10)/2,e.y+e.height-e.height/9],[e.x+(e.width-10)/4*3,e.y+e.height-e.height/9*2],[e.x+e.width-10,e.y+e.height-e.height/9]]);t=ei(t);const n=Be([e.x+e.width/2,e.y+e.height],t);return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[n[0],n[1]],[e.x,e.y+e.height/2]]},getNearestCrossingPoint(e,t){const n=yT(Ox(e),t);let r=n[0],i=Ze(t[0],t[1],r[0],r[1]);return n.filter((o,s)=>s>0).forEach(o=>{let s=Ze(t[0],t[1],o[0],o[1]);s<i&&(i=s,r=o)}),r},getTangentVectorByConnectionPoint(e,t){const n=C.getConnectionPoint(e,t);if(n[0]>e.x&&n[0]<e.x+(e.width-10)/4)return it([e.x+(e.width-10)/4,e.y+e.height],n);if(n[0]>e.x+(e.width-10)/4&&n[0]<e.x+(e.width-10)/4*3)return it([e.x+(e.width-10)/4*3,e.y+e.height-e.height/9],[e.x+(e.width-10)/4,e.y+e.height]);if(n[0]>e.x+(e.width-10)/4*3&&n[0]<e.x+e.width-10)return it([e.x+(e.width-10),e.y+e.height-e.height/9],n);const r=nD(t)||Ne.bottom,i=Bs(r);return[i.x,i.y]},getTextRectangle:e=>{const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2-t.width*.06*2;return{height:r,width:i>0?i-10:0,x:t.x+oe.rectangleAndText+n+t.width*.06,y:t.y+(t.height-r)/2}}},Z$={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x} ${t.y+t.height*.15}
            A${t.width/2} ${t.height*.15}, 0, 0, 0,${t.x+t.width} ${t.y+t.height*.15}
            A${t.width/2} ${t.height*.15}, 0, 0, 0,${t.x} ${t.y+t.height*.15}
            V${t.y+t.height-t.height*.15}
            A${t.width/2} ${t.height*.15}, 0, 0, 0, ${t.x+t.width} ${t.y+t.height-t.height*.15}
            V${t.y+t.height*.15}`,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]),r=C.isHit({...e,y:e.y+e.height*.15,height:e.height-e.height*.3},n),i=Ri(t,[e.x+e.width/2,e.y+e.height*.15],e.width/2,e.height*.15),o=Ri(t,[e.x+e.width/2,e.y+e.height-e.height*.15],e.width/2,e.height*.15);return r||i||o},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){const n=Be(t,Se.getCornerPoints(e));if(n[1]<e.y+e.height*.15){const r=[e.x+e.width/2,e.y+e.height*.15],i=kn(t,r,e.width/2,e.height*.15);return i[1]>r[1]&&(i[1]=r[1]*2-i[1]),i}if(n[1]>e.y+e.height-e.height*.15){const r=[e.x+e.width/2,e.y+e.height-e.height*.15],i=kn(t,r,e.width/2,e.height*.15);return i[1]<r[1]&&(i[1]=r[0]*2-i[1]),i}return n},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=C.getConnectionPoint(e,t);let r=[e.x+e.width/2,e.y+e.height-e.height*.15],i=e.width/2,o=e.height*.15;n[1]<e.y+e.height*.15&&n[0]>e.x&&(r=[e.x+e.width/2,e.y+e.height*.15]);const u=[n[0]-r[0],-(n[1]-r[1])],l=ii(u[0],u[1],i,o);return oi(u[0],u[1],l)},getTextRectangle:e=>{const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+oe.rectangleAndText+n,y:t.y+t.height*.3+(t.height-t.height*.45-r)/2}}},Q$={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x+t.width-t.width*.15} ${t.y}
            A${t.width*.15} ${t.height/2}, 0, 0, 0,${t.x+t.width-t.width*.15} ${t.y+t.height}
            A${t.width*.15} ${t.height/2}, 0, 0, 0,${t.x+t.width-t.width*.15} ${t.y}
            H${t.x+t.width*.15}
            A${t.width*.15} ${t.height/2}, 0, 0, 0, ${t.x+t.width*.15} ${t.y+t.height}
            H${t.x+t.width-t.width*.15}`,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]),r=C.isHit({...e,x:e.x+e.width*.15,width:e.width-e.width*.3},n),i=Ri(t,[e.x+e.width*.15,e.y+e.height/2],e.width*.15,e.height/2),o=Ri(t,[e.x+e.width-e.width*.15,e.y+e.height/2],e.width*.15,e.height/2);return r||i||o},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){const n=Be(t,Se.getCornerPoints(e));if(n[0]<e.x+e.width*.15){const r=[e.x+e.width*.15,e.y+e.height/2],i=kn(t,r,e.width*.15,e.height/2);return i[0]>r[0]&&(i[0]=r[0]*2-i[0]),i}if(n[0]>e.x+e.width-e.width*.15){const r=[e.x+e.width-e.width*.15,e.y+e.height/2],i=kn(t,r,e.width*.15,e.height/2);return i[0]<r[0]&&(i[0]=r[0]*2-i[0]),i}return n},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=C.getConnectionPoint(e,t);let r=[e.x+e.width*.15,e.y+e.height/2],i=e.width*.15,o=e.height/2;n[0]>e.x+e.width-e.width*.15&&n[1]>e.y&&(r=[e.x+e.width-e.width*.15,e.y+e.height/2]);const u=[n[0]-r[0],-(n[1]-r[1])],l=ii(u[0],u[1],i,o);return oi(u[0],u[1],l)},getTextRectangle:e=>{const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-t.width*.45-oe.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+t.width*.15+oe.rectangleAndText+n,y:t.y+(t.height-r)/2}}},J$={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x} ${t.y} h${t.width} v${t.height} h${-t.width} v${-t.height}
            M${t.x} ${t.y+t.height/10} h${t.width}
            M${t.x+t.width/10} ${t.y} v${t.height}
            `,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return Be(t,Se.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=Se.getCornerPoints(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-t.width*.1-oe.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+t.width*.1+oe.rectangleAndText+n,y:t.y+t.height*.1+(t.height-t.height*.1-r)/2}}},e_={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x+t.width} ${t.y}
            C${t.x+t.width-t.width*.09} ${t.y},
            ${t.x+t.width} ${t.y+t.height/2},
            ${t.x+t.width-t.width*.09} ${t.y+t.height/2}
            C${t.x+t.width} ${t.y+t.height/2},
            ${t.x+t.width-t.width*.09} ${t.y+t.height},
            ${t.x+t.width} ${t.y+t.height}`,{...n,fillStyle:"solid",fill:"transparent"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return Be(t,Se.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=Se.getCornerPoints(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-t.width*.09-oe.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+oe.rectangleAndText+n,y:t.y+(t.height-r)/2}}},t_={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x} ${t.y}
            C${t.x+t.width*.09} ${t.y},
            ${t.x} ${t.y+t.height/2},
            ${t.x+t.width*.09} ${t.y+t.height/2}
            C${t.x} ${t.y+t.height/2},
            ${t.x+t.width*.09} ${t.y+t.height},
            ${t.x} ${t.y+t.height}`,{...n,fillStyle:"solid",fill:"transparent"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return Be(t,Se.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=Se.getCornerPoints(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-t.width*.09-oe.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+t.width*.09+oe.rectangleAndText+n,y:t.y+(t.height-r)/2}}},n_={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x+t.width*.075} ${t.y+t.height} H${t.x} V${t.y} H${t.x+t.width*.075}
           `,{...n,fillStyle:"solid",fill:"transparent"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return Be(t,Se.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=Se.getCornerPoints(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+oe.rectangleAndText+n,y:t.y+(t.height-r)/2}}},r_=e=>[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width,e.y],[e.x+e.width,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],i_={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x+t.width*.15} ${t.y}
            H${t.x+t.width-t.width*.1}
            A ${t.width*.1} ${t.height/2}, 0, 0, 1,${t.x+t.width-t.width*.1} ${t.y+t.height}
            H${t.x+t.width*.15}
            L${t.x} ${t.y+t.height/2}
            Z
            `,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=[[e.x,e.y+e.height/2],[e.x+e.width*.15,e.y],[e.x+e.width-e.width*.1,e.y],[e.x+e.width-e.width*.1,e.y+e.height],[e.x+e.width*.15,e.y+e.height]],r=yo(t,n),i=Ri(t,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2);return r||i},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){const n=Be(t,r_(e));return n[0]>e.x+e.width-e.width*.1?kn(t,[e.x+e.width-e.width*.1,e.y+e.height/2],e.width*.1,e.height/2):n},getTangentVectorByConnectionPoint(e,t){const n=C.getConnectionPoint(e,t),r=[e.x+e.width-e.width*.1,e.y+e.height/2],i=[n[0]-r[0],-(n[1]-r[1])],o=e.width*.1,s=e.height/2,u=ii(i[0],i[1],o,s);return oi(i[0],i[1],u)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-n*2-t.width*.25;return{width:i>0?i:0,height:r,x:t.x+n+t.width*.15,y:t.y+(t.height-r)/2}}},Gl={draw(e,t,n,r){const i=Te();try{const o=Cc(e,{...r==null?void 0:r.element});if(o){const s=P.getRoughSVG(e),{x:u,y:l,width:a,height:c}=t,f=tf(s,[u,l],[u+a,l],n),h=tf(s,[u,l],[u,l+c],n);i.append(f,h),o.forEach(g=>{const p=C.getRectangleByPoints(g.points),{x:d,y,width:m,height:v}=p,w=Hr(e,{x:d+xt,y:y+xt,width:m-xt*2,height:v-xt*2},{fill:g.fill,fillStyle:"solid",strokeWidth:0}),E=tf(s,[d+m,y],[d+m,y+v],n),S=tf(s,[d,y+v],[d+m,y+v],n);i.append(w,E,S)}),ke(i,"round")}}catch(o){console.error(o)}return i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return wT(t,e,Lu(e))},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle(e,t){try{if(t&&t.id){const n=qs(t==null?void 0:t.board,e,t.id);if(n)return Ua.isVerticalText(n)?o_(n):xT(n)}}catch(n){console.error(n)}return{x:0,y:0,width:0,height:0}}};function o_(e){const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight||0,i=t.height-oe.rectangleAndText*2-n*2;return{width:i>0?i:0,height:r,x:t.x-i/2+t.width/2,y:t.y+(t.height-r)/2}}function xT(e){const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight||0,i=t.width-oe.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+oe.rectangleAndText+n,y:t.y+(t.height-r)/2}}const s_={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x+t.width/2} ${t.y+t.height/4}
            A${t.width/3/2} ${t.height/4/2}, 0, 0, 1, ${t.x+t.width/2} ${t.y}
            A${t.width/3/2} ${t.height/4/2}, 0, 0, 1, ${t.x+t.width/2} ${t.y+t.height/4}
            V${t.y+t.height/4*3}
            M${t.x+t.width/2} ${t.y+t.height/2} H${t.x}
            M${t.x+t.width/2} ${t.y+t.height/2} H${t.x+t.width}
            M${t.x+t.width/2} ${t.y+t.height/4*3}
            L${t.x+t.width/12} ${t.y+t.height}
            M${t.x+t.width/2} ${t.y+t.height/4*3}
            L${t.x+t.width/12*11} ${t.y+t.height}
            `,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){let n=Be(t,Se.getCornerPoints(e));if(n[1]>=e.y&&n[1]<=e.y+e.height/4){const r=[e.x+e.width/2,e.y+e.height/4/2];return n=kn(t,r,e.width/3/2,e.height/4/2),n}return n[1]>=e.y+e.height/4&&n[1]<e.y+e.height/4*3?(n[1]===e.x+e.width/2?n=Be(t,[[e.x+e.width/2,e.y+e.height/4],[e.x+e.width/2,e.y+e.height/4*3]]):n=Be(t,[[e.x,e.y+e.height/2],[e.x+e.width,e.y+e.height/2]]),n):(n=Be(t,[[e.x+e.width/12,e.y+e.height],[e.x+e.width/2,e.y+e.height/4*3],[e.x+e.width/12*11,e.y+e.height]]),n)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=C.getConnectionPoint(e,t);if(n[1]>=e.y&&n[1]<=e.y+e.height/4){const r=[e.x+e.width/2,e.y+e.height/4/2],i=[n[0]-r[0],-(n[1]-r[1])],o=e.width/2,s=e.height/2,u=ii(i[0],i[1],o,s);return oi(i[0],i[1],u)}return n[1]>=e.y+e.height/4&&n[1]<e.y+e.height/4*3?n[0]<e.x+e.width/2?za(it([e.x,e.y+e.height/2],n),-(Math.PI/2)):za(it([e.x+e.width,e.y+e.height/2],n),-(Math.PI/2)):n[1]>=e.y+e.height/4*3?n[0]<e.x+e.width/2?it(n,[e.x+e.width/12,e.y+e.height]):it([e.x+e.width/12*11,e.y+e.height],n):it(n,[e.x+e.width/4,e.y+e.height])},getTextRectangle:e=>{const t=C.getRectangleByPoints(e.points),n=e.textHeight,r=t.width+40;return{height:n,width:r>0?r:0,x:t.x-20,y:t.y+t.height+4}}},u_={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+40} ${t.y} L${t.x+40} ${t.y+t.height} `,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return Be(t,Se.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=Se.getCornerPoints(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle(e){const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=40-oe.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+oe.rectangleAndText+n,y:t.y+(t.height-r)/2}}},l_={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x} ${t.y+25}
            V${t.y}
            H${t.x+t.width*.7}
            L${t.x+t.width*.8} ${t.y+25}
            H${t.x+t.width}
            V${t.y+t.height}
            H${t.x}
            V${t.y+25}
            H${t.x+t.width*.8}`,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){let n=Be(t,Se.getCornerPoints(e));return n[0]>e.x+e.width*.7&&n[1]<=e.y+25&&(n=Be(t,[[e.x+e.width*.7,e.y],[e.x+e.width*.8,e.y+25],[e.x+e.width,e.y+25]],!1)),n},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTangentVectorByConnectionPoint(e,t){const n=C.getConnectionPoint(e,t);return n[0]>e.x+e.width*.7&&n[1]<e.y+25?it([e.x+e.width*.7,e.y],n):it([e.x+e.width*.8,e.y+25],n)},getTextRectangle(e,t){var o,s;const n=C.getRectangleByPoints(e.points),r=Me(e),i=(s=(o=e.texts)==null?void 0:o.find(u=>u.id===(t==null?void 0:t.id)))==null?void 0:s.textHeight;if((t==null?void 0:t.id)===Qn.name){const u=n.width*.7-oe.rectangleAndText-r;return{height:i,width:u>0?u:0,x:n.x+oe.rectangleAndText+r,y:n.y+(25-i)/2}}if((t==null?void 0:t.id)===Qn.content){const u=n.width-oe.rectangleAndText*2-r*2;return{height:i,width:u>0?u:0,x:n.x+oe.rectangleAndText+r,y:n.y+25+(n.height-25-i)/2}}return n}},a_={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x} ${t.y+25}
            V${t.y}
            H${t.x+t.width}
            V${t.y+t.height}
            H${t.x}
            V${t.y+25}
            H${t.x+t.width/3-8}
            L${t.x+t.width/3} ${t.y+16}
            V${t.y}
            `,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return Be(t,Se.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=Se.getCornerPoints(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle(e,t){var o,s;const n=C.getRectangleByPoints(e.points),r=Me(e),i=(s=(o=e.texts)==null?void 0:o.find(u=>u.id===(t==null?void 0:t.id)))==null?void 0:s.textHeight;if((t==null?void 0:t.id)===Qn.name){const u=n.width/3-8-oe.rectangleAndText-r;return{height:i,width:u>0?u:0,x:n.x+oe.rectangleAndText+r,y:n.y+(25-i)/2}}if((t==null?void 0:t.id)===Qn.content){const u=n.width-oe.rectangleAndText*2-r*2;return{height:i,width:u>0?u:0,x:n.x+oe.rectangleAndText+r,y:n.y+25+oe.rectangleAndText+r}}return n}},c_={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x} ${t.y} L${t.x+t.width} ${t.y+t.height}
            M${t.x+t.width} ${t.y} L${t.x} ${t.y+t.height}
            `,{...n,fillStyle:"solid",strokeWidth:4});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return Be(t,Se.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=Se.getCornerPoints(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)}},f_={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x} ${t.y} H${t.x+t.width} V${t.y+t.height} H${t.x} Z M${t.x+t.width*.125} ${t.y} L${t.x+t.width*.125} ${t.y+t.height} M${t.x+t.width-t.width*.125} ${t.y} L${t.x+t.width-t.width*.125} ${t.y+t.height}`,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return Be(t,Se.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=Se.getCornerPoints(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2-t.width*.125*2;return{height:r,width:i>0?i:0,x:t.x+oe.rectangleAndText+n+t.width*.125,y:t.y+(t.height-r)/2}}},h_={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x} ${t.y}
            h${t.width-16}
            v16
            h16
            v${t.height-16}
            h${-t.width}
            Z
            M${t.x+t.width-16} ${t.y}
            A16 16, 0,0,1, ${t.x+t.width} ${t.y+16}
            `,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){const n=Be(t,Se.getCornerPoints(e));return n[0]>e.x+e.width-16&&n[1]<e.y+16?kn(t,[e.x+e.width-16,e.y+16],16,16):n},getTangentVectorByConnectionPoint(e,t){const n=C.getConnectionPoint(e,t),r=[e.x+e.width*3/4,e.y+e.height/2],i=[n[0]-r[0],-(n[1]-r[1])],o=ii(i[0],i[1],16,16);return oi(i[0],i[1],o)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle:e=>{const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n-15;return{height:r,width:i>0?i:0,x:t.x+oe.rectangleAndText+n,y:t.y+(t.height-r)/2}}},d_={draw(e,t,n){const i=P.getRoughSVG(e).path(`
        M${t.x} ${t.y+t.height/2}
        H${t.x+t.width*.3}
        A${t.width*.13} ${t.height*.285}, 0, 1, 1 ${t.x+t.width*.3+t.width*.26} ${t.y+t.height/2}
        A${t.width*.13} ${t.height*.285}, 0, 1, 1 ${t.x+t.width*.3} ${t.y+t.height/2}
        M${t.x+t.width*.3+t.width*.13} ${t.y}
        A${t.width*.233} ${t.height/2}, 0, 0, 1 ${t.x+t.width*.3+t.width*.13} ${t.y+t.height}
        M${t.x+t.width*.3+t.width*.13+t.width*.233} ${t.y+t.height/2} H${t.x+t.width}
        `,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getNearestPoint(e,t){const n=Be(t,Se.getCornerPoints(e));return n[0]===e.x+e.width/2?kn(t,[e.x+e.width*.43,e.y+e.height/2],e.width*.223,e.height/2):n},getTangentVectorByConnectionPoint(e,t){const n=C.getConnectionPoint(e,t);return n[0]>e.x+e.width*.43&&n[1]<e.y+e.height/2?za(it(n,[e.x,e.y+e.height/2]),-Math.PI):n[0]>e.x+e.width*.43&&n[1]>e.y+e.height/2?it(n,[e.x,e.y+e.height/2]):it(n,[e.x,e.y+e.height/2])}},g_={draw(e,t,n){const i=P.getRoughSVG(e).path(`M${t.x} ${t.y}
        A${t.width*.39} ${t.height/2}, 0, 0, 1 ${t.x} ${t.y+t.height}
        M${t.x+t.width*.41} ${t.y+t.height/2} H${t.x+t.width}
        `,{...n,fillStyle:"solid",fill:"transparent"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return Be(t,Se.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=Se.getCornerPoints(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)}},p_={draw(e,t,n){const i=P.getRoughSVG(e).path(` M${t.x} ${t.y+t.height/2}
        H${t.x+t.width*.54}
        A${t.width*.46/2} ${t.height/2}, 0, 1, 1 ${t.x+t.width} ${t.y+t.height/2}
        A${t.width*.46/2} ${t.height/2}, 0, 1, 1 ${t.x+t.width*.54} ${t.y+t.height/2}
        `,{...n,fillStyle:"solid"});return ke(i,"round"),i},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getNearestPoint(e,t){return Be(t,Se.getCornerPoints(e))},getTangentVectorByConnectionPoint(e,t){const n=C.getConnectionPoint(e,t),r=[e.x+e.width*3/4,e.y+e.height/2];if(n[0]>e.x+e.width*.54){const i=[n[0]-r[0],-(n[1]-r[1])],o=e.width*.46/2,s=e.height/2,u=ii(i[0],i[1],o,s);return oi(i[0],i[1],u)}return it(n,[e.x,e.y+e.height/2])}},ET={draw(e,t,n){const r=P.getRoughSVG(e),i={with:t.width>70?24:t.width*.2,height:t.height-28-t.height*.35>1?14:t.height*.175},o=r.path(`M${t.x+12} ${t.y}
            v${t.height*.175}
            h${i.with/2} v${i.height} h${-i.with} v${-i.height} h${i.with/2}

            M${t.x+12} ${t.y+t.height*.175+i.height}

            v${t.height-t.height*.35-i.height*2}
            h${i.with/2} v${i.height} h${-i.with} v${-i.height} h${i.with/2}
            M${t.x+12} ${t.y+t.height-t.height*.175}
            V${t.y+t.height}
            H${t.x+t.width}
            v${-t.height}
            h${-(t.width-12)}
             `,{...n,fillStyle:"solid"});return ke(o,"round"),o},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){let n=Be(t,Se.getCornerPoints(e));return n[1]===e.y+e.height/2&&(n=Be(t,[[e.x+12,e.y+e.height*.175+14],[e.x+12,e.y+e.height-e.height*.175-14]],!1)),n},getTangentVectorByConnectionPoint(e,t){const n=C.getConnectionPoint(e,t);return it([e.x+12,e.y+e.height-e.height*.175-14],n)},getConnectorPoints(e){return[[e.x+e.width/2,e.y],[e.x+e.width,e.y+e.height/2],[e.x+e.width/2,e.y+e.height],[e.x+12,e.y+e.height/2]]},getTextRectangle(e){const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-24-oe.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+24+oe.rectangleAndText+n,y:t.y+(t.height-r)/2}}},m_={draw(e,t,n){const r=P.getRoughSVG(e),i=t.width-45*2-18>1?45:t.width*.25,o=t.height-30-8*2>1?30:t.height*.2,s={x:t.x+t.width-18-i,y:t.y+8,width:i,height:o},u=r.path(`M${t.x} ${t.y}
            H${t.x+t.width}
            V${t.y+t.height}
            H${t.x} Z

            `,{...n,fillStyle:"solid"}),l=ET.draw(e,s,n);return u.append(l),ke(u,"round"),u},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return Be(t,Se.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=Se.getCornerPoints(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle(e){const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-45*2-18>1?45:t.width*.25,o=t.width-18-i-oe.rectangleAndText-n*2;return{height:r,width:o>0?o:0,x:t.x+oe.rectangleAndText+n,y:t.y+(t.height-r)/2}}},v_={draw(e,t,n){const r=P.getRoughSVG(e);return hl(r,t.x,t.y,t.x+t.width,t.y+t.height,{...n,fillStyle:"solid",dashGap:10,strokeLineDash:[10,10]},!1,4)},isInsidePoint(e,t){const n=C.getRectangleByPoints([t,t]);return C.isHit(e,n)},getCornerPoints(e){return C.getCornerPoints(e)},getNearestPoint(e,t){return Be(t,Se.getCornerPoints(e))},getEdgeByConnectionPoint(e,t){const n=Se.getCornerPoints(e),r=C.getConnectionPoint(e,t);return jt(n,r)},getConnectorPoints(e){return C.getEdgeCenterPoints(e)},getTextRectangle(e){const t=C.getRectangleByPoints(e.points),n=Me(e),r=e.textHeight,i=t.width-oe.rectangleAndText*2-n*2;return{height:r,width:i>0?i:0,x:t.x+oe.rectangleAndText+n,y:t.y+(t.height-r)/2}}},y_={[pe.rectangle]:Se,[pe.diamond]:dg,[pe.ellipse]:gg,[pe.parallelogram]:Dx,[pe.roundRectangle]:B$,[pe.text]:Se,[pe.triangle]:k$,[pe.leftArrow]:v$,[pe.trapezoid]:R$,[pe.rightArrow]:A$,[pe.cross]:d$,[pe.star]:b$,[pe.pentagon]:x$,[pe.hexagon]:p$,[pe.octagon]:w$,[pe.pentagonArrow]:P$,[pe.processArrow]:D$,[pe.twoWayArrow]:F$,[pe.comment]:f$,[pe.roundComment]:M$,[pe.cloud]:Ep,[he.process]:Se,[he.decision]:dg,[he.connector]:gg,[he.data]:Dx,[he.terminal]:I$,[he.database]:Z$,[he.hardDisk]:Q$,[he.internalStorage]:J$,[he.manualInput]:G$,[he.preparation]:H$,[he.manualLoop]:$$,[he.merge]:_$,[he.delay]:j$,[he.storedData]:W$,[he.or]:X$,[he.summingJunction]:K$,[he.predefinedProcess]:z$,[he.offPage]:U$,[he.document]:Y$,[he.multiDocument]:q$,[he.noteCurlyLeft]:e_,[he.noteCurlyRight]:t_,[he.noteSquare]:n_,[he.display]:i_,[Dn.swimlaneHorizontal]:Gl,[Dn.swimlaneVertical]:Gl,[nl.table]:Gl,[ae.actor]:s_,[ae.useCase]:gg,[ae.container]:u_,[ae.note]:h_,[ae.package]:l_,[ae.combinedFragment]:a_,[ae.class]:Gl,[ae.interface]:Gl,[ae.activation]:Se,[ae.object]:Se,[ae.deletion]:c_,[ae.activityClass]:f_,[ae.simpleClass]:Se,[ae.component]:ET,[ae.componentBox]:m_,[ae.template]:v_,[ae.port]:Se,[ae.branchMerge]:dg,[ae.assembly]:d_,[ae.requiredInterface]:g_,[ae.providedInterface]:p_},Zt=e=>y_[e],Dc=(e,t)=>{const n=Me(t),r=t.source.boundId?zn(e,t.source.boundId):void 0,i=t.target.boundId?zn(e,t.target.boundId):void 0;let o=r?ro(r,t.source.connection):t.points[0],s=i?ro(i,t.target.connection):t.points[t.points.length-1],u=ou([s[0]-o[0],s[1]-o[1]])||Ne.right,l=_L(u);const a=Bs(u),c=Bs(l),f={key:cr.source,point:o,direction:u,vector:[a.x,a.y]},h={key:cr.target,point:s,direction:l,vector:[c.x,c.y]};if(r){const g=Nt.isSourceMarkOrTargetMark(t,Ft.none,cr.source)?0:n,p=Fx(r,t.source.connection);if(f.vector=p,f.boundElement=r,Oi(r)){const d=ou(za(p,r.angle));u=d||u}else{const d=ou(p);u=d||u}f.direction=u,o=ro(r,t.source.connection,u,g),f.point=wo(o,r)||o}if(i){const g=Nt.isSourceMarkOrTargetMark(t,Ft.none,cr.target)?0:n,p=Fx(i,t.target.connection);if(h.vector=p,h.boundElement=i,Oi(i)){const d=ou(za(p,i.angle));l=d||l}else{const d=ou(p);l=d||l}h.direction=l,s=ro(i,t.target.connection,l,g),h.point=wo(s,i)||s}return{source:f,target:h}},ro=(e,t,n,r)=>{const i=C.getRectangleByPoints(e.points);if(n&&r){const o=Bs(n),s=C.getConnectionPoint(i,t);return[s[0]+o.x*r,s[1]+o.y*r]}else return C.getConnectionPoint(i,t)},Fx=(e,t)=>{const n=C.getRectangleByPoints(e.points),r=$o(e),i=Zt(r);let o=[0,0];const s=nD(t);if(s&&e.shape!==pe.ellipse){const u=Bs(s);return[u.x,u.y]}if(i.getEdgeByConnectionPoint){const u=i.getEdgeByConnectionPoint(n,t);if(u){const l=[u[1][0]-u[0][0],u[1][1]-u[0][1]];return XC(l)}}if(i.getTangentVectorByConnectionPoint){const u=i.getTangentVectorByConnectionPoint(n,t);if(u)return XC(u)}return o},Tc=(e,t,n)=>{n=n??Dc(e,t);const{sourceRectangle:r,targetRectangle:i}=BH(e,t,n),{sourceOuterRectangle:o,targetOuterRectangle:s}=oG(r,i),u=n.source.point,l=n.target.point,a=ZC(u,o,n.source.direction),c=ZC(l,s,n.target.direction);return{sourcePoint:u,nextSourcePoint:a,sourceRectangle:r,sourceOuterRectangle:o,targetPoint:l,nextTargetPoint:c,targetRectangle:i,targetOuterRectangle:s}},w_=(e,t,n)=>{const r=gl(e,{match:i=>I.isArrowLine(i)?i.source.boundId===i.id||i.target.boundId===i.id:!1,recursion:i=>!0});r.length&&r.forEach(i=>{const o=i.source.boundId===t.id,s=o?"source":"target",u={...i[s]},l=On(e,i),a=o?l[0]:l[l.length-1];u.connection=qa(e,a,t);const c=P.findPath(e,i),f=n.findIndex(h=>ge.equals(h.path,c));f===-1?n.push({property:{[s]:u},path:c}):n[f].property={...n[f].property,[s]:u}})};var Ft;(function(e){e.arrow="arrow",e.none="none",e.openTriangle="open-triangle",e.solidTriangle="solid-triangle",e.sharpArrow="sharp-arrow",e.oneSideUp="one-side-up",e.oneSideDown="one-side-down",e.hollowTriangle="hollow-triangle",e.singleSlash="single-slash"})(Ft||(Ft={}));var et;(function(e){e.straight="straight",e.curve="curve",e.elbow="elbow"})(et||(et={}));var cr;(function(e){e.source="source",e.target="target"})(cr||(cr={}));const Nt={isSourceMarkOrTargetMark(e,t,n){return n===cr.source?e.source.marker===t:e.target.marker===t},isSourceMark(e,t){return Nt.isSourceMarkOrTargetMark(e,t,cr.source)},isTargetMark(e,t){return Nt.isSourceMarkOrTargetMark(e,t,cr.target)},isBoundElementOfSource(e,t){return e.source.boundId===t.id},isBoundElementOfTarget(e,t){return e.target.boundId===t.id},getPoints(e,t){let n;if(t.source.boundId){const o=zn(e,t.source.boundId),s=ro(o,t.source.connection);n=wo(s,o)||s}else n=t.points[0];let r;if(t.target.boundId){const o=zn(e,t.target.boundId),s=ro(o,t.target.connection);r=wo(s,o)||s}else r=t.points[t.points.length-1];const i=t.points.length>2?t.points.slice(1,t.points.length-1):[];return[n,...i,r]}};var jn;(function(e){e.basicShape="basicShape",e.flowchart="flowchart",e.text="text",e.arrowLine="arrow-line",e.UML="UML"})(jn||(jn={}));var Xh;(function(e){e.vectorLine="vectorLine"})(Xh||(Xh={}));var Za;(function(e){e.straight="straight",e.curve="curve"})(Za||(Za={}));const I={isGeometry:e=>e.type==="geometry",isArrowLine:e=>e.type==="arrow-line"||e.type==="line",isVectorLine:e=>e.type==="vector-line",isLine:e=>I.isArrowLine(e)||I.isVectorLine(e),isText:e=>e.type==="geometry"&&e.shape===pe.text,isImage:e=>e.type==="image",isTable:e=>Ua.isTable(e),isDrawElement:e=>!!(I.isGeometry(e)||I.isLine(e)||I.isImage(e)||I.isTable(e)||I.isSwimlane(e)),isCustomGeometryElement:(e,t)=>{const n=e.getPluginOptions(yD);return!!((n==null?void 0:n.customGeometryTypes)||[]).includes(t.type)},isShapeElement:e=>I.isImage(e)||I.isGeometry(e)||I.isTable(e)||I.isSwimlane(e),isBasicShape:e=>Object.keys(pe).includes(e.shape),isFlowchart:e=>Object.keys(he).includes(e.shape),isUML:e=>Object.keys(ae).includes(e.shape),isSwimlane:e=>e.type==="swimlane",isVerticalSwimlane:e=>I.isSwimlane(e)&&e.shape===Dn.swimlaneVertical,isHorizontalSwimlane:e=>I.isSwimlane(e)&&e.shape===Dn.swimlaneHorizontal,isUMLClassOrInterface:e=>Object.keys(ae).includes(e.shape)&&[ae.class,ae.interface].includes(e.shape),isGeometryByTable:e=>I.isUMLClassOrInterface(e),isElementByTable:e=>I.isTable(e)||I.isSwimlane(e)||I.isGeometryByTable(e)};class PT extends In{canDraw(t,n){return!0}draw(t,n){const r=C.getRectangleByPoints(t.points),i=t.shape;if(i===pe.text)return;const o=Vv(this.board,t),s=Me(t),u=Pc(this.board,t),l=Vd(this.board,t),a=Go(l,s);return yH(this.board,C.inflate(r,-s),i,{stroke:u,strokeWidth:s,fill:o,strokeLineDash:a})}}const Ry=class Ry extends In{constructor(t){super(t),this.board=t,this.hoverElement=null}canDraw(t,n){const r=re(this.board);return!!(n.selected&&r.length===1&&!gn(this.board))}draw(t,n){return this.autoCompleteG=Te(),Yv(t).forEach((i,o)=>{const s=Vs(P.getRoughSVG(this.board),i,RN,{stroke:"none",fill:v5(ml,kN),fillStyle:"solid"});s.classList.add(`line-auto-complete-${o}`),this.autoCompleteG.appendChild(s)}),this.autoCompleteG}removeAutoCompleteG(t){this.hoverElement=this.autoCompleteG.querySelector(`.line-auto-complete-${t}`),this.hoverElement.style.visibility="hidden"}recoverAutoCompleteG(){this.hoverElement&&(this.hoverElement.style.visibility="visible",this.hoverElement=null)}};Ry.key="line-auto-complete-generator";let Ii=Ry;class C_ extends Gv{get textManage(){return this.textManages[0]}constructor(t,n,r,i){super(t,n,[{id:n.id,text:r,textHeight:n.textHeight}],i)}update(t,n,r,i){Di(t)||super.update(t,[{text:n,id:t.id,textHeight:t.textHeight}],[{text:r,id:t.id,textHeight:t.textHeight}],i)}}class bx extends No{constructor(){super()}initializeGenerator(){this.activeGenerator=new bi(this.board,{getStrokeWidth:()=>(re(this.board).length===1&&!gn(this.board),xt),getStrokeOpacity:()=>re(this.board).length===1&&!gn(this.board)?1:.5,getRectangle:t=>C.getRectangleByPoints(t.points),hasResizeHandle:()=>Tv(this.board,this.element)}),this.lineAutoCompleteGenerator=new Ii(this.board),this.shapeGenerator=new PT(this.board),Qv(this.element)&&this.initializeTextManage(),this.getRef().addGenerator(Ii.key,this.lineAutoCompleteGenerator),this.getRef().addGenerator(bi.key,this.activeGenerator)}initialize(){super.initialize(),this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected}),this.textGenerator&&this.textGenerator.draw(this.getElementG())}onContextChanged(t,n){if(t.element!==n.element||t.hasThemeChanged)this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected}),this.textGenerator&&this.updateText(n.element,t.element);else{const r=t.selected===n.selected,i=this.activeGenerator.options.hasResizeHandle()===this.activeGenerator.hasResizeHandle;(!r||!i)&&(this.activeGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected}),this.lineAutoCompleteGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected}))}}updateText(t,n){Di(this.element)?this.textGenerator.update(this.element,t.texts,n.texts,this.getElementG()):this.textGenerator.update(this.element,t.text,n.text,this.getElementG())}initializeTextManage(){const t=(n,r,i)=>{r.newText?Di(n)?dn.setDrawTexts(this.board,n,{id:i.id,text:r.newText,textHeight:r.height}):dn.setText(this.board,n,r.newText,r.width,r.height):dn.setTextSize(this.board,n,r.width,r.height),r.operations&&$v(n,r.operations)};Di(this.element)?this.textGenerator=new Gv(this.board,this.element,this.element.texts,{onChange:t}):this.textGenerator=new C_(this.board,this.element,this.element.text,{onChange:t,getMaxWidth:()=>{var i;let n=St(this.element).width;const r=Zt(this.element.shape).getTextRectangle;return r&&(n=r(this.element).width),(i=this.element)!=null&&i.autoSize?wD.defaultTextMaxWidth:n}}),this.textGenerator.initialize()}destroy(){var t;super.destroy(),this.activeGenerator.destroy(),this.lineAutoCompleteGenerator.destroy(),(t=this.textGenerator)==null||t.destroy()}}var It;(function(e){e.source="source",e.target="target",e.addHandle="addHandle"})(It||(It={}));const ST=(e,t,n)=>{let r=I.isArrowLine(t)?Nt.getPoints(e,t):t.points;const i=Pp(r,n);if(i!==-1){const u=i;if(i===0)return{handle:It.source,handleIndex:u};if(i===r.length-1)return{handle:It.target,handleIndex:u};if(t.shape!==et.elbow)return{handleIndex:u}}const o=vT(e,t),s=Pp(o,n);if(s!==-1)return{handle:It.addHandle,handleIndex:s}};function Pp(e,t){const n=e.map(i=>({x:i[0]-lr/2,y:i[1]-lr/2,width:lr,height:lr})),r=n.find(i=>C.isHit(C.getRectangleByPoints([t,t]),i));return r?n.indexOf(r):-1}class DT extends In{constructor(){super(...arguments),this.onlySelectedCurrentLine=!1}canDraw(t,n){return!!n.selected}draw(t,n){const r=Te(),i=re(this.board);if(this.onlySelectedCurrentLine=i.length===1,this.onlySelectedCurrentLine){r.classList.add(cl);const o=I.isArrowLine(t)?Nt.getPoints(this.board,t):t.points;let s=[...o],u=[];t.shape===et.elbow&&(s=o.slice(0,1).concat(o.slice(-1)),u=iT(this.board,t,n.linePoints)),s.forEach(a=>{const c=jC(this.board,a);r.appendChild(c)});const l=vT(this.board,t);if(!P.hasBeenTextEditing(this.board))for(let a=0;a<l.length;a++){const c=l[a];if(t.shape===et.elbow&&u.length){const h=Pp(l,c);if(QN(this.board,t,[...o],u,h)){const p=jC(this.board,c);r.appendChild(p);continue}}const f=OL(this.board,c);r.appendChild(f)}}else{const o=this.board.getRectangle(t);if(o){let s="0.5";(o.height===0||o.width===0)&&(s="0.8");const u=Hr(this.board,o,{stroke:ml,strokeWidth:NG.selectionStrokeWidth});u.style.opacity=s,r.appendChild(u)}}return r}needUpdate(){return re(this.board).length===1!==this.onlySelectedCurrentLine}}const x_="debug:plait:line-turning",Ix=pc(x_);class E_ extends No{constructor(){super(),this.boundedElements={}}initializeGenerator(){this.shapeGenerator=new ZD(this.board),this.activeGenerator=new DT(this.board),this.initializeTextManages()}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const t=On(this.board,this.element);this.activeGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected,linePoints:t}),super.initialize(),this.boundedElements=this.getBoundedElements(),this.drawText(),Ix.isDebug()&&Ix.drawCircles(this.board,this.element.points.slice(1,-1),4,!0)}getBoundedElements(){const t={};if(this.element.source.boundId){const n=zn(this.board,this.element.source.boundId);n&&(t.source=n)}if(this.element.target.boundId){const n=zn(this.board,this.element.target.boundId);n&&(t.target=n)}return t}onContextChanged(t,n){const r=this.getBoundedElements(),i=r.source!==this.boundedElements.source||r.target!==this.boundedElements.target;this.boundedElements=r;const o=On(this.board,this.element);if(t.element!==n.element||t.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected,linePoints:o}),this.updateText(n.element.texts,t.element.texts),this.updateTextRectangle()):(t.selected!==n.selected||this.activeGenerator.needUpdate())&&this.activeGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected,linePoints:o}),i){this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected,linePoints:o}),this.updateTextRectangle();return}}initializeTextManages(){var t;if((t=this.element.texts)!=null&&t.length){const n=[];this.element.texts.forEach((r,i)=>{const o=this.createTextManage(r,i);n.push(o)}),this.getRef().initializeTextManage(n)}}drawText(){var t;(t=this.element.texts)!=null&&t.length&&this.getRef().getTextManages().forEach((n,r)=>{n.draw(this.element.texts[r].text),this.getElementG().append(n.g)})}createTextManage(t,n){return new wc(this.board,{getRectangle:()=>Xv(this.board,this.element,n),onChange:r=>{const i=P.findPath(this.board,this.element),s=[...Ae.get(this.board,i).texts],u=r.width<_h?_h:r.width;s.splice(n,1,{text:r.newText?r.newText:this.element.texts[n].text,position:this.element.texts[n].position,width:u,height:r.height}),dn.setArrowLineTexts(this.board,this.element,s),r.operations&&$v(this.element,r.operations)},getMaxWidth:()=>wD.defaultTextMaxWidth,textPlugins:[]})}updateText(t,n){if(t===n)return;const r=t.length,i=n.length,o=this.getRef().getTextManages();if(i===r)for(let s=0;s<r;s++)t[s].text!==n[s].text&&o[s].updateText(n[s].text);else this.getRef().destroyTextManage(),this.initializeTextManages(),this.drawText()}updateTextRectangle(){this.getRef().getTextManages().forEach(n=>{n.updateRectangle()})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.getRef().destroyTextManage()}}class P_ extends No{constructor(){super()}initializeGenerator(){this.shapeGenerator=new ND(this.board),this.activeGenerator=new DT(this.board)}initialize(){this.initializeGenerator(),this.shapeGenerator.processDrawing(this.element,this.getElementG());const t=Rs(this.board,this.element);this.activeGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected,linePoints:t}),super.initialize()}onContextChanged(t,n){const r=Rs(this.board,this.element);t.element!==n.element||t.hasThemeChanged?(this.shapeGenerator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected,linePoints:r})):(t.selected!==n.selected||this.activeGenerator.needUpdate())&&this.activeGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected,linePoints:r})}destroy(){super.destroy(),this.activeGenerator.destroy()}}const S_=e=>{const{keyDown:t,dblClick:n}=e;return e.keyDown=r=>{const i=re(e),o=i.length===1,s=i[0];if(!P.isReadonly(e)&&!Av(r)&&!Mv(r)&&!Bv(r)&&o&&I.isGeometry(s)){r.preventDefault(),hg(e,s);return}t(r)},e.dblClick=r=>{if(r.preventDefault(),!P.isReadonly(e)){const i=Ce(e,xe(e,r.x,r.y)),o=$i(e,i);if(o&&I.isGeometry(o))if(Di(o)){const s=BN(o,i)||o.texts.find(u=>u.id.includes(Qn.content))||o.texts[0];hg(e,o,s)}else hg(e,o)}n(r)},e};class Yd extends In{canDraw(t,n){return!0}draw(t,n){const r=C.getRectangleByPoints(t.points),i=Me(t),o=Pc(this.board,t),s=Vd(this.board,t),u=Go(s,i);return Zt(nl.table).draw(this.board,r,{strokeWidth:i,stroke:o,strokeLineDash:u},{element:t})}}const Lx=e=>{const t=Lv();return P.isInPointer(e,t)&&Wd(e)},mg=e=>{const t=Lv();return P.isInPointer(e,t)&&vl(e)},TT=(e,t)=>I.isUMLClassOrInterface({shape:t})?new Yd(e):new PT(e),D_=e=>{const{pointerMove:t,globalPointerUp:n,pointerUp:r}=e;let i=null,o=null,s=null;return e.pointerMove=u=>{i==null||i.remove(),i=Te();const l=Lv(),c=P.isInPointer(e,l)&&Wd(e),f=Ce(e,xe(e,u.x,u.y)),h=P.getPointer(e),g=TT(e,h);if(c){const p=_o(h);if(h===pe.text){const d=Sc(e,Ho.text,p.textProperties["font-size"]),y=C.getPoints(C.getRectangleByCenterPoint(f,d.width,d.height));if(o=Zv(e,y),s)s.textManage.updateRectangle(),s.g.append(s.textManage.g);else{const m=new wc(e,{getRectangle:()=>St(o)});m.draw(o.text),s={g:Te(),textManage:m},P.getHost(e).append(s.g),s.g.append(m.g)}}else{const d=nT(h,f);o=zh(e,d,h),g.processDrawing(o,i),P.getElementActiveHost(e).append(i)}}t(u)},e.pointerUp=u=>{Lx(e)&&o||r(u)},e.globalPointerUp=u=>{Lx(e)&&o&&(So(e,o),s==null||s.textManage.destroy(),s==null||s.g.remove(),s=null),o=null,i==null||i.remove(),i=null,n(u)},e},T_=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,keyDown:i,keyUp:o}=e;let s=null,u=null,l=null,a=!1,c;return e.keyDown=f=>{a=Lt("shift",f),i(f)},e.keyUp=f=>{a=!1,o(f)},e.pointerDown=f=>{if(!P.isReadonly(e)&&mg(e)){const h=Ce(e,xe(e,f.x,f.y));s=h;const g=P.getPointer(e);if(g===pe.text){const p=_o(g),d=Sc(e,Ho.text,p.textProperties["font-size"]),y=C.getPoints(C.getRectangleByCenterPoint(h,d.width,d.height)),m=Zv(e,y);So(e,m),s=null}}t(f)},e.pointerMove=f=>{u==null||u.remove(),u=Te();const h=Ce(e,xe(e,f.x,f.y)),g=P.getPointer(e),p=TT(e,g);if(c==null||c.remove(),s&&mg(e)){let d=Ms([s,h],a);const y=C.getRectangleByPoints(d),[m,v]=it(s,h),w=Kd(e,[],{resizePoints:d,activeRectangle:y,directionFactors:[tl(m),tl(v)],isAspectRatio:a,isFromCorner:!0,isCreate:!0});c=w.snapG,P.getElementActiveHost(e).append(c),d=Ms(w.activePoints,a),l=zh(e,d,g),p.processDrawing(l,u),P.getElementActiveHost(e).append(u)}n(f)},e.pointerUp=f=>{if(mg(e)&&s){const h=Ce(e,xe(e,f.x,f.y)),{width:g,height:p}=C.getRectangleByPoints([s,h]);if(Math.hypot(g,p)<8){const d=P.getPointer(e);if(d!==pe.text){const y=nT(d,h);l=zh(e,y,d)}}l&&So(e,l),c==null||c.remove(),u==null||u.remove(),u=null,s=null,l=null;return}r(f)},e},A_=e=>{const t=e,{getDeletedFragment:n,buildFragment:r,insertFragment:i}=t;return t.getDeletedFragment=o=>{const s=Vh(t);if(s.length){const u=s.filter(p=>I.isGeometry(p)),l=s.filter(p=>I.isArrowLine(p)),a=s.filter(p=>I.isVectorLine(p)),c=s.filter(p=>I.isImage(p)),f=s.filter(p=>I.isTable(p)),h=s.filter(p=>I.isSwimlane(p)),g=[...Nl(t,u),...Nl(t,c),...Nl(t,f),...Nl(t,h)].filter(p=>!l.includes(p));o.push(...u,...l,...a,...c,...f,...h,...g.filter(p=>!l.includes(p)))}return n(o)},t.buildFragment=(o,s,u,l)=>{const a=Vh(t,l);let c=[];if(a.length){if(u===Pi.cut){const d=a.filter(m=>I.isGeometry(m)),y=a.filter(m=>I.isArrowLine(m));c=Nl(t,d).filter(m=>!y.includes(m))}const f=[...a,...c],h=a$(t,f,s?[s.x,s.y]:[0,0]),p={text:sD(f),type:ki.elements,elements:h};o=$d(o,p)}return r(o,s,u,l)},t.insertFragment=(o,s,u)=>{var a,c,f;const l=re(t);if((a=o==null?void 0:o.files)!=null&&a.length){const h=YS.map(p=>"image/"+p),g=!Dr(t)&&!(l.length===1&&t.isImageBindingAllowed(l[0]));if(h.includes(o.files[0].type)&&g){const p=o.files[0];lD(t,p,gN,d=>{dn.insertImage(t,d,s)});return}}if((c=o==null?void 0:o.elements)!=null&&c.length){const h=(f=o.elements)==null?void 0:f.filter(g=>I.isDrawElement(g));o.elements&&o.elements.length>0&&h.length>0&&c$(t,h,s)}if(o!=null&&o.text&&(!o.elements||o.elements.length===0)&&!(l.length===1&&l[0].children)){dn.insertText(t,s,o.text);return}i(o,s,u)},t},Nl=(e,t)=>fH(e).filter(r=>t.find(i=>Nt.isBoundElementOfSource(r,i)||Nt.isBoundElementOfTarget(r,i))),B_=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let i=null,o,s=null,u=null;return e.pointerDown=l=>{const a=hN(),c=P.isInPointer(e,a);if(!P.isReadonly(e)&&c&&vl(e)){const f=Ce(e,xe(e,l.x,l.y));i=f;const h=Wv(e,f);h&&(o=h)}t(l)},e.pointerMove=l=>{s==null||s.remove(),s=Te();let a=Ce(e,xe(e,l.x,l.y));if(i){const c=P.getPointer(e);u=JD(e,c,i,a,o,s)}n(l)},e.globalPointerUp=l=>{u&&(ee.insertNode(e,u,[e.children.length]),zs(e),Fo(e,u),Je.updatePointerType(e,$e.selection)),s==null||s.remove(),s=null,o=null,i=null,u=null,r(l)},e},M_=e=>{let t,n,r,i,o;return Ys(e,{key:"draw-line",canResize:()=>!0,hitTest:u=>{const l=ey(e);if(l.length>0){let a=null;return l.forEach(c=>{const f=ST(e,c,u);f&&(a={element:c,handle:f.handle,handleIndex:f.handleIndex})}),a}return null},beforeResize:u=>{if(u.element.shape===et.elbow&&u.handle!==It.source&&u.handle!==It.target){const l=Tc(e,u.element);if(Jv(u.element,l))return;const a=[...u.element.points],c=u.handleIndex,f=Ud(e,u.element);r=f[0],i=f[f.length-1],o=iT(e,u.element,f);const h=KD(e,u.element,[...a],o,c);t=h.index,n=h.deleteCount}},onResize:(u,l)=>{let a=[...u.element.points],c={...u.element.source},f={...u.element.target},h=u.handleIndex;const g=Wv(e,l.endPoint);if(u.handle===It.source||u.handle===It.target){const p=u.handle===It.source?c:f;a[h]=l.endPoint,g?(p.connection=qa(e,l.endPoint,g),p.boundId=g.id):(p.connection=void 0,p.boundId=void 0)}else if(u.element.shape===et.elbow){if(o&&r&&i){const p=YN(o,r,i,h),d=o[h],y=o[h+1],[m,v]=qN(d,y,l,p);let w=[...a].slice(1,a.length-1);t!==null&&n!==null&&(qD(w)?w=[m,v]:w.splice(t,n,m,v),a=[r,...w,i])}}else u.handle===It.addHandle?a.splice(h+1,0,l.endPoint):a[h]=l.endPoint;if(!g){h=u.handle===It.addHandle?h+1:h;const p=On(e,u.element),d=[...a];d[0]=p[0],d[d.length-1]=p[p.length-1],(u.element.shape!==et.elbow||u.element.shape===et.elbow&&d.length===2)&&d.forEach((y,m)=>{m!==h&&a[h]&&(a[h]=Uv(y,a[h]))})}dn.resizeArrowLine(e,{points:a,source:c,target:f},u.path)},afterResize:u=>{if(u.element.shape===et.elbow){const l=Ae.get(e,u.path);let a=l&&[...l.points];if(a.length>2&&o&&r&&i){const c=o[0],f=o[o.length-1];a.splice(0,1,c),a.splice(-1,1,f),a=gi(a),me.isEquals(a[0],c)&&a.splice(0,1),me.isEquals(a[a.length-1],f)&&a.pop(),a.length===1&&(a=[]),a=[r,...a,i],dn.resizeArrowLine(e,{points:a},u.path)}}t=null,n=null,r=null,i=null,o=null}}),e},R_=e=>{const{pointerMove:t,pointerUp:n}=e;let r=null;return e.pointerMove=i=>{if(r==null||r.remove(),P.isReadonly(e)){t(i);return}const o=Object.keys(et),s=P.isInPointer(e,o),u=Ce(e,xe(e,i.x,i.y)),l=LL(e,a=>{const{element:c,handle:f}=a,h=f===It.target||f===It.source;return I.isArrowLine(c)&&h});if(s||l){const a=UD(e,u);if(a){const c=zv(e,a,u),f=c.isHitEdge||c.isHitConnector;if(r=XN(e,a,{hasMask:f,hasConnector:!0}),f){const h=Vs(P.getRoughSVG(e),c.connectorPoint||c.edgePoint,6,{stroke:Rn,strokeWidth:W1,fill:Rn,fillStyle:"solid"});r.appendChild(h)}Oi(a)&&dr(r,C.getCenterPointByPoints(a.points),a.angle),P.getElementActiveHost(e).append(r)}}t(i)},e.pointerUp=i=>{r==null||r.remove(),r=null,n(i)},e},k_=e=>{const{dblClick:t}=e;return e.dblClick=n=>{var r,i;if(!P.isReadonly(e)){const o=Ce(e,xe(e,n.x,n.y)),s=$i(e,o);if(s&&I.isArrowLine(s)){const u=s&&P.findPath(e,s),l=On(e,s),a=Be(o,l),c=(r=s.texts)!=null&&r.length?[...s.texts]:[],f=_v(e,s,o);if(HD(e,s,o))Gx(e,s,f);else{const g=tD(l,a),p=((i=zd("arrow-line"))==null?void 0:i.text)||{};c.push({text:Ks(GD,void 0,p),position:g,width:28,height:20}),dn.setArrowLineTexts(e,s,c),setTimeout(()=>{if(u){const d=Ae.get(e,u),y=yl(d);Gx(e,d,y.length-1,!0)}})}}}t(n)},e};function Gx(e,t,n,r=!1){const o=yl(t)[n];o.edit(()=>{const s=q.string(o.getText());(!s||r&&s===GD)&&dn.removeArrowLineText(e,t,n)})}class O_ extends No{constructor(){super()}initializeGenerator(){this.imageGenerator=new Eo(this.board,{getRectangle:t=>({x:t.points[0][0],y:t.points[0][1],width:t.points[1][0]-t.points[0][0],height:t.points[1][1]-t.points[0][1]}),getImageItem:t=>({url:t.url,width:t.points[1][0]-t.points[0][0],height:t.points[1][1]-t.points[0][1]})}),this.lineAutoCompleteGenerator=new Ii(this.board),this.getRef().addGenerator(Ii.key,this.lineAutoCompleteGenerator)}initialize(){super.initialize(),this.initializeGenerator(),this.imageGenerator.processDrawing(this.element,this.getElementG()),this.lineAutoCompleteGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected})}onContextChanged(t,n){if(t.element!==n.element)this.imageGenerator.updateImage(this.getElementG(),n.element,t.element),this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected});else{const r=t.selected===n.selected,i=this.imageGenerator.activeGenerator&&this.imageGenerator.activeGenerator.options.hasResizeHandle()===this.imageGenerator.activeGenerator.hasResizeHandle;(!r||!i)&&(this.imageGenerator.setFocus(this.element,this.selected),this.lineAutoCompleteGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected}))}}destroy(){super.destroy(),this.imageGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const F_=e=>{const{pointerMove:t}=e;let n=null;return e.pointerMove=r=>{n==null||n.remove(),P.getBoardContainer(e).classList.remove(Sh.crosshair);const i=Vh(e),o=i.length===1&&i[0],s=Ce(e,xe(e,r.x,r.y));if(!P.isReadonly(e)&&!gn(e)&&o&&I.isShapeElement(o)){const u=Yv(o),l=tT(Co(s,o)||s,u),a=u[l],f=Ue.getElementRef(o).getGenerator(Ii.key);f.recoverAutoCompleteG(),a&&(f==null||f.removeAutoCompleteG(l),n=Vs(P.getRoughSVG(e),a,FN,{stroke:"none",fill:v5(ml,ON),fillStyle:"solid"}),P.getElementActiveHost(e).append(n),P.getBoardContainer(e).classList.add(Sh.crosshair),Oi(o)&&dr(n,C.getCenterPoint(e.getRectangle(o)),o.angle))}t(r)},e},b_="plait-arrow-line-auto-complete-plugin-key",I_=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let i=null,o=null,s,u;return e.pointerDown=l=>{const a=Vh(e),c=a.length===1&&a[0],f=Ce(e,xe(e,l.x,l.y));if(!P.isReadonly(e)&&c&&I.isShapeElement(c)){const h=Yv(c),g=tT(Co(f,c)||f,h),p=h[g];p&&(Q1(e),i=p,s=c,Je.updatePointerType(e,et.elbow))}t(l)},e.pointerMove=l=>{o==null||o.remove(),o=Te();let a=Ce(e,xe(e,l.x,l.y));if(i&&s&&Ze(...Co(a,s)||a,...i)>Fd){const f=C.getRectangleByPoints(s.points),h=$o(s),g=Zt(h);let p=i;g.getNearestCrossingPoint&&(p=g.getNearestCrossingPoint(f,i));const d=wo(p,s)||p;u=JD(e,et.elbow,d,a,s,o)}n(l)},e.globalPointerUp=l=>{var a;if(u){ee.insertNode(e,u,[e.children.length]),zs(e),Fo(e,u);const c=(a=e.getPluginOptions(b_))==null?void 0:a.afterComplete;c&&c(u)}i&&(Je.updatePointerType(e,$e.selection),i=null),o==null||o.remove(),o=null,s=null,u=null,r(l)},e},L_=e=>{let t=0;const n=100;return Ys(e,{key:"line-text",canResize:()=>!0,hitTest:i=>{let o=null;const s=$i(e,i,u=>I.isArrowLine(u));if(s){const u=_v(e,s,i),a=yl(s)[u];if(u!==-1&&!a.isEditing)return t=u,{element:s,handle:gp.e}}return o},onResize:(i,o)=>{const s=i.element;if(s){const u=o.endPoint,l=On(e,s);if(w5(l,u)<=n){const c=Be(u,l,!1),f=tD(l,c),h=[...s.texts];h[t]={...h[t],position:f},dn.setArrowLineTexts(e,s,h)}}}}),e},G_=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r,afterChange:i,drawSelectionRectangle:o}=e;let s=null,u,l=!1;const a=()=>{const c=re(e);return c.length>0&&c.every(f=>I.isDrawElement(f)||I.isCustomGeometryElement(e,f))};return e.pointerDown=c=>{if(!a()||P.isReadonly(e)||P.hasBeenTextEditing(e)||!Hi(c)){t(c);return}const f=Ce(e,xe(e,c.x,c.y)),h=re(e),g=He(e,h,!1),p=JH(g),d=Sn(h),y=d?At(f,C.getCenterPoint(g),-d):f;p&&C.isHit(C.getRectangleByPoints([y,y]),p)&&(s={elements:[...h],startPoint:f}),t(c)},e.pointerMove=c=>{if(s){c.preventDefault();const f=!!c.shiftKey;uG(e,s);const h=Ce(e,xe(e,c.x,c.y)),g=He(e,s.elements,!1),p=C.getCenterPoint(g);!Sn(s.elements)&&s.elements.length>1&&(l=!0),ni(e,"with-common-rotate",()=>{if(s&&s.startPoint){let d=oR(s.startPoint,h,p);const y=Sn(s.elements);d=Na(y+d),f&&(d+=Math.PI/12/2,d-=d%(Math.PI/12));let m=d%(Math.PI/2);if(Math.PI/2-m<=rp(5)){const v=Math.PI/2-m;d+=v}if(m<=rp(5)){const v=-m;d+=v}s.angle=Na(d-y)||0,iR(e,s.elements,s.angle),P.getBoardContainer(e).classList.add("element-rotating")}});return}n(c)},e.globalPointerUp=c=>{if(r(c),l){l=!1;const f=re(e);ee.addSelectionWithTemporaryElements(e,f)}P.getBoardContainer(e).classList.remove("element-rotating"),lG(e),s=null,gr.set(e,!1)},e.afterChange=()=>{if(i(),u&&(u.remove(),u=null),a()&&!gn(e)){if(l&&s){const c=He(e,s.elements,!1);u=WC(e,c),u.classList.add(l2),s.angle&&dr(u,C.getCenterPoint(c),s.angle)}else{const c=re(e),f=He(e,c,!1);u=WC(e,f),u.classList.add(l2),dr(u,C.getCenterPoint(f),Sn(c))}P.getElementActiveHost(e).append(u)}},e.drawSelectionRectangle=()=>{if(l&&s){const c=He(e,s.elements,!1),f=Hr(e,C.inflate(c,xt),{stroke:Rn,strokeWidth:xt});return f.classList.add(cl),s.angle&&dr(f,C.getCenterPoint(c),s.angle),f}return o()},e};class AT extends No{constructor(){super()}initializeGenerator(){this.activeGenerator=new bi(this.board,{getStrokeWidth:()=>xt,getStrokeOpacity:()=>1,getRectangle:t=>{const n=us(t);return n!=null&&n.length?EN(this.board,this.element,n):C.getRectangleByPoints(t.points)},hasResizeHandle:()=>{const t=us(this.element);return t!=null&&t.length?!1:Tv(this.board,this.element)}}),this.tableGenerator=new Yd(this.board),this.initializeTextManage(),this.lineAutoCompleteGenerator=new Ii(this.board),this.getRef().addGenerator(Ii.key,this.lineAutoCompleteGenerator)}initialize(){super.initialize(),this.initializeGenerator(),this.draw()}draw(){this.tableGenerator.processDrawing(this.element,this.getElementG()),this.textGenerator.draw(this.getElementG()),this.rotateVerticalText(),this.lineAutoCompleteGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected})}rotateVerticalText(){this.board.buildTable(this.element).cells.forEach(n=>{if(Ua.isVerticalText(n)){const r=Hv(this.board,n);if(r){const o=Zt(nl.table).getTextRectangle(this.element,{key:n.id,board:this.board});r.g.classList.add("vertical-cell-text"),dr(r.g,C.getCenterPoint(o),rp(-90))}}})}getDrawShapeTexts(t){return t.filter(n=>FD(n)).map(n=>({id:n.id,text:n.text,textHeight:n.textHeight,board:this.board}))}initializeTextManage(){const t=this.getDrawShapeTexts(this.element.cells);this.textGenerator=new Gv(this.board,this.element,t,{onChange:(n,r,i)=>{const o=P.findPath(this.board,n);r.newText&&dn.setTableText(this.board,o,i.id,r.newText,r.height),r.operations&&$v(n,r.operations)},getRenderRectangle:(n,r)=>{const i=qs(this.board,n,r.id);if(Ua.isVerticalText(i)){const o=C.getRectangleByPoints(i.points),s=Me(i),u=i.textHeight||0,l=o.height-oe.rectangleAndText*2-s*2;return{width:u,height:l>0?l:0,x:o.x+oe.rectangleAndText+s,y:o.y+(o.height-l)/2}}else return xT(i)}}),this.textGenerator.initialize()}onContextChanged(t,n){if(t.element!==n.element||t.hasThemeChanged){const r=us(n.element);r!=null&&r.length&&(lx(n.element),RD(t.element,r)),this.tableGenerator.processDrawing(t.element,this.getElementG()),this.activeGenerator.processDrawing(t.element,P.getElementActiveHost(this.board),{selected:this.selected});const i=this.getDrawShapeTexts(n.element.cells),o=this.getDrawShapeTexts(t.element.cells);this.textGenerator.update(t.element,i,o,this.getElementG()),this.rotateVerticalText()}else{const r=t.selected===n.selected,i=this.activeGenerator.options.hasResizeHandle()===this.activeGenerator.hasResizeHandle,o=us(t.element);(!r||!i||o!=null&&o.length)&&this.activeGenerator.processDrawing(t.element,P.getElementActiveHost(this.board),{selected:this.selected}),this.selected||lx(t.element)}this.lineAutoCompleteGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected})}destroy(){super.destroy(),this.activeGenerator.destroy(),this.tableGenerator.destroy(),this.textGenerator.destroy(),this.lineAutoCompleteGenerator.destroy()}}const Nx=20;function N_(e){let t;return Ys(e,{key:"draw-table",canResize:()=>!0,hitTest:r=>{const i=$i(e,r);if(i&&I.isElementByTable(i)){let o=e.getRectangle(i),s=Cp(e,o,r,i.angle);if(s){const l=Z1(e,i);if(l&&BD(e)||!l&&!_f(e,s.handle))return{element:i,handle:s.handle,cursorClass:s.cursorClass,rectangle:o}}const u=Cc(e,i);for(let l=0;l<u.length;l++)if(o=C.getRectangleByPoints(u[l].points),s=Cp(e,o,r,0),s&&!_f(e,s.handle))return{element:i,handle:s.handle,cursorClass:s.cursorClass,rectangle:o,options:{cell:u[l]}}}return null},onResize:(r,i)=>{var s,u,l,a;t==null||t.remove();const o=P.findPath(e,r.element);if((s=r.options)!=null&&s.cell&&r.rectangle){const c=Nh(r.handle),{originPoint:f,handlePoint:h}=xp(e,c,r.rectangle),g=[i.startPoint,i.endPoint],{xZoom:p,yZoom:d}=ty(g,f,h,!1,!1),y=(u=r.options)==null?void 0:u.cell.points,m=y.map(T=>wi(T,f,p,d)),v=m[1][0]-y[1][0],w=m[1][1]-y[1][1],E=m[1][0]-m[0][0],S=m[1][1]-m[0][1];if(v!==0&&E>=Nx){const{columns:T,points:B}=kD(r.element,(l=r.options)==null?void 0:l.cell.columnId,E,v);ee.setNode(e,{columns:T,points:B},o)}else if(w!==0&&S>=Nx){const{rows:T,points:B}=OD(r.element,(a=r.options)==null?void 0:a.cell.rowId,S,w);ee.setNode(e,{rows:T,points:B},o)}}else{const c=_f(e,r.handle),f=i.isShift,h=Nh(r.handle),{originPoint:g,handlePoint:p}=xp(e,h,r.rectangle),d=mT(e,r,i,{originPoint:g,handlePoint:p},f,c),y=Kd(e,[r.element],d);t=y.snapG,P.getElementActiveHost(e).append(t);const m=y.activePoints,v=r.element.points,w=C.getRectangleByPoints(v),E=C.getRectangleByPoints(m),S=E.width-w.width,T=E.height-w.height;let B=[...r.element.columns],R=[...r.element.rows];S!==0&&(B=B.map(b=>b.width?{...b,width:b.width+S*(b.width/w.width)}:b)),T!==0&&(R=R.map(b=>b.height?{...b,height:b.height+T*(b.height/w.height)}:b)),ee.setNode(e,{points:Ms(m),columns:B,rows:R},o)}},afterResize:r=>{t==null||t.remove(),t=null}}),e}const H_=e=>{const t=e,{drawElement:n,getRectangle:r,isRectangleHit:i,isHit:o,isMovable:s,dblClick:u,keyDown:l,pointerUp:a}=t;return t.drawElement=c=>I.isElementByTable(c.element)?AT:n(c),t.isHit=(c,f)=>{if(I.isElementByTable(c)){const h=C.getRectangleByPoints(c.points);return C.isPointInRectangle(h,f)}return o(c,f)},t.getRectangle=c=>I.isElementByTable(c)?C.getRectangleByPoints(c.points):r(c),t.isMovable=c=>I.isElementByTable(c)?!0:s(c),t.isRectangleHit=(c,f)=>{if(I.isElementByTable(c)){const h=C.getRectangleByPoints([f.anchor,f.focus]);return Bh(c.points,h)}return i(c,f)},t.keyDown=c=>{const f=re(e),h=f.length===1,g=f[0];if(!P.isReadonly(e)&&!P.hasBeenTextEditing(t)&&!Av(c)&&!Mv(c)&&!Bv(c)&&h&&(c.preventDefault(),I.isElementByTable(g))){const p=us(g);let d=g.cells.find(y=>y.text&&y.textHeight);if(p!=null&&p.length&&(d=p.find(y=>y.text&&y.textHeight)),d){hx(e,d);return}}l(c)},t.dblClick=c=>{if(c.preventDefault(),!P.isReadonly(e)){const f=Ce(e,xe(e,c.x,c.y)),h=$i(e,f);if(h&&I.isElementByTable(h)){const g=fx(t,h,f);if(g&&g.text&&g.textHeight){hx(e,g);return}}}u(c)},t.pointerUp=c=>{const f=P.isPointer(t,$e.selection)||P.isPointer(t,$e.hand);if(!Hi(c)||Ts(t)||!f){a(c);return}if(wN(t)){const g=Ce(t,xe(t,c.x,c.y)),p=MD(t)[0],d=fx(t,p,g);d&&d.text&&d.textHeight&&RD(p,[d])}a(c)},t.buildTable=c=>c,N_(t)},vg=e=>cT(e)&&Wd(e),yg=e=>cT(e)&&vl(e),$_=e=>{const{pointerMove:t,globalPointerUp:n,pointerUp:r}=e;let i=null,o=null;return e.pointerMove=s=>{i==null||i.remove(),i=Te();const u=new Yd(e),l=vg(e),a=Ce(e,xe(e,s.x,s.y)),c=P.getPointer(e);if(l){const f=aT(c,a);o=Uh(c,f),u.processDrawing(o,i),P.getElementActiveHost(e).append(i)}t(s)},e.pointerUp=s=>{vg(e)&&o||r(s)},e.globalPointerUp=s=>{vg(e)&&o&&So(e,o),o=null,i==null||i.remove(),i=null,n(s)},e},__=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,keyDown:i,keyUp:o}=e;let s=null,u=null,l=null,a=!1,c;return e.keyDown=f=>{a=Lt("shift",f),i(f)},e.keyUp=f=>{a=!1,o(f)},e.pointerDown=f=>{!P.isReadonly(e)&&yg(e)&&(s=Ce(e,xe(e,f.x,f.y))),t(f)},e.pointerMove=f=>{u==null||u.remove(),u=Te();const h=new Yd(e),g=Ce(e,xe(e,f.x,f.y)),p=P.getPointer(e);if(c==null||c.remove(),s&&yg(e)){let d=Ms([s,g],a);const y=C.getRectangleByPoints(d),[m,v]=it(s,g),w=Kd(e,[],{resizePoints:d,activeRectangle:y,directionFactors:[tl(m),tl(v)],isAspectRatio:a,isFromCorner:!0,isCreate:!0});c=w.snapG,P.getElementActiveHost(e).append(c),d=Ms(w.activePoints,a),l=Uh(p,d),h.processDrawing(l,u),P.getElementActiveHost(e).append(u)}n(f)},e.pointerUp=f=>{if(yg(e)&&s){const h=Ce(e,xe(e,f.x,f.y)),{width:g,height:p}=C.getRectangleByPoints([s,h]);if(Math.hypot(g,p)<8){const d=P.getPointer(e),y=aT(d,h);l=Uh(d,y)}l&&So(e,l),c==null||c.remove(),u==null||u.remove(),u=null,s=null,l=null;return}r(f)},e},j_=e=>{const{drawElement:t,buildTable:n,pointerUp:r}=e;return e.drawElement=i=>I.isSwimlane(i.element)?AT:t(i),e.buildTable=i=>I.isSwimlane(i)?jH(i):n(i),__($_(e))},W_=e=>{const{pointerDown:t,pointerMove:n,dblClick:r,globalKeyDown:i}=e;let o=null,s=null,u;const l=()=>{u&&(zs(e),u!=null&&u.element&&Fo(e,u==null?void 0:u.element)),P.getBoardContainer(e).classList.remove("vector-line-closed"),o==null||o.remove(),o=null,u=null,s=null};return e.pointerDown=a=>{const c=dN();if(P.isInPointer(e,c)&&!u&&(u={shape:Za.straight}),!P.isReadonly(e)&&u&&vl(e)){let h=Ce(e,xe(e,a.x,a.y));if(!s)u={...u,start:h};else if(!u.element)u.element=s,ee.insertNode(e,u.element,[e.children.length]);else{let g=u.element.points;const p=Ze(...h,...u.start)<=$h;if(p&&(h=u.start),u.path){const d=g[g.length-1];Ze(...h,...d)>2&&ee.setNode(e,{points:[...g,h]},u.path)}u.element=zn(e,u.element.id),p&&l()}}t(a)},e.pointerMove=a=>{o==null||o.remove(),o=Te();let c=Ce(e,xe(e,a.x,a.y));if(P.getPointer(e)!==Xh.vectorLine&&l(),u&&u.start){let h=[u.start];if(u.element){h=[u.start,...u.element.points];const p=P.findPath(e,u.element);u.path=p}Ze(...c,...u.start)<=$h?(c=u.start,P.getBoardContainer(e).classList.add("vector-line-closed")):P.getBoardContainer(e).classList.remove("vector-line-closed"),s=IN(e,u.shape,h,c,o)}n(a)},e.dblClick=a=>{var c;P.isReadonly(e)||u&&(u.path&&ee.setNode(e,{points:(c=u==null?void 0:u.element)==null?void 0:c.points},u.path),l(),Je.updatePointerType(e,$e.selection)),r(a)},e.globalKeyDown=a=>{var c;if(!P.isReadonly(e)){const f=Lt("esc",a),h=Lt("v",a);(f||h)&&u&&(u.path&&ee.setNode(e,{points:(c=u.element)==null?void 0:c.points},u.path),l(),h&&Je.updatePointerType(e,$e.selection))}i(a)},e},z_=e=>(Ys(e,{key:"draw-vector-line",canResize:()=>!0,hitTest:n=>{const r=oT(e);if(r.length>0){let i=null;return r.forEach(o=>{const s=ST(e,o,n);s&&(i={element:o,handle:s.handle,handleIndex:s.handleIndex})}),i}return null},onResize:(n,r)=>{let i=[...n.element.points],o=n.handleIndex;if(n.handle===It.source||n.handle===It.target)if(i[o]=r.endPoint,Ec(n.element.points))i[i.length-1]=r.endPoint;else{const s=n.handle===It.source?i[i.length-1]:i[0];Ze(...r.endPoint,...s)<=$h&&(i[o]=s)}else n.handle===It.addHandle?i.splice(o+1,0,r.endPoint):i[o]=r.endPoint;ee.setNode(e,{points:i},n.path)}}),e),V_=e=>{const{drawElement:t,getRectangle:n,isRectangleHit:r,isHit:i,isInsidePoint:o,isMovable:s,isAlign:u,getRelatedFragment:l,getOneHitElement:a}=e;return e.drawElement=c=>I.isGeometry(c.element)?(I.isUML(c.element),bx):I.isArrowLine(c.element)?E_:I.isVectorLine(c.element)?P_:I.isImage(c.element)?O_:t(c),e.getRectangle=c=>{if(I.isGeometry(c))return C.getRectangleByPoints(c.points);if(I.isArrowLine(c)){const f=On(e,c),h=c.texts.map((p,d)=>Xv(e,c,d)),g=C.getRectangleByPoints(f);return C.getBoundingRectangle([g,...h])}if(I.isVectorLine(c)){const f=Rs(e,c),h=C.getRectangleByPoints(f);return C.getBoundingRectangle([h])}return I.isImage(c)?C.getRectangleByPoints(c.points):n(c)},e.isRectangleHit=(c,f)=>{const h=NN(e,c,f);return h!==null?h:r(c,f)},e.isHit=(c,f)=>{const h=_N(e,c,f);return h!==null?h:i(c,f)},e.getOneHitElement=c=>c.every(h=>I.isDrawElement(h))?WD(e,c):a(c),e.isInsidePoint=(c,f)=>{const h=WN(e,c,f);return h!==null?h:o(c,f)},e.isMovable=c=>{if(I.isGeometry(c)||I.isImage(c)||I.isVectorLine(c))return!0;if(I.isArrowLine(c)){const f=re(e),h=g=>!!f.find(p=>p.id===g);return!!(!c.source.boundId&&!c.target.boundId||c.source.boundId&&h(c.source.boundId)&&f.includes(c)||c.target.boundId&&h(c.target.boundId)&&f.includes(c))}return s(c)},e.isAlign=c=>I.isGeometry(c)||I.isImage(c)?!0:u(c),e.getRelatedFragment=(c,f)=>{const h=f!=null&&f.length?f:re(e),p=e.children.filter(d=>I.isArrowLine(d)).filter(d=>{const y=h.find(w=>w.id===d.source.boundId),m=h.find(w=>w.id===d.target.boundId),v=h.includes(d);return y&&m&&!v});return l([...c,...p],f)},j_(H_(t$(W_(F_(R_(z_(M_(L_(k_(G_(B_(I_(D_(T_(A_(S_(e)))))))))))))))))},de={isAbstract(e){return typeof e.start=="number"&&typeof e.end=="number"}};var ne;(function(e){e.right="right",e.left="left",e.standard="standard",e.upward="upward",e.downward="downward",e.rightBottomIndented="right-bottom-indented",e.rightTopIndented="right-top-indented",e.leftTopIndented="left-top-indented",e.leftBottomIndented="left-bottom-indented"})(ne||(ne={}));var Tn;(function(e){e.logic="logic",e.indented="indented",e.fishBone="fish-bone"})(Tn||(Tn={}));function Sp(e){return e.origin.layout?e.origin.layout:de.isAbstract(e.origin)?ry(Sp(e.parent)):e.parent?Sp(e.parent):null}const Nr=e=>e===ne.rightBottomIndented||e===ne.rightTopIndented||e===ne.leftBottomIndented||e===ne.leftTopIndented,U_=e=>e===ne.right||e===ne.left||e===ne.downward||e===ne.upward,Fn=e=>e===ne.standard,Ut=e=>e===ne.right||e===ne.left||e===ne.standard||Nr(e),Qa=e=>e===ne.right||e===ne.left||e===ne.standard,Dp=e=>e===ne.upward||e===ne.downward,Ci=e=>e===ne.leftTopIndented||e===ne.rightTopIndented||e===ne.upward,X_=e=>e===ne.leftBottomIndented||e===ne.rightBottomIndented||e===ne.downward,Ja=e=>e===ne.left||e===ne.leftTopIndented||e===ne.leftBottomIndented,Kh=e=>e===ne.right||e===ne.rightTopIndented||e===ne.rightBottomIndented,wg=e=>Nr(e)?Tn.indented:(Fn(e)||U_(e),Tn.logic),ry=e=>Nr(e)?Kh(e)?ne.right:ne.left:e;class ec{constructor(t,n,r,i){this.x=0,this.y=0,this.vGap=0,this.hGap=0,this.width=0,this.height=0,this.depth=0,this.children=[],this.left=!1,this.up=!1;const o=n.getHorizontalGap(t,i),s=n.getVerticalGap(t,i);this.origin=t,this.width=n.getWidth(t),this.height=n.getHeight(t),this.x=this.y=0,i&&(this.parent=i);const u=Sp(this);this.layout=u&&u!==ne.standard?u:r.rootLayoutType;const l=n.getVerticalConnectingPosition(t,i);l&&(this.verticalConnectingPosition=l),this.addGap(o,s)}isRoot(){return this.depth===0}addGap(t,n){const r=this;r.hGap+=t,r.vGap+=n,r.width+=2*t,r.height+=2*n}eachNode(t){BT(this,t)}getBoundingBox(){const t={left:Number.MAX_VALUE,top:Number.MAX_VALUE,right:Number.MIN_VALUE,bottom:Number.MIN_VALUE,width:0,height:0};return this.eachNode(n=>{t.left=Math.min(t.left,n.x),t.top=Math.min(t.top,n.y),t.right=Math.max(t.right,n.x+n.width),t.bottom=Math.max(t.bottom,n.y+n.height)}),t.width=t.right-t.left,t.height=t.bottom-t.top,t}translate(t=0,n=0){this.eachNode(r=>{r.x+=t,r.y+=n})}right2left(){const t=this,n=t.getBoundingBox();t.eachNode(r=>{r.x=r.x-(r.x-n.left)*2-r.width,r.left=!0}),t.translate(n.width,0)}down2up(){const t=this,n=t.getBoundingBox();t.eachNode(r=>{r.y=r.y-(r.y-n.top)*2-r.height,r.up=!0}),t.translate(0,n.height)}}function BT(e,t){var n;(n=e.children)==null||n.forEach(r=>{BT(r,t)}),t(e)}class K_{constructor(t,n,r,i,o,s,u,l,a,c){this.left=t,this.right=n,this.top=r,this.bottom=i,this.width=o,this.height=s,this.rootX=u,this.rootY=l,this.rootWidth=a,this.rootHeight=c}}function Y_(e){return{left:e.top,right:e.bottom,top:e.left,bottom:e.right,width:e.height,height:e.width,rootX:e.rootY,rootY:e.rootX,rootWidth:e.rootHeight,rootHeight:e.rootWidth}}var Tp;(function(e){e.middle="middle",e.bottom="bottom"})(Tp||(Tp={}));class ks{constructor(t,n,r,i,o){this.width=t,this.height=n,this.y=r,this.children=i,this.childrenCount=i.length,this.x=0,this.preliminary=0,this.modifier=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0,this.origin=o}}const jo=e=>{var t;return e.children?(t=e.children)==null?void 0:t.filter(n=>n instanceof ec?!de.isAbstract(n.origin):n instanceof ks?!de.isAbstract(n.origin.origin):!de.isAbstract(n)):[]},MT=(e,t)=>{const n=e.children.indexOf(t);return e.children.find(r=>{if(r instanceof ec)return de.isAbstract(r.origin)&&r.origin.end===n;if(r instanceof ks&&e instanceof ks){if(de.isAbstract(r.origin.origin)){const{end:i}=ho(r.origin.origin,e.origin);return i===n}return!1}return de.isAbstract(r)&&r.end===n})},q_=(e,t)=>{const n=e.children.indexOf(t);return e.children.find(r=>{if(r instanceof ec)return de.isAbstract(r.origin)&&r.origin.start===n;if(r instanceof ks&&e instanceof ks){if(de.isAbstract(r.origin.origin)){const{start:i}=ho(r.origin.origin,e.origin);return i===n}return!1}return de.isAbstract(r)&&r.start===n})},ho=(e,t)=>{let n=e.start,r=e.end;if(Fn(t.layout)){const i=t.origin.rightNodeCount;n>=i&&(r-=i,n-=i)}return{start:n,end:r}};function Yh(e,t,n){e.children[t].modifier+=n}function Z_(e){return e.childrenCount===0?null:e.children[0]}function RT(e){let t=jo(e);return e.childrenCount===0?null:t[t.length-1]}function Q_(e,t){if(de.isAbstract(e.children[t].origin.origin))return;let n=e.children[t-1],r=e.children[t],i=n.modifier+n.preliminary+n.width,o=r.modifier+r.preliminary,s=0,u=e,l=e;for(;n||r;){if(n){let c=s+n.modifier+n.preliminary+n.width;c>i&&(i=c),i=OT(u,n,i,s),u=n,s=n.modifier+s,n=RT(n)}if(r){let c=r.modifier+r.preliminary;c<o&&(o=c),o=tj(l,r,o),l=r,r=Z_(r)}}const a=i-o;a>0&&Yh(e,t,a)}function J_(e){const t=e.children[0];let n=t.preliminary+t.modifier;const r=jo(e),i=r[r.length-1];let o=i.modifier+i.preliminary+i.width;t.origin.blackNode&&t.origin.blackNode.rootX>t.origin.blackNode.left&&(n=n+(t.origin.blackNode.rootX-t.origin.blackNode.left)),i.origin.blackNode&&i.origin.blackNode.rootX+i.origin.blackNode.rootWidth<i.origin.blackNode.right&&(o=o-(i.origin.blackNode.right-(i.origin.blackNode.rootX+i.origin.blackNode.rootWidth))),t.origin.verticalConnectingPosition&&i.origin.verticalConnectingPosition&&(n=n+t.width-t.origin.vGap,o=o-i.origin.vGap);let s=e.width/2;e.origin.verticalConnectingPosition&&(s=e.width-e.origin.vGap);const u=(n+o)/2-s;u>0?e.preliminary=u:e.children.forEach((l,a)=>{Yh(e,a,Math.abs(u))})}function Ap(e){if(e.childrenCount!==0){Ap(e.children[0]);for(let t=1;t<e.childrenCount;t++){const n=e.children.find(r=>{let i=null;if(de.isAbstract(r.origin.origin)){let{end:o}=ho(r.origin.origin,e.origin);i=o}return i===t-1});n&&ej(e,n),Ap(e.children[t]),Q_(e,t)}J_(e)}}function kT(e,t){t+=e.modifier,e.x=e.preliminary+t;for(let n=0;n<e.childrenCount;n++)kT(e.children[n],t)}function ej(e,t,n){const{start:r,end:i}=ho(t.origin.origin,e.origin),o=e.children.indexOf(t),s=e.children[r];let u=e.children[i];const l=s.modifier;let a=u.modifier+u.preliminary+u.width,c=u.modifier,f=e;for(e.children[o].modifier=s.modifier;u.childrenCount;){f=u;const p=RT(u);u=p||u;let d=c+u.modifier+u.preliminary+u.width;a=OT(f,u,a,c),c+=u.modifier,d>a&&(a=d)}const h=t.origin.blackNode?t.origin.blackNode.rootX*2+t.origin.blackNode.rootWidth:t.width,g=a-l;if(g>h){const p=(g-h)/2;Yh(e,o,p)}else{const p=(h-g)/2;for(let d=r;d<i+1;d++)Yh(e,d,p)}}function OT(e,t,n,r){const i=MT(e,t);return i?Math.max(i.modifier+i.width+r,n):n}function tj(e,t,n){const r=q_(e,t);return r?Math.min(r.modifier+r.preliminary,n):n}function nj(e){Ap(e),kT(e,0)}function Bp(e,t=0){e.x=t,e.children.forEach(n=>{if(de.isAbstract(n.origin)){let r=0;for(let i=n.origin.start;i<=n.origin.end;i++){const o=e.children[i].getBoundingBox();r=Math.max(o.width,r)}Bp(n,e.x+e.width/2+r)}else Bp(n,e.x+e.width/2)})}function rj(e,t){let n=e.y+e.height,r=null;i(e);function i(o){o.children.forEach((s,u)=>{const l=o.children.find(c=>de.isAbstract(c.origin)&&c.origin.end===u-1);if(l){const c=r!=null&&r.origin.isCollapsed?t.getExtendHeight(s.origin):0;n=ij(o,l)+c}if(de.isAbstract(s.origin))return;let a=n+s.vGap;r&&!Qa(r.layout)&&r.origin.children.length>0&&(r.origin.isCollapsed?a=a+t.getExtendHeight(s.origin):a=a+t.getIndentedCrossLevelGap()),s.y=a,r=s,n=s.y+s.height,i(s)})}}function ij(e,t){const n=t.origin,r=e.children.indexOf(t),i=e.children[n.start],o=e.children[n.end];e.children[r].y=i.y;const s=i.y;let u=o.y+o.height,l=o,a=e;for(;l!=null&&l.children.length;){a=l;const g=jo(a);l=g[g.length-1];const p=MT(a,l);u=p?Math.max(p.y+p.height,l.y+l.height):l.y+l.height}const c=u-s,f=t.blackNode?t.blackNode.height:t.height,h=t.blackNode?t.blackNode.rootY*2+t.blackNode.rootHeight:t.height;if(h>c){const g=(h-c)/2;for(let p=n.start;p<=n.end;p++)e.children[p].eachNode(d=>{d.y+=g})}else{const g=(c-h)/2;e.children[r].y+=g}return Math.max(t.y+f,i.y+c)}function FT(e,t,n){n?t.y=e.x:t.x=e.x,e.children.forEach((r,i)=>{FT(r,t.children[i],n)})}function bT(e,t,n=0){var r,i;if(t){if(de.isAbstract(e.origin)){const{start:o,end:s}=ho(e.origin,e.parent);for(let u=o;u<=s;u++){const l=(r=e.parent)==null?void 0:r.children[u].getBoundingBox().right;n=Math.max(l,n)}}e.x=n,n+=e.width}else{if(de.isAbstract(e.origin))for(let o=e.origin.start;o<=e.origin.end;o++){const s=(i=e.parent)==null?void 0:i.children[o].getBoundingBox().bottom;n=Math.max(s,n)}e.y=n,n+=e.height}e.children.forEach(o=>{bT(o,t,n)})}const IT=(e,t)=>{const n=[];return e.children.forEach(r=>{n.push(IT(r,t))}),t?(e.blackNode&&(e.blackNode=Y_(e.blackNode)),new ks(e.height,e.width,e.x,n,e)):new ks(e.width,e.height,e.y,n,e)};class oj{constructor(){}layout(t,n,r,i,o=!1,s){const u=[],l=[],a=this.buildLayoutNode(t,r,i,u,s);switch(u.filter(f=>f.origin.children.length>0).forEach(f=>{const h=f.layout,g=i.toTop||Ut(i.rootLayoutType)&&Ci(h),p=i.toLeft||!Ut(i.rootLayoutType)&&Ja(h),d=Ut(h),y=this.layout(f.origin,wg(h),r,{toTop:g,toLeft:p,rootLayoutType:i.rootLayoutType},d,f.parent);!i.toTop&&g&&n!==Tn.indented&&y.down2up(),!i.toLeft&&p&&y.right2left();const m=y.getBoundingBox();f.width=m.width,f.height=m.height,f.blackNode=new K_(m.left,m.right,m.top,m.bottom,m.width,m.height,y.x,y.y,y.width,y.height),l.push(y)}),n){case Tn.indented:Bp(a),rj(a,r);break;case Tn.fishBone:break;case Tn.logic:default:bT(a,o);const f=IT(a,o);nj(f),FT(f,a,o);break}const c=[];return u.filter(f=>f.origin.children.length>0).forEach((f,h)=>{if(f.parent){const g=l[h];g.parent=f.parent;let p,d;Ut(f.parent.layout)?(p=g.x,d=0):(p=0,d=g.y),g.translate(f.x-p,f.y-d);const m=f.parent.children.indexOf(f),v=f.parent.children[m];f.parent.children[m]=Object.assign(v,g);const w=c.find(E=>E.parent===f.parent&&!de.isAbstract(f.origin));w?(w.offsetX<p&&(w.offsetX=p),w.offsetX<d&&(w.offsetX=d)):de.isAbstract(f.origin)||c.push({parent:f.parent,offsetX:p,offsetY:d})}}),c.forEach(f=>{f.parent.children.forEach(h=>h.translate(f.offsetX,f.offsetY))}),a}buildLayoutNode(t,n,r,i,o){const s=new ec(t,n,r,o);if(!s.origin.isCollapsed){const u=[s];let l;for(;l=u.pop();)if(!l.origin.isCollapsed){const a=l.origin.children,c=a?a.length:0;if(l.children=[],a&&c)for(let f=0;f<c;f++){const h=new ec(a[f],n,r,l);l.children.push(h),h.depth=l.depth+1,(l.layout!==h.layout&&(wg(l.layout)!==wg(h.layout)||Ut(l.layout)!==Ut(h.layout))||de.isAbstract(h.origin))&&!h.origin.isCollapsed?i.push(h):u.push(h)}}}return s}}class sj{static layout(t,n,r){const i=new oj;if(Fn(r)){const f=t.children.length,h=[],g=[],p={...t};for(let v=0;v<f;v++){const w=t.children[v];if(de.isAbstract(w)&&w.end<t.rightNodeCount){h.push(w);continue}if(de.isAbstract(w)&&w.start>=t.rightNodeCount){g.push(w);continue}v<t.rightNodeCount?h.push(w):g.push(w)}p.children=h;const d=i.layout(p,Tn.logic,n,{toLeft:!1,toTop:!1,rootLayoutType:r},!0);p.children=g;const y=i.layout(p,Tn.logic,n,{toLeft:!0,toTop:!1,rootLayoutType:r},!0);y.right2left(),d.translate(y.x-d.x,y.y-d.y);const m=d.children.filter(v=>de.isAbstract(v.origin));return d.children=d.children.filter(v=>!de.isAbstract(v.origin)),y.children.forEach(v=>{d.children.push(v),v.parent=d}),d.children=d.children.concat(m),d.x=y.x,d.origin=t,d}const o=Nr(r),s=o?Tn.indented:Tn.logic,u=o?!0:Ut(r),l=Ci(r),a=Ja(r),c=i.layout(t,s,n,{toTop:l,toLeft:a,rootLayoutType:r},u);return l&&c.down2up(),a&&c.right2left(),c}}const qh=new WeakMap;var Ee;(function(e){e.top="top",e.right="right",e.bottom="bottom",e.left="left"})(Ee||(Ee={}));const Zh={[ne.right]:[Ee.right],[ne.left]:[Ee.left],[ne.upward]:[Ee.top],[ne.downward]:[Ee.bottom],[ne.rightBottomIndented]:[Ee.right,Ee.bottom],[ne.rightTopIndented]:[Ee.right,Ee.top],[ne.leftBottomIndented]:[Ee.left,Ee.bottom],[ne.leftTopIndented]:[Ee.left,Ee.top]};var as;(function(e){e.mind="mind"})(as||(as={}));const uj=["#A287E0","#6E80DB","#6DC4C4","#E0B75E","#B1C675","#77C386","#C18976","#E48484","#E582D4","#6AB1E4"],lj=["#F94239","#FF8612","#F3D222","#B3D431","#00BC7B","#06ADBF","#476BFF","#4E49BE","#8957E5","#FE5DA1"],aj=["#6D89C1","#F2BDC7","#B796D9","#5BA683","#B3D431 ","#F2DC6C","#F7C98D","#60B4D1","#838F9E","#C1A381"],cj=["#459476","#9A894F","#D48444","#E9C358 ","#4B9D9D","#C14C41","#827086 ","#60718D","#D38183","#9DC19D"],fj=["#3DD1AE","#F6C659","#A9E072","#FF877B ","#F693E7","#5DCFFF","#868AF6","#4C6DC7","#D97C26","#268FAC"],hj=["#E46C57","#579360","#B98339","#3A62D1 ","#B883B7","#42ABE5","#2B9D8F","#A4705E","#265833","#787865"],dj={...Q5,branchColors:uj,rootFill:"#f5f5f5",rootTextColor:_t};({...J5});({...eS});({...tS});({...nS});({...rS});const gj={isMindThemeColor(e){return!!(e.branchColors&&e.rootFill&&e.rootTextColor)}},qd="plait-mind-plugin-key",Dt=4,Gu="#6698FF",Hx="#AAAAAA",Mp=3,Rp=8,fa=16,$x="#6698FF",_x="white",pj=240;function kp(e,t){const n=e.getPluginOptions(qd),r=t.data.emojis.length;return{width:LT(t)*r+r*2*n.emojiPadding+(r-1)*n.spaceBetweenEmojis,height:t.height}}function LT(e){return Fe.isMind(e)?20:16}const Os=(e,t,n)=>t[n],rl={branch:{color:Hx,width:2},shape:{strokeColor:Hx,strokeWidth:2}},Zd={branch:{width:3},shape:{rectangleRadius:4,strokeWidth:3,fill:"none"}},mj=e=>{const t=e.rightNodeCount,n=e.children;let r=[],i=[];for(let o=0;o<n.length;o++){const s=n[o];if(de.isAbstract(s)&&s.end<t){r.push(s);continue}if(de.isAbstract(s)&&s.start>=t){i.push(s);continue}o<t?r.push(s):i.push(s)}return{leftChildren:i,rightChildren:r}},Ac=e=>{const t=X.findParent(e);if(!t)return;const n=t.children.indexOf(e);return t.children.find(r=>de.isAbstract(r)&&n>=r.start&&n<=r.end)},GT=e=>{const t=X.findParent(e);if(!t)return[];const n=t.children.indexOf(e);return t.children.filter(r=>de.isAbstract(r)&&r.start>n)},NT=(e,t)=>{const n=[];return t.filter(r=>!de.isAbstract(r)&&!Fe.isMind(r)).forEach(r=>{const i=Ac(r);if(i&&t.indexOf(i)===-1&&n.indexOf(i)===-1){const{start:o,end:s}=i;X.getParent(r).children.slice(o,s+1).every(a=>t.indexOf(a)>-1)&&n.push(i)}}),n},HT=(e,t)=>{const n=[];return t.filter(r=>!de.isAbstract(r)&&!Fe.isMind(r)).forEach(r=>{const i=Ac(r);if(i&&t.indexOf(i)>0){const o=n.findIndex(s=>s.abstract===i);o===-1?n.push({abstract:i,references:[r]}):n[o].references.push(r)}}),n};function $T(e,t){const n=t.indexOf(e.references[0]),r=t.indexOf(e.references[e.references.length-1]);return{start:n,end:r}}const _T=(e,t,n=1,r=!0,i=new Map)=>{const o=Ae.parent(e,t),s=t[t.length-1]!==0;let u;if(!s)u=o.children.filter(f=>de.isAbstract(f));else{const f=Ae.get(e,ge.previous(t));u=GT(f)}if(u.length&&u.forEach(f=>{let h=i.get(f);h||(h={start:0,end:0},i.set(f,h)),h.start=h.start+n,h.end=h.end+n}),!s)return i;const l=Ae.get(e,ge.previous(t)),a=Ac(l),c=!r&&a&&a.end===t[t.length-1]-1;if(a&&!c){let f=i.get(a);f||(f={start:0,end:0},i.set(a,f)),f.end=f.end+n}return i},jT=(e,t,n=new Map)=>(t.forEach(r=>{if(!Fe.isMind(r)){const i=GT(r).filter(s=>!t.includes(s));i.length&&i.forEach(s=>{let u=n.get(s);u||(u={start:0,end:0},n.set(s,u)),u.start=u.start-1,u.end=u.end-1});const o=Ac(r);if(o&&!t.includes(o)){let s=n.get(o);s||(s={start:0,end:0},n.set(o,s)),s.end=s.end-1}}}),n),WT=(e,t)=>!!X.getAncestors(e,t).find(r=>de.isAbstract(r)),Qd=(e,t)=>de.isAbstract(t)||WT(e,t)?zT(e,t):Os(e,t,"branchColor")||Os(e,t,"strokeColor")||VT(e,t),iy=(e,t)=>Os(e,t,"branchShape")||Fs.bight,Jd=(e,t)=>Os(e,t,"branchWidth")||Os(e,t,"strokeWidth")||Mp,vj=(e,t)=>Yu(t.branchWidth)?rl.branch.width:t.branchWidth,zT=(e,t)=>t.branchColor||t.strokeColor?t.branchColor||t.strokeColor:rl.branch.color,yj=(e,t)=>{const n=t.children.length;return UT(e,n)},VT=(e,t)=>{const n=P.findPath(e,t);return UT(e,n[1])},UT=(e,t)=>{const n=oy(e),r=n.branchColors.length,i=t%r;return n.branchColors[i]},oy=e=>{const n=P.getThemeColors(e).find(r=>r.mode===e.theme.themeColorMode);return n&&gj.isMindThemeColor(n)?n:dj},XT=(e,t)=>{if(Fe.isMind(t)){const n=oy(e).rootFill;return t.strokeColor||n}return de.isAbstract(t)||WT(e,t)?t.strokeColor||rl.shape.strokeColor:Os(e,t,"strokeColor")||VT(e,t)},e0=(e,t)=>t.strokeStyle||mr.solid,Bc=(e,t)=>t.strokeWidth||(de.isAbstract(t)?rl.shape.strokeWidth:Zd.shape.strokeWidth),wj=(e,t)=>{if(t.fill)return t.fill;const n=oy(e).rootFill;return t.isRoot?n:Zd.shape.fill},il=(e,t)=>Os(e,t,"shape")||ri.roundRectangle;function sy(e){const t=Us(e);t==null||t.edit(()=>{},n=>{const r=n;return r.key==="Enter"&&!r.shiftKey})}const Cg=(e,t)=>(t!=null&&t.length?t:re(e)).filter(r=>X.isMindElement(e,r)),uy=14,KT=18,Cj=25,xj=72,Ej=34,Pj='PingFangSC-Regular, "PingFang SC"',jx='PingFangSC-Medium, "PingFang SC"',Sj={defaultTextMaxWidth:34*14},Wx=e=>{const t=[];return e.forEach(n=>{Zh[n].forEach(i=>{!t.includes(i)&&!t.includes(ay(i))&&t.push(i)})}),t},Dj=(e,t)=>{const n=Zh[e],r=Zh[t];if(!r)throw new Error(`unexpected layout: ${t} on correct layout`);return r.find(i=>n.includes(ay(i)))},Tj=(e,t)=>{const n=t===Ee.left||t===Ee.right;let r=ne.standard;switch(e){case ne.left:r=ne.right;break;case ne.right:r=ne.left;break;case ne.downward:r=ne.upward;break;case ne.upward:r=ne.downward;break;case ne.rightBottomIndented:r=n?ne.leftBottomIndented:ne.rightTopIndented;break;case ne.leftBottomIndented:r=n?ne.rightBottomIndented:ne.leftTopIndented;break;case ne.rightTopIndented:r=n?ne.leftTopIndented:ne.rightBottomIndented;break;case ne.leftTopIndented:r=n?ne.rightTopIndented:ne.leftBottomIndented;break}return r},ly=()=>ne.standard,zx=e=>{const t=[],n=e.map(ay);for(const r in ne){const i=ne[r],o=Zh[i];if(o){const s=o.some(l=>e.includes(l)),u=o.some(l=>n.includes(l));s&&!u&&t.push(i)}}return t},ay=e=>{let t=Ee.right;switch(e){case Ee.top:t=Ee.bottom;break;case Ee.bottom:t=Ee.top;break;case Ee.right:t=Ee.left;break;case Ee.left:t=Ee.right;break}return t},Do=e=>e.layout||ly(),Aj=e=>{function t(r,i){return r.isRoot?Dt*12:(i&&i.isRoot(),Dt*3)}function n(r,i){return r.isRoot?Dt*10:Dt*6}return{getHeight(r){return Ye.getNodeHeight(e,r)},getWidth(r){return Ye.getNodeWidth(e,r)},getHorizontalGap(r,i){const o=i&&i.layout||Do(r),s=Ut(o);return Nr(o)?Dt*4:s?n(r):t(r,i)},getVerticalGap(r,i){const o=i&&i.layout||Do(r);return Nr(o)?Dt:Ut(o)?t(r,i):n(r)},getVerticalConnectingPosition(r,i){if(r.shape===ri.underline&&i&&Qa(i.layout))return Tp.bottom},getExtendHeight(r){return Dt*6},getIndentedCrossLevelGap(){return Dt*2}}},Vx=(e,t)=>{const n=t0("Mind",xj,Cj,{layout:ne.right});n.isRoot=!0,n.type="mindmap";const r=Ye.getNodeWidth(e,n),i=Ye.getNodeHeight(e,n);return n.points=[[t[0]-r/2,t[1]-i/2]],n},t0=(e,t,n,r)=>{const i={id:Ve(),data:{topic:Ks(e)},children:[],width:t,height:n};let o;for(o in r)Yu(r[o])||(i[o]=r[o]);return i},Bj=["fill","strokeColor","strokeWidth","strokeStyle","shape","layout","branchColor","branchWidth","branchShape"],Wf=e=>e.children.reduce((n,r)=>n+Wf(r),0)+e.children.length,YT=(e,t)=>{let n=X.findParent(t);for(;n;){if(n===e)return!0;n=X.findParent(n)}return!1},ha=e=>{let t=[];return e.forEach(n=>{e.some(i=>YT(i,n))||t.push(n)}),t},Ux=(e,t)=>e.y>t.y,qT=e=>{const t={...e};t.id=Ve(),t.children=[];for(const n of e.children)t.children.push(qT(n));return t},cy=(e,t,n)=>{const r={};t.isRoot||(Bj.forEach(o=>{r[o]=t[o]}),delete r.layout);const i=t0("",uy,mD,r);ee.insertNode(e,i,n),zs(e),Fo(e,i),setTimeout(()=>{sy(i)})},Mj=e=>{const t=[],n=[];for(let r=0;r<e.length;r++){const i=X.getParent(e[r]),o=n.indexOf(i);o===-1?(n.push(i),t.push([e[r]])):t[o].push(e[r])}return{parentElements:n,abstractIncludedGroups:t}},Rj=(e,t)=>{if(Fe.isMind(t))return KT;if(X.isMindElement(e,t))return uy;throw new Error("can not find default font-size")},tc={horizontal:{nodeAndText:Dt*2.5,emojiAndText:Dt*1.5},vertical:{nodeAndText:Dt,nodeAndImage:Dt,imageAndText:Dt*1.5}},fy={horizontal:{nodeAndText:Dt*4,emojiAndText:Dt*2},vertical:{nodeAndText:Dt*2}},xg=(e,t)=>{const r=Fe.isMind(t)?fy.horizontal.nodeAndText:tc.horizontal.nodeAndText,i=Bc(e,t);return r+i},Eg=(e,t)=>{const n=Fe.isMind(t),r=Bc(e,t);return(n?fy.vertical.nodeAndText:tc.vertical.nodeAndText)+r},Xx=e=>Fe.isMind(e)?fy.horizontal.emojiAndText:tc.horizontal.emojiAndText,Ye={getNodeWidth(e,t){const n=xg(e,t);return X.hasEmojis(t)?Ye.getEmojiLeftSpace(e,t)+kp(e,t).width+Xx(t)+Ye.getNodeDynamicWidth(e,t)+n:n+Ye.getNodeDynamicWidth(e,t)+n},getNodeHeight(e,t){const n=Eg(e,t);return X.hasImage(t)?Ye.getTextTopSpace(e,t)+t.height+n:n+t.height+n},getNodeDynamicWidth(e,t){var i;const n=t.manualWidth||t.width,r=X.hasImage(t)?(i=t.data.image)==null?void 0:i.width:0;return Math.max(n,r)},getNodeNewDynamicWidth(e,t,n){const r=t.manualWidth||t.width;return Math.max(r,n)},getNodeResizableMinWidth(e,t){const n=Ye.getNodeTopicMinWidth(e,t);return X.hasImage(t)&&t.data.image.width>n?t.data.image.width:n},getNodeTopicMinWidth(e,t){const n=Rj(e,t),r=oD(t);return Ir.getMarks(r)[Vt.fontSize]||n},getTextLeftSpace(e,t){const n=xg(e,t);return X.hasEmojis(t)?Ye.getEmojiLeftSpace(e,t)+kp(e,t).width+Xx(t):n},getTextTopSpace(e,t){const n=Eg(e,t);return X.hasImage(t)?Ye.getImageTopSpace(e,t)+t.data.image.height+tc.vertical.imageAndText:n},getImageTopSpace(e,t){return Bc(e,t)+tc.vertical.nodeAndImage},getEmojiLeftSpace(e,t){const n=e.getPluginOptions(qd);return xg(e,t)-n.emojiPadding},getEmojiTopSpace(e,t){return Eg(e,t)}},kj=e=>{const t=Fv;return typeof e=="string"?t:Ir.getMarksByElement(e)[Vt.fontSize]||t};function ot(e){const t=e.x+e.hGap;let n=e.y+e.vGap;const r=e.width-e.hGap*2,i=e.height-e.vGap*2;return{x:t,y:n,width:r,height:i}}function Oj(e,t){const n=Ye.getNodeWidth(e,t),r=Ye.getNodeHeight(e,t);return{x:t.points[0][0],y:t.points[0][1],width:n,height:r}}function ZT(e,t,n){const r=X.getNode(n);return!!(r&&dc(t[0],t[1],ot(r))===0)}function QT(e,t){let{x:n,y:r}=ot(X.getNode(t));n=n+Ye.getEmojiLeftSpace(e,t);const{width:i}=kp(e,t);return{x:n,y:r,width:i,height:Ye.getNodeHeight(e,t)}}function JT(e,t){let n=ot(t);const r=e7(e,n,t.origin);return r.width=r.width,r}function e7(e,t,n){const r=t.x+Ye.getTextLeftSpace(e,n),i=t.y+Ye.getTextTopSpace(e,n),o=Ye.getNodeDynamicWidth(e,n);return{height:Math.ceil(n.height),width:o,x:r,y:i}}function n0(e,t){let{x:n,y:r}=ot(X.getNode(t));const i=t.manualWidth||t.width;n=i>t.data.image.width?n+Ye.getTextLeftSpace(e,t)+(i-t.data.image.width)/2:n+Ye.getTextLeftSpace(e,t),r=Ye.getImageTopSpace(e,t)+r;const{width:o,height:s}=t.data.image;return{x:n,y:r,width:o,height:s}}const Fj=(e,t,n)=>{const r=n0(e,t),i=C.getOutlineRectangle(r,-lr/2);return C.isPointInRectangle(i,n)},bj=(e,t,n)=>{const r=n0(e,t);return ZS(r,lr).find(s=>C.isHit(C.getRectangleByPoints([n,n]),s.rectangle))},Ij=(e,t)=>{const n={...t};return delete n.isRoot,delete n.rightNodeCount,delete n.type,n.layout===ne.standard&&delete n.layout,n},Op=e=>{const t={...e};return delete t.start,delete t.end,t},Lj=(e,t)=>{const n={...t};return q.string(n.data.topic)||(n.data.topic={children:[{text:"Mind"}]}),n==null||delete n.strokeColor,n==null||delete n.fill,n==null||delete n.shape,n==null||delete n.strokeWidth,n==null||delete n.isCollapsed,{...n,layout:n.layout??ne.right,isRoot:!0,type:"mindmap"}},Gj=(e,t)=>{aD(e,t),Ue.getElementRef(t).getGenerator(Eo.key).setFocus(t,!0)},zf=(e,t)=>{qL(e),Ue.getElementRef(t).getGenerator(Eo.key).setFocus(t,!1)},t7=(e,t,n)=>{const r=Us(t),{height:i}=r.getSize(void 0,n);if(Math.abs(i-t.height)>2)return i},n7=e=>{Ue.getElementG(e).classList.add("dragging-node"),!e.isCollapsed&&e.children.forEach(t=>{n7(t)})},r7=e=>{Ue.getElementG(e).classList.remove("dragging-node"),!e.isCollapsed&&e.children.forEach(t=>{r7(t)})},Kx=(e,t)=>{_i(e,t),t?P.getBoardContainer(e).classList.add("mind-node-dragging"):P.getBoardContainer(e).classList.remove("mind-node-dragging")},Nj=(e,t,n)=>{let r=jo(e);if(Fe.isMind(e)&&Fn(Do(e))){const s=i7(e,t);s&&(r=r.slice(0,e.rightNodeCount)),s||(r=r.slice(e.rightNodeCount,r.length),n=[...n,n[n.length-1]-e.rightNodeCount])}let i=n[n.length-1]!==0,o=n[n.length-1]!==((r==null?void 0:r.length)||0);return e.isCollapsed&&(o=!1,i=!1),{hasPreviousNode:i,hasNextNode:o}},i7=(e,t)=>{const n=t.target;return Fe.isMind(e)&&Fn(Do(e))&&e.children.indexOf(n)!==-1&&e.children.indexOf(n)<e.rightNodeCount||Fe.isMind(n)&&Fn(Do(n))&&t.detectResult==="right"},Hj=(e,t,n)=>{if(!t.origin.isRoot&&!de.isAbstract(t.origin)){const r=bn.getCorrectLayoutByElement(e,t==null?void 0:t.parent.origin);if(Fn(r)){const o=t.parent.children.findIndex(s=>s===t)>=(t.parent.origin.rightNodeCount||0);return zr(n,[o?"right":"left"])}if(Ja(r))return zr(n,["right"]);if(Kh(r))return zr(n,["left"]);if(r===ne.upward)return zr(n,["bottom"]);if(r===ne.downward)return zr(n,["top"])}else{const r=bn.getCorrectLayoutByElement(e,t==null?void 0:t.origin);if(Fn(r))return zr(n,["top","bottom"]);if(r===ne.upward)return zr(n,["left","right","bottom"]);if(r===ne.downward)return zr(n,["left","right","top"]);if(Ja(r))return zr(n,["right","top","bottom"]);if(Kh(r))return zr(n,["left","top","bottom"])}return null},zr=(e,t)=>{const n=e;return t.forEach(r=>{const i=n.findIndex(o=>o===r);i!==-1&&n.splice(i,1)}),n.length?n:null},$j=(e,t,n,r)=>{let i=null;return on(e,o=>{if(!X.isMindElement(e,o)||i)return;const s=X.getNode(o),u=_j(s,t);u&&(i=Hj(e,s,u)),n=null;const l=r.every(a=>jj(a,s.origin));i&&l&&(n={target:s.origin,detectResult:i[0]})},Ws(e)),n},_j=(e,t)=>{const{x:n,y:r,width:i,height:o}=ot(e),s=r+o/2,u=n+i/2,l=e.y,a=e.y+e.height,c=e.x,f=e.x+e.width,h=[];return t[1]>r&&t[1]<r+o?(t[0]>c&&t[0]<u&&h.push("left"),t[0]>u&&t[0]<f&&h.push("right"),(t[0]>n&&t[0]<u||t[0]>u&&t[0]<n+i)&&(t[1]<s?h.push("top"):h.push("bottom")),h.length?h:null):t[0]>n&&t[0]<n+i?(t[1]>l&&t[1]<s&&h.push("top"),t[1]>s&&t[1]<a&&h.push("bottom"),(t[1]>r&&t[1]<r+o||t[1]>s&&t[1]<r+o)&&(t[0]<u?h.push("left"):h.push("right")),h.length?h:null):null},jj=(e,t)=>e!==t&&!YT(e,t),Wj=(e,t)=>{let n=P.findPath(e,t==null?void 0:t.target);const r=Fe.isMind(t==null?void 0:t.target)?Do(t==null?void 0:t.target):bn.getCorrectLayoutByElement(e,X.getParent(t==null?void 0:t.target)),i=jo(t.target);return Dp(r)&&((t.detectResult==="top"||t.detectResult==="bottom")&&n.push(i.length),t.detectResult==="right"&&(n=ge.next(n))),Qa(r)&&(t.detectResult==="right"&&(Fe.isMind(t==null?void 0:t.target)&&Fn(r)?n.push(t==null?void 0:t.target.rightNodeCount):n.push(i.length)),t.detectResult==="left"&&n.push(i.length),t.detectResult==="bottom"&&(n=ge.next(n))),Nr(r)&&(Ci(r)&&t.detectResult==="top"&&(n=ge.next(n)),X_(r)&&t.detectResult==="bottom"&&(n=ge.next(n)),Ja(r)&&t.detectResult==="left"&&n.push(i.length),Kh(r)&&t.detectResult==="right"&&n.push(i.length)),n};function zj(e,t){const n=ot(t);return hy(e,n,t.origin)}function hy(e,t,n){const r=wj(e,n),i=XT(e,n),o=Bc(e,n),s=e0(e,n),u=Go(s,o),l=C.inflate(t,-o);return hl(P.getRoughSVG(e),l.x,l.y,l.x+l.width,l.y+l.height,{stroke:i,strokeWidth:o,fill:r,fillStyle:"solid",strokeLineDash:u},!1,Zd.shape.rectangleRadius)}const Vj="#6698FF80",Xr=3.5,gf=10,pf=8;var Qe;(function(e){e.left="left",e.center="center",e.right="right"})(Qe||(Qe={}));var je;(function(e){e.top="top",e.middle="middle",e.bottom="bottom"})(je||(je={}));const cn=(e,t)=>{let n=e.x,r=e.y;return t[0]===Qe.center&&(n=e.x+e.width/2),t[0]===Qe.right&&(n=e.x+e.width),t[1]===je.middle&&(r=e.y+e.height/2),t[1]===je.bottom&&(r=e.y+e.height),[n,r]},Uj=(e,t,n)=>Math.abs(n?e[0]-t[0]:e[1]-t[1]),xi=(e,t)=>t?e.left?Ee.left:Ee.right:e.up?Ee.top:Ee.bottom,st=(e,t,n=Ee.right)=>n===Ee.left?[e[0]-t,e[1]]:n===Ee.bottom?[e[0],e[1]+t]:n===Ee.top?[e[0],e[1]-t]:[e[0]+t,e[1]],Tu=(e,t,n=Ee.right)=>n===Ee.bottom?[e[0]+t,e[1]]:n===Ee.top?[e[0]+t,e[1]]:[e[0],e[1]+t],En=(e,t)=>{if(t===Ee.left&&(e[0]===Qe.right?e[0]=Qe.left:e[0]===Qe.left&&(e[0]=Qe.right)),t===Ee.bottom||t===Ee.top){let n=Qe.center,r=je.middle;e[1]===je.top&&(n=Qe.left),e[1]===je.bottom&&(n=Qe.right),e[0]===Qe.left&&(r=je.top),e[0]===Qe.right&&(r=je.bottom),e[0]=n,e[1]=r}t===Ee.top&&(e[1]===je.bottom?e[1]=je.top:e[1]===je.top&&(e[1]=je.bottom))};function Xj(e,t,n,r=!0,i=null,o,s){const u=iy(e,t.origin),l=o||Jd(e,n.origin),a=i||Qd(e,n.origin),c=e0(e,n.origin),f=il(e,n.origin)===ri.underline;let h,g,p,d,y=t,m=n;const v=ot(y),w=ot(m);h=y.x+y.width/2,g=Ux(t,n)?v.y:v.y+v.height,p=t.left?m.x+m.hGap+w.width:m.x+m.hGap,d=f?m.y+m.height-m.vGap:m.y+m.height/2;let E=Ux(t,n)?t.left?[-1,-1]:[1,-1]:t.left?[-1,1]:[1,1],S=[[h,g],[h,g],[h,g],[h,d-m.hGap*3*E[1]/5],[h,d-m.hGap*E[1]/5],[h+m.hGap*E[0]/4,d],[h+m.hGap*E[0]*3/5,d],f&&r?[p+(m.width-m.hGap*2)*E[0],d]:[p,d],f&&r?[p+(m.width-m.hGap*2)*E[0],d]:[p,d],f&&r?[p+(m.width-m.hGap*2)*E[0],d]:[p,d]];const T=Go(c,l);if(u===Fs.polyline){const R=[[h,g],[h,d],[p,d],f&&r?[p+(m.width-m.hGap*2)*E[0],d]:[p,d]];return Zn(R,{stroke:a,strokeWidth:l,strokeLineDash:T})}const B=ei(S,.001);return T9(B,{stroke:a,strokeWidth:l,strokeLineDash:T})}function Kj(e,t,n,r,i=null,o,s){const u=iy(e,t.origin),l=i||Qd(e,n.origin),a=o||Jd(e,n.origin),c=e0(e,n.origin),f=u===Fs.polyline?!0:!t.origin.isRoot,h=il(e,t.origin),p=il(e,n.origin)===ri.underline,d=h===ri.underline,y=ot(n),m=ot(t),v=xi(n,r),w=[Qe.right,je.middle],E=[Qe.left,je.middle];En(w,v),En(E,v),r&&d&&!t.origin.isRoot&&(w[1]=je.bottom),r&&p&&(E[1]=je.bottom);let S=cn(m,w),T=cn(y,E);const R=f?st(S,8,v):S;let b=f?[S,R,R]:[];const O=(t.hGap+n.hGap)/3,V=-(t.hGap+n.hGap)/2.4;let L=[R,st(R,O,v),st(T,V,v),T];const W=st(T,y.width,v),z=p&&r?[W,W,W]:[],_=ei([...b,...L,...z]),J=Go(c,a);let Z;if(u===Fs.polyline){const F=st(R,8,v),U=[...b,F,r?[F[0],T[1]]:[T[0],F[1]],T,...z];Z=Zn(U,{stroke:l,strokeWidth:a,strokeLineDash:J})}else Z=P.getRoughSVG(e).curve(_,{stroke:l,strokeWidth:a,strokeLineDash:J});return c===mr.dotted&&ke(Z,"round"),Z}function o7(e,t,n,r,i,o,s,u){return X.isIndentedLayout(t.origin)?Xj(e,t,n,i,o,s):Kj(e,t,n,r,o,s)}const Yj="foreign-object-emoji";class qj{constructor(t){this.board=t,this.emojiComponentRef=null}draw(t,n,r){this.destroy();const i={board:this.board,emojiItem:n,element:r,fontSize:LT(r)};this.emojiComponentRef=this.board.renderEmoji(t,i)}destroy(){this.emojiComponentRef&&(this.emojiComponentRef.destroy(),this.emojiComponentRef=null)}}const ky=class ky{constructor(t){this.board=t,this.emojiGenerators=[]}drawEmojis(t){if(this.destroy(),X.hasEmojis(t)){this.g=Te(),this.g.classList.add("emojis");const n=QT(this.board,t),r=Qm(n.x,n.y,n.width,n.height);r.classList.add(Yj),this.g.append(r);const i=document.createElement("div");return i.classList.add("node-emojis-container"),r.append(i),this.emojiGenerators=t.data.emojis.map(o=>{const s=new qj(this.board);return s.draw(i,o,t),s}),this.g}}destroy(){this.g&&this.g.remove(),this.emojiGenerators.forEach(t=>t.destroy()),this.emojiGenerators=[]}};ky.key="node-emojis-generator";let nc=ky;const Zj=(e,t,n,r)=>{const i=Ue.getElementRef(t),o=X.getNode(t),s=Te();s.classList.add("dragging","fake-node","plait-board-attached");const u={...o,children:[],x:o.x+n,y:o.y+r},l=JT(e,o),a=zj(e,u),c=Us(t).g.cloneNode(!0);if(ia(c,l.width,l.height,l.x+n,l.y+r),s==null||s.append(a),s==null||s.append(c),X.hasEmojis(t)){const h=i.getGenerator(nc.key).g.cloneNode(!0),g=QT(e,t);ia(h,g.width,g.height,g.x+n,g.y+r),s==null||s.append(h)}if(X.hasImage(t)){const h=i.getGenerator(Eo.key).g.cloneNode(!0),g=n0(e,t);ia(h,g.width,g.height,g.x+n,g.y+r),s==null||s.append(h)}return s},Qj=(e,t,n)=>{const r=t.target,i=Te(),o=Ae.get(e,ge.parent(n)),s=bn.getLayoutByElement(o),u=Ut(s),{hasNextNode:l,hasPreviousNode:a}=Nj(o,t,n),c=30,f=12;let h,g,p,d;if(!a&&!l){const R=X.getNode(o),b=ot(R);d=xi(R,u),p=R,Fe.isMind(r)&&Fn(s)&&(t.detectResult==="left"?(d=Ee.left,p.left=!0):(d=Ee.right,p.left=!1));const O=[Qe.right,je.middle];En(O,d);const V=cn(b,O);if(Nr(s)){const L=[Qe.center,Ci(s)?je.top:je.bottom],W=cn(b,L);g=st(W,f,d),g[1]=Ci(s)?g[1]-f:g[1]+f}else g=st(V,c,d)}else if(!a&&l){const R=Ae.get(e,n);p=X.getNode(R);const b=ot(p);d=xi(p,u);const O=[Qe.left,je.top];En(O,d);let V=-f;X.isIndentedLayout(o)&&(V=Ci(s)?V/2+p.height-p.vGap:0),g=cn(b,O),g=Tu(g,V,d)}else if(a&&!l){const R=Ae.get(e,ge.previous(n));p=X.getNode(R);const b=ot(p);d=xi(p,u);const O=[Qe.left,je.bottom];En(O,d);let V=f;X.isIndentedLayout(o)&&(V=Ci(s)?-V-(p.height-p.vGap):V),g=cn(b,O),g=Tu(g,V,d)}else{const R=Ae.get(e,ge.previous(n));p=X.getNode(R);const b=ot(p),O=Ae.get(e,n),V=X.getNode(O),L=ot(V),W=[Qe.left,je.bottom],z=[Qe.left,je.top];d=xi(p,u),En(W,d),En(z,d);const _=cn(b,W),J=cn(L,z);g=[(_[0]+J[0])/2,(_[1]+J[1])/2]}let y=g,m=g;const v=u?f:c,w=u?c:f;y=Tu(y,-v/2,d),m=Tu(m,v/2,d),m=st(m,w,d);const E=Math.min(y[0],m[0]),S=Math.min(y[1],m[1]);h={...p,x:E,y:S,width:c,height:f,hGap:X.isIndentedLayout(o)?Dt*4+(p.origin.strokeWidth||Mp):0,vGap:X.isIndentedLayout(o)?Dt:0};const T=hl(P.getRoughSVG(e),h.x,h.y,h.x+c,h.y+f,{stroke:Gu,strokeWidth:2,fill:Gu,fillStyle:"solid"}),B=o7(e,X.getNode(o),h,u,!1,Gu,Mp);return i==null||i.appendChild(B),i==null||i.appendChild(T),i};var Xt;(function(e){e.start="start",e.end="end"})(Xt||(Xt={}));var da;(function(e){e.start="start",e.resizing="resizing",e.end="end"})(da||(da={}));function Yx(e,t,n,r,i){const o=Te(),s=X.getParent(n),u=bn.getCorrectLayoutByElement(e,n),l=Ut(u),a=s.children.slice(n.start,n.end+1);let c=He(e,a,!0);c=C.getOutlineRectangle(c,-Xr),i&&(c=Kl(c,i,r,l));const f=eW(t,c.x,c.y,c.x+c.width,c.y+c.height,l,{stroke:Gu,strokeWidth:1,fillStyle:"solid"}),h=[Qe.center,je.top],g=[Qe.center,je.bottom],p=xi(X.getNode(n),l);En(h,p),En(g,p);let d=cn(c,h),y=cn(c,g);const m=st(d,-gf/2,p),v=st(d,gf/2,p),w=st(y,-gf/2,p),E=st(y,gf/2,p),S=t.line(m[0],m[1],v[0],v[1],qx(r===Xt.start)),T=t.line(w[0],w[1],E[0],E[1],qx(r===Xt.end));return Jj(e,r,l),ke(S,"round"),ke(T,"round"),o.append(S),o.append(T),o.append(f),o}function qx(e){return e?{stroke:Gu,strokeWidth:4,fillStyle:"solid"}:{stroke:Vj,strokeWidth:3,fillStyle:"solid"}}function Jj(e,t,n){t?n?P.getBoardContainer(e).classList.add("abstract-resizing-horizontal"):P.getBoardContainer(e).classList.add("abstract-resizing-vertical"):(P.getBoardContainer(e).classList.remove("abstract-resizing-horizontal"),P.getBoardContainer(e).classList.remove("abstract-resizing-vertical"))}function eW(e,t,n,r,i,o,s){const u=Math.abs(t-r),l=Math.abs(n-i),a=5,h=10+4*2;if(o){const g=(u-h-a*2)/2,p=l-a*2;return e.path(`M${t+a},${n}
            l${g},0
            m${h},0
            l${g},0
            a${a},${a},0,0,1,${a},${a}
            l0,${p}
            a${a},${a},0,0,1,-${a},${a}
            l-${g},0
            m-${h},0
            l-${g},0
            a${a},${a},0,0,1,-${a},-${a}
            l0,-${p}
            a${a},${a},0,0,1,${a},-${a}`,s)}else{const g=(l-h-a*2)/2,p=u-a*2;return e.path(`M${t+a},${n}
            l${p},0
            a${a},${a},0,0,1,${a},${a}
            l0,${g}
            m0,${h}
            l0,${g}
            a${a},${a},0,0,1,-${a},${a}
            l-${p},0
            a${a},${a},0,0,1,-${a},-${a}
            l0,-${g}
            m0,-${h}
            l0,-${g}
            a${a},${a},0,0,1,${a},-${a}`,s)}}const Oy=class Oy extends In{canDraw(t,n){return!!n.selected}draw(t,n){const r=Te(),i=X.getNode(t),o=ot(i),s=Bc(this.board,t),u=xt,l=C.inflate(o,u),a=hl(P.getRoughSVG(this.board),l.x,l.y,l.x+l.width,l.y+l.height,{stroke:Gu,strokeWidth:u,fill:""},!0,Zd.shape.rectangleRadius+(u+s)/2);return de.isAbstract(t)&&(this.abstractOutlineG=Yx(this.board,P.getRoughSVG(this.board),t),r.append(this.abstractOutlineG),a.classList.add("abstract-element")),r.appendChild(a),r.classList.add(cl),r}updateAbstractOutline(t,n,r){const i=Yx(this.board,P.getRoughSVG(this.board),t,n,r);this.abstractOutlineG&&(this.abstractOutlineG.replaceWith(i),this.abstractOutlineG=i)}};Oy.key="mind-node-active";let To=Oy;const Kl=(e,t,n,r)=>r?n===Xt.start?{...e,y:t,height:e.height+e.y-t}:{...e,height:t-e.y}:n===Xt.start?{...e,x:t,width:e.width+e.x-t}:{...e,width:t-e.x},tW=(e,t,n,r,i,o)=>{const s=X.getNode(r),{start:u,end:l}=ho(s.origin,i),a=n[u],c=n[l];if(t===Xt.start){const f=n.filter(d=>de.isAbstract(d)&&d.end<r.start);let h;if(f.length){const d=f.map(y=>{const{end:m}=ho(y,i);return m}).sort((y,m)=>m-y)[0];h=n[d+1]}else h=n[0];const g=He(e,[h],!0),p=He(e,[c],!1);return o?{max:p.y-Xr,min:g.y-Xr}:{max:p.x-Xr,min:g.x-Xr}}else{const f=n.filter(d=>de.isAbstract(d)&&d.start>r.end);let h;if(f.length){const d=f.map(y=>{const{start:m}=ho(y,i);return m}).sort((y,m)=>y-m)[0];h=n[d-1]}else{const d=n.filter(y=>!de.isAbstract(y));h=n[d.length-1]}const g=He(e,[h],!0),p=He(e,[a],!1);return o?{max:g.y+g.height+Xr,min:p.y+p.height+Xr}:{max:g.x+g.width+Xr,min:p.x+p.width+Xr}}},s7=(e,t,n)=>{const r=bn.getCorrectLayoutByElement(e,t),i=Ut(r),s=X.getParent(t).children.slice(t.start,t.end+1);let u=He(e,s,!0);u=C.getOutlineRectangle(u,-Xr);const l=Zx(u,i,Xt.start),a=Zx(u,i,Xt.end),c=C.getRectangleByPoints([n,n]);if(C.isHit(c,l))return Xt.start;if(C.isHit(c,a))return Xt.end},Zx=(e,t,n)=>{let r;if(n===Xt.start){const i=t?e.y:e.x;r=Kl(e,i+pf/2,Xt.end,t),r=Kl(r,i-pf/2,n,t)}else{const i=t?e.y+e.height:e.x+e.width;r=Kl(e,i-pf/2,Xt.start,t),r=Kl(r,i+pf/2,n,t)}return r};function nW(e,t,n,r){const i=t.filter(c=>!de.isAbstract(c)),o=i.map(c=>He(e,[c],!1)),s=He(e,[i[0]],!0),u={x:s.x-s.width,y:s.y-s.height,width:s.width,height:s.height},l=He(e,[i[i.length-1]],!0),a={x:l.x+l.width,y:l.y+l.height,width:l.width,height:l.height};o.push(a),o.unshift(u);for(let c=0;c<o.length-1;c++){const f=r?o[c].y:o[c].x,h=r?o[c].height:o[c].width;if(n>=f+h/2&&n<=o[c+1][r?"y":"x"]+o[c+1][r?"height":"width"]/2)return c-1}return 0}function rW(e,t,n){let r;const i=re(e).filter(o=>de.isAbstract(o)).find(o=>(r=s7(e,o,n),r));return t===i||(t&&(Ue.getElementRef(t).getGenerator(To.key).updateAbstractOutline(t),t=void 0),i&&(t=i,Ue.getElementRef(t).getGenerator(To.key).updateAbstractOutline(t,r))),t}const u7=e=>{const t=X.findParent(e);if(t){const n=t.children.findIndex(r=>r.id===e.id);if(t.isRoot&&Do(t)===ne.standard&&t.rightNodeCount&&n<=t.rightNodeCount-1)return!0}return!1},l7=(e,t,n,r=[])=>{let i=r.findIndex(s=>ge.equals(s.path,t));const o=Ae.get(e,t);return i===-1?r.push({path:t,rightNodeCount:o.rightNodeCount+n}):r[i].rightNodeCount+=n,r},a7=(e,t,n=[])=>(t.forEach(r=>{if(u7(r)){const i=X.getParent(r),o=P.findPath(e,i);let s=n.findIndex(u=>ge.equals(u.path,o));s===-1?n.push({path:o,rightNodeCount:i.rightNodeCount-1}):n[s].rightNodeCount-=1}}),n);function dy(e,t){const n=jo(t);return P.findPath(e,t).concat(n.length)}function iW(e,t){const n=P.findPath(e,t);return M.next(n)}const gy=(e,t)=>{const n=X.getAncestors(e,t);n.unshift(t);const r=n[n.length-1];let i=Do(r);if(Fe.isMind(t))return i;const o=X.getNode(t);let s=i;i===ne.standard&&(s=o.left?ne.left:ne.right);let u=null;const l=n.find(a=>a.layout||de.isAbstract(a));if(l)if(de.isAbstract(l)){const a=X.getParent(l),c=gy(e,a);u=ry(c)}else u=l==null?void 0:l.layout;if(u===ne.standard||!u)return s;{const a=Dj(s,u);return a?Tj(u,a):u}},c7=(e,t)=>{const n=[];t.layout&&n.unshift(gy(e,t));let r=X.findParent(t);for(;r;)r.layout&&n.unshift(r.layout),r=X.findParent(r);return n},oW=(e,t)=>{const n=X.findParent(t);if(n){const r=c7(e,n);if(r[0]===ne.standard){const a=X.getNode(t);r[0]=a.left?ne.left:ne.right}const i=Wx(r);let o=zx(i);const s=[r[r.length-1]],u=Wx(s),l=zx(u);return o=o.filter(a=>l.some(c=>c===a)),o}},Fp=e=>{const t=e.layout;if(t)return t;const n=!Fe.isMind(e)&&X.getParent(e);return de.isAbstract(e)&&n?ry(Fp(n)):n?Fp(n):ly()},bn={getAvailableSubLayoutsByElement:oW,getBranchLayouts:c7,getLayoutByElement:Fp,getCorrectLayoutByElement:gy},Fe={isMind:e=>e.type==="mindmap"},X={hasLayout(e,t){return bn.getLayoutByElement(e)===t},isIndentedLayout(e){const t=bn.getLayoutByElement(e);return Nr(t)},isMindElement(e,t){return!!(t.data&&t.data.topic&&!Yu(t.width)&&!Yu(t.height))},getParent(e){if(Fe.isMind(e))throw new Error("mind root node can not get parent");return hs.get(e)},findParent(e){return Fe.isMind(e)?void 0:hs.get(e)},getRoot(e,t){const n=P.findPath(e,t);return Ae.get(e,n.slice(0,1))},getAncestors(e,t){const n=P.findPath(e,t),r=[];for(const i of ge.ancestors(n,{reverse:!0})){const o=Ae.get(e,i);o&&!P.isBoard(o)&&r.push(o)}return r},getNode(e){const t=qh.get(e);if(!t)throw new Error(`can not get node from ${JSON.stringify(e)}`);return t},findParentNode(e){if(Fe.isMind(e))return;const t=X.getParent(e);return X.getNode(t)},hasEmojis(e){return!!e.data.emojis},hasImage(e){return!!e.data.image},getEmojis(e){return e.data.emojis}};var ri;(function(e){e.roundRectangle="round-rectangle",e.underline="underline"})(ri||(ri={}));var Fs;(function(e){e.bight="bight",e.polyline="polyline"})(Fs||(Fs={}));function sW(e,t,n){const i=vj(e,t.origin),o=zT(e,t.origin),s=e0(e,t.origin),u=t.parent,l=iy(e,t.origin),a=ot(t);let c=u.children.slice(t.origin.start,t.origin.end+1).map(b=>b.origin);const f=He(e,c,!0),h=xi(t,n),g=[Qe.right,je.top],p=[Qe.right,je.bottom],d=[Qe.left,je.middle];En(g,h),En(p,h),En(d,h);let y=cn(f,g),m=cn(f,p),v=cn(a,d),w=Uj(v,y,n)-15*2;y=st(y,15,h);let E=st(y,w,h);m=st(m,15,h);let S=st(m,w,h),T=st(v,-15,h);const B=Go(s,i);if(l===Fs.polyline){const b=Te(),O=Zn([y,E,T,S,m],{stroke:o,strokeWidth:i}),V=Zn([v,T],{stroke:o,strokeWidth:i,strokeLineDash:B});return b.appendChild(O),b.appendChild(V),b}return P.getRoughSVG(e).path(`M${y[0]},${y[1]} Q${E[0]},${E[1]} ${T[0]},${T[1]} Q${S[0]},${S[1]} ${m[0]},${m[1]} M${v[0]},${v[1]} L${T[0]},${T[1]}`,{stroke:o,strokeWidth:i,strokeLineDash:B})}const f7=(e,t)=>{t.forEach((n,r)=>{const i=r.start+n.start,o=r.end+n.end,s=P.findPath(e,r);i>o?ee.removeNode(e,s):ee.setNode(e,{start:i,end:o},s)})},h7=(e,t)=>{const n=t.rightNodeCount,r=t.children.find(i=>de.isAbstract(i)&&i.end>=n&&i.start<n);if(r){const i=P.findPath(e,r);ee.setNode(e,{end:n-1},i)}},uW=(e,t)=>{let n=ha(t);const{parentElements:r,abstractIncludedGroups:i}=Mj(n);i.forEach((o,s)=>{const u=r[s];lW(e,u,o)})},lW=(e,t,n)=>{const r=n.map(u=>t.children.indexOf(u)).sort((u,l)=>u-l),i=t==null?void 0:t.rightNodeCount,o=r[0],s=r[r.length-1];if(Fn(bn.getLayoutByElement(t))&&i&&o<i&&s>=i){const u=t.children.length,l=[...P.findPath(e,t),u],a=r.filter(f=>f>=i),c=r.filter(f=>f<i);Pg(e,l,c[0],c[c.length-1]),Pg(e,ge.next(l),a[0],a[a.length-1])}else{const u=[...P.findPath(e,t),t.children.length];Pg(e,u,o,s)}},Pg=(e,t,n,r)=>{const i=t0("",28,20,{strokeWidth:rl.branch.width,branchWidth:rl.branch.width});i.start=n,i.end=r,ee.insertNode(e,i,t),zs(e),Fo(e,i)},py=(e,t,n,r)=>{const i=Ye.getNodeTopicMinWidth(e,t),o=n<i?i:n;return{width:Math.ceil(o),height:r}},aW=(e,t,n,r,i)=>{const o={data:{...t.data,topic:n},...py(e,t,r,i)},s=P.findPath(e,t);ee.setNode(e,o,s)},cW=(e,t,n,r)=>{const i=P.findPath(e,t),{width:o,height:s}=py(e,t,n,r),u={manualWidth:o,height:s};ee.setNode(e,u,i)},fW=(e,t,n,r)=>{const i={...py(e,t,n,r)};let o=Math.ceil(t.width)===Math.ceil(i.width),s=Math.ceil(t.height)===Math.ceil(i.height);if(t.manualWidth&&(o=!0),!o||!s){const u=P.findPath(e,t);ee.setNode(e,i,u)}},d7=(e,t,n)=>{const r=e.pathRef(n);t.forEach(i=>{r.current&&ee.insertNode(e,i,r.current)}),r.unref()},hW=(e,t,n,r)=>{var u;const i=Ae.get(e,M.parent(r)),o=[...M.parent(r),(u=i.children)==null?void 0:u.length],s=t.map(l=>{const{start:a,end:c}=$T(l,n);return{...l.abstract,start:a+r[r.length-1],end:c+r[r.length-1]}});d7(e,s,o)},g7=(e,t)=>{t.forEach(n=>{ee.setNode(e,{rightNodeCount:n.rightNodeCount},n.path)})},dW=(e,t)=>{if(X.isMindElement(e,t)){Gd(e,t);const n=P.findPath(e,t);if(t.isCollapsed){const r={isCollapsed:!1};os.withoutSaving(e,()=>{ee.setNode(e,r,n)})}cy(e,t,dy(e,t))}},gW=(e,t)=>{if(X.isMindElement(e,t)&&!Fe.isMind(t)&&!de.isAbstract(t)){const n=P.findPath(e,t);if(u7(t)){const i=l7(e,n.slice(0,1),1);g7(e,i)}const r=_T(e,M.next(n));f7(e,r),cy(e,t,iW(e,t))}},pW=(e,t)=>{ee.insertNode(e,t,[e.children.length]),ee.addSelectionWithTemporaryElements(e,[t])},mW=(e,t,n)=>{const i=[...t.data.emojis||[]];i.push(n);const o={data:{...t.data,emojis:i}},s=P.findPath(e,t);ee.setNode(e,o,s)},vW=(e,t,n)=>{const r=t.data.emojis.filter(s=>s!==n),i={data:{topic:t.data.topic}};X.hasImage(t)&&(i.data.image=t.data.image),r.length>0&&(i.data.emojis=r);const o=P.findPath(e,t);ee.setNode(e,i,o)},yW=(e,t,n,r)=>{const i={data:{...t.data}},o=t.data.emojis.map(u=>u===n?r:u);i.data.emojis=o;const s=P.findPath(e,t);ee.setNode(e,i,s)},wW=(e,t)=>{zf(e,t);const n={data:{...t.data}};delete n.data.image;const r=P.findPath(e,t),i=Ye.getNodeNewDynamicWidth(e,t,0),o=t7(e,t,i);o&&(n.height=o),ee.setNode(e,n,r)},CW=(e,t,n)=>{const r={data:{...t.data,image:n}},i=Ye.getNodeNewDynamicWidth(e,t,n.width),o=t7(e,t,i);o&&(r.height=o);const s=P.findPath(e,t);ee.setNode(e,r,s)},p7=(e,t,n)=>{var i;const r=Ae.get(e,n);r&&t&&((i=r.children)==null||i.forEach((o,s)=>{var u;o.layout&&((Qa(t)&&Dp(o.layout)||Dp(t)&&Qa(o.layout))&&ee.setNode(e,{layout:null},[...n,s]),(u=o.children)!=null&&u.length&&p7(e,t,[...n,s]))}))},xW=(e,t)=>{const n=(r,i)=>{if(X.isMindElement(e,r)){p7(e,t,i);const o=Ae.get(e,i);if(Fe.isMind(o)&&Fn(t)){let s={rightNodeCount:o.children.length/2};ee.setNode(e,s,i),h7(e,o)}ee.setNode(e,{layout:t},i)}};Po.setProperty(e,{},{callback:n})},EW=(e,t)=>{Po.setProperty(e,{shape:t})},PW=(e,t)=>{Po.setProperty(e,{branchShape:t})},SW=(e,t)=>{Po.setProperty(e,{branchWidth:t})},DW=(e,t)=>{Po.setProperty(e,{branchColor:t})},Ht={setLayout:xW,setShape:EW,setBranchShape:PW,setBranchWidth:SW,setBranchColor:DW,setTopic:aW,setTopicSize:fW,setNodeManualWidth:cW,addEmoji:mW,removeEmoji:vW,replaceEmoji:yW,insertAbstract:uW,setAbstractsByRefs:f7,setAbstractByStandardLayout:h7,insertNodes:d7,insertAbstractNodes:hW,setRightNodeCountByRefs:g7,removeImage:wW,setImage:CW,insertChildNode:dW,insertSiblingNode:gW,insertMind:pW};class TW extends In{canDraw(t){return!(P.isReadonly(this.board)||t!=null&&t.isCollapsed)}draw(t){const n=Te();n.classList.add("plus");const r=X.getNode(t),i=bn.getLayoutByElement(t),o=Ut(i);let s=xi(r,o);Nr(i)&&(s=Ci(i)?Ee.top:Ee.bottom);const u=il(this.board,t)===ri.underline,l=ot(r),a=Jd(this.board,t),c=Fe.isMind(t)?yj(this.board,t):Qd(this.board,t);let f=8,h=[Qe.right,je.middle];En(h,s),o&&u&&!t.isRoot&&(h[1]=je.bottom);let g=cn(l,h);t.children.length>0&&!t.isRoot&&(g=st(g,fa+8,s),f=5);const p=st(g,f,s),d=st(p,8,s),y=P.getRoughSVG(this.board).line(g[0],g[1],p[0],p[1],{stroke:c,strokeWidth:a}),m=P.getRoughSVG(this.board).circle(d[0],d[1],fa,{fill:$x,stroke:$x,fillStyle:"solid"}),v=[d[0]-5,d[1]],w=[d[0]+5,d[1]],E=[d[0],d[1]-5],S=[d[0],d[1]+5],T=P.getRoughSVG(this.board).line(v[0],v[1],w[0],w[1],{stroke:_x,strokeWidth:2}),B=P.getRoughSVG(this.board).line(E[0],E[1],S[0],S[1],{stroke:_x,strokeWidth:2});return n.appendChild(y),n.appendChild(m),n.appendChild(T),n.appendChild(B),n}afterDraw(t){if(!this.g)throw new Error("can not find quick insert g");Ds(this.g,"pointerdown").pipe(j1(1)).subscribe(n=>{n.preventDefault()}),Ds(this.g,"pointerup").pipe(j1(1)).subscribe(n=>{setTimeout(()=>{const r=dy(this.board,t);cy(this.board,t,r)},0)})}}class AW extends In{canDraw(t){return!!(t.children.length&&!Fe.isMind(t))}draw(t){const n=Te();n.classList.add("collapse");const r=X.getNode(t),i=Qd(this.board,t),o=Jd(this.board,t),s=bn.getLayoutByElement(t),u=il(this.board,t)===ri.underline,l=Ut(s),a=ot(r);let c=xi(r,l);Nr(s)&&(c=Ci(s)?Ee.top:Ee.bottom);let f=[Qe.right,je.middle];En(f,c),l&&u&&!t.isRoot&&(f[1]=je.bottom);let h=cn(a,f);const g=st(h,Rp,c),p=st(g,fa/2,c),d=this.getArrowPoints(p,c),y=Zn(d,{stroke:i,strokeWidth:2}),m=P.getRoughSVG(this.board).line(h[0],h[1],g[0],g[1],{strokeWidth:o,stroke:i}),v=P.getRoughSVG(this.board).circle(p[0],p[1],fa,{fill:i,stroke:i,fillStyle:"solid"}),w=P.getRoughSVG(this.board).circle(p[0],p[1],fa,{fill:"#fff",stroke:i,strokeWidth:o>3?3:o,fillStyle:"solid"});if(t.isCollapsed){let E=0;Wf(t)>=10&&(E=-2),Wf(t)===1&&(E=1);const S=u9(p[0]-4+E,p[1]+4,i,`${Wf(t)}`);v.setAttribute("style","opacity: 0.15"),S.setAttribute("style","font-size: 12px"),n.appendChild(v),n.appendChild(S),n.appendChild(m)}else n.appendChild(w),n.appendChild(y);return n.appendChild(m),n}afterDraw(t){if(!this.g)throw new Error("can not find quick insert g");Ds(this.g,"pointerdown").pipe(N6(()=>!P.isPointer(this.board,$e.hand)||!!P.isReadonly(this.board)),j1(1)).subscribe(n=>{n.preventDefault();const i={isCollapsed:!t.isCollapsed},o=P.findPath(this.board,t);ee.setNode(this.board,i,o)})}getArrowPoints(t,n){let r=st(t,2,n);r=Tu(r,4,n);const i=st(t,-2,n);let o=st(t,2,n);return o=Tu(o,-4,n),[r,i,o]}}class BW extends In{constructor(t){super(t,{prepend:!0})}canDraw(t,n){return il(this.board,t)===ri.roundRectangle}draw(t,n){const r=ot(n.node);return hy(this.board,r,n.node.origin)}}class m7 extends No{get textManage(){return this.getRef().getTextManages()[0]}constructor(){super(),this.shapeG=null,this.trackBy=(t,n)=>n.origin.id}initializeGenerator(){this.nodeShapeGenerator=new BW(this.board),this.nodeEmojisGenerator=new nc(this.board),this.activeGenerator=new To(this.board),this.nodePlusGenerator=new TW(this.board),this.collapseGenerator=new AW(this.board),this.imageGenerator=new Eo(this.board,{getRectangle:r=>n0(this.board,r),getImageItem:r=>r.data.image});const t=(this.board.getPluginOptions(dp)||{}).textPlugins,n=new wc(this.board,{getRectangle:()=>JT(this.board,this.node),onChange:r=>{const i=r.width,o=r.height;r.newText?Ht.setTopic(this.board,this.element,r.newText,i,o):Ht.setTopicSize(this.board,this.element,i,o)},getMaxWidth:()=>this.element.manualWidth?Ye.getNodeDynamicWidth(this.board,this.element):Math.max(Ye.getNodeDynamicWidth(this.board,this.element),Sj.defaultTextMaxWidth),textPlugins:t||[]});this.getRef().addGenerator(To.key,this.activeGenerator),this.getRef().addGenerator(nc.key,this.nodeEmojisGenerator),this.getRef().addGenerator(Eo.key,this.imageGenerator),this.getRef().initializeTextManage(n)}initialize(){super.initialize(),this.initializeGenerator(),this.node=X.getNode(this.element),this.index=bu.get(this.element)||0,this.roughSVG=P.getRoughSVG(this.board),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawTopic(),this.activeGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected}),this.drawEmojis(),this.drawExtend(),this.imageGenerator.processDrawing(this.element,this.getElementG()),Fe.isMind(this.context.parent)&&this.getElementG().classList.add("branch")}onContextChanged(t,n){const r=X.getNode(t.element),i=C.isEqual(this.node,r);if(this.node=r,!i||t.element!==n.element||t.hasThemeChanged)this.activeGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected}),this.nodeShapeGenerator.processDrawing(this.element,this.getElementG(),{node:this.node}),this.drawLink(),this.drawEmojis(),this.drawExtend(),!X.hasImage(n.element)&&X.hasImage(this.element)&&this.imageGenerator.processDrawing(this.element,this.getElementG()),X.hasImage(n.element)&&X.hasImage(this.element)&&this.imageGenerator.updateImage(this.getElementG(),n.element,t.element),X.hasImage(n.element)&&!X.hasImage(this.element)&&this.imageGenerator.destroy(),this.updateTopic();else{const o=t.selected===n.selected,s=t.parent===n.parent;o||this.activeGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected}),s||this.drawLink()}}drawEmojis(){const t=this.nodeEmojisGenerator.drawEmojis(this.element);t&&this.getElementG().append(t)}drawLink(){if(Fe.isMind(this.element))return;const t=X.getParent(this.element),n=X.getNode(t);this.linkG&&this.linkG.remove();const r=bn.getLayoutByElement(t);de.isAbstract(this.node.origin)?this.linkG=sW(this.board,this.node,Ut(r)):this.linkG=o7(this.board,n,this.node,Ut(r)),this.getElementG().append(this.linkG)}drawExtend(){this.extendG||(this.extendG=Te(),this.extendG.classList.add("extend"),this.getElementG().append(this.extendG)),this.element.isCollapsed?this.getElementG().classList.add("collapsed"):this.getElementG().classList.remove("collapsed"),this.nodePlusGenerator.processDrawing(this.element,this.extendG),this.collapseGenerator.processDrawing(this.element,this.extendG)}drawTopic(){this.textManage.draw(this.element.data.topic),this.getElementG().append(this.textManage.g)}updateTopic(){this.textManage.updateText(this.element.data.topic),this.textManage.updateRectangle()}destroy(){super.destroy(),this.nodeEmojisGenerator.destroy(),this.imageGenerator.destroy(),this.activeGenerator.destroy(),qh.get(this.element)===this.node&&qh.delete(this.element),this.getRef().destroyTextManage()}}class MW extends m7{initialize(){this.updateMindLayout(),super.initialize(),this.getElementG().classList.add("root")}beforeContextChange(t){t.element!==this.element&&this.initialized&&this.updateMindLayout(t.element)}updateMindLayout(t=this.element){const n=t.layout||ly();this.root=sj.layout(t,Aj(this.board),n),this.updateMindNodeLocation(t)}updateMindNodeLocation(t){const{x:n,y:r,hGap:i,vGap:o}=this.root,s=n+i,u=r+o;on(this.root,l=>{l.x=l.x-s+t.points[0][0],l.y=l.y-u+t.points[0][1],qh.set(l.origin,l)})}}const RW=5,kW=e=>{const{pointerDown:t,pointerMove:n,globalPointerUp:r}=e;let i=[],o=[],s,u,l,a=null,c;return e.pointerDown=f=>{if(P.isReadonly(e)||P.hasBeenTextEditing(e)||!P.isPointer(e,$e.selection)||!Hi(f)){t(f);return}const h=Ce(e,xe(e,f.x,f.y)),g=re(e),p=$i(e,h);if(p&&X.isMindElement(e,p)&&!Fe.isMind(p)&&!de.isAbstract(p)){const d=g.filter(m=>X.isMindElement(e,m)&&!m.isRoot&&!de.isAbstract(m));g.length>0&&g.includes(p)?(i=d,s=h):(i=[p],s=h)}i.length&&(o=NT(e,i)),t(f)},e.pointerMove=f=>{if(!e.options.readonly&&i.length&&s){const h=Ce(e,xe(e,f.x,f.y));if(Ze(s[0],s[1],h[0],h[1])<RW)return;Kx(e,!0),l==null||l.remove();const p=Ce(e,xe(e,f.x,f.y));a=$j(e,p,a,[...i,...o]),a!=null&&a.target&&(c=Wj(e,a),l=Qj(e,a,c),P.getHost(e).appendChild(l));const d=h[0]-s[0],y=h[1]-s[1];u==null||u.remove(),u=Te(),[...i,...o].forEach(m=>{n7(m)}),i.forEach(m=>{const v=Zj(e,m,d,y);u==null||u.appendChild(v)}),P.getHost(e).appendChild(u);return}n(f)},e.globalPointerUp=f=>{const h=ha(i);if(!e.options.readonly&&h.length){if(h.push(...o),Ts(e)&&h.forEach(g=>{r7(g)}),a){const g=e.pathRef(c),p=ge.hasPrevious(c)&&e.pathRef(ge.previous(c)),d=e.pathRef(P.findPath(e,a.target));let y=HT(e,h);const m=h.filter(O=>!y.some(V=>V.abstract===O)).map(O=>de.isAbstract(O)?Op(O):O);if(c[c.length-1]!==0){const O=Ae.get(e,ge.previous(c)),V=Ac(O);if(V&&V.end!==c[c.length-1]-1){const W=y.map(z=>Op(z.abstract));m.push(...W),y=[]}}const w=jT(e,h);_T(e,c,m.length,!1,w),Ht.setAbstractsByRefs(e,w);let E=a7(e,h);const S=Ae.get(e,ge.parent(c));i7(S,a)&&d.current&&(E=l7(e,d.current.slice(0,1),m.length,E)),Ht.setRightNodeCountByRefs(e,E),q5.removeElements(e,h);let B=g.current;const R=ge.parent(g.current||c);if(!B){const O=p&&p.unref();if(O)B=ge.next(O);else{const V=Ae.get(e,R),L=jo(V);B=[...R,L.length||0]}}Ht.insertNodes(e,m,B),y.length&&Ht.insertAbstractNodes(e,y,m,B),d.current&&g.current&&ge.isAncestor(d.current,g.current)&&a.target.isCollapsed&&ee.setNode(e,{isCollapsed:!1},d.current),d.unref(),g.unref();let b=[];on(e,O=>{i.some(L=>L.id===O.id)&&b.push(O)}),ee.addSelectionWithTemporaryElements(e,b)}Kx(e,!1),i=[],u==null||u.remove(),u=void 0,l==null||l.remove(),l=void 0,a=null}r(f)},e},OW=e=>{const t=e,{pointerDown:n,pointerMove:r,pointerUp:i}=e;let o,s,u,l;return e.pointerDown=a=>{if(!Hi(a)||P.isReadonly(e)){n(a);return}const c=re(e).filter(h=>de.isAbstract(h)),f=Ce(e,xe(e,a.x,a.y));if(o=c.find(h=>(s=s7(e,h,f),s)),o){t!=null&&t.onAbstractResize&&t.onAbstractResize(da.start);return}n(a)},e.pointerMove=a=>{re(e),Ah.get(e);const c=Ce(e,xe(e,a.x,a.y));if(u=rW(e,u,c),s&&o){const f=bn.getCorrectLayoutByElement(e,o),h=Ut(f),g=X.getParent(o);let p=g.children;const d=bn.getLayoutByElement(g);if(Fn(d)){const R=g.rightNodeCount,{leftChildren:b,rightChildren:O}=mj(g);o.end<R&&(p=O),o.start>=R&&(p=b)}t!=null&&t.onAbstractResize&&t.onAbstractResize(da.resizing);const y=h?c[1]:c[0],m=X.getNode(g),v=tW(e,s,p,o,m,h),w=Math.min(v.max,Math.max(v.min,y));let E=nW(e,p,w,h);if(s===Xt.start&&E+1===o.start||s===Xt.end&&E===o.end)l=void 0;else{if(Fn(m.layout)){const R=m.origin.rightNodeCount;o.start>=R&&(E+=R)}l=s===Xt.start?{start:E+1}:{end:E}}Ue.getElementRef(o).getGenerator(To.key).updateAbstractOutline(o,s,w)}r(a)},e.pointerUp=a=>{if(s=void 0,o){if(t!=null&&t.onAbstractResize&&t.onAbstractResize(da.end),l){const c=P.findPath(e,o);ee.setNode(e,l,c)}else Ue.getElementRef(o).getGenerator(To.key).updateAbstractOutline(o);o=void 0}i(a)},e},FW=e=>{const t=e;return e.setPluginOptions(qd,{spaceBetweenEmojis:4,emojiPadding:0}),t},bW="m",IW=e=>{const t=e,{keyDown:n,pointerDown:r,pointerMove:i,pointerUp:o}=e;let s=null,u=null;t.pointerDown=a=>{const c=P.isPointer(e,as.mind);if(!P.isReadonly(e)&&vl(e)&&c){const f=Ce(e,xe(e,a.x,a.y)),h=Vx(t,f);Ht.insertMind(e,h),Je.updatePointerType(e,$e.selection);return}r(a)},t.pointerMove=a=>{if(P.isReadonly(e)){i(a);return}const c=P.isPointer(e,as.mind);Wd(e)&&c?ni(e,"with-mind-create",()=>{let f=P.getMovingPointInBoard(e);if(f){f=Ce(t,xe(e,f[0],f[1])),u=Vx(t,f);const h=Oj(t,u),g=hy(e,h,u),p=e7(t,h,u);if(s)s.textManage.updateRectangle(p),s.nodeG.remove(),s.nodeG=g,s.g.append(g),s.g.append(s.textManage.g);else{const d=new wc(e,{getRectangle:()=>p});d.draw(u.data.topic),s={g:Te(),nodeG:g,textManage:d},s.g.classList.add("root"),s.g.setAttribute("plait-mind-temporary","true"),P.getHost(e).append(s.g),s.g.append(s.nodeG,d.g)}}}):l(),i(a)},t.pointerUp=a=>{if(u){Ht.insertMind(e,u),Je.updatePointerType(e,$e.selection),u=null,l();return}o(a)},e.keyDown=a=>{if(P.isReadonly(e)||re(e).length>0){n(a);return}if(a.key===bW&&!P.isPointer(e,as.mind)){Je.updatePointerType(e,as.mind),no(e,ar.drawing),a.preventDefault();return}n(a)};function l(){s&&(s.textManage.destroy(),s.g.remove(),s=null)}return t},LW=e=>{const t=e,{keyDown:n,globalKeyDown:r}=t;return t.keyDown=i=>{const o=re(t),s=o.length===1,u=o.length===1&&X.isMindElement(t,o[0]),l=o[0];if(VL(i)&&u&&!Fe.isMind(l)&&l.children&&l.children.length>0){ee.setNode(t,{isCollapsed:!l.isCollapsed},P.findPath(t,l));return}if(!P.isReadonly(t)){if(UL(i)&&u){i.preventDefault(),Ht.insertChildNode(t,l);return}if(XL(i)&&u&&!Fe.isMind(l)&&!de.isAbstract(l)){Ht.insertSiblingNode(t,l);return}if(!Av(i)&&!Mv(i)&&!Bv(i)&&s&&X.isMindElement(t,l)){i.preventDefault(),sy(l);return}}n(i)},t.globalKeyDown=i=>{if(P.isFocus(t)&&P.hasBeenTextEditing(t)&&or("mod+z",i)){const{history:o}=t,{undos:s}=o,u=s.length>0?s[s.length-1][0]:void 0;u&&u.type==="insert_node"&&X.isMindElement(t,u.node)&&Us(u.node).isEditing&&t.undo()}r(i)},t},GW=(e,t,n)=>{let r=null;const i=Ce(e,xe(e,t.x,t.y));return on(e,o=>{if(r||!X.isMindElement(e,o))return;ZT(e,i,o)&&(r=o)},Ws(e),!0),n&&r&&n.element===r||(n&&v7(n.element),r?(HW(r),n?n.element=r:n={element:r}):n=null),n},NW=(e,t,n)=>{n&&v7(n.element)},HW=e=>{Ue.getElementG(e).classList.add("hovered")},v7=e=>{var t,n;(n=(t=Ue.getElementG(e))==null?void 0:t.classList)==null||n.remove("hovered")},$W=e=>{const{pointerMove:t,pointerLeave:n}=e;let r=null;return e.pointerMove=i=>{ni(e,"with-mind-node-hover-hit-test",()=>{r&&!Ue.hasMounted(r.element)&&(r=null),r=GW(e,i,r)}),t(i)},e.pointerLeave=i=>{NW(e,i,r),r=null,n(i)},e},_W=e=>{const{keyDown:t,pointerUp:n,globalPointerUp:r,buildFragment:i,insertFragment:o,deleteFragment:s}=e;return e.pointerUp=u=>{const l=Dr(e);if(l&&X.isMindElement(e,l)&&!K6(u)&&(P.isReadonly(e)||!Hi(u)||!P.isPointer(e,$e.selection))){zf(e,l),n(u);return}if(P.isReadonly(e)){n(u);return}const a=Ce(e,xe(e,u.x,u.y)),c=$i(e,a),f=c&&X.isMindElement(e,c)&&X.hasImage(c)&&Fj(e,c,a);if(f&&l&&c===l){Q1(e),n(u);return}l&&X.isMindElement(e,l)&&zf(e,l),f&&c&&(Q1(e),Gj(e,c)),n(u)},e.keyDown=u=>{const l=Dr(e);if(!P.isReadonly(e)&&l&&(en.isDeleteBackward(u)||en.isDeleteForward(u))){Fo(e,l),Ht.removeImage(e,l);return}t(u)},e.globalPointerUp=u=>{if(P.isFocus(e)){const l=u.target instanceof Node&&P.getBoardContainer(e).contains(u.target),a=Dr(e);a&&X.isMindElement(e,a)&&!l&&zf(e,a)}r(u)},e.buildFragment=(u,l,a,c)=>{const f=Dr(e);return f&&(u=uM(ki.medias,[f.data.image],"")),i(u,l,a,c)},e.deleteFragment=u=>{const l=Dr(e);l&&Ht.removeImage(e,l),s(u)},e.insertFragment=(u,l,a)=>{var g,p;const c=re(e),f=!!Dr(e),h=c.length===1&&X.isMindElement(e,c[0]);if(f||h){if((g=u==null?void 0:u.files)!=null&&g.length){const d=YS.map(m=>"image/"+m),y=c[0]||Dr(e);if(d.includes(u.files[0].type)){const m=u.files[0];lD(e,m,pj,v=>{Ht.setImage(e,y,v)});return}}if((p=u==null?void 0:u.medias)!=null&&p.length){const d=c[0]||Dr(e);Ht.setImage(e,d,u.medias[0]);return}}o(u,l,a)},e},jW=e=>{let t=null;return Ys(e,{key:"mind-node",canResize:()=>!Ts(e),hitTest:r=>{const i=WW(e,r);return i?{element:i,handle:null,cursorClass:Rr.ew}:null},beforeResize:r=>{t={minWidth:Ye.getNodeResizableMinWidth(e,r.element),currentWidth:Ye.getNodeDynamicWidth(e,r.element),path:P.findPath(e,r.element),textManage:Us(r.element)}},onResize:(r,i)=>{let o=t.currentWidth+me.getOffsetX(i.startPoint,i.endPoint);o<=t.minWidth&&(o=t.minWidth);const s=Ae.get(e,t.path);if(s&&Ye.getNodeTopicMinWidth(e,s)!==o){t.textManage.updateRectangleWidth(o);const{height:u}=t.textManage.getSize(void 0,o);Ht.setNodeManualWidth(e,s,o,u)}},afterResize:r=>{t=null}}),e},WW=(e,t)=>{const n=re(e).filter(r=>X.isMindElement(e,r));if(n.length>0){const r=n.find(i=>{const o=zW(e,i);return dc(t[0],t[1],o)<=0});return r||null}return null},zW=(e,t)=>{const n=X.getNode(t),r=ot(n);return{x:r.x+r.width-Rp,y:r.y,width:Rp*2,height:r.height}},VW=e=>(Ys(e,{key:"mind-node-image",canResize:()=>!0,hitTest:n=>{const r=Dr(e),i=r&&X.isMindElement(e,r)?r:void 0;if(i){const o=bj(e,i,n);if(o)return{element:i,handle:o.handle,cursorClass:o.cursorClass}}return null},onResize:(n,r)=>{const i=me.getOffsetX(r.startPoint,r.endPoint),o=n.element.data.image.width,s=n.element.data.image.height,u=n.path;let l=o+i;l<=100&&(l=100);const a=o/s,c=l/a,f={...n.element.data.image,width:l,height:c};Ht.setImage(e,Ae.get(e,u),f),aD(e,Ae.get(e,u))}}),e),UW=(e,t,n)=>{let r=[];const i=NT(e,t),o=HT(e,[...t,...i]),s=t.filter(l=>!o.find(a=>a.abstract===l));s.push(...o.map(l=>l.abstract));const u=s.map(l=>X.getNode(l));return s.forEach((l,a)=>{const c=ot(u[a]),f=[[c.x-n[0],c.y-n[1]]],h=o.find(g=>g.abstract===l);if(de.isAbstract(l)&&h){const{start:g,end:p}=$T(h,s);r.push({...l,points:f,start:g,end:p})}else if(de.isAbstract(l)){let g={...l,points:f};delete g.start,delete g.end,r.push(g)}else r.push({...l,points:f})}),r},XW=(e,t,n,r)=>{let i,o;const s=re(e);let u=[];const l=s.length===1,a=s[0],c=a&&P.findPath(e,a),f=a&&jo(a).length;t.forEach((h,g)=>{if(i=qT(h),l&&r!==Pi.duplicate){if(h.isRoot){i=Ij(e,i);const{width:p,height:d}=Qx(i,a);i.width=p,i.height=d}de.isAbstract(i)&&(i.start=i.start+f,i.end=i.end+f),o=[...c,f+g]}else{const p=[n[0]+h.points[0][0],n[1]+h.points[0][1]];if(i.points=[p],de.isAbstract(h)&&(i=Op(i)),!h.isRoot){i=Lj(e,i);const{width:d,height:y}=Qx(i);i.width=d,i.height=y}o=[e.children.length]}u.push(i),ee.insertNode(e,i,o)}),ee.addSelectionWithTemporaryElements(e,u)},KW=(e,t,n)=>{const{width:r,height:i}=y7(!1,Fe.isMind(t),Ks(n)),o=t0(n,Math.max(r,kj(n)),i,{});ee.insertNode(e,o,dy(e,t)),ee.addSelectionWithTemporaryElements(e,[o])},Qx=(e,t)=>y7(Fe.isMind(e),t&&Fe.isMind(t)||!1,e.data.topic,e.manualWidth),y7=(e,t,n,r)=>{let i=Pj,o=uy;e?(i=jx,o=KT):t&&(i=jx);const s=o*Ej;return Ov(n,{fontSize:o,fontFamily:i},r||s)},YW=e=>{const t=e;let n;const{getDeletedFragment:r,insertFragment:i,buildFragment:o,deleteFragment:s}=t;return t.getDeletedFragment=u=>{const l=Cg(t);if(l.length){n=ha(l).reverse();const a=jT(t,n);Ht.setAbstractsByRefs(t,a);const c=a7(t,l);Ht.setRightNodeCountByRefs(t,c);const f=ha(l);u.push(...f)}return r(u)},t.deleteFragment=u=>{if(s(u),n){const l=qW(t,n);l&&Fo(t,l),n=null}},t.buildFragment=(u,l,a,c)=>{const f=Cg(t,c),h=ha(f);if(h.length){const g=UW(t,h,l?[l.x,l.y]:[0,0]),d={text:sD(f),type:ki.elements,elements:g};u=$d(u,d)}return o(u,l,a,c)},t.insertFragment=(u,l,a)=>{var c,f;if((c=u==null?void 0:u.elements)!=null&&c.length){const h=(f=u.elements)==null?void 0:f.filter(g=>X.isMindElement(t,g));h&&h.length>0&&XW(t,h,l,a)}if(u!=null&&u.text){const h=Cg(t);if(h.length===1){KW(t,h[0],Ks(u.text));return}}i(u,l,a)},t},qW=(e,t)=>{let n;const r=t[0],i=P.findPath(e,r);let o=i;if(ge.hasPrevious(i)&&(o=ge.previous(i)),de.isAbstract(r)){const a=X.getParent(r);t.includes(a.children[r.start])||(n=a.children[r.start])}try{n||(n=Ae.get(e,o))}catch{}const s=t[0],u=X.findParent(s),l=t.every(a=>X.findParent(a)===u);return u&&l&&!n&&(n=u),n},ZW=e=>{const t=e;return t.renderEmoji=(n,r)=>{throw new Error("No implementation for renderEmoji method.")},t},QW=e=>{const t=e,{drawElement:n,dblClick:r,isRectangleHit:i,isHit:o,getRectangle:s,isMovable:u,isRecursion:l,isAlign:a,isImageBindingAllowed:c,canAddToGroup:f,canSetZIndex:h,isExpanded:g,getOneHitElement:p}=t;return t.drawElement=d=>Fe.isMind(d.element)?MW:X.isMindElement(t,d.element)?m7:n(d),t.applyTheme=d=>{const y=d,m=!P.isBoard(d)&&((y==null?void 0:y.branchColor)||(y==null?void 0:y.fill)||(y==null?void 0:y.strokeColor));if(Fe.isMind(d)&&m){const v=P.findPath(t,d);ee.setNode(t,{fill:null,strokeColor:null,branchColor:null},v)}},t.getRectangle=d=>X.isMindElement(t,d)?(Ue.hasMounted(d)||console.error("mind element has not been mounted"),ot(X.getNode(d))):s(d),t.canAddToGroup=d=>X.isMindElement(t,d)&&!d.isRoot?!1:f(d),t.canSetZIndex=d=>X.isMindElement(t,d)&&!d.isRoot?!1:h(d),t.isRecursion=d=>X.isMindElement(t,d)&&d.isCollapsed?!1:l(d),t.isRectangleHit=(d,y)=>{if(X.isMindElement(t,d)){const m=ot(X.getNode(d));return C.isHit(C.getRectangleByPoints([y.anchor,y.focus]),m)}return i(d,y)},t.isHit=(d,y)=>{if(X.isMindElement(t,d)){const m=ot(X.getNode(d));return C.isHit(C.getRectangleByPoints([y,y]),m)}return o(d,y)},t.getOneHitElement=d=>d.every(m=>X.isMindElement(t,m))?d[0]:p(d),t.isMovable=d=>Fe.isMind(d)&&d.isRoot?!0:u(d),t.isImageBindingAllowed=d=>X.isMindElement(t,d)?!0:c(d),t.isAlign=d=>Fe.isMind(d)&&d.isRoot?!0:a(d),t.isExpanded=d=>X.isMindElement(t,d)&&!Fe.isMind(d)?!d.isCollapsed:g(d),t.dblClick=d=>{if(P.isReadonly(t)){r(d);return}const y=Ce(t,xe(t,d.x,d.y));t.children.filter(m=>Fe.isMind(m)).forEach(m=>{on(m,v=>{!P.hasBeenTextEditing(t)&&ZT(t,y,v)&&sy(v)},Ws(t))}),!P.hasBeenTextEditing(t)&&r(d)},ZW(jW(VW(_W($W(YW(LW(FW(IW(OW(kW(t)))))))))))};var w7={exports:{}};(function(e){/*!mobile-detect v1.4.5 2021-03-13*//*!@license Copyright 2013, Heinrich Goebl, License: MIT, see https://github.com/hgoebl/mobile-detect.js*/(function(t,n){t(function(){var r={};r.mobileDetectRules={phones:{iPhone:"\\biPhone\\b|\\biPod\\b",BlackBerry:"BlackBerry|\\bBB10\\b|rim[0-9]+|\\b(BBA100|BBB100|BBD100|BBE100|BBF100|STH100)\\b-[0-9]+",Pixel:"; \\bPixel\\b",HTC:"HTC|HTC.*(Sensation|Evo|Vision|Explorer|6800|8100|8900|A7272|S510e|C110e|Legend|Desire|T8282)|APX515CKT|Qtek9090|APA9292KT|HD_mini|Sensation.*Z710e|PG86100|Z715e|Desire.*(A8181|HD)|ADR6200|ADR6400L|ADR6425|001HT|Inspire 4G|Android.*\\bEVO\\b|T-Mobile G1|Z520m|Android [0-9.]+; Pixel",Nexus:"Nexus One|Nexus S|Galaxy.*Nexus|Android.*Nexus.*Mobile|Nexus 4|Nexus 5|Nexus 5X|Nexus 6",Dell:"Dell[;]? (Streak|Aero|Venue|Venue Pro|Flash|Smoke|Mini 3iX)|XCD28|XCD35|\\b001DL\\b|\\b101DL\\b|\\bGS01\\b",Motorola:"Motorola|DROIDX|DROID BIONIC|\\bDroid\\b.*Build|Android.*Xoom|HRI39|MOT-|A1260|A1680|A555|A853|A855|A953|A955|A956|Motorola.*ELECTRIFY|Motorola.*i1|i867|i940|MB200|MB300|MB501|MB502|MB508|MB511|MB520|MB525|MB526|MB611|MB612|MB632|MB810|MB855|MB860|MB861|MB865|MB870|ME501|ME502|ME511|ME525|ME600|ME632|ME722|ME811|ME860|ME863|ME865|MT620|MT710|MT716|MT720|MT810|MT870|MT917|Motorola.*TITANIUM|WX435|WX445|XT300|XT301|XT311|XT316|XT317|XT319|XT320|XT390|XT502|XT530|XT531|XT532|XT535|XT603|XT610|XT611|XT615|XT681|XT701|XT702|XT711|XT720|XT800|XT806|XT860|XT862|XT875|XT882|XT883|XT894|XT901|XT907|XT909|XT910|XT912|XT928|XT926|XT915|XT919|XT925|XT1021|\\bMoto E\\b|XT1068|XT1092|XT1052",Samsung:"\\bSamsung\\b|SM-G950F|SM-G955F|SM-G9250|GT-19300|SGH-I337|BGT-S5230|GT-B2100|GT-B2700|GT-B2710|GT-B3210|GT-B3310|GT-B3410|GT-B3730|GT-B3740|GT-B5510|GT-B5512|GT-B5722|GT-B6520|GT-B7300|GT-B7320|GT-B7330|GT-B7350|GT-B7510|GT-B7722|GT-B7800|GT-C3010|GT-C3011|GT-C3060|GT-C3200|GT-C3212|GT-C3212I|GT-C3262|GT-C3222|GT-C3300|GT-C3300K|GT-C3303|GT-C3303K|GT-C3310|GT-C3322|GT-C3330|GT-C3350|GT-C3500|GT-C3510|GT-C3530|GT-C3630|GT-C3780|GT-C5010|GT-C5212|GT-C6620|GT-C6625|GT-C6712|GT-E1050|GT-E1070|GT-E1075|GT-E1080|GT-E1081|GT-E1085|GT-E1087|GT-E1100|GT-E1107|GT-E1110|GT-E1120|GT-E1125|GT-E1130|GT-E1160|GT-E1170|GT-E1175|GT-E1180|GT-E1182|GT-E1200|GT-E1210|GT-E1225|GT-E1230|GT-E1390|GT-E2100|GT-E2120|GT-E2121|GT-E2152|GT-E2220|GT-E2222|GT-E2230|GT-E2232|GT-E2250|GT-E2370|GT-E2550|GT-E2652|GT-E3210|GT-E3213|GT-I5500|GT-I5503|GT-I5700|GT-I5800|GT-I5801|GT-I6410|GT-I6420|GT-I7110|GT-I7410|GT-I7500|GT-I8000|GT-I8150|GT-I8160|GT-I8190|GT-I8320|GT-I8330|GT-I8350|GT-I8530|GT-I8700|GT-I8703|GT-I8910|GT-I9000|GT-I9001|GT-I9003|GT-I9010|GT-I9020|GT-I9023|GT-I9070|GT-I9082|GT-I9100|GT-I9103|GT-I9220|GT-I9250|GT-I9300|GT-I9305|GT-I9500|GT-I9505|GT-M3510|GT-M5650|GT-M7500|GT-M7600|GT-M7603|GT-M8800|GT-M8910|GT-N7000|GT-S3110|GT-S3310|GT-S3350|GT-S3353|GT-S3370|GT-S3650|GT-S3653|GT-S3770|GT-S3850|GT-S5210|GT-S5220|GT-S5229|GT-S5230|GT-S5233|GT-S5250|GT-S5253|GT-S5260|GT-S5263|GT-S5270|GT-S5300|GT-S5330|GT-S5350|GT-S5360|GT-S5363|GT-S5369|GT-S5380|GT-S5380D|GT-S5560|GT-S5570|GT-S5600|GT-S5603|GT-S5610|GT-S5620|GT-S5660|GT-S5670|GT-S5690|GT-S5750|GT-S5780|GT-S5830|GT-S5839|GT-S6102|GT-S6500|GT-S7070|GT-S7200|GT-S7220|GT-S7230|GT-S7233|GT-S7250|GT-S7500|GT-S7530|GT-S7550|GT-S7562|GT-S7710|GT-S8000|GT-S8003|GT-S8500|GT-S8530|GT-S8600|SCH-A310|SCH-A530|SCH-A570|SCH-A610|SCH-A630|SCH-A650|SCH-A790|SCH-A795|SCH-A850|SCH-A870|SCH-A890|SCH-A930|SCH-A950|SCH-A970|SCH-A990|SCH-I100|SCH-I110|SCH-I400|SCH-I405|SCH-I500|SCH-I510|SCH-I515|SCH-I600|SCH-I730|SCH-I760|SCH-I770|SCH-I830|SCH-I910|SCH-I920|SCH-I959|SCH-LC11|SCH-N150|SCH-N300|SCH-R100|SCH-R300|SCH-R351|SCH-R400|SCH-R410|SCH-T300|SCH-U310|SCH-U320|SCH-U350|SCH-U360|SCH-U365|SCH-U370|SCH-U380|SCH-U410|SCH-U430|SCH-U450|SCH-U460|SCH-U470|SCH-U490|SCH-U540|SCH-U550|SCH-U620|SCH-U640|SCH-U650|SCH-U660|SCH-U700|SCH-U740|SCH-U750|SCH-U810|SCH-U820|SCH-U900|SCH-U940|SCH-U960|SCS-26UC|SGH-A107|SGH-A117|SGH-A127|SGH-A137|SGH-A157|SGH-A167|SGH-A177|SGH-A187|SGH-A197|SGH-A227|SGH-A237|SGH-A257|SGH-A437|SGH-A517|SGH-A597|SGH-A637|SGH-A657|SGH-A667|SGH-A687|SGH-A697|SGH-A707|SGH-A717|SGH-A727|SGH-A737|SGH-A747|SGH-A767|SGH-A777|SGH-A797|SGH-A817|SGH-A827|SGH-A837|SGH-A847|SGH-A867|SGH-A877|SGH-A887|SGH-A897|SGH-A927|SGH-B100|SGH-B130|SGH-B200|SGH-B220|SGH-C100|SGH-C110|SGH-C120|SGH-C130|SGH-C140|SGH-C160|SGH-C170|SGH-C180|SGH-C200|SGH-C207|SGH-C210|SGH-C225|SGH-C230|SGH-C417|SGH-C450|SGH-D307|SGH-D347|SGH-D357|SGH-D407|SGH-D415|SGH-D780|SGH-D807|SGH-D980|SGH-E105|SGH-E200|SGH-E315|SGH-E316|SGH-E317|SGH-E335|SGH-E590|SGH-E635|SGH-E715|SGH-E890|SGH-F300|SGH-F480|SGH-I200|SGH-I300|SGH-I320|SGH-I550|SGH-I577|SGH-I600|SGH-I607|SGH-I617|SGH-I627|SGH-I637|SGH-I677|SGH-I700|SGH-I717|SGH-I727|SGH-i747M|SGH-I777|SGH-I780|SGH-I827|SGH-I847|SGH-I857|SGH-I896|SGH-I897|SGH-I900|SGH-I907|SGH-I917|SGH-I927|SGH-I937|SGH-I997|SGH-J150|SGH-J200|SGH-L170|SGH-L700|SGH-M110|SGH-M150|SGH-M200|SGH-N105|SGH-N500|SGH-N600|SGH-N620|SGH-N625|SGH-N700|SGH-N710|SGH-P107|SGH-P207|SGH-P300|SGH-P310|SGH-P520|SGH-P735|SGH-P777|SGH-Q105|SGH-R210|SGH-R220|SGH-R225|SGH-S105|SGH-S307|SGH-T109|SGH-T119|SGH-T139|SGH-T209|SGH-T219|SGH-T229|SGH-T239|SGH-T249|SGH-T259|SGH-T309|SGH-T319|SGH-T329|SGH-T339|SGH-T349|SGH-T359|SGH-T369|SGH-T379|SGH-T409|SGH-T429|SGH-T439|SGH-T459|SGH-T469|SGH-T479|SGH-T499|SGH-T509|SGH-T519|SGH-T539|SGH-T559|SGH-T589|SGH-T609|SGH-T619|SGH-T629|SGH-T639|SGH-T659|SGH-T669|SGH-T679|SGH-T709|SGH-T719|SGH-T729|SGH-T739|SGH-T746|SGH-T749|SGH-T759|SGH-T769|SGH-T809|SGH-T819|SGH-T839|SGH-T919|SGH-T929|SGH-T939|SGH-T959|SGH-T989|SGH-U100|SGH-U200|SGH-U800|SGH-V205|SGH-V206|SGH-X100|SGH-X105|SGH-X120|SGH-X140|SGH-X426|SGH-X427|SGH-X475|SGH-X495|SGH-X497|SGH-X507|SGH-X600|SGH-X610|SGH-X620|SGH-X630|SGH-X700|SGH-X820|SGH-X890|SGH-Z130|SGH-Z150|SGH-Z170|SGH-ZX10|SGH-ZX20|SHW-M110|SPH-A120|SPH-A400|SPH-A420|SPH-A460|SPH-A500|SPH-A560|SPH-A600|SPH-A620|SPH-A660|SPH-A700|SPH-A740|SPH-A760|SPH-A790|SPH-A800|SPH-A820|SPH-A840|SPH-A880|SPH-A900|SPH-A940|SPH-A960|SPH-D600|SPH-D700|SPH-D710|SPH-D720|SPH-I300|SPH-I325|SPH-I330|SPH-I350|SPH-I500|SPH-I600|SPH-I700|SPH-L700|SPH-M100|SPH-M220|SPH-M240|SPH-M300|SPH-M305|SPH-M320|SPH-M330|SPH-M350|SPH-M360|SPH-M370|SPH-M380|SPH-M510|SPH-M540|SPH-M550|SPH-M560|SPH-M570|SPH-M580|SPH-M610|SPH-M620|SPH-M630|SPH-M800|SPH-M810|SPH-M850|SPH-M900|SPH-M910|SPH-M920|SPH-M930|SPH-N100|SPH-N200|SPH-N240|SPH-N300|SPH-N400|SPH-Z400|SWC-E100|SCH-i909|GT-N7100|GT-N7105|SCH-I535|SM-N900A|SGH-I317|SGH-T999L|GT-S5360B|GT-I8262|GT-S6802|GT-S6312|GT-S6310|GT-S5312|GT-S5310|GT-I9105|GT-I8510|GT-S6790N|SM-G7105|SM-N9005|GT-S5301|GT-I9295|GT-I9195|SM-C101|GT-S7392|GT-S7560|GT-B7610|GT-I5510|GT-S7582|GT-S7530E|GT-I8750|SM-G9006V|SM-G9008V|SM-G9009D|SM-G900A|SM-G900D|SM-G900F|SM-G900H|SM-G900I|SM-G900J|SM-G900K|SM-G900L|SM-G900M|SM-G900P|SM-G900R4|SM-G900S|SM-G900T|SM-G900V|SM-G900W8|SHV-E160K|SCH-P709|SCH-P729|SM-T2558|GT-I9205|SM-G9350|SM-J120F|SM-G920F|SM-G920V|SM-G930F|SM-N910C|SM-A310F|GT-I9190|SM-J500FN|SM-G903F|SM-J330F|SM-G610F|SM-G981B|SM-G892A|SM-A530F",LG:"\\bLG\\b;|LG[- ]?(C800|C900|E400|E610|E900|E-900|F160|F180K|F180L|F180S|730|855|L160|LS740|LS840|LS970|LU6200|MS690|MS695|MS770|MS840|MS870|MS910|P500|P700|P705|VM696|AS680|AS695|AX840|C729|E970|GS505|272|C395|E739BK|E960|L55C|L75C|LS696|LS860|P769BK|P350|P500|P509|P870|UN272|US730|VS840|VS950|LN272|LN510|LS670|LS855|LW690|MN270|MN510|P509|P769|P930|UN200|UN270|UN510|UN610|US670|US740|US760|UX265|UX840|VN271|VN530|VS660|VS700|VS740|VS750|VS910|VS920|VS930|VX9200|VX11000|AX840A|LW770|P506|P925|P999|E612|D955|D802|MS323|M257)|LM-G710",Sony:"SonyST|SonyLT|SonyEricsson|SonyEricssonLT15iv|LT18i|E10i|LT28h|LT26w|SonyEricssonMT27i|C5303|C6902|C6903|C6906|C6943|D2533|SOV34|601SO|F8332",Asus:"Asus.*Galaxy|PadFone.*Mobile",Xiaomi:"^(?!.*\\bx11\\b).*xiaomi.*$|POCOPHONE F1|MI 8|Redmi Note 9S|Redmi Note 5A Prime|N2G47H|M2001J2G|M2001J2I|M1805E10A|M2004J11G|M1902F1G|M2002J9G|M2004J19G|M2003J6A1G",NokiaLumia:"Lumia [0-9]{3,4}",Micromax:"Micromax.*\\b(A210|A92|A88|A72|A111|A110Q|A115|A116|A110|A90S|A26|A51|A35|A54|A25|A27|A89|A68|A65|A57|A90)\\b",Palm:"PalmSource|Palm",Vertu:"Vertu|Vertu.*Ltd|Vertu.*Ascent|Vertu.*Ayxta|Vertu.*Constellation(F|Quest)?|Vertu.*Monika|Vertu.*Signature",Pantech:"PANTECH|IM-A850S|IM-A840S|IM-A830L|IM-A830K|IM-A830S|IM-A820L|IM-A810K|IM-A810S|IM-A800S|IM-T100K|IM-A725L|IM-A780L|IM-A775C|IM-A770K|IM-A760S|IM-A750K|IM-A740S|IM-A730S|IM-A720L|IM-A710K|IM-A690L|IM-A690S|IM-A650S|IM-A630K|IM-A600S|VEGA PTL21|PT003|P8010|ADR910L|P6030|P6020|P9070|P4100|P9060|P5000|CDM8992|TXT8045|ADR8995|IS11PT|P2030|P6010|P8000|PT002|IS06|CDM8999|P9050|PT001|TXT8040|P2020|P9020|P2000|P7040|P7000|C790",Fly:"IQ230|IQ444|IQ450|IQ440|IQ442|IQ441|IQ245|IQ256|IQ236|IQ255|IQ235|IQ245|IQ275|IQ240|IQ285|IQ280|IQ270|IQ260|IQ250",Wiko:"KITE 4G|HIGHWAY|GETAWAY|STAIRWAY|DARKSIDE|DARKFULL|DARKNIGHT|DARKMOON|SLIDE|WAX 4G|RAINBOW|BLOOM|SUNSET|GOA(?!nna)|LENNY|BARRY|IGGY|OZZY|CINK FIVE|CINK PEAX|CINK PEAX 2|CINK SLIM|CINK SLIM 2|CINK +|CINK KING|CINK PEAX|CINK SLIM|SUBLIM",iMobile:"i-mobile (IQ|i-STYLE|idea|ZAA|Hitz)",SimValley:"\\b(SP-80|XT-930|SX-340|XT-930|SX-310|SP-360|SP60|SPT-800|SP-120|SPT-800|SP-140|SPX-5|SPX-8|SP-100|SPX-8|SPX-12)\\b",Wolfgang:"AT-B24D|AT-AS50HD|AT-AS40W|AT-AS55HD|AT-AS45q2|AT-B26D|AT-AS50Q",Alcatel:"Alcatel",Nintendo:"Nintendo (3DS|Switch)",Amoi:"Amoi",INQ:"INQ",OnePlus:"ONEPLUS",GenericPhone:"Tapatalk|PDA;|SAGEM|\\bmmp\\b|pocket|\\bpsp\\b|symbian|Smartphone|smartfon|treo|up.browser|up.link|vodafone|\\bwap\\b|nokia|Series40|Series60|S60|SonyEricsson|N900|MAUI.*WAP.*Browser"},tablets:{iPad:"iPad|iPad.*Mobile",NexusTablet:"Android.*Nexus[\\s]+(7|9|10)",GoogleTablet:"Android.*Pixel C",SamsungTablet:"SAMSUNG.*Tablet|Galaxy.*Tab|SC-01C|GT-P1000|GT-P1003|GT-P1010|GT-P3105|GT-P6210|GT-P6800|GT-P6810|GT-P7100|GT-P7300|GT-P7310|GT-P7500|GT-P7510|SCH-I800|SCH-I815|SCH-I905|SGH-I957|SGH-I987|SGH-T849|SGH-T859|SGH-T869|SPH-P100|GT-P3100|GT-P3108|GT-P3110|GT-P5100|GT-P5110|GT-P6200|GT-P7320|GT-P7511|GT-N8000|GT-P8510|SGH-I497|SPH-P500|SGH-T779|SCH-I705|SCH-I915|GT-N8013|GT-P3113|GT-P5113|GT-P8110|GT-N8010|GT-N8005|GT-N8020|GT-P1013|GT-P6201|GT-P7501|GT-N5100|GT-N5105|GT-N5110|SHV-E140K|SHV-E140L|SHV-E140S|SHV-E150S|SHV-E230K|SHV-E230L|SHV-E230S|SHW-M180K|SHW-M180L|SHW-M180S|SHW-M180W|SHW-M300W|SHW-M305W|SHW-M380K|SHW-M380S|SHW-M380W|SHW-M430W|SHW-M480K|SHW-M480S|SHW-M480W|SHW-M485W|SHW-M486W|SHW-M500W|GT-I9228|SCH-P739|SCH-I925|GT-I9200|GT-P5200|GT-P5210|GT-P5210X|SM-T311|SM-T310|SM-T310X|SM-T210|SM-T210R|SM-T211|SM-P600|SM-P601|SM-P605|SM-P900|SM-P901|SM-T217|SM-T217A|SM-T217S|SM-P6000|SM-T3100|SGH-I467|XE500|SM-T110|GT-P5220|GT-I9200X|GT-N5110X|GT-N5120|SM-P905|SM-T111|SM-T2105|SM-T315|SM-T320|SM-T320X|SM-T321|SM-T520|SM-T525|SM-T530NU|SM-T230NU|SM-T330NU|SM-T900|XE500T1C|SM-P605V|SM-P905V|SM-T337V|SM-T537V|SM-T707V|SM-T807V|SM-P600X|SM-P900X|SM-T210X|SM-T230|SM-T230X|SM-T325|GT-P7503|SM-T531|SM-T330|SM-T530|SM-T705|SM-T705C|SM-T535|SM-T331|SM-T800|SM-T700|SM-T537|SM-T807|SM-P907A|SM-T337A|SM-T537A|SM-T707A|SM-T807A|SM-T237|SM-T807P|SM-P607T|SM-T217T|SM-T337T|SM-T807T|SM-T116NQ|SM-T116BU|SM-P550|SM-T350|SM-T550|SM-T9000|SM-P9000|SM-T705Y|SM-T805|GT-P3113|SM-T710|SM-T810|SM-T815|SM-T360|SM-T533|SM-T113|SM-T335|SM-T715|SM-T560|SM-T670|SM-T677|SM-T377|SM-T567|SM-T357T|SM-T555|SM-T561|SM-T713|SM-T719|SM-T813|SM-T819|SM-T580|SM-T355Y?|SM-T280|SM-T817A|SM-T820|SM-W700|SM-P580|SM-T587|SM-P350|SM-P555M|SM-P355M|SM-T113NU|SM-T815Y|SM-T585|SM-T285|SM-T825|SM-W708|SM-T835|SM-T830|SM-T837V|SM-T720|SM-T510|SM-T387V|SM-P610|SM-T290|SM-T515|SM-T590|SM-T595|SM-T725|SM-T817P|SM-P585N0|SM-T395|SM-T295|SM-T865|SM-P610N|SM-P615|SM-T970|SM-T380|SM-T5950|SM-T905|SM-T231|SM-T500|SM-T860",Kindle:"Kindle|Silk.*Accelerated|Android.*\\b(KFOT|KFTT|KFJWI|KFJWA|KFOTE|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|WFJWAE|KFSAWA|KFSAWI|KFASWI|KFARWI|KFFOWI|KFGIWI|KFMEWI)\\b|Android.*Silk/[0-9.]+ like Chrome/[0-9.]+ (?!Mobile)",SurfaceTablet:"Windows NT [0-9.]+; ARM;.*(Tablet|ARMBJS)",HPTablet:"HP Slate (7|8|10)|HP ElitePad 900|hp-tablet|EliteBook.*Touch|HP 8|Slate 21|HP SlateBook 10",AsusTablet:"^.*PadFone((?!Mobile).)*$|Transformer|TF101|TF101G|TF300T|TF300TG|TF300TL|TF700T|TF700KL|TF701T|TF810C|ME171|ME301T|ME302C|ME371MG|ME370T|ME372MG|ME172V|ME173X|ME400C|Slider SL101|\\bK00F\\b|\\bK00C\\b|\\bK00E\\b|\\bK00L\\b|TX201LA|ME176C|ME102A|\\bM80TA\\b|ME372CL|ME560CG|ME372CG|ME302KL| K010 | K011 | K017 | K01E |ME572C|ME103K|ME170C|ME171C|\\bME70C\\b|ME581C|ME581CL|ME8510C|ME181C|P01Y|PO1MA|P01Z|\\bP027\\b|\\bP024\\b|\\bP00C\\b",BlackBerryTablet:"PlayBook|RIM Tablet",HTCtablet:"HTC_Flyer_P512|HTC Flyer|HTC Jetstream|HTC-P715a|HTC EVO View 4G|PG41200|PG09410",MotorolaTablet:"xoom|sholest|MZ615|MZ605|MZ505|MZ601|MZ602|MZ603|MZ604|MZ606|MZ607|MZ608|MZ609|MZ615|MZ616|MZ617",NookTablet:"Android.*Nook|NookColor|nook browser|BNRV200|BNRV200A|BNTV250|BNTV250A|BNTV400|BNTV600|LogicPD Zoom2",AcerTablet:"Android.*; \\b(A100|A101|A110|A200|A210|A211|A500|A501|A510|A511|A700|A701|W500|W500P|W501|W501P|W510|W511|W700|G100|G100W|B1-A71|B1-710|B1-711|A1-810|A1-811|A1-830)\\b|W3-810|\\bA3-A10\\b|\\bA3-A11\\b|\\bA3-A20\\b|\\bA3-A30|A3-A40",ToshibaTablet:"Android.*(AT100|AT105|AT200|AT205|AT270|AT275|AT300|AT305|AT1S5|AT500|AT570|AT700|AT830)|TOSHIBA.*FOLIO",LGTablet:"\\bL-06C|LG-V909|LG-V900|LG-V700|LG-V510|LG-V500|LG-V410|LG-V400|LG-VK810\\b",FujitsuTablet:"Android.*\\b(F-01D|F-02F|F-05E|F-10D|M532|Q572)\\b",PrestigioTablet:"PMP3170B|PMP3270B|PMP3470B|PMP7170B|PMP3370B|PMP3570C|PMP5870C|PMP3670B|PMP5570C|PMP5770D|PMP3970B|PMP3870C|PMP5580C|PMP5880D|PMP5780D|PMP5588C|PMP7280C|PMP7280C3G|PMP7280|PMP7880D|PMP5597D|PMP5597|PMP7100D|PER3464|PER3274|PER3574|PER3884|PER5274|PER5474|PMP5097CPRO|PMP5097|PMP7380D|PMP5297C|PMP5297C_QUAD|PMP812E|PMP812E3G|PMP812F|PMP810E|PMP880TD|PMT3017|PMT3037|PMT3047|PMT3057|PMT7008|PMT5887|PMT5001|PMT5002",LenovoTablet:"Lenovo TAB|Idea(Tab|Pad)( A1|A10| K1|)|ThinkPad([ ]+)?Tablet|YT3-850M|YT3-X90L|YT3-X90F|YT3-X90X|Lenovo.*(S2109|S2110|S5000|S6000|K3011|A3000|A3500|A1000|A2107|A2109|A1107|A5500|A7600|B6000|B8000|B8080)(-|)(FL|F|HV|H|)|TB-X103F|TB-X304X|TB-X304F|TB-X304L|TB-X505F|TB-X505L|TB-X505X|TB-X605F|TB-X605L|TB-8703F|TB-8703X|TB-8703N|TB-8704N|TB-8704F|TB-8704X|TB-8704V|TB-7304F|TB-7304I|TB-7304X|Tab2A7-10F|Tab2A7-20F|TB2-X30L|YT3-X50L|YT3-X50F|YT3-X50M|YT-X705F|YT-X703F|YT-X703L|YT-X705L|YT-X705X|TB2-X30F|TB2-X30L|TB2-X30M|A2107A-F|A2107A-H|TB3-730F|TB3-730M|TB3-730X|TB-7504F|TB-7504X|TB-X704F|TB-X104F|TB3-X70F|TB-X705F|TB-8504F|TB3-X70L|TB3-710F|TB-X704L",DellTablet:"Venue 11|Venue 8|Venue 7|Dell Streak 10|Dell Streak 7",YarvikTablet:"Android.*\\b(TAB210|TAB211|TAB224|TAB250|TAB260|TAB264|TAB310|TAB360|TAB364|TAB410|TAB411|TAB420|TAB424|TAB450|TAB460|TAB461|TAB464|TAB465|TAB467|TAB468|TAB07-100|TAB07-101|TAB07-150|TAB07-151|TAB07-152|TAB07-200|TAB07-201-3G|TAB07-210|TAB07-211|TAB07-212|TAB07-214|TAB07-220|TAB07-400|TAB07-485|TAB08-150|TAB08-200|TAB08-201-3G|TAB08-201-30|TAB09-100|TAB09-211|TAB09-410|TAB10-150|TAB10-201|TAB10-211|TAB10-400|TAB10-410|TAB13-201|TAB274EUK|TAB275EUK|TAB374EUK|TAB462EUK|TAB474EUK|TAB9-200)\\b",MedionTablet:"Android.*\\bOYO\\b|LIFE.*(P9212|P9514|P9516|S9512)|LIFETAB",ArnovaTablet:"97G4|AN10G2|AN7bG3|AN7fG3|AN8G3|AN8cG3|AN7G3|AN9G3|AN7dG3|AN7dG3ST|AN7dG3ChildPad|AN10bG3|AN10bG3DT|AN9G2",IntensoTablet:"INM8002KP|INM1010FP|INM805ND|Intenso Tab|TAB1004",IRUTablet:"M702pro",MegafonTablet:"MegaFon V9|\\bZTE V9\\b|Android.*\\bMT7A\\b",EbodaTablet:"E-Boda (Supreme|Impresspeed|Izzycomm|Essential)",AllViewTablet:"Allview.*(Viva|Alldro|City|Speed|All TV|Frenzy|Quasar|Shine|TX1|AX1|AX2)",ArchosTablet:"\\b(101G9|80G9|A101IT)\\b|Qilive 97R|Archos5|\\bARCHOS (70|79|80|90|97|101|FAMILYPAD|)(b|c|)(G10| Cobalt| TITANIUM(HD|)| Xenon| Neon|XSK| 2| XS 2| PLATINUM| CARBON|GAMEPAD)\\b",AinolTablet:"NOVO7|NOVO8|NOVO10|Novo7Aurora|Novo7Basic|NOVO7PALADIN|novo9-Spark",NokiaLumiaTablet:"Lumia 2520",SonyTablet:"Sony.*Tablet|Xperia Tablet|Sony Tablet S|SO-03E|SGPT12|SGPT13|SGPT114|SGPT121|SGPT122|SGPT123|SGPT111|SGPT112|SGPT113|SGPT131|SGPT132|SGPT133|SGPT211|SGPT212|SGPT213|SGP311|SGP312|SGP321|EBRD1101|EBRD1102|EBRD1201|SGP351|SGP341|SGP511|SGP512|SGP521|SGP541|SGP551|SGP621|SGP641|SGP612|SOT31|SGP771|SGP611|SGP612|SGP712",PhilipsTablet:"\\b(PI2010|PI3000|PI3100|PI3105|PI3110|PI3205|PI3210|PI3900|PI4010|PI7000|PI7100)\\b",CubeTablet:"Android.*(K8GT|U9GT|U10GT|U16GT|U17GT|U18GT|U19GT|U20GT|U23GT|U30GT)|CUBE U8GT",CobyTablet:"MID1042|MID1045|MID1125|MID1126|MID7012|MID7014|MID7015|MID7034|MID7035|MID7036|MID7042|MID7048|MID7127|MID8042|MID8048|MID8127|MID9042|MID9740|MID9742|MID7022|MID7010",MIDTablet:"M9701|M9000|M9100|M806|M1052|M806|T703|MID701|MID713|MID710|MID727|MID760|MID830|MID728|MID933|MID125|MID810|MID732|MID120|MID930|MID800|MID731|MID900|MID100|MID820|MID735|MID980|MID130|MID833|MID737|MID960|MID135|MID860|MID736|MID140|MID930|MID835|MID733|MID4X10",MSITablet:"MSI \\b(Primo 73K|Primo 73L|Primo 81L|Primo 77|Primo 93|Primo 75|Primo 76|Primo 73|Primo 81|Primo 91|Primo 90|Enjoy 71|Enjoy 7|Enjoy 10)\\b",SMiTTablet:"Android.*(\\bMID\\b|MID-560|MTV-T1200|MTV-PND531|MTV-P1101|MTV-PND530)",RockChipTablet:"Android.*(RK2818|RK2808A|RK2918|RK3066)|RK2738|RK2808A",FlyTablet:"IQ310|Fly Vision",bqTablet:"Android.*(bq)?.*\\b(Elcano|Curie|Edison|Maxwell|Kepler|Pascal|Tesla|Hypatia|Platon|Newton|Livingstone|Cervantes|Avant|Aquaris ([E|M]10|M8))\\b|Maxwell.*Lite|Maxwell.*Plus",HuaweiTablet:"MediaPad|MediaPad 7 Youth|IDEOS S7|S7-201c|S7-202u|S7-101|S7-103|S7-104|S7-105|S7-106|S7-201|S7-Slim|M2-A01L|BAH-L09|BAH-W09|AGS-L09|CMR-AL19",NecTablet:"\\bN-06D|\\bN-08D",PantechTablet:"Pantech.*P4100",BronchoTablet:"Broncho.*(N701|N708|N802|a710)",VersusTablet:"TOUCHPAD.*[78910]|\\bTOUCHTAB\\b",ZyncTablet:"z1000|Z99 2G|z930|z990|z909|Z919|z900",PositivoTablet:"TB07STA|TB10STA|TB07FTA|TB10FTA",NabiTablet:"Android.*\\bNabi",KoboTablet:"Kobo Touch|\\bK080\\b|\\bVox\\b Build|\\bArc\\b Build",DanewTablet:"DSlide.*\\b(700|701R|702|703R|704|802|970|971|972|973|974|1010|1012)\\b",TexetTablet:"NaviPad|TB-772A|TM-7045|TM-7055|TM-9750|TM-7016|TM-7024|TM-7026|TM-7041|TM-7043|TM-7047|TM-8041|TM-9741|TM-9747|TM-9748|TM-9751|TM-7022|TM-7021|TM-7020|TM-7011|TM-7010|TM-7023|TM-7025|TM-7037W|TM-7038W|TM-7027W|TM-9720|TM-9725|TM-9737W|TM-1020|TM-9738W|TM-9740|TM-9743W|TB-807A|TB-771A|TB-727A|TB-725A|TB-719A|TB-823A|TB-805A|TB-723A|TB-715A|TB-707A|TB-705A|TB-709A|TB-711A|TB-890HD|TB-880HD|TB-790HD|TB-780HD|TB-770HD|TB-721HD|TB-710HD|TB-434HD|TB-860HD|TB-840HD|TB-760HD|TB-750HD|TB-740HD|TB-730HD|TB-722HD|TB-720HD|TB-700HD|TB-500HD|TB-470HD|TB-431HD|TB-430HD|TB-506|TB-504|TB-446|TB-436|TB-416|TB-146SE|TB-126SE",PlaystationTablet:"Playstation.*(Portable|Vita)",TrekstorTablet:"ST10416-1|VT10416-1|ST70408-1|ST702xx-1|ST702xx-2|ST80208|ST97216|ST70104-2|VT10416-2|ST10216-2A|SurfTab",PyleAudioTablet:"\\b(PTBL10CEU|PTBL10C|PTBL72BC|PTBL72BCEU|PTBL7CEU|PTBL7C|PTBL92BC|PTBL92BCEU|PTBL9CEU|PTBL9CUK|PTBL9C)\\b",AdvanTablet:"Android.* \\b(E3A|T3X|T5C|T5B|T3E|T3C|T3B|T1J|T1F|T2A|T1H|T1i|E1C|T1-E|T5-A|T4|E1-B|T2Ci|T1-B|T1-D|O1-A|E1-A|T1-A|T3A|T4i)\\b ",DanyTechTablet:"Genius Tab G3|Genius Tab S2|Genius Tab Q3|Genius Tab G4|Genius Tab Q4|Genius Tab G-II|Genius TAB GII|Genius TAB GIII|Genius Tab S1",GalapadTablet:"Android [0-9.]+; [a-z-]+; \\bG1\\b",MicromaxTablet:"Funbook|Micromax.*\\b(P250|P560|P360|P362|P600|P300|P350|P500|P275)\\b",KarbonnTablet:"Android.*\\b(A39|A37|A34|ST8|ST10|ST7|Smart Tab3|Smart Tab2)\\b",AllFineTablet:"Fine7 Genius|Fine7 Shine|Fine7 Air|Fine8 Style|Fine9 More|Fine10 Joy|Fine11 Wide",PROSCANTablet:"\\b(PEM63|PLT1023G|PLT1041|PLT1044|PLT1044G|PLT1091|PLT4311|PLT4311PL|PLT4315|PLT7030|PLT7033|PLT7033D|PLT7035|PLT7035D|PLT7044K|PLT7045K|PLT7045KB|PLT7071KG|PLT7072|PLT7223G|PLT7225G|PLT7777G|PLT7810K|PLT7849G|PLT7851G|PLT7852G|PLT8015|PLT8031|PLT8034|PLT8036|PLT8080K|PLT8082|PLT8088|PLT8223G|PLT8234G|PLT8235G|PLT8816K|PLT9011|PLT9045K|PLT9233G|PLT9735|PLT9760G|PLT9770G)\\b",YONESTablet:"BQ1078|BC1003|BC1077|RK9702|BC9730|BC9001|IT9001|BC7008|BC7010|BC708|BC728|BC7012|BC7030|BC7027|BC7026",ChangJiaTablet:"TPC7102|TPC7103|TPC7105|TPC7106|TPC7107|TPC7201|TPC7203|TPC7205|TPC7210|TPC7708|TPC7709|TPC7712|TPC7110|TPC8101|TPC8103|TPC8105|TPC8106|TPC8203|TPC8205|TPC8503|TPC9106|TPC9701|TPC97101|TPC97103|TPC97105|TPC97106|TPC97111|TPC97113|TPC97203|TPC97603|TPC97809|TPC97205|TPC10101|TPC10103|TPC10106|TPC10111|TPC10203|TPC10205|TPC10503",GUTablet:"TX-A1301|TX-M9002|Q702|kf026",PointOfViewTablet:"TAB-P506|TAB-navi-7-3G-M|TAB-P517|TAB-P-527|TAB-P701|TAB-P703|TAB-P721|TAB-P731N|TAB-P741|TAB-P825|TAB-P905|TAB-P925|TAB-PR945|TAB-PL1015|TAB-P1025|TAB-PI1045|TAB-P1325|TAB-PROTAB[0-9]+|TAB-PROTAB25|TAB-PROTAB26|TAB-PROTAB27|TAB-PROTAB26XL|TAB-PROTAB2-IPS9|TAB-PROTAB30-IPS9|TAB-PROTAB25XXL|TAB-PROTAB26-IPS10|TAB-PROTAB30-IPS10",OvermaxTablet:"OV-(SteelCore|NewBase|Basecore|Baseone|Exellen|Quattor|EduTab|Solution|ACTION|BasicTab|TeddyTab|MagicTab|Stream|TB-08|TB-09)|Qualcore 1027",HCLTablet:"HCL.*Tablet|Connect-3G-2.0|Connect-2G-2.0|ME Tablet U1|ME Tablet U2|ME Tablet G1|ME Tablet X1|ME Tablet Y2|ME Tablet Sync",DPSTablet:"DPS Dream 9|DPS Dual 7",VistureTablet:"V97 HD|i75 3G|Visture V4( HD)?|Visture V5( HD)?|Visture V10",CrestaTablet:"CTP(-)?810|CTP(-)?818|CTP(-)?828|CTP(-)?838|CTP(-)?888|CTP(-)?978|CTP(-)?980|CTP(-)?987|CTP(-)?988|CTP(-)?989",MediatekTablet:"\\bMT8125|MT8389|MT8135|MT8377\\b",ConcordeTablet:"Concorde([ ]+)?Tab|ConCorde ReadMan",GoCleverTablet:"GOCLEVER TAB|A7GOCLEVER|M1042|M7841|M742|R1042BK|R1041|TAB A975|TAB A7842|TAB A741|TAB A741L|TAB M723G|TAB M721|TAB A1021|TAB I921|TAB R721|TAB I720|TAB T76|TAB R70|TAB R76.2|TAB R106|TAB R83.2|TAB M813G|TAB I721|GCTA722|TAB I70|TAB I71|TAB S73|TAB R73|TAB R74|TAB R93|TAB R75|TAB R76.1|TAB A73|TAB A93|TAB A93.2|TAB T72|TAB R83|TAB R974|TAB R973|TAB A101|TAB A103|TAB A104|TAB A104.2|R105BK|M713G|A972BK|TAB A971|TAB R974.2|TAB R104|TAB R83.3|TAB A1042",ModecomTablet:"FreeTAB 9000|FreeTAB 7.4|FreeTAB 7004|FreeTAB 7800|FreeTAB 2096|FreeTAB 7.5|FreeTAB 1014|FreeTAB 1001 |FreeTAB 8001|FreeTAB 9706|FreeTAB 9702|FreeTAB 7003|FreeTAB 7002|FreeTAB 1002|FreeTAB 7801|FreeTAB 1331|FreeTAB 1004|FreeTAB 8002|FreeTAB 8014|FreeTAB 9704|FreeTAB 1003",VoninoTablet:"\\b(Argus[ _]?S|Diamond[ _]?79HD|Emerald[ _]?78E|Luna[ _]?70C|Onyx[ _]?S|Onyx[ _]?Z|Orin[ _]?HD|Orin[ _]?S|Otis[ _]?S|SpeedStar[ _]?S|Magnet[ _]?M9|Primus[ _]?94[ _]?3G|Primus[ _]?94HD|Primus[ _]?QS|Android.*\\bQ8\\b|Sirius[ _]?EVO[ _]?QS|Sirius[ _]?QS|Spirit[ _]?S)\\b",ECSTablet:"V07OT2|TM105A|S10OT1|TR10CS1",StorexTablet:"eZee[_']?(Tab|Go)[0-9]+|TabLC7|Looney Tunes Tab",VodafoneTablet:"SmartTab([ ]+)?[0-9]+|SmartTabII10|SmartTabII7|VF-1497|VFD 1400",EssentielBTablet:"Smart[ ']?TAB[ ]+?[0-9]+|Family[ ']?TAB2",RossMoorTablet:"RM-790|RM-997|RMD-878G|RMD-974R|RMT-705A|RMT-701|RME-601|RMT-501|RMT-711",iMobileTablet:"i-mobile i-note",TolinoTablet:"tolino tab [0-9.]+|tolino shine",AudioSonicTablet:"\\bC-22Q|T7-QC|T-17B|T-17P\\b",AMPETablet:"Android.* A78 ",SkkTablet:"Android.* (SKYPAD|PHOENIX|CYCLOPS)",TecnoTablet:"TECNO P9|TECNO DP8D",JXDTablet:"Android.* \\b(F3000|A3300|JXD5000|JXD3000|JXD2000|JXD300B|JXD300|S5800|S7800|S602b|S5110b|S7300|S5300|S602|S603|S5100|S5110|S601|S7100a|P3000F|P3000s|P101|P200s|P1000m|P200m|P9100|P1000s|S6600b|S908|P1000|P300|S18|S6600|S9100)\\b",iJoyTablet:"Tablet (Spirit 7|Essentia|Galatea|Fusion|Onix 7|Landa|Titan|Scooby|Deox|Stella|Themis|Argon|Unique 7|Sygnus|Hexen|Finity 7|Cream|Cream X2|Jade|Neon 7|Neron 7|Kandy|Scape|Saphyr 7|Rebel|Biox|Rebel|Rebel 8GB|Myst|Draco 7|Myst|Tab7-004|Myst|Tadeo Jones|Tablet Boing|Arrow|Draco Dual Cam|Aurix|Mint|Amity|Revolution|Finity 9|Neon 9|T9w|Amity 4GB Dual Cam|Stone 4GB|Stone 8GB|Andromeda|Silken|X2|Andromeda II|Halley|Flame|Saphyr 9,7|Touch 8|Planet|Triton|Unique 10|Hexen 10|Memphis 4GB|Memphis 8GB|Onix 10)",FX2Tablet:"FX2 PAD7|FX2 PAD10",XoroTablet:"KidsPAD 701|PAD[ ]?712|PAD[ ]?714|PAD[ ]?716|PAD[ ]?717|PAD[ ]?718|PAD[ ]?720|PAD[ ]?721|PAD[ ]?722|PAD[ ]?790|PAD[ ]?792|PAD[ ]?900|PAD[ ]?9715D|PAD[ ]?9716DR|PAD[ ]?9718DR|PAD[ ]?9719QR|PAD[ ]?9720QR|TelePAD1030|Telepad1032|TelePAD730|TelePAD731|TelePAD732|TelePAD735Q|TelePAD830|TelePAD9730|TelePAD795|MegaPAD 1331|MegaPAD 1851|MegaPAD 2151",ViewsonicTablet:"ViewPad 10pi|ViewPad 10e|ViewPad 10s|ViewPad E72|ViewPad7|ViewPad E100|ViewPad 7e|ViewSonic VB733|VB100a",VerizonTablet:"QTAQZ3|QTAIR7|QTAQTZ3|QTASUN1|QTASUN2|QTAXIA1",OdysTablet:"LOOX|XENO10|ODYS[ -](Space|EVO|Xpress|NOON)|\\bXELIO\\b|Xelio10Pro|XELIO7PHONETAB|XELIO10EXTREME|XELIOPT2|NEO_QUAD10",CaptivaTablet:"CAPTIVA PAD",IconbitTablet:"NetTAB|NT-3702|NT-3702S|NT-3702S|NT-3603P|NT-3603P|NT-0704S|NT-0704S|NT-3805C|NT-3805C|NT-0806C|NT-0806C|NT-0909T|NT-0909T|NT-0907S|NT-0907S|NT-0902S|NT-0902S",TeclastTablet:"T98 4G|\\bP80\\b|\\bX90HD\\b|X98 Air|X98 Air 3G|\\bX89\\b|P80 3G|\\bX80h\\b|P98 Air|\\bX89HD\\b|P98 3G|\\bP90HD\\b|P89 3G|X98 3G|\\bP70h\\b|P79HD 3G|G18d 3G|\\bP79HD\\b|\\bP89s\\b|\\bA88\\b|\\bP10HD\\b|\\bP19HD\\b|G18 3G|\\bP78HD\\b|\\bA78\\b|\\bP75\\b|G17s 3G|G17h 3G|\\bP85t\\b|\\bP90\\b|\\bP11\\b|\\bP98t\\b|\\bP98HD\\b|\\bG18d\\b|\\bP85s\\b|\\bP11HD\\b|\\bP88s\\b|\\bA80HD\\b|\\bA80se\\b|\\bA10h\\b|\\bP89\\b|\\bP78s\\b|\\bG18\\b|\\bP85\\b|\\bA70h\\b|\\bA70\\b|\\bG17\\b|\\bP18\\b|\\bA80s\\b|\\bA11s\\b|\\bP88HD\\b|\\bA80h\\b|\\bP76s\\b|\\bP76h\\b|\\bP98\\b|\\bA10HD\\b|\\bP78\\b|\\bP88\\b|\\bA11\\b|\\bA10t\\b|\\bP76a\\b|\\bP76t\\b|\\bP76e\\b|\\bP85HD\\b|\\bP85a\\b|\\bP86\\b|\\bP75HD\\b|\\bP76v\\b|\\bA12\\b|\\bP75a\\b|\\bA15\\b|\\bP76Ti\\b|\\bP81HD\\b|\\bA10\\b|\\bT760VE\\b|\\bT720HD\\b|\\bP76\\b|\\bP73\\b|\\bP71\\b|\\bP72\\b|\\bT720SE\\b|\\bC520Ti\\b|\\bT760\\b|\\bT720VE\\b|T720-3GE|T720-WiFi",OndaTablet:"\\b(V975i|Vi30|VX530|V701|Vi60|V701s|Vi50|V801s|V719|Vx610w|VX610W|V819i|Vi10|VX580W|Vi10|V711s|V813|V811|V820w|V820|Vi20|V711|VI30W|V712|V891w|V972|V819w|V820w|Vi60|V820w|V711|V813s|V801|V819|V975s|V801|V819|V819|V818|V811|V712|V975m|V101w|V961w|V812|V818|V971|V971s|V919|V989|V116w|V102w|V973|Vi40)\\b[\\s]+|V10 \\b4G\\b",JaytechTablet:"TPC-PA762",BlaupunktTablet:"Endeavour 800NG|Endeavour 1010",DigmaTablet:"\\b(iDx10|iDx9|iDx8|iDx7|iDxD7|iDxD8|iDsQ8|iDsQ7|iDsQ8|iDsD10|iDnD7|3TS804H|iDsQ11|iDj7|iDs10)\\b",EvolioTablet:"ARIA_Mini_wifi|Aria[ _]Mini|Evolio X10|Evolio X7|Evolio X8|\\bEvotab\\b|\\bNeura\\b",LavaTablet:"QPAD E704|\\bIvoryS\\b|E-TAB IVORY|\\bE-TAB\\b",AocTablet:"MW0811|MW0812|MW0922|MTK8382|MW1031|MW0831|MW0821|MW0931|MW0712",MpmanTablet:"MP11 OCTA|MP10 OCTA|MPQC1114|MPQC1004|MPQC994|MPQC974|MPQC973|MPQC804|MPQC784|MPQC780|\\bMPG7\\b|MPDCG75|MPDCG71|MPDC1006|MP101DC|MPDC9000|MPDC905|MPDC706HD|MPDC706|MPDC705|MPDC110|MPDC100|MPDC99|MPDC97|MPDC88|MPDC8|MPDC77|MP709|MID701|MID711|MID170|MPDC703|MPQC1010",CelkonTablet:"CT695|CT888|CT[\\s]?910|CT7 Tab|CT9 Tab|CT3 Tab|CT2 Tab|CT1 Tab|C820|C720|\\bCT-1\\b",WolderTablet:"miTab \\b(DIAMOND|SPACE|BROOKLYN|NEO|FLY|MANHATTAN|FUNK|EVOLUTION|SKY|GOCAR|IRON|GENIUS|POP|MINT|EPSILON|BROADWAY|JUMP|HOP|LEGEND|NEW AGE|LINE|ADVANCE|FEEL|FOLLOW|LIKE|LINK|LIVE|THINK|FREEDOM|CHICAGO|CLEVELAND|BALTIMORE-GH|IOWA|BOSTON|SEATTLE|PHOENIX|DALLAS|IN 101|MasterChef)\\b",MediacomTablet:"M-MPI10C3G|M-SP10EG|M-SP10EGP|M-SP10HXAH|M-SP7HXAH|M-SP10HXBH|M-SP8HXAH|M-SP8MXA",MiTablet:"\\bMI PAD\\b|\\bHM NOTE 1W\\b",NibiruTablet:"Nibiru M1|Nibiru Jupiter One",NexoTablet:"NEXO NOVA|NEXO 10|NEXO AVIO|NEXO FREE|NEXO GO|NEXO EVO|NEXO 3G|NEXO SMART|NEXO KIDDO|NEXO MOBI",LeaderTablet:"TBLT10Q|TBLT10I|TBL-10WDKB|TBL-10WDKBO2013|TBL-W230V2|TBL-W450|TBL-W500|SV572|TBLT7I|TBA-AC7-8G|TBLT79|TBL-8W16|TBL-10W32|TBL-10WKB|TBL-W100",UbislateTablet:"UbiSlate[\\s]?7C",PocketBookTablet:"Pocketbook",KocasoTablet:"\\b(TB-1207)\\b",HisenseTablet:"\\b(F5281|E2371)\\b",Hudl:"Hudl HT7S3|Hudl 2",TelstraTablet:"T-Hub2",GenericTablet:"Android.*\\b97D\\b|Tablet(?!.*PC)|BNTV250A|MID-WCDMA|LogicPD Zoom2|\\bA7EB\\b|CatNova8|A1_07|CT704|CT1002|\\bM721\\b|rk30sdk|\\bEVOTAB\\b|M758A|ET904|ALUMIUM10|Smartfren Tab|Endeavour 1010|Tablet-PC-4|Tagi Tab|\\bM6pro\\b|CT1020W|arc 10HD|\\bTP750\\b|\\bQTAQZ3\\b|WVT101|TM1088|KT107"},oss:{AndroidOS:"Android",BlackBerryOS:"blackberry|\\bBB10\\b|rim tablet os",PalmOS:"PalmOS|avantgo|blazer|elaine|hiptop|palm|plucker|xiino",SymbianOS:"Symbian|SymbOS|Series60|Series40|SYB-[0-9]+|\\bS60\\b",WindowsMobileOS:"Windows CE.*(PPC|Smartphone|Mobile|[0-9]{3}x[0-9]{3})|Windows Mobile|Windows Phone [0-9.]+|WCE;",WindowsPhoneOS:"Windows Phone 10.0|Windows Phone 8.1|Windows Phone 8.0|Windows Phone OS|XBLWP7|ZuneWP7|Windows NT 6.[23]; ARM;",iOS:"\\biPhone.*Mobile|\\biPod|\\biPad|AppleCoreMedia",iPadOS:"CPU OS 13",SailfishOS:"Sailfish",MeeGoOS:"MeeGo",MaemoOS:"Maemo",JavaOS:"J2ME/|\\bMIDP\\b|\\bCLDC\\b",webOS:"webOS|hpwOS",badaOS:"\\bBada\\b",BREWOS:"BREW"},uas:{Chrome:"\\bCrMo\\b|CriOS|Android.*Chrome/[.0-9]* (Mobile)?",Dolfin:"\\bDolfin\\b",Opera:"Opera.*Mini|Opera.*Mobi|Android.*Opera|Mobile.*OPR/[0-9.]+$|Coast/[0-9.]+",Skyfire:"Skyfire",Edge:"\\bEdgiOS\\b|Mobile Safari/[.0-9]* Edge",IE:"IEMobile|MSIEMobile",Firefox:"fennec|firefox.*maemo|(Mobile|Tablet).*Firefox|Firefox.*Mobile|FxiOS",Bolt:"bolt",TeaShark:"teashark",Blazer:"Blazer",Safari:"Version((?!\\bEdgiOS\\b).)*Mobile.*Safari|Safari.*Mobile|MobileSafari",WeChat:"\\bMicroMessenger\\b",UCBrowser:"UC.*Browser|UCWEB",baiduboxapp:"baiduboxapp",baidubrowser:"baidubrowser",DiigoBrowser:"DiigoBrowser",Mercury:"\\bMercury\\b",ObigoBrowser:"Obigo",NetFront:"NF-Browser",GenericBrowser:"NokiaBrowser|OviBrowser|OneBrowser|TwonkyBeamBrowser|SEMC.*Browser|FlyFlow|Minimo|NetFront|Novarra-Vision|MQQBrowser|MicroMessenger",PaleMoon:"Android.*PaleMoon|Mobile.*PaleMoon"},props:{Mobile:"Mobile/[VER]",Build:"Build/[VER]",Version:"Version/[VER]",VendorID:"VendorID/[VER]",iPad:"iPad.*CPU[a-z ]+[VER]",iPhone:"iPhone.*CPU[a-z ]+[VER]",iPod:"iPod.*CPU[a-z ]+[VER]",Kindle:"Kindle/[VER]",Chrome:["Chrome/[VER]","CriOS/[VER]","CrMo/[VER]"],Coast:["Coast/[VER]"],Dolfin:"Dolfin/[VER]",Firefox:["Firefox/[VER]","FxiOS/[VER]"],Fennec:"Fennec/[VER]",Edge:"Edge/[VER]",IE:["IEMobile/[VER];","IEMobile [VER]","MSIE [VER];","Trident/[0-9.]+;.*rv:[VER]"],NetFront:"NetFront/[VER]",NokiaBrowser:"NokiaBrowser/[VER]",Opera:[" OPR/[VER]","Opera Mini/[VER]","Version/[VER]"],"Opera Mini":"Opera Mini/[VER]","Opera Mobi":"Version/[VER]",UCBrowser:["UCWEB[VER]","UC.*Browser/[VER]"],MQQBrowser:"MQQBrowser/[VER]",MicroMessenger:"MicroMessenger/[VER]",baiduboxapp:"baiduboxapp/[VER]",baidubrowser:"baidubrowser/[VER]",SamsungBrowser:"SamsungBrowser/[VER]",Iron:"Iron/[VER]",Safari:["Version/[VER]","Safari/[VER]"],Skyfire:"Skyfire/[VER]",Tizen:"Tizen/[VER]",Webkit:"webkit[ /][VER]",PaleMoon:"PaleMoon/[VER]",SailfishBrowser:"SailfishBrowser/[VER]",Gecko:"Gecko/[VER]",Trident:"Trident/[VER]",Presto:"Presto/[VER]",Goanna:"Goanna/[VER]",iOS:" \\bi?OS\\b [VER][ ;]{1}",Android:"Android [VER]",Sailfish:"Sailfish [VER]",BlackBerry:["BlackBerry[\\w]+/[VER]","BlackBerry.*Version/[VER]","Version/[VER]"],BREW:"BREW [VER]",Java:"Java/[VER]","Windows Phone OS":["Windows Phone OS [VER]","Windows Phone [VER]"],"Windows Phone":"Windows Phone [VER]","Windows CE":"Windows CE/[VER]","Windows NT":"Windows NT [VER]",Symbian:["SymbianOS/[VER]","Symbian/[VER]"],webOS:["webOS/[VER]","hpwOS/[VER];"]},utils:{Bot:"Googlebot|facebookexternalhit|Google-AMPHTML|s~amp-validator|AdsBot-Google|Google Keyword Suggestion|Facebot|YandexBot|YandexMobileBot|bingbot|ia_archiver|AhrefsBot|Ezooms|GSLFbot|WBSearchBot|Twitterbot|TweetmemeBot|Twikle|PaperLiBot|Wotbox|UnwindFetchor|Exabot|MJ12bot|YandexImages|TurnitinBot|Pingdom|contentkingapp|AspiegelBot",MobileBot:"Googlebot-Mobile|AdsBot-Google-Mobile|YahooSeeker/M1A1-R2D2",DesktopMode:"WPDesktop",TV:"SonyDTV|HbbTV",WebKit:"(webkit)[ /]([\\w.]+)",Console:"\\b(Nintendo|Nintendo WiiU|Nintendo 3DS|Nintendo Switch|PLAYSTATION|Xbox)\\b",Watch:"SM-V700"}},r.detectMobileBrowsers={fullPattern:/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i,shortPattern:/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i,tabletPattern:/android|ipad|playbook|silk/i};var i=Object.prototype.hasOwnProperty,o;r.FALLBACK_PHONE="UnknownPhone",r.FALLBACK_TABLET="UnknownTablet",r.FALLBACK_MOBILE="UnknownMobile",o="isArray"in Array?Array.isArray:function(f){return Object.prototype.toString.call(f)==="[object Array]"};function s(f,h){return f!=null&&h!=null&&f.toLowerCase()===h.toLowerCase()}function u(f,h){var g,p,d=f.length;if(!d||!h)return!1;for(g=h.toLowerCase(),p=0;p<d;++p)if(g===f[p].toLowerCase())return!0;return!1}function l(f){for(var h in f)i.call(f,h)&&(f[h]=new RegExp(f[h],"i"))}function a(f){return(f||"").substr(0,500)}(function(){var h,g,p,d,y,m,v=r.mobileDetectRules;for(h in v.props)if(i.call(v.props,h)){for(g=v.props[h],o(g)||(g=[g]),y=g.length,d=0;d<y;++d)p=g[d],m=p.indexOf("[VER]"),m>=0&&(p=p.substring(0,m)+"([\\w._\\+]+)"+p.substring(m+5)),g[d]=new RegExp(p,"i");v.props[h]=g}l(v.oss),l(v.phones),l(v.tablets),l(v.uas),l(v.utils),v.oss0={WindowsPhoneOS:v.oss.WindowsPhoneOS,WindowsMobileOS:v.oss.WindowsMobileOS}})(),r.findMatch=function(f,h){for(var g in f)if(i.call(f,g)&&f[g].test(h))return g;return null},r.findMatches=function(f,h){var g=[];for(var p in f)i.call(f,p)&&f[p].test(h)&&g.push(p);return g},r.getVersionStr=function(f,h){var g=r.mobileDetectRules.props,p,d,y,m;if(i.call(g,f)){for(p=g[f],y=p.length,d=0;d<y;++d)if(m=p[d].exec(h),m!==null)return m[1]}return null},r.getVersion=function(f,h){var g=r.getVersionStr(f,h);return g?r.prepareVersionNo(g):NaN},r.prepareVersionNo=function(f){var h;return h=f.split(/[a-z._ \/\-]/i),h.length===1&&(f=h[0]),h.length>1&&(f=h[0]+".",h.shift(),f+=h.join("")),Number(f)},r.isMobileFallback=function(f){return r.detectMobileBrowsers.fullPattern.test(f)||r.detectMobileBrowsers.shortPattern.test(f.substr(0,4))},r.isTabletFallback=function(f){return r.detectMobileBrowsers.tabletPattern.test(f)},r.prepareDetectionCache=function(f,h,g){if(f.mobile===n){var p,d,y;if(d=r.findMatch(r.mobileDetectRules.tablets,h),d){f.mobile=f.tablet=d,f.phone=null;return}if(p=r.findMatch(r.mobileDetectRules.phones,h),p){f.mobile=f.phone=p,f.tablet=null;return}r.isMobileFallback(h)?(y=c.isPhoneSized(g),y===n?(f.mobile=r.FALLBACK_MOBILE,f.tablet=f.phone=null):y?(f.mobile=f.phone=r.FALLBACK_PHONE,f.tablet=null):(f.mobile=f.tablet=r.FALLBACK_TABLET,f.phone=null)):r.isTabletFallback(h)?(f.mobile=f.tablet=r.FALLBACK_TABLET,f.phone=null):f.mobile=f.tablet=f.phone=null}},r.mobileGrade=function(f){var h=f.mobile()!==null;return f.os("iOS")&&f.version("iPad")>=4.3||f.os("iOS")&&f.version("iPhone")>=3.1||f.os("iOS")&&f.version("iPod")>=3.1||f.version("Android")>2.1&&f.is("Webkit")||f.version("Windows Phone OS")>=7||f.is("BlackBerry")&&f.version("BlackBerry")>=6||f.match("Playbook.*Tablet")||f.version("webOS")>=1.4&&f.match("Palm|Pre|Pixi")||f.match("hp.*TouchPad")||f.is("Firefox")&&f.version("Firefox")>=12||f.is("Chrome")&&f.is("AndroidOS")&&f.version("Android")>=4||f.is("Skyfire")&&f.version("Skyfire")>=4.1&&f.is("AndroidOS")&&f.version("Android")>=2.3||f.is("Opera")&&f.version("Opera Mobi")>11&&f.is("AndroidOS")||f.is("MeeGoOS")||f.is("Tizen")||f.is("Dolfin")&&f.version("Bada")>=2||(f.is("UC Browser")||f.is("Dolfin"))&&f.version("Android")>=2.3||f.match("Kindle Fire")||f.is("Kindle")&&f.version("Kindle")>=3||f.is("AndroidOS")&&f.is("NookTablet")||f.version("Chrome")>=11&&!h||f.version("Safari")>=5&&!h||f.version("Firefox")>=4&&!h||f.version("MSIE")>=7&&!h||f.version("Opera")>=10&&!h?"A":f.os("iOS")&&f.version("iPad")<4.3||f.os("iOS")&&f.version("iPhone")<3.1||f.os("iOS")&&f.version("iPod")<3.1||f.is("Blackberry")&&f.version("BlackBerry")>=5&&f.version("BlackBerry")<6||f.version("Opera Mini")>=5&&f.version("Opera Mini")<=6.5&&(f.version("Android")>=2.3||f.is("iOS"))||f.match("NokiaN8|NokiaC7|N97.*Series60|Symbian/3")||f.version("Opera Mobi")>=11&&f.is("SymbianOS")?"B":(f.version("BlackBerry")<5||f.match("MSIEMobile|Windows CE.*Mobile")||f.version("Windows Mobile")<=5.2,"C")},r.detectOS=function(f){return r.findMatch(r.mobileDetectRules.oss0,f)||r.findMatch(r.mobileDetectRules.oss,f)},r.getDeviceSmallerSide=function(){return window.screen.width<window.screen.height?window.screen.width:window.screen.height};function c(f,h){this.ua=a(f),this._cache={},this.maxPhoneWidth=h||600}return c.prototype={constructor:c,mobile:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.mobile},phone:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.phone},tablet:function(){return r.prepareDetectionCache(this._cache,this.ua,this.maxPhoneWidth),this._cache.tablet},userAgent:function(){return this._cache.userAgent===n&&(this._cache.userAgent=r.findMatch(r.mobileDetectRules.uas,this.ua)),this._cache.userAgent},userAgents:function(){return this._cache.userAgents===n&&(this._cache.userAgents=r.findMatches(r.mobileDetectRules.uas,this.ua)),this._cache.userAgents},os:function(){return this._cache.os===n&&(this._cache.os=r.detectOS(this.ua)),this._cache.os},version:function(f){return r.getVersion(f,this.ua)},versionStr:function(f){return r.getVersionStr(f,this.ua)},is:function(f){return u(this.userAgents(),f)||s(f,this.os())||s(f,this.phone())||s(f,this.tablet())||u(r.findMatches(r.mobileDetectRules.utils,this.ua),f)},match:function(f){return f instanceof RegExp||(f=new RegExp(f,"i")),f.test(this.ua)},isPhoneSized:function(f){return c.isPhoneSized(f||this.maxPhoneWidth)},mobileGrade:function(){return this._cache.grade===n&&(this._cache.grade=r.mobileGrade(this)),this._cache.grade}},typeof window<"u"&&window.screen?c.isPhoneSized=function(f){return f<0?n:r.getDeviceSmallerSide()<=f}:c.isPhoneSized=function(){},c._impl=r,c.version="1.4.5 2021-03-13",c})})(function(t){if(e.exports)return function(n){e.exports=n()};if(typeof window<"u")return function(n){window.MobileDetect=n()};throw new Error("unknown environment")}())})(w7);var JW=w7.exports;const ez=$s(JW),Jx=e=>D.jsx("span",{className:"mind-node-emoji",style:{fontSize:`${e.fontSize}px`},children:e.emojiItem.name}),tz=e=>{const t=e;return e.setPluginOptions(qd,{emojiPadding:0,spaceBetweenEmojis:4}),t.renderEmoji=(n,r)=>{const i=document.createElement("span");n.appendChild(i);const o=cc(i);o.render(D.jsx(Jx,{...r}));let s={...r};return{destroy:()=>{setTimeout(()=>{o.unmount()},0)},update:l=>{s={...s,...l},o.render(D.jsx(Jx,{...s}))}}},t},eE=e=>D.jsx("div",{children:D.jsx("img",{src:e.imageItem.url,draggable:"false",width:e.imageItem.width,height:e.imageItem.height})}),nz=e=>{const t=e;return t.renderImage=(n,r)=>{const i=cc(n);i.render(D.jsx(eE,{...r}));let o={...r};return{destroy:()=>{setTimeout(()=>{i.unmount()},0)},update:u=>{o={...o,...u},i.render(D.jsx(eE,{...o}))}}},e},ui=ye.forwardRef(({children:e,padding:t,className:n,style:r},i)=>D.jsx("div",{className:lt("island",n),style:{"--padding":t,...r},ref:i,children:e})),rz=A.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:o},s)=>D.jsx("div",{className:lt("stack stack_horizontal",i),style:{"--gap":t,alignItems:n,justifyContent:r,...o},ref:s,children:e})),iz=A.forwardRef(({children:e,gap:t,align:n,justifyContent:r,className:i,style:o},s)=>D.jsx("div",{className:lt("stack stack_vertical",i),style:{"--gap":t,justifyItems:n,justifyContent:r,...o},ref:s,children:e})),vr={Row:rz,Col:iz};class oz extends DOMException{constructor(t="Request Aborted"){super(t,"AbortError")}}const sz=e=>!!e&&typeof e=="object"&&"then"in e&&"catch"in e&&"finally"in e,uz=(e,t,{checkForDefaultPrevented:n=!0}={})=>function(i){if(e==null||e(i),!n||!(i!=null&&i.defaultPrevented))return t==null?void 0:t(i)},lz=e=>{let t=e.split(","),n=t[0].match(/:(.*?);/)[1],r=atob(t[1]),i=r.length,o=new Uint8Array(i);for(;i--;)o[i]=r.charCodeAt(i);return new Blob([o],{type:n})},az=(e,t={})=>oM(e,{fillStyle:"transparent",inlineStyleClassNames:".extend,.emojis,.text",padding:20,ratio:4,...t});function cz(e,t){const n=document.createElement("a"),r=window.URL.createObjectURL(e);n.href=r,n.download=t,document.body.append(n),n.click(),window.URL.revokeObjectURL(r),n.remove()}const C7=(e,t)=>{let n=[];for(let r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n},Bt=ye.forwardRef((e,t)=>{const{id:n}={id:"drawfree"},r=ye.useRef(null);ye.useImperativeHandle(t,()=>r.current);const i=`tool-icon_size_${e.size||"medium"}`,[o,s]=A.useState(!1),u=A.useRef(!0),l=async c=>{var h;const f="onClick"in e&&((h=e.onClick)==null?void 0:h.call(e,c));if(sz(f))try{s(!0),await f}catch(g){if(g instanceof oz)console.warn(g);else throw g}finally{u.current&&s(!1)}};A.useEffect(()=>(u.current=!0,()=>{u.current=!1}),[]);const a=A.useRef(null);if(e.type==="button"||e.type==="icon"||e.type==="submit"){const c=e.type==="icon"?"button":e.type;return D.jsxs("button",{className:lt("tool-icon_type_button",i,e.className,e.visible&&!e.hidden?"tool-icon_type_button--show":"tool-icon_type_button--hide",{"tool-icon":!e.hidden,"tool-icon--selected":e.selected}),style:e.style,"data-testid":e["data-testid"],hidden:e.hidden,title:e.title,"aria-label":e["aria-label"],type:c,onClick:l,onPointerDown:f=>{var h;(h=e.onPointerDown)==null||h.call(e,{pointerType:f.pointerType||null})},onPointerUp:f=>{var h;(h=e.onPointerUp)==null||h.call(e,{pointerType:f.pointerType||null})},ref:r,disabled:o||!!e.disabled,children:[(e.icon||e.label)&&D.jsxs("div",{className:"tool-icon__icon","aria-hidden":"true","aria-disabled":!!e.disabled,children:[e.icon||e.label,e.keyBindingLabel&&D.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]}),e.showAriaLabel&&D.jsx("div",{className:"tool-icon__label",children:e["aria-label"]}),e.children&&D.jsx("div",{className:"tool-icon__icon",children:e.children})]})}return D.jsxs("label",{className:lt("tool-icon",e.className),title:e.title,onPointerDown:c=>{var f;a.current=c.pointerType||null,(f=e.onPointerDown)==null||f.call(e,{pointerType:c.pointerType||null})},onPointerUp:c=>{var f;(f=e.onPointerUp)==null||f.call(e,{pointerType:c.pointerType||null}),requestAnimationFrame(()=>{a.current=null})},children:[D.jsx("input",{className:`tool-icon_type_radio ${i}`,type:"radio",name:e.name,"aria-label":e["aria-label"],"aria-keyshortcuts":e["aria-keyshortcuts"],"data-testid":e["data-testid"],id:`${n}-${e.id}`,onChange:()=>{var c;(c=e.onChange)==null||c.call(e,{pointerType:a.current})},checked:e.checked,ref:r}),D.jsxs("div",{className:"tool-icon__icon",children:[e.icon,e.keyBindingLabel&&D.jsx("span",{className:"tool-icon__keybinding",children:e.keyBindingLabel})]})]})});Bt.displayName="ToolButton";const _e=e=>e,fz=_e(D.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:D.jsx("g",{id:"Hand",stroke:"none",fill:"currentColor",children:D.jsx("path",{d:"M8.44583468,0.500225887 C9.07406934,0.510185679 9.54739531,0.839591366 9.86192311,1.34305279 C9.89696656,1.39914649 9.92878401,1.45492964 9.9576026,1.50991157 L9.9576026,1.50991157 L10.0210033,1.64201027 L10.061978,1.62350755 C10.1972891,1.56834247 10.3444107,1.53218464 10.5027907,1.51755353 L10.5027907,1.51755353 L10.6649031,1.51019133 C11.4883708,1.51019133 12.0208782,1.99343346 12.3023042,2.66393278 C12.3903714,2.87392911 12.4344191,3.10047818 12.4339446,3.3257952 L12.4339446,3.3257952 L12.4360033,3.80501027 L12.5160535,3.78341501 C12.6124478,3.76124046 12.7138812,3.74739854 12.820201,3.74250274 L12.820201,3.74250274 L12.9833264,3.74194533 C13.6121166,3.7657478 14.0645887,4.0801724 14.3087062,4.56112689 C14.4521117,4.8436609 14.4987984,5.11349437 14.4999262,5.33449618 L14.4999262,5.33449618 L14.3922653,12.049414 C14.3784752,12.909177 14.0717787,13.7360948 13.5212406,14.3825228 C13.4055676,14.5183496 13.2843697,14.643961 13.1582361,14.7596335 C12.4634771,15.3967716 11.755103,15.6538706 11.1897396,15.7000055 L11.1897396,15.7000055 L7.4723083,15.6798158 C7.14276373,15.634268 6.81580098,15.5154267 6.49455235,15.3472501 C6.25643701,15.2225944 6.06881706,15.0975452 5.88705731,14.9494308 L5.88705731,14.9494308 L2.55198782,11.500873 C2.39559475,11.3769079 2.17626793,11.1748532 1.9548636,10.9139403 C1.57867502,10.4706225 1.33501976,10.0139923 1.30330257,9.52833025 C1.28093191,9.18578476 1.37200912,8.85641102 1.5826788,8.56872564 C1.82538833,8.23725279 2.12881965,8.02107162 2.47470569,7.92957033 C2.95807982,7.80169771 3.42705723,7.92468989 3.86509644,8.18731167 C4.04431391,8.29475961 4.1816109,8.40304483 4.26225571,8.47866867 L4.26225571,8.47866867 L4.61400328,8.79701027 L4.57247249,3.59275349 L4.57628524,3.46204923 C4.5897691,3.23444442 4.64087578,2.95701848 4.75937106,2.66961597 C5.01017272,2.06131302 5.49670227,1.64692543 6.21363856,1.60818786 C6.44223508,1.59583681 6.65042099,1.62176802 6.83696985,1.68057551 L6.83696985,1.68057551 L6.86400328,1.69001027 C6.88501862,1.63593052 6.90764242,1.58175442 6.9331867,1.52672633 L6.9331867,1.52672633 L7.01883595,1.35955614 C7.31549194,0.832047939 7.79476072,0.48993549 8.44583468,0.500225887 Z M8.42684173,1.70001476 C8.26825412,1.69756905 8.16339456,1.77242008 8.06478367,1.94776814 C8.03967773,1.99241107 8.01831703,2.03811495 8.00083464,2.07855067 L8.00083464,2.07855067 L7.94879157,2.2035905 L7.94354455,2.20731401 L7.943,3.161 L7.97170661,3.16123746 L7.97170661,7.60991883 L6.77170661,7.60991883 L6.771,3.338 L6.74362358,3.33880359 C6.74284189,3.29064626 6.73014163,3.20282206 6.7002616,3.11094408 L6.66446012,3.01903385 C6.58982025,2.85766739 6.49843292,2.79455071 6.27838133,2.80644008 C6.07001018,2.81769881 5.95642108,2.91444507 5.86877664,3.12702089 C5.79792279,3.29887224 5.77228127,3.48655908 5.77246879,3.58977183 L5.77246879,3.58977183 L5.83613619,11.5252021 L3.41863956,9.33477657 L3.31637296,9.25979571 L3.24805011,9.21651224 C3.06096922,9.10434987 2.89279975,9.06024641 2.78159879,9.0896637 C2.71007735,9.10858411 2.63607367,9.1613084 2.55086305,9.27768211 C2.51020424,9.33320478 2.49638061,9.38319687 2.50075171,9.4501283 C2.51206889,9.62341997 2.64503022,9.87260054 2.86983366,10.1375191 C3.03268834,10.3294345 3.19762053,10.4813781 3.35554956,10.6131022 L3.35554956,10.6131022 L6.68454317,14.0569073 C6.71106575,14.0773808 6.74806086,14.1037158 6.79369091,14.1335929 L6.79369091,14.1335929 L6.95464838,14.2315311 L7.05111031,14.2841211 C7.25978123,14.3933622 7.46253523,14.4670573 7.55685495,14.4854708 L7.55685495,14.4854708 L11.1407985,14.5022108 C11.1503576,14.5013899 11.1627905,14.4997539 11.1779002,14.4971772 L11.1779002,14.4971772 L11.2991076,14.4694224 C11.3491682,14.4557375 11.4083624,14.437284 11.4751158,14.4130563 C11.769383,14.3062543 12.066676,14.1324596 12.3471758,13.8752234 C12.4371203,13.7927386 12.5240597,13.7026333 12.607654,13.6044743 C12.9760464,13.1719172 13.183059,12.6137678 13.1924195,12.030173 L13.1924195,12.030173 L13.3000132,5.32832551 C13.2997939,5.29016685 13.2826117,5.19085946 13.2386527,5.10425262 C13.1843838,4.99733326 13.1129774,4.94771265 12.9379578,4.94108739 C12.6814739,4.93138871 12.534132,5.11189595 12.4756792,5.39480062 L12.4768718,7.52734922 L11.2768718,7.52734922 L11.276,5.688 L11.2462883,5.6883208 L11.2339541,3.32771285 C11.2341,3.2560396 11.2209054,3.18817621 11.1957482,3.12818892 C11.0820579,2.85732094 10.9199288,2.71019133 10.6649031,2.71019133 C10.456829,2.71019133 10.3197487,2.87378067 10.2524297,3.11264939 L10.2530225,7.512783 L9.05302254,7.512783 L9.053,3.288 L9.01554331,3.28724203 L8.98800328,2.29901027 L8.9629175,2.22263368 C8.94515567,2.17417174 8.92167756,2.11937748 8.8924232,2.06330056 L8.8924232,2.06330056 L8.84420197,1.9788544 C8.72758855,1.79219249 8.59915015,1.70280728 8.42684173,1.70001476 Z"})})})),hz=_e(D.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:D.jsx("g",{id:"selection",stroke:"none",fill:"currentColor",children:D.jsx("path",{d:"M1.38232686,2.38218266 L5.4143451,14.2246629 L5.45540179,14.3136477 C5.6738376,14.7029541 6.25143564,14.7273637 6.49230627,14.3232393 L8.11486037,11.5990854 L10.8833927,14.4351257 C11.1162256,14.673686 11.4988798,14.6767204 11.7354668,14.4418826 L14.1933351,12.0021862 L14.263123,11.9192708 C14.4260847,11.6858139 14.4039042,11.3621027 14.1959502,11.1531274 L11.3598604,8.30408543 L14.0003903,6.44278167 C14.4042341,6.15799031 14.3099422,5.5344405 13.8399491,5.38178897 L2.13023795,1.60291226 C1.65322163,1.44797961 1.20794286,1.91192855 1.38232686,2.38218266 Z M2.93689198,3.12556703 L12.3288604,6.15308543 L10.0883903,7.73315528 L10.0121747,7.79676991 C9.78025886,8.02517222 9.77056424,8.40723513 10.0088753,8.64671667 L12.9218604,11.5730854 L11.3198604,13.1630854 L8.42938714,10.2026992 L8.35682877,10.1391916 C8.07802132,9.93187508 7.66955488,10.0042813 7.48460396,10.3145856 L6.10286037,12.6310854 L2.93689198,3.12556703 Z"})})})),dz=_e(D.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:D.jsx("g",{id:"Mind",stroke:"none",fill:"currentColor",children:D.jsx("path",{d:"M14.5,1.5 C15.3284271,1.5 16,2.17157288 16,3 L16,4.5 C16,5.32842712 15.3284271,6 14.5,6 L10.5,6 C9.70541385,6 9.05512881,5.38217354 9.00332687,4.60070262 L7.75,4.6 C6.70187486,4.6 5.75693372,5.0417832 5.09122946,5.7492967 L5.5,5.75 C6.32842712,5.75 7,6.42157288 7,7.25 L7,8.75 C7,9.57842712 6.32842712,10.25 5.5,10.25 L4.69703093,10.2512226 C5.3493111,11.2442937 6.47308134,11.9 7.75,11.9 L9.004,11.9 L9.00686658,11.85554 C9.07955132,11.0948881 9.72030388,10.5 10.5,10.5 L14.5,10.5 C15.3284271,10.5 16,11.1715729 16,12 L16,13.5 C16,14.3284271 15.3284271,15 14.5,15 L10.5,15 C9.67157288,15 9,14.3284271 9,13.5 L9,13.1 L7.75,13.1 C5.78479628,13.1 4.09258608,11.9311758 3.33061658,10.2507745 L1.5,10.25 C0.671572875,10.25 0,9.57842712 0,8.75 L0,7.25 C0,6.42157288 0.671572875,5.75 1.5,5.75 L3.5932906,5.74973863 C4.44206161,4.34167555 5.98606075,3.4 7.75,3.4 L9,3.4 L9,3 C9,2.17157288 9.67157288,1.5 10.5,1.5 L14.5,1.5 Z M14.5,11.7 L10.5,11.7 C10.3343146,11.7 10.2,11.8343146 10.2,12 L10.2,13.5 C10.2,13.6656854 10.3343146,13.8 10.5,13.8 L14.5,13.8 C14.6656854,13.8 14.8,13.6656854 14.8,13.5 L14.8,12 C14.8,11.8343146 14.6656854,11.7 14.5,11.7 Z M5.5,6.95 L1.5,6.95 C1.33431458,6.95 1.2,7.08431458 1.2,7.25 L1.2,8.75 C1.2,8.91568542 1.33431458,9.05 1.5,9.05 L5.5,9.05 C5.66568542,9.05 5.8,8.91568542 5.8,8.75 L5.8,7.25 C5.8,7.08431458 5.66568542,6.95 5.5,6.95 Z M14.5,2.7 L10.5,2.7 C10.3343146,2.7 10.2,2.83431458 10.2,3 L10.2,4.5 C10.2,4.66568542 10.3343146,4.8 10.5,4.8 L14.5,4.8 C14.6656854,4.8 14.8,4.66568542 14.8,4.5 L14.8,3 C14.8,2.83431458 14.6656854,2.7 14.5,2.7 Z"})})})),gz=_e(D.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:D.jsx("g",{id:"geometry",stroke:"none",fill:"currentColor",children:D.jsx("path",{d:"M9.3,6.7 L1.7,6.7 L1.7,14.3 L9.3,14.3 L9.3,6.7 Z M10.5,9.8 C12.8748244,9.8 14.8,7.87482442 14.8,5.5 C14.8,3.12517558 12.8748244,1.2 10.5,1.2 C8.12517558,1.2 6.2,3.12517558 6.2,5.5 L9.5,5.5 C10.0522847,5.5 10.5,5.94771525 10.5,6.5 L10.5,9.8 Z M10.5,14.5 C10.5,15.0522847 10.0522847,15.5 9.5,15.5 L1.5,15.5 C0.94771525,15.5 0.5,15.0522847 0.5,14.5 L0.5,6.5 C0.5,5.94771525 0.94771525,5.5 1.5,5.5 L5,5.5 C5,2.46243388 7.46243388,0 10.5,0 C13.5375661,0 16,2.46243388 16,5.5 C16,8.53756612 13.5375661,11 10.5,11 L10.5,14.5 Z"})})})),pz=_e(D.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:D.jsx("g",{id:"font",stroke:"none",fill:"currentColor",children:D.jsx("path",{d:"M4.75,14.5069828 C4.41862915,14.5069828 4.15,14.2383536 4.15,13.9069828 C4.15,13.5756119 4.41862915,13.3069828 4.75,13.3069828 L7.3993606,13.306 L7.3993606,2.7 L2.7113606,2.7 L2.7113606,4.10415313 C2.7113606,4.40238689 2.49377099,4.64979988 2.20868371,4.69630014 L2.1113606,4.70415313 C1.77998975,4.70415313 1.5113606,4.43552397 1.5113606,4.10415313 L1.5113606,2.1 C1.5113606,1.76862915 1.77998975,1.5 2.1113606,1.5 L13.8810378,1.5 C14.2124087,1.5 14.4810378,1.76862915 14.4810378,2.1 L14.4810378,4.10415313 C14.4810378,4.43552397 14.2124087,4.70415313 13.8810378,4.70415313 C13.549667,4.70415313 13.2810378,4.43552397 13.2810378,4.10415313 L13.2810378,2.7 L8.5993606,2.7 L8.5993606,13.306 L11.25,13.3069828 C11.5813708,13.3069828 11.85,13.5756119 11.85,13.9069828 C11.85,14.2383536 11.5813708,14.5069828 11.25,14.5069828 L4.75,14.5069828 Z"})})})),mz=_e(D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:D.jsx("g",{id:"straight-line",stroke:"none",fill:"currentColor",children:D.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",id:"",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),vz=_e(D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:D.jsx("path",{d:"M3 3h18v18H3z",stroke:"currentColor",strokeWidth:"2",fill:"none"})})),yz=_e(D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:D.jsx("g",{id:"ellipse",stroke:"none",fill:"currentColor",children:D.jsx("path",{d:"M8,1 C11.8659932,1 15,4.13400675 15,8 C15,11.8659932 11.8659932,15 8,15 C4.13400675,15 1,11.8659932 1,8 C1,4.13400675 4.13400675,1 8,1 Z M8,2.2 C4.79674845,2.2 2.2,4.79674845 2.2,8 C2.2,11.2032515 4.79674845,13.8 8,13.8 C11.2032515,13.8 13.8,11.2032515 13.8,8 C13.8,4.79674845 11.2032515,2.2 8,2.2 Z"})})})),wz=_e(D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:D.jsx("g",{id:"triangle",stroke:"none",fill:"currentColor",children:D.jsx("path",{d:"M8.23125547,1.21366135 C8.3114266,1.25857939 8.37766784,1.32472334 8.42270367,1.40482837 L15.6471754,14.2549655 C15.7825042,14.4956743 15.6970768,14.800513 15.456368,14.9358418 C15.3815505,14.977905 15.2971646,15 15.2113335,15 L0.787227066,15 C0.511084691,15 0.287227066,14.7761424 0.287227066,14.5 C0.287227066,14.414418 0.309194147,14.3302684 0.351025556,14.2556064 L7.55066033,1.40546924 C7.6856352,1.1645618 7.99034802,1.07868648 8.23125547,1.21366135 Z M7.98695902,3.07926294 L1.98095902,13.7992629 L14.014959,13.7992629 L7.98695902,3.07926294 Z"})})})),Cz=_e(D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:D.jsx("g",{stroke:"none",fill:"currentColor",children:D.jsx("path",{d:"M13.7636471,2.6449804 C13.7716713,2.69552516 13.7718878,2.74700226 13.7642892,2.79761274 L12.3875778,11.9671885 C12.3550099,12.1841069 12.184864,12.3544698 11.9679874,12.3873141 L2.78433018,13.7781116 C2.511301,13.8194599 2.25644773,13.6316454 2.21509947,13.3586162 C2.20737253,13.307594 2.20759072,13.2556831 2.21574631,13.2047277 L3.67471119,4.08923146 C3.70888725,3.87570215 3.87646006,3.70834166 4.09003253,3.67443635 L13.1914362,2.22955927 C13.4641633,2.18626298 13.7203508,2.37225335 13.7636471,2.6449804 Z M12.4355704,3.5645263 L4.77957044,4.7795263 L3.55157044,12.4485263 L11.2775704,11.2775263 L12.4355704,3.5645263 Z",transform:"translate(7.989647, 8.003560) rotate(-315.000000) translate(-7.989647, -8.003560) "})})})),xz=_e(D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:D.jsx("g",{stroke:"none",fill:"currentColor",children:D.jsx("path",{d:"M15.3062871,3.5 C15.5824294,3.5 15.8062871,3.72385763 15.8062871,4 C15.8062871,4.05374105 15.7976231,4.10713065 15.7806287,4.15811388 L13.113962,12.1581139 C13.045905,12.362285 12.8548356,12.5 12.6396204,12.5 L0.693712943,12.5 C0.417570568,12.5 0.193712943,12.2761424 0.193712943,12 C0.193712943,11.946259 0.202376883,11.8928694 0.219371294,11.8418861 L2.88603796,3.84188612 C2.95409498,3.63771505 3.14516441,3.5 3.36037961,3.5 L15.3062871,3.5 Z M14.335,4.7 L3.864,4.7 L1.664,11.3 L12.134,11.3 L14.335,4.7 Z"})})})),Ez=_e(D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:D.jsx("g",{stroke:"none",fill:"currentColor",children:D.jsx("path",{d:"M11,3 C13.7614237,3 16,5.23857625 16,8 C16,10.7614237 13.7614237,13 11,13 L5,13 C2.23857625,13 0,10.7614237 0,8 C0,5.23857625 2.23857625,3 5,3 L11,3 Z M11,4.2 L5,4.2 C2.90131795,4.2 1.2,5.90131795 1.2,8 C1.2,10.0330982 2.79664702,11.6932796 4.8044525,11.7950555 L5,11.8 L11,11.8 C13.098682,11.8 14.8,10.098682 14.8,8 C14.8,5.96690176 13.203353,4.30672042 11.1955475,4.20494454 L11,4.2 Z"})})})),Pz=_e(D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:D.jsx("g",{stroke:"none",fill:"currentColor",children:D.jsx("path",{d:"M8.55595221,-1.5261864 C8.88741773,-1.5261864 9.15621426,-1.25765205 9.15653772,-0.926186684 L9.16739175,10.3828136 L10.9946787,10.3836977 C11.2708211,10.3836977 11.4946787,10.6075553 11.4946787,10.8836977 C11.4946787,10.9607525 11.4768694,11.0367648 11.4426413,11.1058002 L8.8378495,16.3594519 C8.7642512,16.5078936 8.58425218,16.5685662 8.43581043,16.4949679 C8.37895485,16.4667786 8.33250284,16.4212859 8.30313336,16.3650308 L5.56226325,11.1150985 C5.43446412,10.8703088 5.52930372,10.5682659 5.77409341,10.4404667 C5.84552557,10.4031736 5.92491301,10.3836977 6.0054942,10.3836977 L7.96739175,10.3828136 L7.95653772,-0.926186684 C7.95621467,-1.25723416 8.22431979,-1.52586306 8.55536727,-1.52618611 Z",transform:"translate(8.500035, 7.500035) rotate(-135.000000) translate(-8.500035, -7.500035) "})})})),Sz=_e(D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:D.jsx("g",{stroke:"none",fill:"currentColor",children:D.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51458753,6.62591207 L6.16858753,6.62651279 L6.16914066,12.0061269 C6.16914066,12.3043606 5.95155104,12.5517736 5.66646377,12.5982739 L5.56914066,12.6061269 L0.534587532,12.6061269 C0.203216682,12.6061269 -0.0654124678,12.3374977 -0.0654124678,12.0061269 C-0.0654124678,11.674756 0.203216682,11.4061269 0.534587532,11.4061269 L4.96858753,11.4055128 L4.96914066,6.02651279 C4.96914066,5.72827903 5.18673027,5.48086604 5.47181754,5.43436578 L5.56914066,5.42651279 L9.51458753,5.42591207 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),Dz=_e(D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",version:"1.1",children:D.jsx("g",{stroke:"none",fill:"currentColor",children:D.jsx("path",{d:"M10.0153197,2.75391207 C10.0923746,2.75391207 10.1683869,2.77172133 10.2374222,2.80594949 L15.4910739,5.41074126 C15.6395156,5.48433956 15.7001882,5.66433859 15.6265899,5.81278033 C15.5984006,5.86963592 15.5529079,5.91608792 15.4966529,5.9454574 L10.2467205,8.68632752 C10.0019308,8.81412664 9.69988791,8.71928704 9.57208878,8.47449735 C9.53479568,8.40306519 9.51531974,8.32367776 9.51531974,8.24309656 L9.51423005,6.39035523 C5.97984781,6.85936966 3.21691607,9.08498364 1.18879108,13.1285821 C1.04022695,13.4247836 0.679673152,13.5444674 0.383471635,13.3959033 C0.0872701176,13.2473391 -0.0324136308,12.8867853 0.116150501,12.5905838 C2.34388813,8.14900524 5.48945543,5.65776043 9.51468497,5.18078677 L9.51531974,3.25391207 C9.51531974,2.9777697 9.73917736,2.75391207 10.0153197,2.75391207 Z"})})})),Tz=_e(D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",strokeLinecap:"round",strokeLinejoin:"round",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:D.jsxs("g",{strokeWidth:"1.5",children:[D.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),D.jsx("line",{x1:"4",y1:"6",x2:"20",y2:"6"}),D.jsx("line",{x1:"4",y1:"12",x2:"20",y2:"12"}),D.jsx("line",{x1:"4",y1:"18",x2:"20",y2:"18"})]})})),Az=_e(D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:D.jsxs("g",{strokeWidth:"1.25",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",fill:"none",children:[D.jsx("path",{stroke:"none",d:"M0 0h24v24H0z"}),D.jsx("path",{d:"M15 8h.01"}),D.jsx("path",{d:"M12 20h-5a3 3 0 0 1 -3 -3v-10a3 3 0 0 1 3 -3h10a3 3 0 0 1 3 3v5"}),D.jsx("path",{d:"M4 15l4 -4c.928 -.893 2.072 -.893 3 0l4 4"}),D.jsx("path",{d:"M14 14l1 -1c.617 -.593 1.328 -.793 2.009 -.598"}),D.jsx("path",{d:"M19 16v6"}),D.jsx("path",{d:"M22 19l-3 3l-3 -3"})]})})),Bz=_e(D.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:D.jsx("g",{id:"zoom-out",stroke:"none",fill:"currentColor",strokeWidth:"1",children:D.jsx("path",{fillRule:"nonzero",d:"M6.85,2.73225886e-13 C10.6331505,2.73225886e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.58522109e-14,10.6331505 4.58522109e-14,6.85 C4.58522109e-14,3.06684946 3.06684946,2.73225886e-13 6.85,2.73225886e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M4.6,6.2 L9.12944565,6.2 C9.4608165,6.2 9.72944565,6.46862915 9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L4.6,7.4 C4.26862915,7.4 4,7.13137085 4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L9.12944565,6.2 Z"})})})),Mz=_e(D.jsx("svg",{viewBox:"0 0 16 16",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:D.jsx("g",{id:"zoom-in",stroke:"none",fill:"currentColor",strokeWidth:"1",children:D.jsx("path",{fillRule:"nonzero",d:"M6.85,-1.81188398e-13 C10.6331505,-1.81188398e-13 13.7,3.06684946 13.7,6.85 C13.7,8.54194045 13.0865836,10.0906098 12.0700142,11.2857448 L15.4201976,14.5717081 C15.6567367,14.8037768 15.6603607,15.1836585 15.4282919,15.4201976 C15.1962232,15.6567367 14.8163415,15.6603607 14.5798024,15.4282919 L14.5798024,15.4282919 L11.2163456,12.128262 C10.0309427,13.1099691 8.50937591,13.7 6.85,13.7 C3.06684946,13.7 4.61852778e-14,10.6331505 4.61852778e-14,6.85 C4.61852778e-14,3.06684946 3.06684946,-1.81188398e-13 6.85,-1.81188398e-13 Z M6.85,1.2 C3.72959116,1.2 1.2,3.72959116 1.2,6.85 C1.2,9.97040884 3.72959116,12.5 6.85,12.5 C8.31753357,12.5 9.65438791,11.9404957 10.6588859,11.0231643 C10.6855412,10.9625408 10.7245275,10.9050898 10.7743982,10.8542584 C10.8288931,10.7987137 10.8915387,10.7560124 10.9585649,10.7261903 C11.9144009,9.71595758 12.5,8.35136579 12.5,6.85 C12.5,3.72959116 9.97040884,1.2 6.85,1.2 Z M6.86472282,3.93527718 C7.16295659,3.93527718 7.41036958,4.15286679 7.45686984,4.43795406 L7.46472282,4.53527718 L7.464,6.19927718 L9.12944565,6.2 C9.42767941,6.2 9.6750924,6.41758961 9.72159266,6.70267688 L9.72944565,6.8 C9.72944565,7.09823376 9.51185604,7.34564675 9.22676876,7.39214701 L9.12944565,7.4 L7.464,7.39927718 L7.46472282,9.06472282 C7.46472282,9.36295659 7.24713321,9.61036958 6.96204594,9.65686984 L6.86472282,9.66472282 C6.56648906,9.66472282 6.31907607,9.44713321 6.27257581,9.16204594 L6.26472282,9.06472282 L6.264,7.39927718 L4.6,7.4 C4.30176624,7.4 4.05435325,7.18241039 4.00785299,6.89732312 L4,6.8 C4,6.50176624 4.21758961,6.25435325 4.50267688,6.20785299 L4.6,6.2 L6.264,6.19927718 L6.26472282,4.53527718 C6.26472282,4.2701805 6.43664548,4.0452385 6.67507642,3.96586557 L6.76739971,3.94313016 L6.86472282,3.93527718 Z"})})})),Rz=_e(D.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:D.jsx("g",{id:"save-file",stroke:"none",fill:"currentColor",children:D.jsx("path",{fillRule:"nonzero",d:"M11.064 9.1l2.645 2.595.03-.029.848.849-3.523 3.323-.848-.848 1.994-1.883H7.5v-1.2h4.712l-1.996-1.958.848-.849zM9.356.3L13.7 3.71V7.9h-1.2l-.001-2.633H8.5V1.5L3.1 1.5a.4.4 0 0 0-.392.32L2.7 1.9v12a.4.4 0 0 0 .32.392l.08.008h3.418v1.2H3.1a1.6 1.6 0 0 1-1.593-1.454L1.5 13.9v-12A1.6 1.6 0 0 1 2.954.307L3.1.3h6.256zM9.7 2.095v1.973l2.51-.001L9.7 2.095z"})})})),kz=_e(D.jsx("svg",{viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg",children:D.jsx("g",{id:"save-file",stroke:"currentColor",fill:"none",children:D.jsx("path",{d:"m9.257 6.351.183.183H15.819c.34 0 .727.182 1.051.506.323.323.505.708.505 1.05v5.819c0 .316-.183.7-.52 1.035-.337.338-.723.522-1.037.522H4.182c-.352 0-.74-.181-1.058-.5-.318-.318-.499-.705-.499-1.057V5.182c0-.351.181-.736.5-1.054.32-.321.71-.503 1.057-.503H6.53l2.726 2.726Z",strokeWidth:"1.25"})})})),Oz=_e(D.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",className:"background-color-icon",children:D.jsxs("g",{transform:"translate(1 1)",fillRule:"evenodd",fill:"#000",stroke:"none",children:[D.jsx("circle",{fillOpacity:".04",r:"11",cy:"11",cx:"11"}),D.jsx("path",{d:"M17 20.221V17h3.221A11.06 11.06 0 0 1 17 20.221zm-12 0A11.06 11.06 0 0 1 1.779 17H5v3.221zM20.221 5H17V1.779A11.06 11.06 0 0 1 20.221 5zM9 .181V1H6.411A10.919 10.919 0 0 1 9 .181zM15.589 1H13V.181c.907.167 1.775.445 2.589.819zM13 21.819V21h2.589c-.814.374-1.682.652-2.589.819zm-4 0A10.919 10.919 0 0 1 6.411 21H9v.819zm-8-6.23A10.919 10.919 0 0 1 .181 13H1v2.589zm0-9.178V9H.181C.348 8.093.626 7.225 1 6.411zM21.819 9H21V6.411c.374.814.652 1.682.819 2.589zM21 15.589V13h.819A10.919 10.919 0 0 1 21 15.589zM5 1.779V5H1.779A11.06 11.06 0 0 1 5 1.779zM5 13h4v4H5v-4zm8 0h4v4h-4v-4zM5 5h4v4H5V5zm8 0h4v4h-4V5zm0 12v4H9v-4h4zm8-8v4h-4V9h4zm-8 0v4H9V9h4zM5 9v4H1V9h4zm8-8v4H9V1h4z",fillOpacity:".12"})]})})),Fz=_e(D.jsx("svg",{viewBox:"0 0 32 32",className:"transparent-icon",children:D.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",fillRule:"nonzero",fill:"currentColor",stroke:"none",children:[D.jsx("path",{d:"M2 16c0 7.733 6.267 14 14 14s14-6.267 14-14S23.733 2 16 2 2 8.267 2 16zm-1 0C1 7.716 7.714 1 16 1c8.284 0 15 6.714 15 15 0 8.284-6.714 15-15 15-8.284 0-15-6.714-15-15z"}),D.jsx("path",{d:"M6.354 26.354l-.708-.708 20-20 .708.708z"})]})})),bz=_e(D.jsx("svg",{className:"selected-icon",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:D.jsx("polyline",{points:"20 6 9 17 4 12"})})),Iz=_e(D.jsx("svg",{viewBox:"0 0 24 24",className:"stroke-icon",children:D.jsxs("g",{xmlns:"http://www.w3.org/2000/svg",stroke:"none",fillRule:"evenodd",fill:"#000",children:[D.jsx("path",{d:"M12 5a7 7 0 1 0 0 14 7 7 0 0 0 0-14zm0-4c6.075 0 11 4.925 11 11s-4.925 11-11 11S1 18.075 1 12 5.925 1 12 1z",fillRule:"nonzero",fillOpacity:".04"}),D.jsx("path",{d:"M12 5V1c1.491 0 2.914.297 4.21.835L14.68 5.53A6.979 6.979 0 0 0 12 5zm4.95 2.048l2.828-2.828a11.016 11.016 0 0 1 2.388 3.568l-3.697 1.53a7.01 7.01 0 0 0-1.519-2.27zM19 12h4c0 1.491-.297 2.914-.835 4.21l-3.696-1.53c.342-.826.531-1.73.531-2.68zm-2.05 4.95l2.828 2.828a11.016 11.016 0 0 1-3.567 2.387l-1.532-3.696a7.01 7.01 0 0 0 2.27-1.52zM12 19v4c-1.491 0-2.914-.297-4.21-.835l1.53-3.696c.826.342 1.73.531 2.68.531zm-4.95-2.05l-2.828 2.828a11.016 11.016 0 0 1-2.387-3.567l3.696-1.532a7.01 7.01 0 0 0 1.52 2.27zM5 12H1c0-1.491.297-2.914.835-4.21L5.53 9.32A6.979 6.979 0 0 0 5 12zm2.05-4.95L4.222 4.222a11.016 11.016 0 0 1 3.567-2.387L9.321 5.53a7.01 7.01 0 0 0-2.27 1.52z",fillOpacity:".12"})]})})),Lz=_e(D.jsx("svg",{viewBox:"0 0 24 24",className:"transparent-icon",children:D.jsx("g",{xmlns:"http://www.w3.org/2000/svg",id:"icon-border-white",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",opacity:"0.1",children:D.jsxs("g",{id:"Group",children:[D.jsx("path",{d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,23 C5.92486775,23 1,18.0751322 1,12 C1,5.92486775 5.92486775,1 12,1 C18.0751322,1 23,5.92486775 23,12 C23,18.0751322 18.0751322,23 12,23 Z",fill:"#000000",fillRule:"nonzero"}),D.jsx("path",{d:"M12,19 C15.8659932,19 19,15.8659932 19,12 C19,8.13400675 15.8659932,5 12,5 C8.13400675,5 5,8.13400675 5,12 C5,15.8659932 8.13400675,19 12,19 Z M12,20 C7.581722,20 4,16.418278 4,12 C4,7.581722 7.581722,4 12,4 C16.418278,4 20,7.581722 20,12 C20,16.418278 16.418278,20 12,20 Z",fill:"#000000",fillRule:"nonzero"})]})})})),Gz=_e(D.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:D.jsxs("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:[D.jsx("path",{d:"M-18-19h60v40h-60z"}),D.jsx("path",{d:"M0 0h24v2H0z",fill:"currentColor"})]})})),Nz=_e(D.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:D.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:D.jsx("g",{fill:"currentColor",children:D.jsx("path",{d:"M0 0h6v2H0zM9 0h6v2H9zM18 0h6v2h-6z"})})})})),Hz=_e(D.jsx("svg",{viewBox:"0 0 24 32",xmlns:"http://www.w3.org/2000/svg",children:D.jsx("g",{transform:"translate(0 14)",fillRule:"evenodd",fill:"none",children:D.jsxs("g",{fill:"currentColor",children:[D.jsx("rect",{rx:"1",height:"2",width:"2"}),D.jsx("rect",{rx:"1",x:"4",height:"2",width:"2"}),D.jsx("rect",{rx:"1",x:"8",height:"2",width:"2"}),D.jsx("rect",{rx:"1",x:"12",height:"2",width:"2"}),D.jsx("rect",{rx:"1",x:"16",height:"2",width:"2"}),D.jsx("rect",{rx:"1",x:"20",height:"2",width:"2"})]})})})),$z=({currentColor:e})=>D.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",className:"font-color-icon",children:D.jsxs("g",{id:"font-color",strokeWidth:"1",fillRule:"evenodd",stroke:"none",fill:"currentColor",children:[D.jsx("path",{id:"secondary-color",d:"M1.999 15.011h11.998V13.81H1.999z",fill:e||"#333333"}),D.jsx("path",{d:"M6.034 7.59h4.104L8.086 2.297 6.034 7.59zm-.465 1.2l-1.437 3.707H2.845L7.301 1h1.287l-.001.004h.286l4.454 11.492h-1.288L10.603 8.79H5.569z",id:"A"})]})}),_z=_e(D.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:D.jsx("g",{stroke:"none",fill:"currentColor",children:D.jsx("g",{id:"undo-cion",transform:"translate(1 1)",children:D.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"undo-icon-path"})})})})),jz=_e(D.jsx("svg",{viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:D.jsx("g",{stroke:"none",fill:"currentColor",children:D.jsx("g",{id:"redo-cion",transform:"matrix(-1 0 0 1 15.015 1)",children:D.jsx("path",{d:"M3.84 5.825a.6.6 0 0 1 .063.774l-.064.075a.6.6 0 0 1-.774.063l-.074-.063L.176 3.859a.6.6 0 0 1-.064-.775l.064-.074L3.01.176a.6.6 0 0 1 .912.774l-.063.074-1.795 1.794h6.851a5.1 5.1 0 0 1 .216 10.196l-.216.004h-4a.6.6 0 0 1-.097-1.192l.097-.008h4a3.9 3.9 0 0 0 .201-7.795l-.2-.005H2.033l1.805 1.807z",id:"redo-icon-path"})})})})),Wz=_e(D.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",children:D.jsx("path",{strokeWidth:"1.25",d:"M3.333 5.833h13.334M8.333 9.167v5M11.667 9.167v5M4.167 5.833l.833 10c0 .92.746 1.667 1.667 1.667h6.666c.92 0 1.667-.746 1.667-1.667l.833-10M7.5 5.833v-2.5c0-.46.373-.833.833-.833h3.334c.46 0 .833.373.833.833v2.5"})})),zz=_e(D.jsx("svg",{viewBox:"0 0 20 20",fill:"none",stroke:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:D.jsxs("g",{strokeWidth:"1.25",children:[D.jsx("path",{d:"M14.375 6.458H8.958a2.5 2.5 0 0 0-2.5 2.5v5.417a2.5 2.5 0 0 0 2.5 2.5h5.417a2.5 2.5 0 0 0 2.5-2.5V8.958a2.5 2.5 0 0 0-2.5-2.5Z"}),D.jsx("path",{d:"M11.667 3.125c.517 0 .986.21 1.325.55.34.338.55.807.55 1.325v1.458H8.333c-.485 0-.927.185-1.26.487-.343.312-.57.75-.609 1.24l-.005 5.357H5a1.87 1.87 0 0 1-1.326-.55 1.87 1.87 0 0 1-.549-1.325V5c0-.518.21-.987.55-1.326.338-.34.807-.549 1.325-.549h6.667Z"})]})})),Vz=_e(D.jsx("svg",{viewBox:"0 0 1024 1024",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",children:D.jsx("path",{d:"M170.794667 896c3.456 0 6.912-0.426667 10.325333-1.28l170.666667-42.666667c7.509333-1.877333 14.378667-5.76 19.84-11.221333L896.128 316.330667c16.128-16.128 25.002667-37.546667 25.002667-60.330667s-8.874667-44.202667-25.002667-60.330667L828.458667 128c-32.256-32.256-88.405333-32.256-120.661334 0L183.296 652.501333a42.794667 42.794667 0 0 0-11.221333 19.797334l-42.666667 170.666666A42.666667 42.666667 0 0 0 170.794667 896z m597.333333-707.669333L835.797333 256l-67.669333 67.669333L700.458667 256l67.669333-67.669333zM251.989333 704.469333l388.138667-388.138666L707.797333 384l-388.181333 388.138667-90.197333 22.528 22.570666-90.197334z"})})),Uz=[{icon:vz,title:"Rectangle",pointer:pe.rectangle},{icon:yz,title:"Ellipse",pointer:pe.ellipse},{icon:wz,title:"Triangle",pointer:pe.triangle},{icon:Cz,title:"Diamond",pointer:pe.diamond},{icon:xz,title:"Parallelogram",pointer:pe.parallelogram},{icon:Ez,title:"RoundRectangle",pointer:pe.roundRectangle}],Xz=C7(Uz,5),Kz=({onPointerUp:e})=>{const t=si();return D.jsx(ui,{padding:1,children:D.jsx(vr.Col,{gap:1,children:Xz.map((n,r)=>D.jsx(vr.Row,{gap:1,children:n.map((i,o)=>D.jsx(Bt,{className:lt({fillable:!1}),type:"icon",size:"small",visible:!0,icon:i.icon,title:i.title,"aria-label":i.title,onPointerDown:()=>{no(t,ar.dnd),Je.updatePointerType(t,i.pointer)},onPointerUp:()=>{no(t,ar.drawing),e(i.pointer)}},o))},r))})})},Yz=[{icon:Pz,title:"Straight Arrow Line",pointer:et.straight},{icon:Sz,title:"Elbow Arrow Line",pointer:et.elbow},{icon:Dz,title:"Curve Arrow Line",pointer:et.curve}],qz=({onPointerUp:e})=>{const t=si();return D.jsx(ui,{padding:1,children:D.jsx(vr.Row,{gap:1,children:Yz.map((n,r)=>D.jsx(Bt,{className:lt({fillable:!1}),type:"icon",size:"small",visible:!0,icon:n.icon,title:n.title,"aria-label":n.title,onPointerDown:()=>{no(t,ar.drawing),Je.updatePointerType(t,n.pointer)},onPointerUp:()=>{e(n.pointer)}},r))})})};function r0(){return typeof window<"u"}function Wo(e){return x7(e)?(e.nodeName||"").toLowerCase():"#document"}function Xn(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function li(e){var t;return(t=(x7(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function x7(e){return r0()?e instanceof Node||e instanceof Xn(e).Node:!1}function Ct(e){return r0()?e instanceof Element||e instanceof Xn(e).Element:!1}function Gt(e){return r0()?e instanceof HTMLElement||e instanceof Xn(e).HTMLElement:!1}function bp(e){return!r0()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Xn(e).ShadowRoot}function Mc(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Cr(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function Zz(e){return["table","td","th"].includes(Wo(e))}function i0(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function my(e){const t=o0(),n=Ct(e)?Cr(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Qz(e){let t=Li(e);for(;Gt(t)&&!Ao(t);){if(my(t))return t;if(i0(t))return null;t=Li(t)}return null}function o0(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Ao(e){return["html","body","#document"].includes(Wo(e))}function Cr(e){return Xn(e).getComputedStyle(e)}function s0(e){return Ct(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Li(e){if(Wo(e)==="html")return e;const t=e.assignedSlot||e.parentNode||bp(e)&&e.host||li(e);return bp(t)?t.host:t}function E7(e){const t=Li(e);return Ao(t)?e.ownerDocument?e.ownerDocument.body:e.body:Gt(t)&&Mc(t)?t:E7(t)}function go(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=E7(e),o=i===((r=e.ownerDocument)==null?void 0:r.body),s=Xn(i);if(o){const u=Ip(s);return t.concat(s,s.visualViewport||[],Mc(i)?i:[],u&&n?go(u):[])}return t.concat(i,go(i,[],n))}function Ip(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Jo(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function $n(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&bp(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Jz(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function P7(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function eV(e){return e.mozInputSource===0&&e.isTrusted?!0:Lp()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function tV(e){return rV()?!1:!Lp()&&e.width===0&&e.height===0||Lp()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function nV(){return/apple/i.test(navigator.vendor)}function Lp(){const e=/android/i;return e.test(Jz())||e.test(P7())}function rV(){return P7().includes("jsdom/")}function tE(e,t){return["mouse","pen"].includes(e)}function iV(e){return"nativeEvent"in e}function oV(e){return e.matches("html,body")}function Ar(e){return(e==null?void 0:e.ownerDocument)||document}function Sg(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function ts(e){return"composedPath"in e?e.composedPath()[0]:e.target}const sV="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function S7(e){return Gt(e)&&e.matches(sV)}function Dg(e){e.preventDefault(),e.stopPropagation()}function uV(e){return e?e.getAttribute("role")==="combobox"&&S7(e):!1}const Qh=Math.min,vs=Math.max,Jh=Math.round,mf=Math.floor,ti=e=>({x:e,y:e}),lV={left:"right",right:"left",bottom:"top",top:"bottom"},aV={start:"end",end:"start"};function nE(e,t,n){return vs(e,Qh(t,n))}function u0(e,t){return typeof e=="function"?e(t):e}function bs(e){return e.split("-")[0]}function l0(e){return e.split("-")[1]}function D7(e){return e==="x"?"y":"x"}function T7(e){return e==="y"?"height":"width"}function ol(e){return["top","bottom"].includes(bs(e))?"y":"x"}function A7(e){return D7(ol(e))}function cV(e,t,n){n===void 0&&(n=!1);const r=l0(e),i=A7(e),o=T7(i);let s=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[o]>t.floating[o]&&(s=ed(s)),[s,ed(s)]}function fV(e){const t=ed(e);return[Gp(e),t,Gp(t)]}function Gp(e){return e.replace(/start|end/g,t=>aV[t])}function hV(e,t,n){const r=["left","right"],i=["right","left"],o=["top","bottom"],s=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?o:s;default:return[]}}function dV(e,t,n,r){const i=l0(e);let o=hV(bs(e),n==="start",r);return i&&(o=o.map(s=>s+"-"+i),t&&(o=o.concat(o.map(Gp)))),o}function ed(e){return e.replace(/left|right|bottom|top/g,t=>lV[t])}function gV(e){return{top:0,right:0,bottom:0,left:0,...e}}function pV(e){return typeof e!="number"?gV(e):{top:e,right:e,bottom:e,left:e}}function td(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var mV=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],nd=mV.join(","),B7=typeof Element>"u",sl=B7?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,rd=!B7&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},id=function e(t,n){var r;n===void 0&&(n=!0);var i=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),o=i===""||i==="true",s=o||n&&t&&e(t.parentNode);return s},vV=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},yV=function(t,n,r){if(id(t))return[];var i=Array.prototype.slice.apply(t.querySelectorAll(nd));return n&&sl.call(t,nd)&&i.unshift(t),i=i.filter(r),i},wV=function e(t,n,r){for(var i=[],o=Array.from(t);o.length;){var s=o.shift();if(!id(s,!1))if(s.tagName==="SLOT"){var u=s.assignedElements(),l=u.length?u:s.children,a=e(l,!0,r);r.flatten?i.push.apply(i,a):i.push({scopeParent:s,candidates:a})}else{var c=sl.call(s,nd);c&&r.filter(s)&&(n||!t.includes(s))&&i.push(s);var f=s.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(s),h=!id(f,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(f&&h){var g=e(f===!0?s.children:f.children,!0,r);r.flatten?i.push.apply(i,g):i.push({scopeParent:s,candidates:g})}else o.unshift.apply(o,s.children)}}return i},M7=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},R7=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||vV(t))&&!M7(t)?0:t.tabIndex},CV=function(t,n){var r=R7(t);return r<0&&n&&!M7(t)?0:r},xV=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},k7=function(t){return t.tagName==="INPUT"},EV=function(t){return k7(t)&&t.type==="hidden"},PV=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},SV=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},DV=function(t){if(!t.name)return!0;var n=t.form||rd(t),r=function(u){return n.querySelectorAll('input[type="radio"][name="'+u+'"]')},i;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")i=r(window.CSS.escape(t.name));else try{i=r(t.name)}catch(s){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",s.message),!1}var o=SV(i,t.form);return!o||o===t},TV=function(t){return k7(t)&&t.type==="radio"},AV=function(t){return TV(t)&&!DV(t)},BV=function(t){var n,r=t&&rd(t),i=(n=r)===null||n===void 0?void 0:n.host,o=!1;if(r&&r!==t){var s,u,l;for(o=!!((s=i)!==null&&s!==void 0&&(u=s.ownerDocument)!==null&&u!==void 0&&u.contains(i)||t!=null&&(l=t.ownerDocument)!==null&&l!==void 0&&l.contains(t));!o&&i;){var a,c,f;r=rd(i),i=(a=r)===null||a===void 0?void 0:a.host,o=!!((c=i)!==null&&c!==void 0&&(f=c.ownerDocument)!==null&&f!==void 0&&f.contains(i))}}return o},rE=function(t){var n=t.getBoundingClientRect(),r=n.width,i=n.height;return r===0&&i===0},MV=function(t,n){var r=n.displayCheck,i=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var o=sl.call(t,"details>summary:first-of-type"),s=o?t.parentElement:t;if(sl.call(s,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof i=="function"){for(var u=t;t;){var l=t.parentElement,a=rd(t);if(l&&!l.shadowRoot&&i(l)===!0)return rE(t);t.assignedSlot?t=t.assignedSlot:!l&&a!==t.ownerDocument?t=a.host:t=l}t=u}if(BV(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return rE(t);return!1},RV=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var i=n.children.item(r);if(i.tagName==="LEGEND")return sl.call(n,"fieldset[disabled] *")?!0:!i.contains(t)}return!0}n=n.parentElement}return!1},kV=function(t,n){return!(n.disabled||id(n)||EV(n)||MV(n,t)||PV(n)||RV(n))},Np=function(t,n){return!(AV(n)||R7(n)<0||!kV(t,n))},OV=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},FV=function e(t){var n=[],r=[];return t.forEach(function(i,o){var s=!!i.scopeParent,u=s?i.scopeParent:i,l=CV(u,s),a=s?e(i.candidates):u;l===0?s?n.push.apply(n,a):n.push(u):r.push({documentOrder:o,tabIndex:l,item:i,isScope:s,content:a})}),r.sort(xV).reduce(function(i,o){return o.isScope?i.push.apply(i,o.content):i.push(o.content),i},[]).concat(n)},a0=function(t,n){n=n||{};var r;return n.getShadowRoot?r=wV([t],n.includeContainer,{filter:Np.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:OV}):r=yV(t,n.includeContainer,Np.bind(null,n)),FV(r)},bV=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return sl.call(t,nd)===!1?!1:Np(n,t)};function iE(e,t,n){let{reference:r,floating:i}=e;const o=ol(t),s=A7(t),u=T7(s),l=bs(t),a=o==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,h=r[u]/2-i[u]/2;let g;switch(l){case"top":g={x:c,y:r.y-i.height};break;case"bottom":g={x:c,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:f};break;case"left":g={x:r.x-i.width,y:f};break;default:g={x:r.x,y:r.y}}switch(l0(t)){case"start":g[s]-=h*(n&&a?-1:1);break;case"end":g[s]+=h*(n&&a?-1:1);break}return g}const IV=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:o=[],platform:s}=n,u=o.filter(Boolean),l=await(s.isRTL==null?void 0:s.isRTL(t));let a=await s.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=iE(a,r,l),h=r,g={},p=0;for(let d=0;d<u.length;d++){const{name:y,fn:m}=u[d],{x:v,y:w,data:E,reset:S}=await m({x:c,y:f,initialPlacement:r,placement:h,strategy:i,middlewareData:g,rects:a,platform:s,elements:{reference:e,floating:t}});c=v??c,f=w??f,g={...g,[y]:{...g[y],...E}},S&&p<=50&&(p++,typeof S=="object"&&(S.placement&&(h=S.placement),S.rects&&(a=S.rects===!0?await s.getElementRects({reference:e,floating:t,strategy:i}):S.rects),{x:c,y:f}=iE(a,h,l)),d=-1)}return{x:c,y:f,placement:h,strategy:i,middlewareData:g}};async function O7(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:o,rects:s,elements:u,strategy:l}=e,{boundary:a="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:h=!1,padding:g=0}=u0(t,e),p=pV(g),y=u[h?f==="floating"?"reference":"floating":f],m=td(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(y)))==null||n?y:y.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(u.floating)),boundary:a,rootBoundary:c,strategy:l})),v=f==="floating"?{x:r,y:i,width:s.floating.width,height:s.floating.height}:s.reference,w=await(o.getOffsetParent==null?void 0:o.getOffsetParent(u.floating)),E=await(o.isElement==null?void 0:o.isElement(w))?await(o.getScale==null?void 0:o.getScale(w))||{x:1,y:1}:{x:1,y:1},S=td(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:u,rect:v,offsetParent:w,strategy:l}):v);return{top:(m.top-S.top+p.top)/E.y,bottom:(S.bottom-m.bottom+p.bottom)/E.y,left:(m.left-S.left+p.left)/E.x,right:(S.right-m.right+p.right)/E.x}}const LV=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:o,rects:s,initialPlacement:u,platform:l,elements:a}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:h,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:d=!0,...y}=u0(e,t);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const m=bs(i),v=ol(u),w=bs(u)===u,E=await(l.isRTL==null?void 0:l.isRTL(a.floating)),S=h||(w||!d?[ed(u)]:fV(u)),T=p!=="none";!h&&T&&S.push(...dV(u,d,p,E));const B=[u,...S],R=await O7(t,y),b=[];let O=((r=o.flip)==null?void 0:r.overflows)||[];if(c&&b.push(R[m]),f){const z=cV(i,s,E);b.push(R[z[0]],R[z[1]])}if(O=[...O,{placement:i,overflows:b}],!b.every(z=>z<=0)){var V,L;const z=(((V=o.flip)==null?void 0:V.index)||0)+1,_=B[z];if(_)return{data:{index:z,overflows:O},reset:{placement:_}};let J=(L=O.filter(Z=>Z.overflows[0]<=0).sort((Z,N)=>Z.overflows[1]-N.overflows[1])[0])==null?void 0:L.placement;if(!J)switch(g){case"bestFit":{var W;const Z=(W=O.filter(N=>{if(T){const F=ol(N.placement);return F===v||F==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(F=>F>0).reduce((F,U)=>F+U,0)]).sort((N,F)=>N[1]-F[1])[0])==null?void 0:W[0];Z&&(J=Z);break}case"initialPlacement":J=u;break}if(i!==J)return{reset:{placement:J}}}return{}}}};async function GV(e,t){const{placement:n,platform:r,elements:i}=e,o=await(r.isRTL==null?void 0:r.isRTL(i.floating)),s=bs(n),u=l0(n),l=ol(n)==="y",a=["left","top"].includes(s)?-1:1,c=o&&l?-1:1,f=u0(t,e);let{mainAxis:h,crossAxis:g,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:f.mainAxis||0,crossAxis:f.crossAxis||0,alignmentAxis:f.alignmentAxis};return u&&typeof p=="number"&&(g=u==="end"?p*-1:p),l?{x:g*c,y:h*a}:{x:h*a,y:g*c}}const NV=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:o,placement:s,middlewareData:u}=t,l=await GV(t,e);return s===((n=u.offset)==null?void 0:n.placement)&&(r=u.arrow)!=null&&r.alignmentOffset?{}:{x:i+l.x,y:o+l.y,data:{...l,placement:s}}}}},HV=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:o=!0,crossAxis:s=!1,limiter:u={fn:y=>{let{x:m,y:v}=y;return{x:m,y:v}}},...l}=u0(e,t),a={x:n,y:r},c=await O7(t,l),f=ol(bs(i)),h=D7(f);let g=a[h],p=a[f];if(o){const y=h==="y"?"top":"left",m=h==="y"?"bottom":"right",v=g+c[y],w=g-c[m];g=nE(v,g,w)}if(s){const y=f==="y"?"top":"left",m=f==="y"?"bottom":"right",v=p+c[y],w=p-c[m];p=nE(v,p,w)}const d=u.fn({...t,[h]:g,[f]:p});return{...d,data:{x:d.x-n,y:d.y-r,enabled:{[h]:o,[f]:s}}}}}};function F7(e){const t=Cr(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Gt(e),o=i?e.offsetWidth:n,s=i?e.offsetHeight:r,u=Jh(n)!==o||Jh(r)!==s;return u&&(n=o,r=s),{width:n,height:r,$:u}}function vy(e){return Ct(e)?e:e.contextElement}function Nu(e){const t=vy(e);if(!Gt(t))return ti(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:o}=F7(t);let s=(o?Jh(n.width):n.width)/r,u=(o?Jh(n.height):n.height)/i;return(!s||!Number.isFinite(s))&&(s=1),(!u||!Number.isFinite(u))&&(u=1),{x:s,y:u}}const $V=ti(0);function b7(e){const t=Xn(e);return!o0()||!t.visualViewport?$V:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function _V(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Xn(e)?!1:t}function Is(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),o=vy(e);let s=ti(1);t&&(r?Ct(r)&&(s=Nu(r)):s=Nu(e));const u=_V(o,n,r)?b7(o):ti(0);let l=(i.left+u.x)/s.x,a=(i.top+u.y)/s.y,c=i.width/s.x,f=i.height/s.y;if(o){const h=Xn(o),g=r&&Ct(r)?Xn(r):r;let p=h,d=Ip(p);for(;d&&r&&g!==p;){const y=Nu(d),m=d.getBoundingClientRect(),v=Cr(d),w=m.left+(d.clientLeft+parseFloat(v.paddingLeft))*y.x,E=m.top+(d.clientTop+parseFloat(v.paddingTop))*y.y;l*=y.x,a*=y.y,c*=y.x,f*=y.y,l+=w,a+=E,p=Xn(d),d=Ip(p)}}return td({width:c,height:f,x:l,y:a})}function yy(e,t){const n=s0(e).scrollLeft;return t?t.left+n:Is(li(e)).left+n}function I7(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),i=r.left+t.scrollLeft-(n?0:yy(e,r)),o=r.top+t.scrollTop;return{x:i,y:o}}function jV(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const o=i==="fixed",s=li(r),u=t?i0(t.floating):!1;if(r===s||u&&o)return n;let l={scrollLeft:0,scrollTop:0},a=ti(1);const c=ti(0),f=Gt(r);if((f||!f&&!o)&&((Wo(r)!=="body"||Mc(s))&&(l=s0(r)),Gt(r))){const g=Is(r);a=Nu(r),c.x=g.x+r.clientLeft,c.y=g.y+r.clientTop}const h=s&&!f&&!o?I7(s,l,!0):ti(0);return{width:n.width*a.x,height:n.height*a.y,x:n.x*a.x-l.scrollLeft*a.x+c.x+h.x,y:n.y*a.y-l.scrollTop*a.y+c.y+h.y}}function WV(e){return Array.from(e.getClientRects())}function zV(e){const t=li(e),n=s0(e),r=e.ownerDocument.body,i=vs(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),o=vs(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let s=-n.scrollLeft+yy(e);const u=-n.scrollTop;return Cr(r).direction==="rtl"&&(s+=vs(t.clientWidth,r.clientWidth)-i),{width:i,height:o,x:s,y:u}}function VV(e,t){const n=Xn(e),r=li(e),i=n.visualViewport;let o=r.clientWidth,s=r.clientHeight,u=0,l=0;if(i){o=i.width,s=i.height;const a=o0();(!a||a&&t==="fixed")&&(u=i.offsetLeft,l=i.offsetTop)}return{width:o,height:s,x:u,y:l}}function UV(e,t){const n=Is(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,o=Gt(e)?Nu(e):ti(1),s=e.clientWidth*o.x,u=e.clientHeight*o.y,l=i*o.x,a=r*o.y;return{width:s,height:u,x:l,y:a}}function oE(e,t,n){let r;if(t==="viewport")r=VV(e,n);else if(t==="document")r=zV(li(e));else if(Ct(t))r=UV(t,n);else{const i=b7(e);r={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return td(r)}function L7(e,t){const n=Li(e);return n===t||!Ct(n)||Ao(n)?!1:Cr(n).position==="fixed"||L7(n,t)}function XV(e,t){const n=t.get(e);if(n)return n;let r=go(e,[],!1).filter(u=>Ct(u)&&Wo(u)!=="body"),i=null;const o=Cr(e).position==="fixed";let s=o?Li(e):e;for(;Ct(s)&&!Ao(s);){const u=Cr(s),l=my(s);!l&&u.position==="fixed"&&(i=null),(o?!l&&!i:!l&&u.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Mc(s)&&!l&&L7(e,s))?r=r.filter(c=>c!==s):i=u,s=Li(s)}return t.set(e,r),r}function KV(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const s=[...n==="clippingAncestors"?i0(t)?[]:XV(t,this._c):[].concat(n),r],u=s[0],l=s.reduce((a,c)=>{const f=oE(t,c,i);return a.top=vs(f.top,a.top),a.right=Qh(f.right,a.right),a.bottom=Qh(f.bottom,a.bottom),a.left=vs(f.left,a.left),a},oE(t,u,i));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function YV(e){const{width:t,height:n}=F7(e);return{width:t,height:n}}function qV(e,t,n){const r=Gt(t),i=li(t),o=n==="fixed",s=Is(e,!0,o,t);let u={scrollLeft:0,scrollTop:0};const l=ti(0);if(r||!r&&!o)if((Wo(t)!=="body"||Mc(i))&&(u=s0(t)),r){const h=Is(t,!0,o,t);l.x=h.x+t.clientLeft,l.y=h.y+t.clientTop}else i&&(l.x=yy(i));const a=i&&!r&&!o?I7(i,u):ti(0),c=s.left+u.scrollLeft-l.x-a.x,f=s.top+u.scrollTop-l.y-a.y;return{x:c,y:f,width:s.width,height:s.height}}function Tg(e){return Cr(e).position==="static"}function sE(e,t){if(!Gt(e)||Cr(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return li(e)===n&&(n=n.ownerDocument.body),n}function G7(e,t){const n=Xn(e);if(i0(e))return n;if(!Gt(e)){let i=Li(e);for(;i&&!Ao(i);){if(Ct(i)&&!Tg(i))return i;i=Li(i)}return n}let r=sE(e,t);for(;r&&Zz(r)&&Tg(r);)r=sE(r,t);return r&&Ao(r)&&Tg(r)&&!my(r)?n:r||Qz(e)||n}const ZV=async function(e){const t=this.getOffsetParent||G7,n=this.getDimensions,r=await n(e.floating);return{reference:qV(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function QV(e){return Cr(e).direction==="rtl"}const JV={convertOffsetParentRelativeRectToViewportRelativeRect:jV,getDocumentElement:li,getClippingRect:KV,getOffsetParent:G7,getElementRects:ZV,getClientRects:WV,getDimensions:YV,getScale:Nu,isElement:Ct,isRTL:QV};function eU(e,t){let n=null,r;const i=li(e);function o(){var u;clearTimeout(r),(u=n)==null||u.disconnect(),n=null}function s(u,l){u===void 0&&(u=!1),l===void 0&&(l=1),o();const{left:a,top:c,width:f,height:h}=e.getBoundingClientRect();if(u||t(),!f||!h)return;const g=mf(c),p=mf(i.clientWidth-(a+f)),d=mf(i.clientHeight-(c+h)),y=mf(a),v={rootMargin:-g+"px "+-p+"px "+-d+"px "+-y+"px",threshold:vs(0,Qh(1,l))||1};let w=!0;function E(S){const T=S[0].intersectionRatio;if(T!==l){if(!w)return s();T?s(!1,T):r=setTimeout(()=>{s(!1,1e-7)},1e3)}w=!1}try{n=new IntersectionObserver(E,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(E,v)}n.observe(e)}return s(!0),o}function tU(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:o=!0,elementResize:s=typeof ResizeObserver=="function",layoutShift:u=typeof IntersectionObserver=="function",animationFrame:l=!1}=r,a=vy(e),c=i||o?[...a?go(a):[],...go(t)]:[];c.forEach(m=>{i&&m.addEventListener("scroll",n,{passive:!0}),o&&m.addEventListener("resize",n)});const f=a&&u?eU(a,n):null;let h=-1,g=null;s&&(g=new ResizeObserver(m=>{let[v]=m;v&&v.target===a&&g&&(g.unobserve(t),cancelAnimationFrame(h),h=requestAnimationFrame(()=>{var w;(w=g)==null||w.observe(t)})),n()}),a&&!l&&g.observe(a),g.observe(t));let p,d=l?Is(e):null;l&&y();function y(){const m=Is(e);d&&(m.x!==d.x||m.y!==d.y||m.width!==d.width||m.height!==d.height)&&n(),d=m,p=requestAnimationFrame(y)}return n(),()=>{var m;c.forEach(v=>{i&&v.removeEventListener("scroll",n),o&&v.removeEventListener("resize",n)}),f==null||f(),(m=g)==null||m.disconnect(),g=null,l&&cancelAnimationFrame(p)}}const nU=NV,rU=HV,iU=LV,oU=(e,t,n)=>{const r=new Map,i={platform:JV,...n},o={...i.platform,_c:r};return IV(e,t,{...i,platform:o})};var Vf=typeof document<"u"?A.useLayoutEffect:A.useEffect;function od(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!od(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const o=i[r];if(!(o==="_owner"&&e.$$typeof)&&!od(e[o],t[o]))return!1}return!0}return e!==e&&t!==t}function N7(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function uE(e,t){const n=N7(e);return Math.round(t*n)/n}function Ag(e){const t=A.useRef(e);return Vf(()=>{t.current=e}),t}function sU(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:o,floating:s}={},transform:u=!0,whileElementsMounted:l,open:a}=e,[c,f]=A.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[h,g]=A.useState(r);od(h,r)||g(r);const[p,d]=A.useState(null),[y,m]=A.useState(null),v=A.useCallback(N=>{N!==T.current&&(T.current=N,d(N))},[]),w=A.useCallback(N=>{N!==B.current&&(B.current=N,m(N))},[]),E=o||p,S=s||y,T=A.useRef(null),B=A.useRef(null),R=A.useRef(c),b=l!=null,O=Ag(l),V=Ag(i),L=Ag(a),W=A.useCallback(()=>{if(!T.current||!B.current)return;const N={placement:t,strategy:n,middleware:h};V.current&&(N.platform=V.current),oU(T.current,B.current,N).then(F=>{const U={...F,isPositioned:L.current!==!1};z.current&&!od(R.current,U)&&(R.current=U,Dd.flushSync(()=>{f(U)}))})},[h,t,n,V,L]);Vf(()=>{a===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,f(N=>({...N,isPositioned:!1})))},[a]);const z=A.useRef(!1);Vf(()=>(z.current=!0,()=>{z.current=!1}),[]),Vf(()=>{if(E&&(T.current=E),S&&(B.current=S),E&&S){if(O.current)return O.current(E,S,W);W()}},[E,S,W,O,b]);const _=A.useMemo(()=>({reference:T,floating:B,setReference:v,setFloating:w}),[v,w]),J=A.useMemo(()=>({reference:E,floating:S}),[E,S]),Z=A.useMemo(()=>{const N={position:n,left:0,top:0};if(!J.floating)return N;const F=uE(J.floating,c.x),U=uE(J.floating,c.y);return u?{...N,transform:"translate("+F+"px, "+U+"px)",...N7(J.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:F,top:U}},[n,u,J.floating,c.x,c.y]);return A.useMemo(()=>({...c,update:W,refs:_,elements:J,floatingStyles:Z}),[c,W,_,J,Z])}const H7=(e,t)=>({...nU(e),options:[e,t]}),uU=(e,t)=>({...rU(e),options:[e,t]}),$7=(e,t)=>({...iU(e),options:[e,t]});function _7(e){return A.useMemo(()=>e.every(t=>t==null)?null:t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})},e)}const j7={...IA},lU=j7.useInsertionEffect,aU=lU||(e=>e());function Qi(e){const t=A.useRef(()=>{});return aU(()=>{t.current=e}),A.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var fr=typeof document<"u"?A.useLayoutEffect:A.useEffect;function sd(){return sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sd.apply(this,arguments)}let lE=!1,cU=0;const aE=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+cU++;function fU(){const[e,t]=A.useState(()=>lE?aE():void 0);return fr(()=>{e==null&&t(aE())},[]),A.useEffect(()=>{lE=!0},[]),e}const hU=j7.useId,wy=hU||fU;function dU(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const gU=A.createContext(null),pU=A.createContext(null),W7=()=>{var e;return((e=A.useContext(gU))==null?void 0:e.id)||null},Cy=()=>A.useContext(pU);function rc(e){return"data-floating-ui-"+e}function Bg(e){const t=A.useRef(e);return fr(()=>{t.current=e}),t}let cE=0;function nu(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:i=!1}=t;r&&cancelAnimationFrame(cE);const o=()=>e==null?void 0:e.focus({preventScroll:n});i?o():cE=requestAnimationFrame(o)}function mU(e,t){var n;let r=[],i=(n=e.find(o=>o.id===t))==null?void 0:n.parentId;for(;i;){const o=e.find(s=>s.id===i);i=o==null?void 0:o.parentId,o&&(r=r.concat(o))}return r}function ga(e,t){let n=e.filter(i=>{var o;return i.parentId===t&&((o=i.context)==null?void 0:o.open)}),r=n;for(;r.length;)r=e.filter(i=>{var o;return(o=r)==null?void 0:o.some(s=>{var u;return i.parentId===s.id&&((u=i.context)==null?void 0:u.open)})}),n=n.concat(r);return n}let ru=new WeakMap,vf=new WeakSet,yf={},Mg=0;const vU=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,z7=e=>e&&(e.host||z7(e.parentNode)),yU=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=z7(n);return e.contains(r)?r:null}).filter(n=>n!=null);function wU(e,t,n,r){const i="data-floating-ui-inert",o=r?"inert":n?"aria-hidden":null,s=yU(t,e),u=new Set,l=new Set(s),a=[];yf[i]||(yf[i]=new WeakMap);const c=yf[i];s.forEach(f),h(t),u.clear();function f(g){!g||u.has(g)||(u.add(g),g.parentNode&&f(g.parentNode))}function h(g){!g||l.has(g)||[].forEach.call(g.children,p=>{if(Wo(p)!=="script")if(u.has(p))h(p);else{const d=o?p.getAttribute(o):null,y=d!==null&&d!=="false",m=(ru.get(p)||0)+1,v=(c.get(p)||0)+1;ru.set(p,m),c.set(p,v),a.push(p),m===1&&y&&vf.add(p),v===1&&p.setAttribute(i,""),!y&&o&&p.setAttribute(o,"true")}})}return Mg++,()=>{a.forEach(g=>{const p=(ru.get(g)||0)-1,d=(c.get(g)||0)-1;ru.set(g,p),c.set(g,d),p||(!vf.has(g)&&o&&g.removeAttribute(o),vf.delete(g)),d||g.removeAttribute(i)}),Mg--,Mg||(ru=new WeakMap,ru=new WeakMap,vf=new WeakSet,yf={})}}function fE(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=Ar(e[0]).body;return wU(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const ic=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function V7(e,t){const n=a0(e,ic());t==="prev"&&n.reverse();const r=n.indexOf(Jo(Ar(e)));return n.slice(r+1)[0]}function U7(){return V7(document.body,"next")}function X7(){return V7(document.body,"prev")}function pa(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!$n(n,r)}function CU(e){a0(e,ic()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function hE(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const c0={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let xU;function dE(e){e.key==="Tab"&&(e.target,clearTimeout(xU))}const ud=A.forwardRef(function(t,n){const[r,i]=A.useState();fr(()=>(nV()&&i("button"),document.addEventListener("keydown",dE),()=>{document.removeEventListener("keydown",dE)}),[]);const o={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[rc("focus-guard")]:"",style:c0};return A.createElement("span",sd({},t,o))}),K7=A.createContext(null),gE=rc("portal");function EU(e){e===void 0&&(e={});const{id:t,root:n}=e,r=wy(),i=Y7(),[o,s]=A.useState(null),u=A.useRef(null);return fr(()=>()=>{o==null||o.remove(),queueMicrotask(()=>{u.current=null})},[o]),fr(()=>{if(!r||u.current)return;const l=t?document.getElementById(t):null;if(!l)return;const a=document.createElement("div");a.id=r,a.setAttribute(gE,""),l.appendChild(a),u.current=a,s(a)},[t,r]),fr(()=>{if(n===null||!r||u.current)return;let l=n||(i==null?void 0:i.portalNode);l&&!Ct(l)&&(l=l.current),l=l||document.body;let a=null;t&&(a=document.createElement("div"),a.id=t,l.appendChild(a));const c=document.createElement("div");c.id=r,c.setAttribute(gE,""),l=a||l,l.appendChild(c),u.current=c,s(c)},[t,n,r,i]),o}function PU(e){const{children:t,id:n,root:r,preserveTabOrder:i=!0}=e,o=EU({id:n,root:r}),[s,u]=A.useState(null),l=A.useRef(null),a=A.useRef(null),c=A.useRef(null),f=A.useRef(null),h=s==null?void 0:s.modal,g=s==null?void 0:s.open,p=!!s&&!s.modal&&s.open&&i&&!!(r||o);return A.useEffect(()=>{if(!o||!i||h)return;function d(y){o&&pa(y)&&(y.type==="focusin"?hE:CU)(o)}return o.addEventListener("focusin",d,!0),o.addEventListener("focusout",d,!0),()=>{o.removeEventListener("focusin",d,!0),o.removeEventListener("focusout",d,!0)}},[o,i,h]),A.useEffect(()=>{o&&(g||hE(o))},[g,o]),A.createElement(K7.Provider,{value:A.useMemo(()=>({preserveTabOrder:i,beforeOutsideRef:l,afterOutsideRef:a,beforeInsideRef:c,afterInsideRef:f,portalNode:o,setFocusManagerState:u}),[i,o])},p&&o&&A.createElement(ud,{"data-type":"outside",ref:l,onFocus:d=>{if(pa(d,o)){var y;(y=c.current)==null||y.focus()}else{const m=X7()||(s==null?void 0:s.refs.domReference.current);m==null||m.focus()}}}),p&&o&&A.createElement("span",{"aria-owns":o.id,style:c0}),o&&Dd.createPortal(t,o),p&&o&&A.createElement(ud,{"data-type":"outside",ref:a,onFocus:d=>{if(pa(d,o)){var y;(y=f.current)==null||y.focus()}else{const m=U7()||(s==null?void 0:s.refs.domReference.current);m==null||m.focus(),s!=null&&s.closeOnFocusOut&&(s==null||s.onOpenChange(!1,d.nativeEvent,"focus-out"))}}}))}const Y7=()=>A.useContext(K7),Hp="data-floating-ui-focusable";function SU(e){return e?e.hasAttribute(Hp)?e:e.querySelector("["+Hp+"]")||e:null}const pE=20;let es=[];function Rg(e){es=es.filter(n=>n.isConnected);let t=e;if(!(!t||Wo(t)==="body")){if(!bV(t,ic())){const n=a0(t,ic())[0];n&&(t=n)}es.push(t),es.length>pE&&(es=es.slice(-pE))}}function mE(){return es.slice().reverse().find(e=>e.isConnected)}const DU=A.forwardRef(function(t,n){return A.createElement("button",sd({},t,{type:"button",ref:n,tabIndex:-1,style:c0}))});function TU(e){const{context:t,children:n,disabled:r=!1,order:i=["content"],guards:o=!0,initialFocus:s=0,returnFocus:u=!0,restoreFocus:l=!1,modal:a=!0,visuallyHiddenDismiss:c=!1,closeOnFocusOut:f=!0}=e,{open:h,refs:g,nodeId:p,onOpenChange:d,events:y,dataRef:m,floatingId:v,elements:{domReference:w,floating:E}}=t,S=typeof s=="number"&&s<0,T=uV(w)&&S,B=vU()?o:!0,R=Bg(i),b=Bg(s),O=Bg(u),V=Cy(),L=Y7(),W=A.useRef(null),z=A.useRef(null),_=A.useRef(!1),J=A.useRef(!1),Z=A.useRef(-1),N=L!=null,F=SU(E),U=Qi(function(te){return te===void 0&&(te=F),te?a0(te,ic()):[]}),se=Qi(te=>{const k=U(te);return R.current.map(H=>w&&H==="reference"?w:F&&H==="floating"?F:k).filter(Boolean).flat()});A.useEffect(()=>{if(r||!a)return;function te(H){if(H.key==="Tab"){$n(F,Jo(Ar(F)))&&U().length===0&&!T&&Dg(H);const j=se(),Y=ts(H);R.current[0]==="reference"&&Y===w&&(Dg(H),H.shiftKey?nu(j[j.length-1]):nu(j[1])),R.current[1]==="floating"&&Y===F&&H.shiftKey&&(Dg(H),nu(j[0]))}}const k=Ar(F);return k.addEventListener("keydown",te),()=>{k.removeEventListener("keydown",te)}},[r,w,F,a,R,T,U,se]),A.useEffect(()=>{if(r||!E)return;function te(k){const H=ts(k),Y=U().indexOf(H);Y!==-1&&(Z.current=Y)}return E.addEventListener("focusin",te),()=>{E.removeEventListener("focusin",te)}},[r,E,U]),A.useEffect(()=>{if(r||!f)return;function te(){J.current=!0,setTimeout(()=>{J.current=!1})}function k(H){const j=H.relatedTarget;queueMicrotask(()=>{const Y=!($n(w,j)||$n(E,j)||$n(j,E)||$n(L==null?void 0:L.portalNode,j)||j!=null&&j.hasAttribute(rc("focus-guard"))||V&&(ga(V.nodesRef.current,p).find(ve=>{var ie,be;return $n((ie=ve.context)==null?void 0:ie.elements.floating,j)||$n((be=ve.context)==null?void 0:be.elements.domReference,j)})||mU(V.nodesRef.current,p).find(ve=>{var ie,be;return((ie=ve.context)==null?void 0:ie.elements.floating)===j||((be=ve.context)==null?void 0:be.elements.domReference)===j})));if(l&&Y&&Jo(Ar(F))===Ar(F).body){Gt(F)&&F.focus();const ve=Z.current,ie=U(),be=ie[ve]||ie[ie.length-1]||F;Gt(be)&&be.focus()}(T||!a)&&j&&Y&&!J.current&&j!==mE()&&(_.current=!0,d(!1,H,"focus-out"))})}if(E&&Gt(w))return w.addEventListener("focusout",k),w.addEventListener("pointerdown",te),E.addEventListener("focusout",k),()=>{w.removeEventListener("focusout",k),w.removeEventListener("pointerdown",te),E.removeEventListener("focusout",k)}},[r,w,E,F,a,p,V,L,d,f,l,U,T]),A.useEffect(()=>{var te;if(r)return;const k=Array.from((L==null||(te=L.portalNode)==null?void 0:te.querySelectorAll("["+rc("portal")+"]"))||[]);if(E){const H=[E,...k,W.current,z.current,R.current.includes("reference")||T?w:null].filter(Y=>Y!=null),j=a||T?fE(H,B,!B):fE(H);return()=>{j()}}},[r,w,E,a,R,L,T,B]),fr(()=>{if(r||!Gt(F))return;const te=Ar(F),k=Jo(te);queueMicrotask(()=>{const H=se(F),j=b.current,Y=(typeof j=="number"?H[j]:j.current)||F,ve=$n(F,k);!S&&!ve&&h&&nu(Y,{preventScroll:Y===F})})},[r,h,F,S,se,b]),fr(()=>{if(r||!F)return;let te=!1;const k=Ar(F),H=Jo(k);let Y=m.current.openEvent;Rg(H);function ve(Ie){let{open:Re,reason:De,event:Le,nested:at}=Ie;Re&&(Y=Le),De==="escape-key"&&g.domReference.current&&Rg(g.domReference.current),De==="hover"&&Le.type==="mouseleave"&&(_.current=!0),De==="outside-press"&&(at?(_.current=!1,te=!0):_.current=!(eV(Le)||tV(Le)))}y.on("openchange",ve);const ie=k.createElement("span");ie.setAttribute("tabindex","-1"),ie.setAttribute("aria-hidden","true"),Object.assign(ie.style,c0),N&&w&&w.insertAdjacentElement("afterend",ie);function be(){return typeof O.current=="boolean"?mE()||ie:O.current.current||ie}return()=>{y.off("openchange",ve);const Ie=Jo(k),Re=$n(E,Ie)||V&&ga(V.nodesRef.current,p).some(at=>{var ze;return $n((ze=at.context)==null?void 0:ze.elements.floating,Ie)});(Re||Y&&["click","mousedown"].includes(Y.type))&&g.domReference.current&&Rg(g.domReference.current);const Le=be();queueMicrotask(()=>{O.current&&!_.current&&Gt(Le)&&(!(Le!==Ie&&Ie!==k.body)||Re)&&Le.focus({preventScroll:te}),ie.remove()})}},[r,E,F,O,m,g,y,V,p,N,w]),A.useEffect(()=>{queueMicrotask(()=>{_.current=!1})},[r]),fr(()=>{if(!r&&L)return L.setFocusManagerState({modal:a,closeOnFocusOut:f,open:h,onOpenChange:d,refs:g}),()=>{L.setFocusManagerState(null)}},[r,L,a,h,d,g,f]),fr(()=>{if(r||!F||typeof MutationObserver!="function"||S)return;const te=()=>{const H=F.getAttribute("tabindex"),j=U(),Y=Jo(Ar(E)),ve=j.indexOf(Y);ve!==-1&&(Z.current=ve),R.current.includes("floating")||Y!==g.domReference.current&&j.length===0?H!=="0"&&F.setAttribute("tabindex","0"):H!=="-1"&&F.setAttribute("tabindex","-1")};te();const k=new MutationObserver(te);return k.observe(F,{childList:!0,subtree:!0,attributes:!0}),()=>{k.disconnect()}},[r,E,F,g,R,U,S]);function fe(te){return r||!c||!a?null:A.createElement(DU,{ref:te==="start"?W:z,onClick:k=>d(!1,k.nativeEvent)},typeof c=="string"?c:"Dismiss")}const nt=!r&&B&&(a?!T:!0)&&(N||a);return A.createElement(A.Fragment,null,nt&&A.createElement(ud,{"data-type":"inside",ref:L==null?void 0:L.beforeInsideRef,onFocus:te=>{if(a){const H=se();nu(i[0]==="reference"?H[0]:H[H.length-1])}else if(L!=null&&L.preserveTabOrder&&L.portalNode)if(_.current=!1,pa(te,L.portalNode)){const H=U7()||w;H==null||H.focus()}else{var k;(k=L.beforeOutsideRef.current)==null||k.focus()}}}),!T&&fe("start"),n,fe("end"),nt&&A.createElement(ud,{"data-type":"inside",ref:L==null?void 0:L.afterInsideRef,onFocus:te=>{if(a)nu(se()[0]);else if(L!=null&&L.preserveTabOrder&&L.portalNode)if(f&&(_.current=!0),pa(te,L.portalNode)){const H=X7()||w;H==null||H.focus()}else{var k;(k=L.afterOutsideRef.current)==null||k.focus()}}}))}function vE(e){return Gt(e.target)&&e.target.tagName==="BUTTON"}function yE(e){return S7(e)}function AU(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,elements:{domReference:o}}=e,{enabled:s=!0,event:u="click",toggle:l=!0,ignoreMouse:a=!1,keyboardHandlers:c=!0,stickIfOpen:f=!0}=t,h=A.useRef(),g=A.useRef(!1),p=A.useMemo(()=>({onPointerDown(d){h.current=d.pointerType},onMouseDown(d){const y=h.current;d.button===0&&u!=="click"&&(tE(y)&&a||(n&&l&&(!(i.current.openEvent&&f)||i.current.openEvent.type==="mousedown")?r(!1,d.nativeEvent,"click"):(d.preventDefault(),r(!0,d.nativeEvent,"click"))))},onClick(d){const y=h.current;if(u==="mousedown"&&h.current){h.current=void 0;return}tE(y)&&a||(n&&l&&(!(i.current.openEvent&&f)||i.current.openEvent.type==="click")?r(!1,d.nativeEvent,"click"):r(!0,d.nativeEvent,"click"))},onKeyDown(d){h.current=void 0,!(d.defaultPrevented||!c||vE(d))&&(d.key===" "&&!yE(o)&&(d.preventDefault(),g.current=!0),d.key==="Enter"&&r(!(n&&l),d.nativeEvent,"click"))},onKeyUp(d){d.defaultPrevented||!c||vE(d)||yE(o)||d.key===" "&&g.current&&(g.current=!1,r(!(n&&l),d.nativeEvent,"click"))}}),[i,o,u,a,c,r,n,f,l]);return A.useMemo(()=>s?{reference:p}:{},[s,p])}const BU={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},MU={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},wE=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function RU(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:i,dataRef:o}=e,{enabled:s=!0,escapeKey:u=!0,outsidePress:l=!0,outsidePressEvent:a="pointerdown",referencePress:c=!1,referencePressEvent:f="pointerdown",ancestorScroll:h=!1,bubbles:g,capture:p}=t,d=Cy(),y=Qi(typeof l=="function"?l:()=>!1),m=typeof l=="function"?y:l,v=A.useRef(!1),w=A.useRef(!1),{escapeKey:E,outsidePress:S}=wE(g),{escapeKey:T,outsidePress:B}=wE(p),R=A.useRef(!1),b=Qi(_=>{var J;if(!n||!s||!u||_.key!=="Escape"||R.current)return;const Z=(J=o.current.floatingContext)==null?void 0:J.nodeId,N=d?ga(d.nodesRef.current,Z):[];if(!E&&(_.stopPropagation(),N.length>0)){let F=!0;if(N.forEach(U=>{var se;if((se=U.context)!=null&&se.open&&!U.context.dataRef.current.__escapeKeyBubbles){F=!1;return}}),!F)return}r(!1,iV(_)?_.nativeEvent:_,"escape-key")}),O=Qi(_=>{var J;const Z=()=>{var N;b(_),(N=ts(_))==null||N.removeEventListener("keydown",Z)};(J=ts(_))==null||J.addEventListener("keydown",Z)}),V=Qi(_=>{var J;const Z=v.current;v.current=!1;const N=w.current;if(w.current=!1,a==="click"&&N||Z||typeof m=="function"&&!m(_))return;const F=ts(_),U="["+rc("inert")+"]",se=Ar(i.floating).querySelectorAll(U);let fe=Ct(F)?F:null;for(;fe&&!Ao(fe);){const H=Li(fe);if(Ao(H)||!Ct(H))break;fe=H}if(se.length&&Ct(F)&&!oV(F)&&!$n(F,i.floating)&&Array.from(se).every(H=>!$n(fe,H)))return;if(Gt(F)&&z){const H=F.clientWidth>0&&F.scrollWidth>F.clientWidth,j=F.clientHeight>0&&F.scrollHeight>F.clientHeight;let Y=j&&_.offsetX>F.clientWidth;if(j&&Cr(F).direction==="rtl"&&(Y=_.offsetX<=F.offsetWidth-F.clientWidth),Y||H&&_.offsetY>F.clientHeight)return}const nt=(J=o.current.floatingContext)==null?void 0:J.nodeId,te=d&&ga(d.nodesRef.current,nt).some(H=>{var j;return Sg(_,(j=H.context)==null?void 0:j.elements.floating)});if(Sg(_,i.floating)||Sg(_,i.domReference)||te)return;const k=d?ga(d.nodesRef.current,nt):[];if(k.length>0){let H=!0;if(k.forEach(j=>{var Y;if((Y=j.context)!=null&&Y.open&&!j.context.dataRef.current.__outsidePressBubbles){H=!1;return}}),!H)return}r(!1,_,"outside-press")}),L=Qi(_=>{var J;const Z=()=>{var N;V(_),(N=ts(_))==null||N.removeEventListener(a,Z)};(J=ts(_))==null||J.addEventListener(a,Z)});A.useEffect(()=>{if(!n||!s)return;o.current.__escapeKeyBubbles=E,o.current.__outsidePressBubbles=S;let _=-1;function J(se){r(!1,se,"ancestor-scroll")}function Z(){window.clearTimeout(_),R.current=!0}function N(){_=window.setTimeout(()=>{R.current=!1},o0()?5:0)}const F=Ar(i.floating);u&&(F.addEventListener("keydown",T?O:b,T),F.addEventListener("compositionstart",Z),F.addEventListener("compositionend",N)),m&&F.addEventListener(a,B?L:V,B);let U=[];return h&&(Ct(i.domReference)&&(U=go(i.domReference)),Ct(i.floating)&&(U=U.concat(go(i.floating))),!Ct(i.reference)&&i.reference&&i.reference.contextElement&&(U=U.concat(go(i.reference.contextElement)))),U=U.filter(se=>{var fe;return se!==((fe=F.defaultView)==null?void 0:fe.visualViewport)}),U.forEach(se=>{se.addEventListener("scroll",J,{passive:!0})}),()=>{u&&(F.removeEventListener("keydown",T?O:b,T),F.removeEventListener("compositionstart",Z),F.removeEventListener("compositionend",N)),m&&F.removeEventListener(a,B?L:V,B),U.forEach(se=>{se.removeEventListener("scroll",J)}),window.clearTimeout(_)}},[o,i,u,m,a,n,r,h,s,E,S,b,T,O,V,B,L]),A.useEffect(()=>{v.current=!1},[m,a]);const W=A.useMemo(()=>({onKeyDown:b,[BU[f]]:_=>{c&&r(!1,_.nativeEvent,"reference-press")}}),[b,r,c,f]),z=A.useMemo(()=>({onKeyDown:b,onMouseDown(){w.current=!0},onMouseUp(){w.current=!0},[MU[a]]:()=>{v.current=!0}}),[b,a]);return A.useMemo(()=>s?{reference:W,floating:z}:{},[s,W,z])}function kU(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=wy(),o=A.useRef({}),[s]=A.useState(()=>dU()),u=W7()!=null,[l,a]=A.useState(r.reference),c=Qi((g,p,d)=>{o.current.openEvent=g?p:void 0,s.emit("openchange",{open:g,event:p,reason:d,nested:u}),n==null||n(g,p,d)}),f=A.useMemo(()=>({setPositionReference:a}),[]),h=A.useMemo(()=>({reference:l||r.reference||null,floating:r.floating||null,domReference:r.reference}),[l,r.reference,r.floating]);return A.useMemo(()=>({dataRef:o,open:t,onOpenChange:c,elements:h,events:s,floatingId:i,refs:f}),[t,c,h,s,i,f])}function q7(e){e===void 0&&(e={});const{nodeId:t}=e,n=kU({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[o,s]=A.useState(null),[u,l]=A.useState(null),c=(i==null?void 0:i.domReference)||o,f=A.useRef(null),h=Cy();fr(()=>{c&&(f.current=c)},[c]);const g=sU({...e,elements:{...i,...u&&{reference:u}}}),p=A.useCallback(w=>{const E=Ct(w)?{getBoundingClientRect:()=>w.getBoundingClientRect(),contextElement:w}:w;l(E),g.refs.setReference(E)},[g.refs]),d=A.useCallback(w=>{(Ct(w)||w===null)&&(f.current=w,s(w)),(Ct(g.refs.reference.current)||g.refs.reference.current===null||w!==null&&!Ct(w))&&g.refs.setReference(w)},[g.refs]),y=A.useMemo(()=>({...g.refs,setReference:d,setPositionReference:p,domReference:f}),[g.refs,d,p]),m=A.useMemo(()=>({...g.elements,domReference:c}),[g.elements,c]),v=A.useMemo(()=>({...g,...r,refs:y,elements:m,nodeId:t}),[g,y,m,t,r]);return fr(()=>{r.dataRef.current.floatingContext=v;const w=h==null?void 0:h.nodesRef.current.find(E=>E.id===t);w&&(w.context=v)}),A.useMemo(()=>({...g,context:v,refs:y,elements:m}),[g,y,m,v])}const CE="active",xE="selected";function kg(e,t,n){const r=new Map,i=n==="item";let o=e;if(i&&e){const{[CE]:s,[xE]:u,...l}=e;o=l}return{...n==="floating"&&{tabIndex:-1,[Hp]:""},...o,...t.map(s=>{const u=s?s[n]:null;return typeof u=="function"?e?u(e):null:u}).concat(e).reduce((s,u)=>(u&&Object.entries(u).forEach(l=>{let[a,c]=l;if(!(i&&[CE,xE].includes(a)))if(a.indexOf("on")===0){if(r.has(a)||r.set(a,[]),typeof c=="function"){var f;(f=r.get(a))==null||f.push(c),s[a]=function(){for(var h,g=arguments.length,p=new Array(g),d=0;d<g;d++)p[d]=arguments[d];return(h=r.get(a))==null?void 0:h.map(y=>y(...p)).find(y=>y!==void 0)}}}else s[a]=c}),s),{})}}function OU(e){e===void 0&&(e=[]);const t=e.map(u=>u==null?void 0:u.reference),n=e.map(u=>u==null?void 0:u.floating),r=e.map(u=>u==null?void 0:u.item),i=A.useCallback(u=>kg(u,e,"reference"),t),o=A.useCallback(u=>kg(u,e,"floating"),n),s=A.useCallback(u=>kg(u,e,"item"),r);return A.useMemo(()=>({getReferenceProps:i,getFloatingProps:o,getItemProps:s}),[i,o,s])}const FU=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function bU(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:o=!0,role:s="dialog"}=t,u=(n=FU.get(s))!=null?n:s,l=wy(),c=W7()!=null,f=A.useMemo(()=>u==="tooltip"||s==="label"?{["aria-"+(s==="label"?"labelledby":"describedby")]:r?i:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":u==="alertdialog"?"dialog":u,"aria-controls":r?i:void 0,...u==="listbox"&&{role:"combobox"},...u==="menu"&&{id:l},...u==="menu"&&c&&{role:"menuitem"},...s==="select"&&{"aria-autocomplete":"none"},...s==="combobox"&&{"aria-autocomplete":"list"}},[u,i,c,r,l,s]),h=A.useMemo(()=>{const p={id:i,...u&&{role:u}};return u==="tooltip"||s==="label"?p:{...p,...u==="menu"&&{"aria-labelledby":l}}},[u,i,l,s]),g=A.useCallback(p=>{let{active:d,selected:y}=p;const m={role:"option",...d&&{id:i+"-option"}};switch(s){case"select":return{...m,"aria-selected":d&&y};case"combobox":return{...m,...d&&{"aria-selected":!0}}}return{}},[i,s]);return A.useMemo(()=>o?{reference:f,floating:h,item:g}:{},[o,f,h,g])}function IU({initialOpen:e=!1,placement:t="bottom",modal:n,sideOffset:r,open:i,onOpenChange:o}={}){const[s,u]=A.useState(e),[l,a]=A.useState(),[c,f]=A.useState(),h=i??s,g=o??u,p=q7({placement:t,open:h,onOpenChange:g,whileElementsMounted:tU,middleware:[H7(r||4),$7({crossAxis:t.includes("-"),fallbackAxisSideDirection:"end",padding:5}),uU({padding:5})]}),d=p.context,y=AU(d,{enabled:i==null}),m=RU(d),v=bU(d),w=OU([y,m,v]);return A.useMemo(()=>({open:h,setOpen:g,...w,...p,modal:n,labelId:l,descriptionId:c,setLabelId:a,setDescriptionId:f}),[h,g,w,p,n,l,c])}const Z7=A.createContext(null),Q7=()=>{const e=A.useContext(Z7);if(e==null)throw new Error("Popover components must be wrapped in <Popover />");return e};function Ls({children:e,modal:t=!1,...n}){const r=IU({modal:t,...n});return D.jsx(Z7.Provider,{value:r,children:e})}const Gs=A.forwardRef(function({children:t,asChild:n=!1,...r},i){const o=Q7(),s=t.ref,u=_7([o.refs.setReference,i,s]);return n&&A.isValidElement(t)?A.cloneElement(t,o.getReferenceProps({ref:u,...r,...t.props,"data-state":o.open?"open":"closed"})):D.jsx("button",{ref:u,type:"button","data-state":o.open?"open":"closed",...o.getReferenceProps(r),children:t})}),Ns=A.forwardRef(function({container:t,style:n,...r},i){const{context:o,...s}=Q7(),u=_7([s.refs.setFloating,i]);return o.open?D.jsx(PU,{root:t,children:D.jsx(TU,{context:o,modal:s.modal,children:D.jsx("div",{ref:u,style:{...s.floatingStyles,...n},"aria-labelledby":s.labelId,"aria-describedby":s.descriptionId,...s.getFloatingProps(r),children:r.children})})}):null}),$p={strokeColor:_t,strokeWidth:4};var xy=(e=>(e.nibPen="nibPen",e.feltTipPen="feltTipPen",e.artisticBrush="artisticBrush",e.markerHighlight="markerHighlight",e))(xy||{});const J7="freehand",hi={isFreehand:e=>e.type===J7},Og=e=>e===$e.hand||e===$e.selection,LU=[{icon:fz,pointer:$e.hand,title:"Hand"},{icon:hz,pointer:$e.selection,title:"Selection"},{icon:dz,pointer:as.mind,title:"Mind"},{icon:pz,pointer:pe.text,title:"Text"},{icon:Vz,pointer:xy.feltTipPen,title:"Freehand"},{icon:mz,title:"Arrow Line",popupKey:"arrow",pointer:et.straight},{icon:gz,title:"Shape",popupKey:"shape",pointer:pe.rectangle}],GU=e=>Object.keys(et).includes(e.pointer),NU=e=>Object.keys(pe).includes(e.pointer),HU=({setPointer:e})=>{const t=si(),n=P.getBoardContainer(t),[r,i]=A.useState(!1),[o,s]=A.useState(!1),u=c=>{no(t,ar.dnd),Je.updatePointerType(t,c),e(c)},l=()=>{no(t,ar.drawing)},a=c=>P.isPointer(t,c.pointer)&&!r&&!o;return D.jsx(ui,{padding:1,className:lt("draw-toolbar",Oo),children:D.jsx(vr.Row,{gap:1,children:LU.map((c,f)=>c.popupKey==="shape"?D.jsxs(Ls,{open:o,sideOffset:12,onOpenChange:h=>{s(h)},children:[D.jsx(Gs,{asChild:!0,children:D.jsx(Bt,{type:"icon",visible:!0,selected:o||NU(t)&&!P.isPointer(t,pe.text),icon:c.icon,title:"Shape","aria-label":"Shape",onPointerDown:()=>{s(!o),Je.updatePointerType(t,pe.rectangle),e(pe.rectangle),no(t,ar.drawing)}})}),D.jsx(Ns,{container:n,children:D.jsx(Kz,{onPointerUp:h=>{s(!1),e(h)}})})]},f):c.popupKey==="arrow"?D.jsxs(Ls,{open:r,sideOffset:12,onOpenChange:h=>{i(h)},children:[D.jsx(Gs,{asChild:!0,children:D.jsx(Bt,{type:"icon",visible:!0,selected:r||GU(t),icon:c.icon,title:"Arrow","aria-label":"Arrow",onPointerDown:()=>{i(!o),Je.updatePointerType(t,et.straight),e(et.straight),no(t,ar.drawing)}})}),D.jsx(Ns,{container:n,children:D.jsx(qz,{onPointerUp:h=>{i(!1),e(h)}})})]},f):D.jsx(Bt,{type:"radio",icon:c.icon,checked:a(c),title:`${c.title}`,"aria-label":`${c.title}`,onPointerDown:()=>{c.pointer&&!Og(c.pointer)&&u(c.pointer)},onPointerUp:()=>{c.pointer&&!Og(c.pointer)?l():c.pointer&&Og(c.pointer)&&(Je.updatePointerType(t,c.pointer),e(c.pointer))}},f))})})};var eA=(e=>(e.COPY="copy",e.PASTE="paste",e.CUT="cut",e.KEYDOWN="keydown",e.KEYUP="keyup",e.MOUSE_MOVE="mousemove",e.RESIZE="resize",e.UNLOAD="unload",e.FOCUS="focus",e.BLUR="blur",e.DRAG_OVER="dragover",e.DROP="drop",e.GESTURE_END="gestureend",e.BEFORE_UNLOAD="beforeunload",e.GESTURE_START="gesturestart",e.GESTURE_CHANGE="gesturechange",e.POINTER_MOVE="pointermove",e.POINTER_DOWN="pointerdown",e.POINTER_UP="pointerup",e.STATE_CHANGE="statechange",e.WHEEL="wheel",e.TOUCH_START="touchstart",e.TOUCH_END="touchend",e.HASHCHANGE="hashchange",e.VISIBILITY_CHANGE="visibilitychange",e.SCROLL="scroll",e.MENU_ITEM_SELECT="menu.itemSelect",e.MESSAGE="message",e.FULLSCREENCHANGE="fullscreenchange",e))(eA||{});const $U={svg:"image/svg+xml",png:"image/png",jpg:"image/jpeg",gif:"image/gif",webp:"image/webp",bmp:"image/bmp",ico:"image/x-icon",avif:"image/avif",jfif:"image/jfif"},Ey={json:"application/json",drawfree:"application/vnd.drawfree+json",...$U},_U={drawfree:1},tA=ye.createContext({}),jU=(e="",t=!1)=>`menu-item menu-item-base ${e} ${t?"menu-item--selected":""}`.trim(),WU=(e,t)=>{const n=A.useContext(tA);return uz(e,r=>{var o;const i=new CustomEvent(eA.MENU_ITEM_SELECT,{bubbles:!0,cancelable:!0});t==null||t(i),i.defaultPrevented||(o=n.onSelect)==null||o.call(n,i)})},Py=({children:e,className:t="",onSelect:n,style:r})=>{const i=lt(`menu ${t}`).trim();return D.jsx(tA.Provider,{value:{onSelect:n},children:D.jsx("div",{className:i,style:r,"data-testid":"menu",children:D.jsx(ui,{className:"menu-container",padding:2,children:e})})})};Py.displayName="Menu";const zU=({icon:e,shortcut:t,children:n})=>D.jsxs(D.Fragment,{children:[e&&D.jsx("div",{className:"menu-item__icon",children:e}),D.jsx("div",{className:"menu-item__text",children:n}),t&&D.jsx("div",{className:"menu-item__shortcut",children:t})]}),Hs=({icon:e,onSelect:t,children:n,shortcut:r,className:i,selected:o,...s})=>{const u=WU(s.onClick,t);return D.jsx("button",{...s,onClick:u,type:"button",className:jU(i,o),title:s.title??s["aria-label"],children:D.jsx(zU,{icon:e,shortcut:r,children:n})})};Hs.displayName="MenuItem";const nA=({children:e})=>D.jsx("div",{style:{display:"inline-flex",marginLeft:"auto",padding:"2px 4px",background:"var(--color-promo)",color:"var(--color-surface-lowest)",borderRadius:6,fontSize:9,fontFamily:"Cascadia, monospace"},children:e});nA.displayName="MenuItemBadge";Hs.Badge=nA;const VU=()=>{var i;const e=si(),t=P.getBoardContainer(e),[n,r]=A.useState(!1);return D.jsx(ui,{padding:1,className:lt("zoom-toolbar",Oo),children:D.jsxs(vr.Row,{gap:1,children:[D.jsx(Bt,{type:"button",icon:Bz,visible:!0,title:"  Cmd+-","aria-label":"  Cmd+-",onPointerDown:()=>{},onPointerUp:()=>{Je.updateZoom(e,e.viewport.zoom-.1)},className:"zoom-out-button"},0),D.jsxs(Ls,{sideOffset:12,open:n,onOpenChange:o=>{r(o)},placement:"bottom-end",children:[D.jsx(Gs,{asChild:!0,children:D.jsxs("div",{title:"","aria-label":"",className:lt("zoom-menu-trigger",{active:n}),onPointerUp:()=>{r(!n)},children:[Number(((((i=e==null?void 0:e.viewport)==null?void 0:i.zoom)||1)*100).toFixed(0)),"%"]},1)}),D.jsx(Ns,{container:t,children:D.jsxs(Py,{onSelect:()=>{r(!1)},children:[D.jsx(Hs,{"data-testid":"open-button",onSelect:()=>{Je.fitViewport(e)},"aria-label":"",shortcut:"Cmd+Shift+=",children:""}),D.jsx(Hs,{"data-testid":"open-button",onSelect:()=>{Je.updateZoom(e,1)},"aria-label":" 100%",shortcut:"Cmd+0",children:" 100%"})]})})]}),D.jsx(Bt,{type:"button",icon:Mz,visible:!0,title:"  Cmd++","aria-label":"  Cmd++",onPointerDown:()=>{},onPointerUp:()=>{Je.updateZoom(e,e.viewport.zoom+.1)},className:"zoom-in-button"},2)]})})},f0="TRANSPARENT",Sy="#FFFFFF",rA=[{name:"Transparent",value:f0},{name:"Default",value:_t},{name:"White",value:Sy},{name:"Gray",value:"#808080"},{name:"Deep Blue",value:"#1E90FF"},{name:"Red",value:"#FF4500"},{name:"Green",value:"#2ECC71"},{name:"Yellow",value:"#FFD700"},{name:"Purple",value:"#8A2BE2"},{name:"Orange",value:"#FFA500"},{name:"Pastel Pink",value:"#FFB3BA"},{name:"Cyan",value:"#00CED1"},{name:"Brown",value:"#8B4513"},{name:"Forest Green",value:"#228B22"},{name:"Light Gray",value:"#D3D3D3"}];function UU(e){return Math.round((100-e)/100*255)}function XU(e){return Math.round((1-e/255)*100)}function EE(e,t){const r=UU(100-t).toString(16).padStart(2,"0");return`${e}${r}`}function KU(e){e=e.replace(/^#/,"");let t;if(e.length===8)t=parseInt(e.slice(6,8),16);else if(e.length===4)t=parseInt(e.slice(3,4).repeat(2),16);else return 100;return 100-XU(t)}function h0(e){const t=e.replace(/^#/,"").toUpperCase();return t.length===8?"#"+t.slice(0,6):t.length===4?"#"+t.slice(0,3):t.length===6||t.length===3?"#"+t:e}function ld(e){return e===f0}function iA(e){return e===Sy}function YU(e){return!e||e===_t}const qU=({min:e=0,max:t=100,step:n=1,defaultValue:r=100,disabled:i=!1,onChange:o})=>{const[s,u]=A.useState(r),l=A.useRef(0),a=A.useRef(null),c=A.useRef(null);A.useEffect(()=>{if(a.current&&c.current){const p=a.current.getBoundingClientRect(),d=c.current.getBoundingClientRect();l.current=r9(d.width/2/p.width*100)}},[c,a]);const f=A.useCallback(p=>{if(a.current&&c.current){const d=a.current.getBoundingClientRect(),y=p.clientX-d.left;let m=Math.min(Math.max(y/d.width,0),1);m>=(100-l.current)/100?m=1:m<=l.current/100&&(m=0);const v=Math.round(m*(t-e)/n)*n+e;u(v),o&&o(v)}},[e,t,n,o]),h=A.useCallback(()=>{const p=y=>f(y),d=()=>{document.removeEventListener("pointermove",p),document.removeEventListener("pointerup",d)};document.addEventListener("pointermove",p),document.addEventListener("pointerup",d)},[f]);let g=(s-e)/(t-e)*100;return g>=100-l.current&&(g=100-l.current),g<=l.current&&(g=l.current),D.jsx("div",{className:lt("slider-container",{disabled:i}),children:D.jsxs("div",{ref:a,className:"slider-track",onClick:p=>{i||f(p)},onPointerDown:p=>{p.preventDefault(),!i&&h()},children:[D.jsx("div",{className:"slider-range",style:{width:`${g}%`}}),D.jsx("div",{ref:c,className:"slider-thumb",style:{left:`${g}%`}})]})})},Fg=C7(rA,4),Dy=ye.forwardRef((e,t)=>{const{onSelect:n,currentColor:r}=e,[i,o]=A.useState(h0(r||Fg[0][0].value)),[s,u]=A.useState(KU(r||Fg[0][0].value));return D.jsx(D.Fragment,{children:D.jsxs(vr.Col,{gap:3,children:[D.jsx(qU,{step:5,defaultValue:s,onChange:l=>{u(l),n(EE(i,l))},disabled:i===rA[0].value}),D.jsx(vr.Col,{gap:2,children:Fg.map((l,a)=>D.jsx(vr.Row,{gap:2,children:l.map(c=>D.jsxs("button",{className:`color-select-item ${i===c.value?"active":""} ${ld(c.value)?"transparent":""}`,style:{backgroundColor:c.value,color:YU(c.value)?Sy:_t},onClick:()=>{if(o(c.value),c.value===f0){n(c.value);return}n(s!==100?EE(c.value,s):c.value)},title:c.name,children:[ld(c.value)&&Fz,i===c.value&&bz]},c.value))},a))})]})})}),ZU=({board:e,currentColor:t,fontColorIcon:n,title:r,onSelect:i})=>{const[o,s]=A.useState(!1),u=P.getBoardContainer(e);return D.jsx(D.Fragment,{children:D.jsxs(Ls,{sideOffset:12,open:o,onOpenChange:l=>{s(l)},placement:"top",children:[D.jsx(Gs,{asChild:!0,children:D.jsx(Bt,{className:lt("property-button"),selected:o,visible:!0,icon:n,type:"button",title:r,"aria-label":r,onPointerUp:()=>{s(!o)}})}),D.jsx(Ns,{container:u,children:D.jsx(ui,{padding:4,className:lt(`${Oo}`),children:D.jsx(Dy,{onSelect:l=>{i(l)},currentColor:t})})})]})})},QU=({board:e,currentColor:t,title:n,hasStrokeStyle:r,children:i,onColorSelect:o})=>{const[s,u]=A.useState(!1),l=t&&h0(t),a=P.getBoardContainer(e);let c=ld(l)?Iz:iA(l)?Lz:void 0;const f=h=>{Po.setStrokeStyle(e,h,{getMemorizeKey:jh})};return D.jsx(D.Fragment,{children:D.jsxs(Ls,{sideOffset:12,open:s,onOpenChange:h=>{u(h)},placement:"top",children:[D.jsx(Gs,{asChild:!0,children:D.jsx(Bt,{className:lt("property-button"),visible:!0,icon:c,type:"button",title:n,"aria-label":n,onPointerUp:()=>{u(!s)},children:!c&&i})}),D.jsx(Ns,{container:a,children:D.jsx(ui,{padding:4,className:lt(`${Oo}`,"stroke-setting",{"has-stroke-style":r}),children:D.jsxs(vr.Col,{children:[r&&D.jsxs(vr.Row,{className:lt("stroke-style-picker"),children:[D.jsx(Bt,{visible:!0,icon:Gz,type:"button",title:n,"aria-label":n,onPointerUp:()=>{f(mr.solid)}}),D.jsx(Bt,{visible:!0,icon:Nz,type:"button",title:n,"aria-label":n,onPointerUp:()=>{f(mr.dashed)}}),D.jsx(Bt,{visible:!0,icon:Hz,type:"button",title:n,"aria-label":n,onPointerUp:()=>{f(mr.dotted)}})]}),D.jsx(Dy,{onSelect:h=>{o(h)},currentColor:t})]})})})]})})},JU=({board:e,currentColor:t,title:n,children:r,onColorSelect:i})=>{const[o,s]=A.useState(!1),u=t&&h0(t),l=P.getBoardContainer(e);let a=!u||ld(u)?Oz:void 0;return D.jsxs(Ls,{sideOffset:12,open:o,onOpenChange:c=>{s(c)},placement:"top",children:[D.jsx(Gs,{asChild:!0,children:D.jsx(Bt,{className:lt("property-button"),visible:!0,icon:a,type:"button",title:n,"aria-label":n,onPointerUp:()=>{s(!o)},children:!a&&r})}),D.jsx(Ns,{container:l,children:D.jsx(ui,{padding:4,className:lt(`${Oo}`),children:D.jsx(Dy,{onSelect:c=>{i(c)},currentColor:t})})})]})},eX=({})=>{var h,g;const e=si(),t=re(e),[n,r]=A.useState(!1),i=A.useRef(n),o=t.length>0&&!gn(e),{viewport:s,selection:u,children:l}=e,{refs:a,floatingStyles:c}=q7({placement:"right-start",middleware:[H7(32),$7()]});let f={fill:"red"};if(o&&!n){const p=t.some(v=>iX(e,v))&&!P.hasBeenTextEditing(e),d=t.some(v=>sX(e,v)),y=t.some(v=>oA(e,v))&&!P.hasBeenTextEditing(e),m=t.some(v=>oX(e,v))&&!P.hasBeenTextEditing(e);f={...rX(e),hasFill:p,hasFontColor:d,hasStroke:y,hasStrokeStyle:m}}return A.useEffect(()=>{if(o){let p=P.getBoardContainer(e).querySelector(`.${h5}`);if(p||(p=P.getBoardContainer(e).querySelector(`.${cl}`)),p){const d=p==null?void 0:p.getBoundingClientRect();a.setPositionReference({getBoundingClientRect(){return{width:d.width,height:d.height,x:d.x,y:d.y,top:d.top,left:d.left,right:d.right,bottom:d.bottom}}})}}},[s,u,l,n]),A.useEffect(()=>{i.current=n},[n]),A.useEffect(()=>{const{pointerUp:p,pointerMove:d}=e;return e.pointerMove=y=>{(Rh(e)||Ts(e))&&!i.current&&r(!0),d(y)},e.pointerUp=y=>{i.current&&(Rh(e)||Ts(e))&&r(!1),p(y)},()=>{e.pointerUp=p,e.pointerMove=d}},[e]),D.jsx(D.Fragment,{children:o&&!n&&D.jsx(ui,{padding:1,className:lt("popup-toolbar",Oo),ref:a.setFloating,style:c,children:D.jsxs(vr.Row,{gap:1,children:[f.hasFontColor&&D.jsx(ZU,{board:e,currentColor:(h=f.marks)==null?void 0:h.color,title:"Font Color",fontColorIcon:D.jsx($z,{currentColor:(g=f.marks)==null?void 0:g.color}),onSelect:p=>{GG.setTextColor(e,Hl(p),void 0,bD(e))}},0),f.hasStroke&&D.jsx(QU,{board:e,currentColor:f.strokeColor,title:"Stroke",hasStrokeStyle:f.hasStrokeStyle||!1,onColorSelect:p=>{Po.setStrokeColor(e,Hl(p),{getMemorizeKey:jh});const d=re(e);d.length&&d.forEach(y=>{const m=P.findPath(e,y);ee.setNode(e,{branchColor:Hl(p)},m)})},children:D.jsx("label",{className:lt("stroke-label","color-label"),style:{borderColor:f.strokeColor}})},1),f.hasFill&&D.jsx(JU,{board:e,currentColor:f.fill,title:"Fill Color",onColorSelect:p=>{Po.setFillColor(e,p,{getMemorizeKey:jh,callback:(d,y)=>{I.isElementByTable(d)?dn.setTableFill(e,d,Hl(p),y):xc(d)&&ee.setNode(e,{fill:Hl(p)},y)}})},children:D.jsx("label",{className:lt("fill-label","color-label",{"color-white":f.fill&&iA(h0(f.fill))}),style:{backgroundColor:f.fill}})},2)]})})})},tX=(e,t)=>{const n=vD(t);return{fill:t.fill,strokeColor:XT(e,t),marks:n}},nX=(e,t)=>{let n;const r=bD(e);if(r!=null&&r.length){const i=r[0];n=i&&Ir.getMarks(i)}else n=vD(t);return{fill:t.fill,strokeColor:Pc(e,t),marks:n}},rX=e=>{const t=re(e)[0];return X.isMindElement(e,t)?tX(e,t):nX(e,t)},iX=(e,t)=>X.isMindElement(e,t)?!0:I.isDrawElement(t)?I.isShapeElement(t)&&!I.isImage(t)&&!I.isText(t)&&xc(t):!1,oA=(e,t)=>X.isMindElement(e,t)?!0:I.isDrawElement(t)?I.isShapeElement(t)&&!I.isImage(t)&&!I.isText(t)||I.isArrowLine(t)||I.isVectorLine(t)||I.isTable(t):!1,oX=(e,t)=>oA(e,t),sX=(e,t)=>X.isMindElement(e,t)?!0:I.isDrawElement(t)?VN([t]):!1,Hl=e=>e===f0?null:e,Ty=(()=>{if(typeof self>"u")return!1;if("top"in self&&self!==top)try{top.window.document._=0}catch{return!1}return"showOpenFilePicker"in self})(),uX=Ty?Promise.resolve().then(function(){return dX}):Promise.resolve().then(function(){return wX});async function lX(...e){return(await uX).default(...e)}Ty?Promise.resolve().then(function(){return pX}):Promise.resolve().then(function(){return xX});const aX=Ty?Promise.resolve().then(function(){return vX}):Promise.resolve().then(function(){return PX});async function cX(...e){return(await aX).default(...e)}const fX=async e=>{const t=await e.getFile();return t.handle=e,t};var hX=async(e=[{}])=>{Array.isArray(e)||(e=[e]);const t=[];e.forEach((i,o)=>{t[o]={description:i.description||"Files",accept:{}},i.mimeTypes?i.mimeTypes.map(s=>{t[o].accept[s]=i.extensions||[]}):t[o].accept["*/*"]=i.extensions||[]});const n=await window.showOpenFilePicker({id:e[0].id,startIn:e[0].startIn,types:t,multiple:e[0].multiple||!1,excludeAcceptAllOption:e[0].excludeAcceptAllOption||!1}),r=await Promise.all(n.map(fX));return e[0].multiple?r:r[0]},dX={__proto__:null,default:hX};function Uf(e){function t(n){if(Object(n)!==n)return Promise.reject(new TypeError(n+" is not an object."));var r=n.done;return Promise.resolve(n.value).then(function(i){return{value:i,done:r}})}return Uf=function(n){this.s=n,this.n=n.next},Uf.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(n){var r=this.s.return;return r===void 0?Promise.resolve({value:n,done:!0}):t(r.apply(this.s,arguments))},throw:function(n){var r=this.s.return;return r===void 0?Promise.reject(n):t(r.apply(this.s,arguments))}},new Uf(e)}const sA=async(e,t,n=e.name,r)=>{const i=[],o=[];var s,u=!1,l=!1;try{for(var a,c=function(f){var h,g,p,d=2;for(typeof Symbol<"u"&&(g=Symbol.asyncIterator,p=Symbol.iterator);d--;){if(g&&(h=f[g])!=null)return h.call(f);if(p&&(h=f[p])!=null)return new Uf(h.call(f));g="@@asyncIterator",p="@@iterator"}throw new TypeError("Object is not async iterable")}(e.values());u=!(a=await c.next()).done;u=!1){const f=a.value,h=`${n}/${f.name}`;f.kind==="file"?o.push(f.getFile().then(g=>(g.directoryHandle=e,g.handle=f,Object.defineProperty(g,"webkitRelativePath",{configurable:!0,enumerable:!0,get:()=>h})))):f.kind!=="directory"||!t||r&&r(f)||i.push(sA(f,t,h,r))}}catch(f){l=!0,s=f}finally{try{u&&c.return!=null&&await c.return()}finally{if(l)throw s}}return[...(await Promise.all(i)).flat(),...await Promise.all(o)]};var gX=async(e={})=>{e.recursive=e.recursive||!1,e.mode=e.mode||"read";const t=await window.showDirectoryPicker({id:e.id,startIn:e.startIn,mode:e.mode});return(await(await t.values()).next()).done?[t]:sA(t,e.recursive,void 0,e.skipDirectory)},pX={__proto__:null,default:gX},mX=async(e,t=[{}],n=null,r=!1,i=null)=>{Array.isArray(t)||(t=[t]),t[0].fileName=t[0].fileName||"Untitled";const o=[];let s=null;if(e instanceof Blob&&e.type?s=e.type:e.headers&&e.headers.get("content-type")&&(s=e.headers.get("content-type")),t.forEach((a,c)=>{o[c]={description:a.description||"Files",accept:{}},a.mimeTypes?(c===0&&s&&a.mimeTypes.push(s),a.mimeTypes.map(f=>{o[c].accept[f]=a.extensions||[]})):s?o[c].accept[s]=a.extensions||[]:o[c].accept["*/*"]=a.extensions||[]}),n)try{await n.getFile()}catch(a){if(n=null,r)throw a}const u=n||await window.showSaveFilePicker({suggestedName:t[0].fileName,id:t[0].id,startIn:t[0].startIn,types:o,excludeAcceptAllOption:t[0].excludeAcceptAllOption||!1});!n&&i&&i(u);const l=await u.createWritable();return"stream"in e?(await e.stream().pipeTo(l),u):"body"in e?(await e.body.pipeTo(l),u):(await l.write(await e),await l.close(),u)},vX={__proto__:null,default:mX},yX=async(e=[{}])=>(Array.isArray(e)||(e=[e]),new Promise((t,n)=>{const r=document.createElement("input");r.type="file";const i=[...e.map(l=>l.mimeTypes||[]),...e.map(l=>l.extensions||[])].join();r.multiple=e[0].multiple||!1,r.accept=i||"",r.style.display="none",document.body.append(r);const o=l=>{typeof s=="function"&&s(),t(l)},s=e[0].legacySetup&&e[0].legacySetup(o,()=>s(n),r),u=()=>{window.removeEventListener("focus",u),r.remove()};r.addEventListener("click",()=>{window.addEventListener("focus",u)}),r.addEventListener("change",()=>{window.removeEventListener("focus",u),r.remove(),o(r.multiple?Array.from(r.files):r.files[0])}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),wX={__proto__:null,default:yX},CX=async(e=[{}])=>(Array.isArray(e)||(e=[e]),e[0].recursive=e[0].recursive||!1,new Promise((t,n)=>{const r=document.createElement("input");r.type="file",r.webkitdirectory=!0;const i=s=>{typeof o=="function"&&o(),t(s)},o=e[0].legacySetup&&e[0].legacySetup(i,()=>o(n),r);r.addEventListener("change",()=>{let s=Array.from(r.files);e[0].recursive?e[0].recursive&&e[0].skipDirectory&&(s=s.filter(u=>u.webkitRelativePath.split("/").every(l=>!e[0].skipDirectory({name:l,kind:"directory"})))):s=s.filter(u=>u.webkitRelativePath.split("/").length===2),i(s)}),"showPicker"in HTMLInputElement.prototype?r.showPicker():r.click()})),xX={__proto__:null,default:CX},EX=async(e,t={})=>{Array.isArray(t)&&(t=t[0]);const n=document.createElement("a");let r=e;"body"in e&&(r=await async function(s,u){const l=s.getReader(),a=new ReadableStream({start:h=>async function g(){return l.read().then(({done:p,value:d})=>{if(!p)return h.enqueue(d),g();h.close()})}()}),c=new Response(a),f=await c.blob();return l.releaseLock(),new Blob([f],{type:u})}(e.body,e.headers.get("content-type"))),n.download=t.fileName||"Untitled",n.href=URL.createObjectURL(await r);const i=()=>{typeof o=="function"&&o()},o=t.legacySetup&&t.legacySetup(i,()=>o(),n);return n.addEventListener("click",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),i()}),n.click(),null},PX={__proto__:null,default:EX};const SX=e=>{var r,i;const t=(r=e.extensions)==null?void 0:r.reduce((o,s)=>(o.push(Ey[s]),o),[]),n=(i=e.extensions)==null?void 0:i.reduce((o,s)=>s==="jpg"?o.concat(".jpg",".jpeg"):o.concat(`.${s}`),[]);return lX({description:e.description,extensions:n,mimeTypes:t,multiple:e.multiple??!1})},DX=(e,t)=>cX(e,{fileName:`${t.name}.${t.extension}`,description:t.description,extensions:[`.${t.extension}`]},t.fileHandle);var Ay=(e=>(e.drawfree="drawfree",e))(Ay||{});const TX=async(e,t)=>{const n=await RX(t);let r;try{try{r=JSON.parse(n)}catch(i){throw i}if(bX(r))return r;throw new Error("Error: invalid file")}catch{throw new Error("Error: invalid file")}},AX=(e,t,n)=>new File([e],n||"",{type:t}),BX=e=>"arrayBuffer"in e?e.arrayBuffer():new Promise((t,n)=>{const r=new FileReader;r.onload=i=>{var o;if(!((o=i.target)!=null&&o.result))return n(new Error("Couldn't convert blob to ArrayBuffer"));t(i.target.result)},r.readAsArrayBuffer(e)}),MX=async e=>{var t;return e.type||(t=e==null?void 0:e.name)!=null&&t.endsWith(".drawfree")&&(e=AX(await BX(e),Ey.drawfree,e.name)),e},RX=async e=>{let t;return"text"in Blob?t=await e.text():t=await new Promise(n=>{const r=new FileReader;r.readAsText(e,"utf8"),r.onloadend=()=>{r.readyState===FileReader.DONE&&n(r.result)}}),t},kX=()=>new Date().getTime().toString(),OX=async(e,t=kX())=>{const n=IX(e),r=new Blob([n],{type:Ey.drawfree});return{fileHandle:await DX(r,{name:t,extension:"drawfree",description:"drawfree file"})}},FX=async e=>{const t=await SX({description:"drawfree files"});return TX(e,await MX(t))},bX=e=>e&&e.type===Ay.drawfree&&Array.isArray(e.elements)&&typeof e.viewport=="object",IX=e=>{const t={type:Ay.drawfree,version:_U.drawfree,source:"web",elements:e.children,viewport:e.viewport};return JSON.stringify(t,null,2)},uA=e=>{const t=re(e);az(e,{elements:t.length>0?t:void 0}).then(n=>{if(n){const r=lz(n),i=`drawfree-${new Date().getTime()}.png`;cz(r,i)}})},lA=()=>{const e=si();return D.jsx(Hs,{"data-testid":"save-button",onSelect:()=>{OX(e)},icon:Rz,"aria-label":"Save",children:"Save"})};lA.displayName="SaveToFile";const aA=()=>{const e=si(),t=pS(),n=(r,i,o)=>{e.children=r,e.viewport=i||{zoom:1},e.theme={themeColorMode:nn.default},t.update(e.children,{board:e,parent:e,parentG:P.getElementHost(e)}),Je.fitViewport(e)};return D.jsx(Hs,{"data-testid":"open-button",onSelect:()=>{FX(e).then(r=>{n(r.elements,r.viewport)})},icon:kz,"aria-label":"Open",children:"Open"})};aA.displayName="OpenFile";const cA=()=>{const e=si();return D.jsx(Hs,{icon:Az,"data-testid":"image-export-button",onSelect:()=>{uA(e)},"aria-label":"",children:"Save as image"})};cA.displayName="SaveAsImage";const fA=()=>D.jsx("div",{style:{height:"1px",backgroundColor:"var(--color-gray-10)",margin:".5rem 0"}});fA.displayName="MenuSeparator";const LX=()=>{const e=si(),t=P.getBoardContainer(e),n=re(e),[r,i]=A.useState(!1),o=e.history.undos.length<=0,s=e.history.redos.length<=0;return D.jsx(ui,{padding:1,className:lt("app-toolbar",Oo),children:D.jsxs(vr.Row,{gap:1,children:[D.jsxs(Ls,{sideOffset:12,open:r,onOpenChange:u=>{i(u)},placement:"bottom-start",children:[D.jsx(Gs,{asChild:!0,children:D.jsx(Bt,{type:"icon",visible:!0,selected:r,icon:Tz,title:"App Menu","aria-label":"App Menu",onPointerDown:()=>{i(!r)}})}),D.jsx(Ns,{container:t,children:D.jsxs(Py,{onSelect:()=>{i(!1)},children:[D.jsx(aA,{}),D.jsx(lA,{}),D.jsx(cA,{}),D.jsx(fA,{})]})})]},0),D.jsx(Bt,{type:"icon",icon:_z,visible:!0,title:"Undo","aria-label":"Undo",onPointerUp:()=>{e.undo()},disabled:o},1),D.jsx(Bt,{type:"icon",icon:jz,visible:!0,title:"Redo","aria-label":"Redo",onPointerUp:()=>{e.redo()},disabled:s},2),n.length>0&&D.jsx(Bt,{className:"duplicate",type:"icon",icon:zz,visible:!0,title:"Duplicate","aria-label":"Duplicate",onPointerUp:()=>{cv(e)}},3),n.length>0&&D.jsx(Bt,{className:"trash",type:"icon",icon:Wz,visible:!0,title:"Trash","aria-label":"Trash",onPointerUp:()=>{av(e)}},4)]})})},GX=e=>{const{globalKeyDown:t}=e;return e.globalKeyDown=n=>{if((P.getMovingPointInBoard(e)||P.isMovingPointInBoard(e))&&or(["mod+shift+e"],{byKey:!0})(n)){uA(e),n.preventDefault();return}t(n)},e};class hA extends In{draw(t,n){let r={...$p};const i=P.getRoughSVG(this.board).curve(t.points,r);return ke(i,"round"),i}canDraw(t,n){return!0}}class NX extends No{constructor(){super()}initializeGenerator(){this.activeGenerator=new bi(this.board,{getRectangle:t=>C.getRectangleByPoints(t.points),getStrokeWidth:()=>xt,getStrokeOpacity:()=>1,hasResizeHandle:()=>!gn(this.board)}),this.generator=new hA(this.board)}initialize(){super.initialize(),this.initializeGenerator(),this.generator.processDrawing(this.element,this.getElementG())}onContextChanged(t,n){t.element!==n.element||t.hasThemeChanged?(this.generator.processDrawing(this.element,this.getElementG()),this.activeGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected})):t.selected!==n.selected&&this.activeGenerator.processDrawing(this.element,P.getElementActiveHost(this.board),{selected:this.selected})}destroy(){var t;super.destroy(),(t=this.activeGenerator)==null||t.destroy()}}function HX(){return[xy.feltTipPen]}const PE=(e,t)=>({id:Ve(),type:"freehand",shape:e,points:t,strokeWidth:$p.strokeWidth,strokeColor:$p.strokeColor}),$X=(e,t,n)=>{const r=Co(n,t)||n,i=t.points;return Ec(t.points)&&yo(r,i)||Ya(i,r)},_X=(e,t,n)=>{const r=C.getRectangleByPoints([n.anchor,n.focus]);return Wh(r,t.points,t.angle)},SE=e=>re(e).filter(t=>hi.isFreehand(t)),jX=e=>{const{pointerDown:t,pointerMove:n,pointerUp:r,globalPointerUp:i}=e;let o=!1,s=[];const u=new hA(e);let l=null;const a=c=>{if(o){const f=P.getPointer(e);l=PE(f,s)}l&&!c&&ee.insertNode(e,l,[e.children.length]),u==null||u.destroy(),l=null,o=!1,s=[]};return e.pointerDown=c=>{const f=HX();if(P.isInPointer(e,f)&&vl(e)){o=!0;const g=Ce(e,xe(e,c.x,c.y));s.push(g)}t(c)},e.pointerMove=c=>{if(o){ni(e,"with-freehand-creation",()=>{u==null||u.destroy();const f=Ce(e,xe(e,c.x,c.y));s.push(f);const h=P.getPointer(e);l=PE(h,s),u.processDrawing(l,P.getElementActiveHost(e))});return}n(c)},e.pointerUp=c=>{a(),r(c)},e.globalPointerUp=c=>{a(!0),i(c)},e},WX=e=>{const t=e,{getDeletedFragment:n,buildFragment:r,insertFragment:i}=t;return t.getDeletedFragment=o=>{const s=SE(t);return s.length&&o.push(...s),n(o)},t.buildFragment=(o,s,u,l)=>{const a=SE(t);if(a.length){const c=dD(t,a,s?[s.x,s.y]:[0,0]);o=$d(o,{text:"",type:ki.elements,elements:c})}return r(o,s,u,l)},t.insertFragment=(o,s,u)=>{var a;const l=(a=o==null?void 0:o.elements)==null?void 0:a.filter(c=>hi.isFreehand(c));l&&l.length>0&&gD(t,l,s),i(o,s,u)},t},zX=e=>{const{getRectangle:t,drawElement:n,isHit:r,isRectangleHit:i,getOneHitElement:o,isMovable:s,isAlign:u}=e;return e.drawElement=l=>hi.isFreehand(l.element)?NX:n(l),e.getRectangle=l=>hi.isFreehand(l)?C.getRectangleByPoints(l.points):t(l),e.isRectangleHit=(l,a)=>hi.isFreehand(l)?_X(e,l,a):i(l,a),e.isHit=(l,a)=>hi.isFreehand(l)?$X(e,l,a):r(l,a),e.getOneHitElement=l=>l.every(c=>hi.isFreehand(c))?WD(e,l):o(l),e.isMovable=l=>hi.isFreehand(l)?!0:s(l),e.isAlign=l=>hi.isFreehand(l)?!0:u(l),e.setPluginOptions(yD,{customGeometryTypes:[J7]}),WX(jX(e))},VX=({value:e,viewport:t,theme:n,onChange:r})=>{const i=[V_,wG,QW,tz,nz,GX,zX],o={},[s,u]=A.useState(()=>{const l=new ez(window.navigator.userAgent);return{pointer:$e.hand,isMobile:l.mobile()!==null}});return D.jsx("div",{className:lt("drawfree",{"drawfree--mobile":s.isMobile}),children:D.jsxs(AG,{value:e,viewport:t,theme:n,options:o,plugins:i,onChange:l=>{r&&r(l)},children:[D.jsx(tO,{}),D.jsx(LX,{}),D.jsx(HU,{setPointer:l=>{u({...s,pointer:l})}}),D.jsx(VU,{}),D.jsx(eX,{})]})})},DE="drawfree-cache-data";function UX(){const[e]=A.useState(()=>{const t=localStorage.getItem(DE);return t?JSON.parse(t):{children:X8}});return D.jsx(VX,{value:e.children,viewport:e.viewport,theme:e.theme,onChange:t=>{localStorage.setItem(DE,JSON.stringify(t))}})}const XX=cc(document.getElementById("root"));XX.render(D.jsx(A.StrictMode,{children:D.jsx(UX,{})}));
